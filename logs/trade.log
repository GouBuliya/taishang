[auto_trader.py][17:24:08] [ERROR] 第1条交易指令缺少必要字段: symbol
[auto_trader.py][17:24:08] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][17:27:17] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:27:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:27:18] [ERROR] 设置杠杆失败，错误信息：
[auto_trader.py][17:27:18] [INFO] 下单结果: {'success': False, 'error': '', 'response': {'code': '0', 'data': [{'instId': 'ETH-USDT-SWAP', 'lever': '100', 'mgnMode': 'cross', 'posSide': ''}], 'msg': ''}}
[auto_trader.py][17:27:18] [ERROR] 下单失败，跳过止盈止损设置
[auto_trader.py][17:28:06] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:28:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:28:07] [INFO] 设置杠杆成功：100倍
[_client.py][17:28:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:28:08] [ERROR] 下单失败，错误信息：All operations failed
[auto_trader.py][17:28:08] [INFO] 下单结果: {'success': False, 'error': 'All operations failed', 'response': {'code': '1', 'data': [{'clOrdId': '', 'ordId': '', 'sCode': '51000', 'sMsg': 'Parameter posSide error ', 'tag': '', 'ts': '1749288488715'}], 'inTime': '1749288488714153', 'msg': 'All operations failed', 'outTime': '1749288488716998'}}
[auto_trader.py][17:28:08] [ERROR] 下单失败，跳过止盈止损设置
[auto_trader.py][17:29:30] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:29:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:29:31] [INFO] 设置杠杆成功：100倍
[_client.py][17:29:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:29:31] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:29:31] [INFO] 下单结果: {'success': True, 'order_id': '2576516376907616256', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576516376907616256', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749288571701'}], 'inTime': '1749288571700129', 'msg': '', 'outTime': '1749288571703299'}}
[_client.py][17:29:32] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 400 Bad Request"
[tp_sl.py][17:29:32] [ERROR] 止损下单失败，错误信息：Either parameter sz or closeFraction is required
[auto_trader.py][17:29:32] [INFO] 止盈止损设置结果: {'success': False, 'error': 'Either parameter sz or closeFraction is required', 'response': {'code': '50015', 'data': [], 'msg': 'Either parameter sz or closeFraction is required'}}
[auto_trader.py][17:30:37] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:30:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:30:39] [INFO] 设置杠杆成功：100倍
[_client.py][17:30:40] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:30:40] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:30:40] [INFO] 下单结果: {'success': True, 'order_id': '2576518674211803136', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576518674211803136', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749288640166'}], 'inTime': '1749288640165075', 'msg': '', 'outTime': '1749288640168079'}}
[_client.py][17:30:40] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 400 Bad Request"
[tp_sl.py][17:30:40] [ERROR] 止损下单失败，错误信息：Parameter tpTriggerPx error
[auto_trader.py][17:30:40] [INFO] 止盈止损设置结果: {'success': False, 'error': 'Parameter tpTriggerPx error', 'response': {'code': '51000', 'data': [], 'msg': 'Parameter tpTriggerPx error'}}
[auto_trader.py][17:31:43] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:31:44] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:31:44] [INFO] 设置杠杆成功：100倍
[_client.py][17:31:45] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:31:45] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:31:45] [INFO] 下单结果: {'success': True, 'order_id': '2576520866356400128', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576520866356400128', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749288705497'}], 'inTime': '1749288705496051', 'msg': '', 'outTime': '1749288705499189'}}
[_client.py][17:31:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[_client.py][17:31:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][17:31:46] [ERROR] 止盈下单失败，错误信息：
[_client.py][17:31:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[auto_trader.py][17:31:46] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'stop_loss', 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576520893647323136', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'take_profit', 'price': 2400.0, 'size': 11.65, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576520901767495680', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][17:39:09] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:39:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:39:09] [INFO] 设置杠杆成功：100倍
[_client.py][17:39:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:39:10] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:39:10] [INFO] 下单结果: {'success': True, 'order_id': '2576535795796938752', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576535795796938752', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749289150429'}], 'inTime': '1749289150429087', 'msg': '', 'outTime': '1749289150432256'}}
[_client.py][17:39:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[_client.py][17:39:11] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][17:39:11] [ERROR] 止盈下单失败，错误信息：
[_client.py][17:39:11] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[auto_trader.py][17:39:11] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'stop_loss', 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576535812182671360', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'take_profit', 'price': 2400.0, 'size': 11.65, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576535822282555392', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][17:41:34] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:41:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:41:35] [INFO] 设置杠杆成功：100倍
[_client.py][17:41:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:41:36] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:41:36] [INFO] 下单结果: {'success': True, 'order_id': '2576540680785367040', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576540680785367040', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749289296013'}], 'inTime': '1749289296012599', 'msg': '', 'outTime': '1749289296015615'}}
[_client.py][17:41:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[_client.py][17:41:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][17:41:36] [ERROR] 止盈下单失败，错误信息：
[_client.py][17:41:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[auto_trader.py][17:41:36] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'stop_loss', 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576540701734502400', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'take_profit', 'price': 2400.0, 'size': 11.65, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576540709720457216', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][17:47:06] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:47:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:47:07] [INFO] 设置杠杆成功：100倍
[_client.py][17:47:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:47:07] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:47:07] [INFO] 下单结果: {'success': True, 'order_id': '2576551815924289536', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576551815924289536', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749289627866'}], 'inTime': '1749289627865396', 'msg': '', 'outTime': '1749289627868632'}}
[tp_sl.py][17:47:07] [ERROR] 设置止盈止损失败，错误信息：TradeAPI.place_algo_order() got an unexpected keyword argument 'ordPx'. Did you mean 'orderPx'?
[auto_trader.py][17:47:07] [INFO] 止盈止损设置结果: {'success': False, 'error': "TradeAPI.place_algo_order() got an unexpected keyword argument 'ordPx'. Did you mean 'orderPx'?", 'response': None}
[auto_trader.py][17:48:34] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:48:34] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:48:34] [INFO] 设置杠杆成功：100倍
[_client.py][17:48:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:48:35] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:48:35] [INFO] 下单结果: {'success': True, 'order_id': '2576554750829793280', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576554750829793280', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749289715333'}], 'inTime': '1749289715332661', 'msg': '', 'outTime': '1749289715335743'}}
[_client.py][17:48:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 400 Bad Request"
[tp_sl.py][17:48:36] [ERROR] 止损下单失败，错误信息：Either parameter tpTriggerPx or slTriggerPx is required
[auto_trader.py][17:48:36] [INFO] 止盈止损设置结果: {'success': False, 'error': 'Either parameter tpTriggerPx or slTriggerPx is required', 'response': {'code': '50015', 'data': [], 'msg': 'Either parameter tpTriggerPx or slTriggerPx is required'}}
[auto_trader.py][17:50:23] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:50:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:50:23] [INFO] 设置杠杆成功：100倍
[_client.py][17:50:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:50:24] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:50:24] [INFO] 下单结果: {'success': True, 'order_id': '2576558414839549952', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576558414839549952', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749289824529'}], 'inTime': '1749289824528193', 'msg': '', 'outTime': '1749289824531215'}}
[_client.py][17:50:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 400 Bad Request"
[tp_sl.py][17:50:25] [ERROR] 止损下单失败，错误信息：Parameter tpTriggerPx error
[auto_trader.py][17:50:25] [INFO] 止盈止损设置结果: {'success': False, 'error': 'Parameter tpTriggerPx error', 'response': {'code': '51000', 'data': [], 'msg': 'Parameter tpTriggerPx error'}}
[auto_trader.py][17:51:47] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:51:48] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:51:48] [INFO] 设置杠杆成功：100倍
[_client.py][17:51:48] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:51:48] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:51:48] [INFO] 下单结果: {'success': True, 'order_id': '2576561238713438208', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576561238713438208', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749289908687'}], 'inTime': '1749289908686517', 'msg': '', 'outTime': '1749289908689728'}}
[_client.py][17:51:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][17:51:49] [ERROR] OCO订单下单失败，错误信息：
[auto_trader.py][17:51:49] [INFO] 止盈止损设置结果: {'success': False, 'error': '', 'response': {'code': '1', 'data': [{'algoClOrdId': '', 'algoId': '', 'clOrdId': '', 'sCode': '51121', 'sMsg': 'Order quantity must be a multiple of the lot size. ', 'tag': ''}], 'msg': ''}}
[auto_trader.py][17:59:52] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][17:59:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][17:59:53] [INFO] 设置杠杆成功：100倍
[_client.py][17:59:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][17:59:53] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][17:59:53] [INFO] 下单结果: {'success': True, 'order_id': '2576577515498639360', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576577515498639360', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749290393773'}], 'inTime': '1749290393772019', 'msg': '', 'outTime': '1749290393775076'}}
[_client.py][17:59:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][17:59:54] [INFO] OCO订单设置成功: 止盈价格=2450.0, 止损价格=2510.0, 数量=104.9 (90.0%)
[_client.py][17:59:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][17:59:54] [ERROR] OCO订单下单失败，错误信息：
[auto_trader.py][17:59:54] [INFO] 止盈止损设置结果: {'success': False, 'error': '', 'response': {'code': '1', 'data': [{'algoClOrdId': '', 'algoId': '', 'clOrdId': '', 'sCode': '51121', 'sMsg': 'Order quantity must be a multiple of the lot size. ', 'tag': ''}], 'msg': ''}}
[auto_trader.py][18:01:01] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][18:01:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:01:03] [INFO] 设置杠杆成功：100倍
[_client.py][18:01:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:01:03] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][18:01:03] [INFO] 下单结果: {'success': True, 'order_id': '2576579861859405824', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576579861859405824', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749290463700'}], 'inTime': '1749290463699228', 'msg': '', 'outTime': '1749290463702286'}}
[_client.py][18:01:04] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:01:04] [ERROR] OCO订单下单失败，错误信息：
[auto_trader.py][18:01:04] [INFO] 止盈止损设置结果: {'success': False, 'error': '', 'response': {'code': '1', 'data': [{'algoClOrdId': '', 'algoId': '', 'clOrdId': '', 'sCode': '51121', 'sMsg': 'Order quantity must be a multiple of the lot size. ', 'tag': ''}], 'msg': ''}}
[auto_trader.py][18:02:23] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][18:02:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:02:24] [INFO] 设置杠杆成功：100倍
[_client.py][18:02:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:02:25] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][18:02:25] [INFO] 下单结果: {'success': True, 'order_id': '2576582588291223552', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576582588291223552', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749290544954'}], 'inTime': '1749290544952812', 'msg': '', 'outTime': '1749290544955985'}}
[_client.py][18:02:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:02:25] [ERROR] OCO订单下单失败，错误信息：
[auto_trader.py][18:02:25] [INFO] 止盈止损设置结果: {'success': False, 'error': '', 'response': {'code': '1', 'data': [{'algoClOrdId': '', 'algoId': '', 'clOrdId': '', 'sCode': '51121', 'sMsg': 'Order quantity must be a multiple of the lot size. ', 'tag': ''}], 'msg': ''}}
[auto_trader.py][18:03:45] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于下跌趋势，多时间框架指标显示空头主导。短期超卖可能引发反弹，但MACD和EMA的强劲空头信号支持在反弹至阻力位时做空。风险回报比良好。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 0.9}, {'price': 2400.0, 'size': 0.1}], 'size': 116.5, 'market': False, 'expected_winrate': 0.7673, 'expected_return': 0.010457639942137576, 'trade_RR_ratio': 2.0, 'signal_strength': 0.85, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。风险等级：中等。'}
[_client.py][18:03:45] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:03:45] [INFO] 设置杠杆成功：100倍
[_client.py][18:03:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:03:46] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][18:03:46] [INFO] 下单结果: {'success': True, 'order_id': '2576585328480358400', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576585328480358400', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749290626618'}], 'inTime': '1749290626617283', 'msg': '', 'outTime': '1749290626620350'}}
[_client.py][18:03:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:03:47] [INFO] OCO订单设置成功: 止盈价格=2450.0, 止损价格=2510.0, 数量=104.80000000000001 (1048 lots, 90.0%)
[_client.py][18:03:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:03:47] [INFO] 条件订单设置成功: 止盈价格=2400.0, 数量=11.700000000000001 (117 lots, 10.0%)
[auto_trader.py][18:03:47] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2450.0, 'stop_loss_price': 2510.0, 'size': 104.80000000000001, 'lots': 1048, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576585343658131456', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2400.0, 'stop_loss_price': None, 'size': 11.700000000000001, 'lots': 117, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576585347584000000', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][18:13:54] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体趋势看跌，当前无持仓，为最大化收益，在价格反弹至短期阻力位附近入场做空，并设置止损止盈。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 38.83}, {'price': 2420.0, 'size': 38.83}, {'price': 2380.0, 'size': 38.84}], 'size': 116.5, 'market': False, 'expected_winrate': 0.6353, 'expected_return': 0.007276, 'trade_RR_ratio': 2.0, 'signal_strength': 0.75, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'position_action': 'add_position', 'risk_assessment': '当前市场风险中等，主要来自短期超卖可能引发的反弹，但整体趋势强劲，风险可控。考虑到当前市场情绪中性，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:13:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:13:55] [INFO] 设置杠杆成功：100倍
[_client.py][18:13:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:13:56] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][18:13:56] [INFO] 下单结果: {'success': True, 'order_id': '2576605779067801600', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576605779067801600', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749291236093'}], 'inTime': '1749291236092609', 'msg': '', 'outTime': '1749291236095684'}}
[tp_sl.py][18:13:56] [ERROR] 无效的止盈配置: 价格=2450.0, 比例=38.83
[tp_sl.py][18:13:56] [ERROR] 无效的止盈配置: 价格=2420.0, 比例=38.83
[tp_sl.py][18:13:56] [ERROR] 无效的止盈配置: 价格=2380.0, 比例=38.84
[auto_trader.py][18:13:56] [INFO] 止盈止损设置结果: {'success': False, 'error': '未设置任何止盈止损', 'response': None}
[auto_trader.py][18:15:44] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体趋势看跌，当前无持仓，为最大化收益，在价格反弹至短期阻力位附近入场做空，并设置止损止盈。', 'type': 'sell', 'price': 2490.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2450.0, 'size': 38.83}, {'price': 2420.0, 'size': 38.83}, {'price': 2380.0, 'size': 38.84}], 'size': 116.5, 'market': False, 'expected_winrate': 0.6353, 'expected_return': 0.007276, 'trade_RR_ratio': 2.0, 'signal_strength': 0.75, 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并根据市场情境动态调整止损和止盈。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'position_action': 'add_position', 'risk_assessment': '当前市场风险中等，主要来自短期超卖可能引发的反弹，但整体趋势强劲，风险可控。考虑到当前市场情绪中性，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:15:45] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:15:45] [INFO] 设置杠杆成功：100倍
[_client.py][18:15:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:15:46] [INFO] 下单成功：方向=sell, 价格=2490.0, 数量=116.5
[auto_trader.py][18:15:46] [INFO] 下单结果: {'success': True, 'order_id': '2576609468981579776', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576609468981579776', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749291346061'}], 'inTime': '1749291346060235', 'msg': '', 'outTime': '1749291346063312'}}
[_client.py][18:15:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:15:46] [INFO] OCO订单设置成功: 止盈价格=2450.0, 止损价格=2510.0, 数量=38.800000000000004 (388 lots)
[_client.py][18:15:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:15:46] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=38.800000000000004 (388 lots)
[_client.py][18:15:46] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:15:46] [INFO] 条件订单设置成功: 止盈价格=2380.0, 数量=38.800000000000004 (388 lots)
[auto_trader.py][18:15:46] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2450.0, 'stop_loss_price': 2510.0, 'size': 38.800000000000004, 'lots': 388, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576609489326735360', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 38.800000000000004, 'lots': 388, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576609493453930496', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2380.0, 'stop_loss_price': None, 'size': 38.800000000000004, 'lots': 388, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576609497446907904', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][18:21:25] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于强劲下跌趋势，MACD和EMA均显示空头主导。当前价格接近短期阻力位，是做空入场的良好机会。尽管RSI超卖，但预计为趋势延续中的短暂回调。', 'type': 'sell', 'price': 2495.0, 'stop_loss': 2510.0, 'take_profit': [{'price': 2470.0, 'size': 51.78}, {'price': 2440.0, 'size': 51.78}, {'price': 2420.0, 'size': 51.77}], 'size': 155.33, 'market': False, 'expected_winrate': '0.6993', 'expected_return': '0.005', 'trade_RR_ratio': '1.67', 'signal_strength': '0.75', 'risk_management_strategy': '严格控制单笔交易风险在可用保证金的2%以内，并设置止损以限制潜在亏损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。'}
[_client.py][18:21:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:21:26] [INFO] 设置杠杆成功：100倍
[_client.py][18:21:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:21:26] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=155.33
[auto_trader.py][18:21:26] [INFO] 下单结果: {'success': True, 'order_id': '2576620890742460416', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576620890742460416', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749291686456'}], 'inTime': '1749291686455307', 'msg': '', 'outTime': '1749291686458392'}}
[_client.py][18:21:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:21:26] [INFO] OCO订单设置成功: 止盈价格=2470.0, 止损价格=2510.0, 数量=51.800000000000004 (518 lots)
[_client.py][18:21:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:21:27] [INFO] 条件订单设置成功: 止盈价格=2440.0, 数量=51.800000000000004 (518 lots)
[_client.py][18:21:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:21:27] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=51.800000000000004 (518 lots)
[auto_trader.py][18:21:27] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2470.0, 'stop_loss_price': 2510.0, 'size': 51.800000000000004, 'lots': 518, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576620905148481536', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2440.0, 'stop_loss_price': None, 'size': 51.800000000000004, 'lots': 518, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576620908973686784', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 51.800000000000004, 'lots': 518, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576620912698228736', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][18:28:29] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在一个未成交的卖出订单（155.33 ETH，价格2495）。根据最新分析，市场处于下跌后的盘整，倾向于下跌趋势延续，因此该卖出订单方向与判断一致。为确保最佳入场价格，维持现有挂单，等待价格触及入场点。如果价格未能触及，则等待后续信号。', 'type': 'wait', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 'N/A', 'market': False, 'expected_winrate': 0.6931739493259501, 'expected_return': 0.007344036806762277, 'trade_RR_ratio': 1.5, 'signal_strength': 0.75, 'position_action': 'maintain_position', 'risk_assessment': '市场波动性较低，但布林带收缩预示即将到来的剧烈波动。维持挂单等待入场，风险中等。'}
[place_order.py][18:28:29] [ERROR] 无效的订单数量
[auto_trader.py][18:28:29] [INFO] 下单结果: {'success': False, 'error': '无效的订单数量', 'response': None}
[auto_trader.py][18:28:29] [ERROR] 下单失败，跳过止盈止损设置
[auto_trader.py][18:30:12] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在一个未成交的卖出订单（155.33 ETH，价格2495）。根据最新分析，市场处于下跌后的盘整，倾向于下跌趋势延续，因此该卖出订单方向与判断一致。为确保最佳入场价格，维持现有挂单，等待价格触及入场点。如果价格未能触及，则等待后续信号。', 'type': 'wait', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 'N/A', 'market': False, 'expected_winrate': 0.6931739493259501, 'expected_return': 0.007344036806762277, 'trade_RR_ratio': 1.5, 'signal_strength': 0.75, 'position_action': 'maintain_position', 'risk_assessment': '市场波动性较低，但布林带收缩预示即将到来的剧烈波动。维持挂单等待入场，风险中等。'}
[_client.py][18:30:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:30:13] [INFO] 设置杠杆成功：100倍
[_client.py][18:30:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:30:14] [ERROR] 下单失败，错误信息：All operations failed
[auto_trader.py][18:30:14] [INFO] 下单结果: {'success': False, 'error': 'All operations failed', 'response': {'code': '1', 'data': [{'clOrdId': '', 'ordId': '', 'sCode': '51000', 'sMsg': 'Parameter sz error', 'tag': '', 'ts': '1749292214295'}], 'inTime': '1749292214294996', 'msg': 'All operations failed', 'outTime': '1749292214295121'}}
[auto_trader.py][18:30:14] [ERROR] 下单失败，跳过止盈止损设置
[auto_trader.py][18:34:14] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在一个未成交的卖出订单（155.33 ETH，价格2495）。根据最新分析，市场处于下跌后的盘整，倾向于下跌趋势延续，因此该卖出订单方向与判断一致。为确保最佳入场价格，维持现有挂单，等待价格触及入场点。如果价格未能触及，则等待后续信号。', 'type': 'wait', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 'N/A', 'market': False, 'expected_winrate': 0.6931739493259501, 'expected_return': 0.007344036806762277, 'trade_RR_ratio': 1.5, 'signal_strength': 0.75, 'position_action': 'maintain_position', 'risk_assessment': '市场波动性较低，但布林带收缩预示即将到来的剧烈波动。维持挂单等待入场，风险中等。'}
[auto_trader.py][18:34:14] [INFO] 收到等待指令，跳过交易执行
[auto_trader.py][18:36:26] [ERROR] 配置文件JSON格式错误
[auto_trader.py][18:36:26] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][18:37:19] [INFO] 执行第1条交易指令: {'operation_comment': '市场整体处于强劲下跌趋势，MACD和EMA均显示空头主导。当前价格接近短期阻力位，是做空入场的良好机会。尽管RSI超卖，但预计为趋势延续中的短暂回调。', 'type': 'close', 'price': 2495.0, 'stop_loss': 'N/A', 'take_profit': [{'price': 'N/A', 'size': 'N/A'}], 'size': 155.33, 'market': True, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'risk_management_strategy': '严格控制单笔交易风险在可用保证金的2%以内，并设置止损以限制潜在亏损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。'}
[_client.py][18:37:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:37:20] [INFO] 设置杠杆成功：100倍
[_client.py][18:37:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:37:20] [INFO] 下单成功：方向=sell, 价格=, 数量=155.33
[auto_trader.py][18:37:20] [INFO] 下单结果: {'success': True, 'order_id': '2576652912575778816', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576652912575778816', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749292640781'}], 'inTime': '1749292640779615', 'msg': '', 'outTime': '1749292640782867'}}
[tp_sl.py][18:37:20] [ERROR] 设置止盈止损失败，错误信息：could not convert string to float: 'N/A'
[auto_trader.py][18:37:20] [INFO] 止盈止损设置结果: {'success': False, 'error': "could not convert string to float: 'N/A'", 'response': None}
[auto_trader.py][18:52:52] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[_client.py][18:52:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:52:53] [INFO] 设置杠杆成功：100倍
[_client.py][18:52:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:52:53] [INFO] 下单成功：方向=buy, 价格=market, 数量=155.33
[auto_trader.py][18:52:53] [INFO] 下单结果: {'success': True, 'order_id': '2576684207989198848', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576684207989198848', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293573457'}], 'inTime': '1749293573456678', 'msg': '', 'outTime': '1749293573459743'}}
[auto_trader.py][18:52:53] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:52:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:52:53] [INFO] 设置杠杆成功：100倍
[_client.py][18:52:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:52:53] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][18:52:53] [INFO] 下单结果: {'success': True, 'order_id': '2576684216814014464', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576684216814014464', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293573720'}], 'inTime': '1749293573719306', 'msg': '', 'outTime': '1749293573722371'}}
[tp_sl.py][18:52:53] [ERROR] 设置止盈止损失败: TradeAPI.place_algo_order() got an unexpected keyword argument 'px'
[auto_trader.py][18:52:53] [INFO] 止盈止损设置结果: {'success': False, 'error': "TradeAPI.place_algo_order() got an unexpected keyword argument 'px'", 'response': None}
[auto_trader.py][18:54:26] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[_client.py][18:54:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:54:27] [INFO] 设置杠杆成功：100倍
[_client.py][18:54:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:54:27] [INFO] 下单成功：方向=buy, 价格=market, 数量=155.33
[auto_trader.py][18:54:27] [INFO] 下单结果: {'success': True, 'order_id': '2576687377406627840', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576687377406627840', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293667913'}], 'inTime': '1749293667912401', 'msg': '', 'outTime': '1749293667915541'}}
[auto_trader.py][18:54:27] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:54:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:54:28] [INFO] 设置杠杆成功：100倍
[_client.py][18:54:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:54:28] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][18:54:28] [INFO] 下单结果: {'success': True, 'order_id': '2576687385795235840', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576687385795235840', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293668163'}], 'inTime': '1749293668162810', 'msg': '', 'outTime': '1749293668165861'}}
[tp_sl.py][18:54:28] [ERROR] 设置止盈止损失败: TradeAPI.place_algo_order() got an unexpected keyword argument 'tpPx'
[auto_trader.py][18:54:28] [INFO] 止盈止损设置结果: {'success': False, 'error': "TradeAPI.place_algo_order() got an unexpected keyword argument 'tpPx'", 'response': None}
[auto_trader.py][18:55:15] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[_client.py][18:55:16] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:55:16] [INFO] 设置杠杆成功：100倍
[_client.py][18:55:16] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:55:16] [INFO] 下单成功：方向=buy, 价格=market, 数量=155.33
[auto_trader.py][18:55:16] [INFO] 下单结果: {'success': True, 'order_id': '2576689019963183104', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576689019963183104', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293716865'}], 'inTime': '1749293716864090', 'msg': '', 'outTime': '1749293716867037'}}
[auto_trader.py][18:55:16] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:55:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:55:17] [INFO] 设置杠杆成功：100倍
[_client.py][18:55:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:55:17] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][18:55:17] [INFO] 下单结果: {'success': True, 'order_id': '2576689028486008832', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576689028486008832', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293717119'}], 'inTime': '1749293717118087', 'msg': '', 'outTime': '1749293717120964'}}
[_client.py][18:55:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:55:17] [ERROR] OCO订单下单失败，错误信息：
[auto_trader.py][18:55:17] [INFO] 止盈止损设置结果: {'success': False, 'error': '', 'response': {'code': '1', 'data': [{'algoClOrdId': '', 'algoId': '', 'clOrdId': '', 'sCode': '51000', 'sMsg': 'Parameter posSide error ', 'tag': ''}], 'msg': ''}}
[auto_trader.py][18:56:21] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[_client.py][18:56:22] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:56:22] [INFO] 设置杠杆成功：100倍
[_client.py][18:56:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:56:23] [INFO] 下单成功：方向=buy, 价格=market, 数量=155.33
[auto_trader.py][18:56:23] [INFO] 下单结果: {'success': True, 'order_id': '2576691248615002112', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576691248615002112', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293783284'}], 'inTime': '1749293783283136', 'msg': '', 'outTime': '1749293783286168'}}
[auto_trader.py][18:56:23] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:56:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:56:23] [INFO] 设置杠杆成功：100倍
[_client.py][18:56:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:56:23] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][18:56:23] [INFO] 下单结果: {'success': True, 'order_id': '2576691263882268672', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576691263882268672', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293783739'}], 'inTime': '1749293783737969', 'msg': '', 'outTime': '1749293783741095'}}
[_client.py][18:56:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:56:24] [INFO] OCO订单设置成功: 止盈价格=2470.0, 止损价格=2515.0, 数量=38.7 (38.7 lots)
[tp_sl.py][18:56:24] [ERROR] 设置止盈止损失败: TradeAPI.place_algo_order() got an unexpected keyword argument 'ordPx'. Did you mean 'orderPx'?
[auto_trader.py][18:56:24] [INFO] 止盈止损设置结果: {'success': False, 'error': "TradeAPI.place_algo_order() got an unexpected keyword argument 'ordPx'. Did you mean 'orderPx'?", 'response': None}
[auto_trader.py][18:57:13] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[_client.py][18:57:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:57:13] [INFO] 设置杠杆成功：100倍
[_client.py][18:57:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:57:14] [INFO] 下单成功：方向=buy, 价格=market, 数量=155.33
[auto_trader.py][18:57:14] [INFO] 下单结果: {'success': True, 'order_id': '2576692952005742592', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576692952005742592', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293834049'}], 'inTime': '1749293834048234', 'msg': '', 'outTime': '1749293834051143'}}
[auto_trader.py][18:57:14] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:57:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:57:14] [INFO] 设置杠杆成功：100倍
[_client.py][18:57:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:57:14] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][18:57:14] [INFO] 下单结果: {'success': True, 'order_id': '2576692962105626624', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576692962105626624', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293834350'}], 'inTime': '1749293834348798', 'msg': '', 'outTime': '1749293834351857'}}
[_client.py][18:57:15] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:57:15] [INFO] OCO订单设置成功: 止盈价格=2470.0, 止损价格=2515.0, 数量=38.7 (38.7 lots)
[_client.py][18:57:15] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 400 Bad Request"
[tp_sl.py][18:57:15] [ERROR] 条件订单下单失败，错误信息：Either parameter tpTriggerPx or slTriggerPx is required
[auto_trader.py][18:57:15] [INFO] 止盈止损设置结果: {'success': False, 'error': 'Either parameter tpTriggerPx or slTriggerPx is required', 'response': {'code': '50015', 'data': [], 'msg': 'Either parameter tpTriggerPx or slTriggerPx is required'}}
[auto_trader.py][18:57:55] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[_client.py][18:57:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:57:55] [INFO] 设置杠杆成功：100倍
[_client.py][18:57:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:57:56] [INFO] 下单成功：方向=buy, 价格=market, 数量=155.33
[auto_trader.py][18:57:56] [INFO] 下单结果: {'success': True, 'order_id': '2576694370922008576', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576694370922008576', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293876336'}], 'inTime': '1749293876335305', 'msg': '', 'outTime': '1749293876338262'}}
[auto_trader.py][18:57:56] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][18:57:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][18:57:56] [INFO] 设置杠杆成功：100倍
[_client.py][18:57:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][18:57:56] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][18:57:56] [INFO] 下单结果: {'success': True, 'order_id': '2576694379344171008', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576694379344171008', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749293876587'}], 'inTime': '1749293876586514', 'msg': '', 'outTime': '1749293876589627'}}
[_client.py][18:57:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:57:57] [INFO] OCO订单设置成功: 止盈价格=2470.0, 止损价格=2515.0, 数量=38.7 (38.7 lots)
[_client.py][18:57:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:57:57] [INFO] 条件订单设置成功: 止盈价格=2460.0, 数量=38.7 (38.7 lots)
[_client.py][18:57:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][18:57:57] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=38.6 (38.6 lots)
[auto_trader.py][18:57:57] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2470.0, 'stop_loss_price': 2515.0, 'size': 38.7, 'lots': 38.7, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576694398414258176', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2460.0, 'stop_loss_price': None, 'size': 38.7, 'lots': 38.7, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576694402306572288', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 38.6, 'lots': 38.6, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576694406031114240', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][19:02:15] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在与做空判断冲突的未成交买单，优先取消该订单以避免方向性错误。', 'type': 'close', 'price': 2495, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 155.33, 'market': False, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'close_position', 'risk_assessment': '取消现有订单，降低潜在风险。'}
[place_order.py][19:02:15] [INFO] 收到close指令，执行撤单操作
[_client.py][19:02:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=limit&state=live "HTTP/2 200 OK"
[_client.py][19:02:16] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[place_order.py][19:02:16] [INFO] 成功取消订单 2576702836705202176
[auto_trader.py][19:02:16] [INFO] 下单结果: {'success': True, 'order_id': None, 'response': {'success': True, 'canceled_orders': ['2576702836705202176'], 'message': 'Successfully canceled 1 orders'}}
[auto_trader.py][19:02:16] [INFO] 执行第2条交易指令: {'operation_comment': '市场H4趋势偏空，M15盘整可能向下突破，模型计算预期收益为正，风险回报比良好，激进做空。', 'type': 'sell', 'price': 2495, 'stop_loss': 2515, 'take_profit': [{'price': 2470, 'size': 38.7}, {'price': 2460, 'size': 38.7}, {'price': 2450, 'size': 38.69}], 'size': 116.09, 'market': False, 'expected_winrate': 0.3283, 'expected_return': 0.000537, 'trade_RR_ratio': 2.25, 'signal_strength': 0.7, 'position_action': 'add_position', 'risk_management_strategy': '基于可用保证金2%的固定风险仓位管理，并设置严格止损。如果价格突破关键阻力位，考虑止损并重新评估。如果趋势加速，考虑进一步加仓。', 'risk_assessment': '市场波动性中等，H4超卖可能引发反弹，但整体趋势偏空，风险可控。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][19:02:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][19:02:17] [INFO] 设置杠杆成功：100倍
[_client.py][19:02:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][19:02:17] [INFO] 下单成功：方向=sell, 价格=2495.0, 数量=116.09
[auto_trader.py][19:02:17] [INFO] 下单结果: {'success': True, 'order_id': '2576703124233129984', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2576703124233129984', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749294137205'}], 'inTime': '1749294137204271', 'msg': '', 'outTime': '1749294137207379'}}
[_client.py][19:02:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][19:02:17] [INFO] OCO订单设置成功: 止盈价格=2470.0, 止损价格=2515.0, 数量=38.7 (38.7 lots)
[_client.py][19:02:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][19:02:17] [INFO] 条件订单设置成功: 止盈价格=2460.0, 数量=38.7 (38.7 lots)
[_client.py][19:02:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][19:02:18] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=38.6 (38.6 lots)
[auto_trader.py][19:02:18] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2470.0, 'stop_loss_price': 2515.0, 'size': 38.7, 'lots': 38.7, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576703140652417024', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2460.0, 'stop_loss_price': None, 'size': 38.7, 'lots': 38.7, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576703144880275456', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 38.6, 'lots': 38.6, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2576703149309460480', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][21:41:44] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][21:41:44] [ERROR] 执行交易指令失败: place_order() got an unexpected keyword argument 'tdMode'
[auto_trader.py][21:44:14] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][21:44:15] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][21:44:15] [INFO] 设置杠杆成功：100倍
[place_order.py][21:44:17] [ERROR] 下单失败，错误信息：TradeAPI.place_order() got an unexpected keyword argument 'lever'
[auto_trader.py][21:44:17] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'lever'", 'response': None}
[auto_trader.py][21:44:17] [ERROR] 交易失败: TradeAPI.place_order() got an unexpected keyword argument 'lever'
[auto_trader.py][21:47:05] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][21:47:06] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][21:47:06] [INFO] 设置杠杆成功：100倍
[_client.py][21:47:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][21:47:07] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][21:47:07] [INFO] 交易结果: {'success': True, 'order_id': '2577034968539467776', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577034968539467776', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749304026936'}], 'inTime': '1749304026934635', 'msg': '', 'outTime': '1749304026937746'}}
[_client.py][21:47:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:25] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[_client.py][21:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577034968539467776 "HTTP/2 200 OK"
[auto_trader.py][21:47:37] [WARNING] 等待订单2577034968539467776完成超时
[auto_trader.py][21:47:37] [WARNING] 订单未完全成交,状态:timeout
[_client.py][21:47:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:47:38] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:47:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:47:38] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:47:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:47:38] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][21:47:38] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577036004577280000', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577036014509391872', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577036024240177152', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][21:49:34] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][21:49:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][21:49:35] [INFO] 设置杠杆成功：100倍
[_client.py][21:49:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][21:49:35] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][21:49:35] [INFO] 交易结果: {'success': True, 'order_id': '2577039965096382464', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577039965096382464', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749304175845'}], 'inTime': '1749304175844893', 'msg': '', 'outTime': '1749304175848034'}}
[_client.py][21:49:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[auto_trader.py][21:49:36] [INFO] 订单2577039965096382464状态更新: live, 成交进度: 0.00% (0/231.34)
[_client.py][21:49:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:45] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:49:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:50:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[_client.py][21:50:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577039965096382464 "HTTP/2 200 OK"
[auto_trader.py][21:50:07] [WARNING] 等待订单2577039965096382464完成超时（30秒）
[auto_trader.py][21:50:07] [WARNING] 订单未完全成交,状态:timeout
[_client.py][21:50:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:50:08] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:50:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:50:08] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:50:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:50:08] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][21:50:08] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577041051365179392', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577041056331235328', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577041061129519104', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][21:52:08] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][21:52:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][21:52:08] [INFO] 设置杠杆成功：100倍
[_client.py][21:52:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][21:52:08] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][21:52:08] [INFO] 交易结果: {'success': True, 'order_id': '2577045100702863360', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577045100702863360', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749304328898'}], 'inTime': '1749304328897056', 'msg': '', 'outTime': '1749304328900199'}}
[auto_trader.py][21:52:08] [INFO] 订单2577045100702863360已提交成功
[_client.py][21:52:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:52:09] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:52:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:52:09] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:52:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:52:09] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][21:52:09] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577045116518170624', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577045120813137920', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577045125242322944', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][21:53:28] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[_client.py][21:53:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][21:53:29] [INFO] 设置杠杆成功：100倍
[_client.py][21:53:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][21:53:29] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][21:53:29] [INFO] 交易结果: {'success': True, 'order_id': '2577047813612244992', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577047813612244992', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749304409749'}], 'inTime': '1749304409748521', 'msg': '', 'outTime': '1749304409751727'}}
[auto_trader.py][21:53:29] [INFO] 订单2577047813612244992已提交成功
[_client.py][21:53:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:53:31] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:53:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:53:31] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][21:53:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][21:53:31] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][21:53:31] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577047858921897984', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577047863451746304', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577047867880931328', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][22:03:40] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:03:40] [INFO] 执行加仓操作
[_client.py][22:03:40] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][22:03:40] [INFO] 设置杠杆成功：100倍
[_client.py][22:03:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][22:03:42] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][22:03:42] [INFO] 交易结果: {'success': True, 'order_id': '2577068345300750336', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577068345300750336', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749305021641'}], 'inTime': '1749305021640770', 'msg': '', 'outTime': '1749305021643963'}}
[auto_trader.py][22:03:42] [INFO] 订单2577068345300750336已提交成功
[_client.py][22:03:43] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][22:03:43] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][22:03:43] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][22:03:43] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][22:03:44] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][22:03:44] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][22:03:44] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577068399468773376', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577068409501548544', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577068427990040576', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][22:10:01] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:10:01] [INFO] 执行平仓操作
[place_order.py][22:10:01] [INFO] 开始查询ETH-USDT-SWAP的未完成止盈止损订单
[_client.py][22:10:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:10:02] [INFO] 没有需要撤销的止盈止损订单
[_client.py][22:10:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:10:03] [ERROR] 订单数量必须大于0
[auto_trader.py][22:10:03] [INFO] 交易结果: {'success': False, 'message': '平仓执行完成，成功: 0，失败: 1', 'results': [{'success': False, 'error': '订单数量必须大于0', 'response': None}]}
[auto_trader.py][22:10:03] [ERROR] 交易失败: 未知错误
[auto_trader.py][22:10:47] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:10:47] [INFO] 执行平仓操作
[place_order.py][22:10:47] [INFO] 开始查询ETH-USDT-SWAP的未完成止盈止损订单
[_client.py][22:10:47] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:10:47] [INFO] 没有需要撤销的止盈止损订单
[_client.py][22:10:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:10:48] [ERROR] 订单数量必须大于0
[auto_trader.py][22:10:48] [INFO] 交易结果: {'success': False, 'message': '平仓执行完成，成功: 0，失败: 1', 'results': [{'success': False, 'error': '订单数量必须大于0', 'response': None}]}
[auto_trader.py][22:10:48] [ERROR] 交易失败: 未知错误
[auto_trader.py][22:11:24] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:11:24] [INFO] 执行平仓操作
[place_order.py][22:11:24] [INFO] 开始查询ETH-USDT-SWAP的未完成止盈止损订单
[_client.py][22:11:25] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:11:25] [INFO] 没有需要撤销的止盈止损订单
[_client.py][22:11:26] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:11:26] [ERROR] 订单数量必须大于0
[auto_trader.py][22:11:26] [INFO] 交易结果: {'success': False, 'message': '平仓执行完成，成功: 0，失败: 1', 'results': [{'success': False, 'error': '订单数量必须大于0', 'response': None}]}
[auto_trader.py][22:11:26] [ERROR] 交易失败: 未知错误
[auto_trader.py][22:14:15] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:14:15] [INFO] 执行平仓操作，大小: 231.34，市价
[place_order.py][22:14:15] [INFO] 开始查询ETH-USDT-SWAP的未完成止盈止损订单
[_client.py][22:14:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:14:15] [INFO] 没有需要撤销的止盈止损订单
[_client.py][22:14:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:14:16] [ERROR] 订单数量必须大于0
[auto_trader.py][22:14:16] [INFO] 交易结果: {'success': False, 'message': '平仓执行完成，成功: 0，失败: 1', 'results': [{'success': False, 'error': '订单数量必须大于0', 'response': None}]}
[auto_trader.py][22:14:16] [ERROR] 交易失败: 平仓执行完成，成功: 0，失败: 1
[auto_trader.py][22:54:34] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:54:34] [INFO] 执行平仓操作
[place_order.py][22:54:34] [INFO] 开始查询ETH-USDT-SWAP的未完成止盈止损订单
[_client.py][22:54:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:54:35] [INFO] 没有需要撤销的止盈止损订单
[_client.py][22:54:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:54:35] [ERROR] 订单数量必须大于0
[auto_trader.py][22:54:35] [INFO] 交易结果: {'success': False, 'message': '平仓执行完成，成功: 0，失败: 1', 'results': [{'success': False, 'error': '订单数量必须大于0', 'response': None}]}
[auto_trader.py][22:54:35] [ERROR] 交易失败: 未知错误
[auto_trader.py][22:55:30] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][22:55:30] [INFO] 执行平仓操作
[place_order.py][22:55:30] [INFO] 开始查询ETH-USDT-SWAP的未完成止盈止损订单
[_client.py][22:55:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:55:31] [INFO] 没有需要撤销的止盈止损订单
[_client.py][22:55:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][22:55:33] [ERROR] 订单数量必须大于0
[auto_trader.py][22:55:33] [INFO] 交易结果: {'success': False, 'message': '平仓执行完成，成功: 0，失败: 1', 'results': [{'success': False, 'error': '订单数量必须大于0', 'response': None}]}
[auto_trader.py][22:55:33] [ERROR] 交易失败: 未知错误
[auto_trader.py][23:04:01] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:04:01] [INFO] 执行平仓操作
[_client.py][23:04:01] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:04:01] [INFO] 成功取消ETH-USDT-SWAP的订单
[auto_trader.py][23:04:01] [INFO] 交易结果: None
[auto_trader.py][23:04:01] [ERROR] 执行交易指令失败: 'NoneType' object is not subscriptable
[auto_trader.py][23:04:46] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:04:46] [INFO] 执行平仓操作
[_client.py][23:04:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:04:47] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:04:47] [ERROR] 取消订单失败: Position doesn't exist.
[auto_trader.py][23:04:47] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:04:47] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:15:24] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:15:24] [INFO] 执行平仓操作
[_client.py][23:15:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:15:25] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:15:25] [ERROR] 取消订单失败: Position doesn't exist.
[auto_trader.py][23:15:25] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:15:25] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:16:00] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:16:00] [INFO] 执行平仓操作
[_client.py][23:16:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][23:16:00] [INFO] 成功查询ETH-USDT-SWAP的止盈止损订单
[_client.py][23:16:01] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][23:16:01] [WARNING] 取消止盈止损订单失败: Incorrect json data format
[_client.py][23:16:01] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][23:16:01] [WARNING] 取消止盈止损订单失败: Incorrect json data format
[place_order.py][23:16:01] [INFO] result: {'code': '0', 'data': [{'activePx': '', 'actualPx': '', 'actualSide': '', 'actualSz': '0', 'algoClOrdId': '', 'algoId': '2577068427990040576', 'amendPxOnTriggerType': '0', 'attachAlgoOrds': [], 'cTime': '1749305024106', 'callbackRatio': '', 'callbackSpread': '', 'ccy': '', 'chaseType': '', 'chaseVal': '', 'clOrdId': '', 'closeFraction': '', 'failCode': '0', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'isTradeBorrowMode': '', 'last': '2505.59', 'lever': '100', 'linkedOrd': {'ordId': ''}, 'maxChaseType': '', 'maxChaseVal': '', 'moveTriggerPx': '', 'ordId': '', 'ordIdList': [], 'ordPx': '', 'ordType': 'conditional', 'posSide': 'net', 'pxLimit': '', 'pxSpread': '', 'pxVar': '', 'quickMgnType': '', 'reduceOnly': 'false', 'side': 'buy', 'slOrdPx': '', 'slTriggerPx': '', 'slTriggerPxType': '', 'state': 'live', 'sz': '771', 'szLimit': '', 'tag': '', 'tdMode': 'cross', 'tgtCcy': '', 'timeInterval': '', 'tpOrdPx': '-1', 'tpTriggerPx': '2420', 'tpTriggerPxType': 'last', 'triggerPx': '', 'triggerPxType': '', 'triggerTime': '', 'uTime': '1749305024106'}, {'activePx': '', 'actualPx': '', 'actualSide': '', 'actualSz': '0', 'algoClOrdId': '', 'algoId': '2577068409501548544', 'amendPxOnTriggerType': '0', 'attachAlgoOrds': [], 'cTime': '1749305023555', 'callbackRatio': '', 'callbackSpread': '', 'ccy': '', 'chaseType': '', 'chaseVal': '', 'clOrdId': '', 'closeFraction': '', 'failCode': '0', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'isTradeBorrowMode': '', 'last': '2505.59', 'lever': '100', 'linkedOrd': {'ordId': ''}, 'maxChaseType': '', 'maxChaseVal': '', 'moveTriggerPx': '', 'ordId': '', 'ordIdList': [], 'ordPx': '', 'ordType': 'conditional', 'posSide': 'net', 'pxLimit': '', 'pxSpread': '', 'pxVar': '', 'quickMgnType': '', 'reduceOnly': 'false', 'side': 'buy', 'slOrdPx': '', 'slTriggerPx': '', 'slTriggerPxType': '', 'state': 'live', 'sz': '771', 'szLimit': '', 'tag': '', 'tdMode': 'cross', 'tgtCcy': '', 'timeInterval': '', 'tpOrdPx': '-1', 'tpTriggerPx': '2450', 'tpTriggerPxType': 'last', 'triggerPx': '', 'triggerPxType': '', 'triggerTime': '', 'uTime': '1749305023555'}], 'msg': ''}
[auto_trader.py][23:16:01] [INFO] 交易结果: None
[auto_trader.py][23:16:01] [ERROR] 执行交易指令失败: 'NoneType' object is not subscriptable
[auto_trader.py][23:16:54] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:16:54] [INFO] 执行平仓操作
[_client.py][23:16:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:16:54] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:16:54] [ERROR] 取消订单失败: Position doesn't exist.
[auto_trader.py][23:16:54] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:16:54] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:19:48] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:19:48] [INFO] 执行平仓操作
[_client.py][23:19:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:19:49] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:19:49] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:19:49] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:19:49] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:27:59] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:27:59] [INFO] 执行平仓操作
[_client.py][23:28:00] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:28:00] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:28:00] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:28:00] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:28:00] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:28:04] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:28:04] [INFO] 执行平仓操作
[_client.py][23:28:05] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:28:05] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:28:05] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:28:05] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:28:05] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:29:42] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:29:42] [INFO] 执行平仓操作
[place_order.py][23:29:42] [ERROR] 平仓过程发生异常: TradeAPI.close_positions() missing 1 required positional argument: 'instId'
[auto_trader.py][23:29:42] [INFO] 交易结果: None
[auto_trader.py][23:29:42] [ERROR] 执行交易指令失败: 'NoneType' object is not subscriptable
[auto_trader.py][23:30:02] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:30:02] [INFO] 执行平仓操作
[_client.py][23:30:02] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:30:02] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:30:02] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:30:02] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:30:02] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:32:39] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:32:39] [INFO] 执行平仓操作
[_client.py][23:32:40] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 400 Bad Request"
[place_order.py][23:32:40] [INFO] result: {'code': '51000', 'data': [], 'msg': 'Parameter posSide error'}
[place_order.py][23:32:40] [ERROR] 平仓过程发生异常: Parameter posSide error
[auto_trader.py][23:32:40] [INFO] 交易结果: {'success': False, 'error': 'Parameter posSide error', 'response': {'code': '51000', 'data': [], 'msg': 'Parameter posSide error'}}
[auto_trader.py][23:32:40] [ERROR] 交易失败: Parameter posSide error
[auto_trader.py][23:35:14] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:35:14] [INFO] 执行平仓操作
[_client.py][23:35:15] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:35:15] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:35:15] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:35:15] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:35:15] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:35:46] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:35:46] [INFO] 执行平仓操作
[_client.py][23:35:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:35:47] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:35:47] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:35:47] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:35:47] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:36:02] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:36:02] [INFO] 执行平仓操作
[_client.py][23:36:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:36:03] [INFO] result: {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}
[place_order.py][23:36:03] [ERROR] 平仓过程发生异常: Position doesn't exist.
[auto_trader.py][23:36:03] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:36:03] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:42:02] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:42:02] [INFO] 执行平仓操作
[place_order.py][23:42:02] [INFO] 尝试做空平仓: {'instId': 'ETH-USDT-SWAP', 'tdMode': 'cross', 'sz': '231.34', 'ordType': 'market', 'side': 'sell'}
[_client.py][23:42:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][23:42:03] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577266360238084096', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749310922946'}], 'inTime': '1749310922944809', 'msg': '', 'outTime': '1749310922947888'}
[auto_trader.py][23:42:03] [INFO] 交易结果: {'success': True, 'order_id': '2577266360238084096', 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577266360238084096', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749310922946'}], 'inTime': '1749310922944809', 'msg': '', 'outTime': '1749310922947888'}}
[auto_trader.py][23:42:03] [INFO] 订单2577266360238084096已提交成功
[auto_trader.py][23:42:42] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:42:42] [INFO] 执行平仓操作
[place_order.py][23:42:42] [INFO] 尝试做空平仓: {'instId': 'ETH-USDT-SWAP', 'tdMode': 'cross', 'sz': '231.34', 'ordType': 'market', 'side': 'sell'}
[_client.py][23:42:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][23:42:42] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577267701408731136', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749310962916'}], 'inTime': '1749310962915062', 'msg': '', 'outTime': '1749310962918057'}
[auto_trader.py][23:42:42] [INFO] 交易结果: {'success': True, 'order_id': '2577267701408731136', 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577267701408731136', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749310962916'}], 'inTime': '1749310962915062', 'msg': '', 'outTime': '1749310962918057'}}
[auto_trader.py][23:42:42] [INFO] 订单2577267701408731136已提交成功
[auto_trader.py][23:45:13] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:45:13] [INFO] 执行平仓操作
[place_order.py][23:45:13] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'mgnMode': 'cross', 'sz': '231.34', 'ccy': 'USDT'}
[place_order.py][23:45:13] [ERROR] 平仓过程发生异常: TradeAPI.close_positions() got an unexpected keyword argument 'sz'
[auto_trader.py][23:45:13] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.close_positions() got an unexpected keyword argument 'sz'", 'response': None}
[auto_trader.py][23:45:13] [ERROR] 交易失败: TradeAPI.close_positions() got an unexpected keyword argument 'sz'
[auto_trader.py][23:47:14] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:47:14] [INFO] 执行平仓操作
[place_order.py][23:47:14] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross', 'autoCxl': True, 'pos': '231.34'}
[place_order.py][23:47:14] [ERROR] 平仓过程发生异常: TradeAPI.close_positions() got an unexpected keyword argument 'pos'
[auto_trader.py][23:47:14] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.close_positions() got an unexpected keyword argument 'pos'", 'response': None}
[auto_trader.py][23:47:14] [ERROR] 交易失败: TradeAPI.close_positions() got an unexpected keyword argument 'pos'
[auto_trader.py][23:49:41] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:49:41] [INFO] 执行平仓操作
[place_order.py][23:49:41] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross', 'sz': '231.34', 'tgtCcy': 'base_ccy'}
[place_order.py][23:49:41] [ERROR] 平仓过程发生异常: TradeAPI.close_positions() got an unexpected keyword argument 'sz'
[auto_trader.py][23:49:41] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.close_positions() got an unexpected keyword argument 'sz'", 'response': None}
[auto_trader.py][23:49:41] [ERROR] 交易失败: TradeAPI.close_positions() got an unexpected keyword argument 'sz'
[auto_trader.py][23:53:17] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:53:17] [INFO] 执行平仓操作
[place_order.py][23:53:17] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross'}
[_client.py][23:53:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:53:18] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'tag': ''}], 'msg': ''}
[auto_trader.py][23:53:18] [INFO] 交易结果: {'success': True, 'order_id': None, 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'tag': ''}], 'msg': ''}}
[auto_trader.py][23:53:18] [INFO] 订单None已提交成功
[auto_trader.py][23:53:31] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:53:31] [INFO] 执行平仓操作
[place_order.py][23:53:31] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross'}
[_client.py][23:53:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:53:31] [ERROR] 平仓失败: Position doesn't exist.
[auto_trader.py][23:53:31] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:53:31] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:54:04] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:54:04] [INFO] 执行加仓操作
[_client.py][23:54:05] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][23:54:05] [INFO] 设置杠杆成功：100倍
[_client.py][23:54:06] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][23:54:06] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][23:54:06] [INFO] 交易结果: {'success': True, 'order_id': '2577290632272678912', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577290632272678912', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749311646309'}], 'inTime': '1749311646308261', 'msg': '', 'outTime': '1749311646311303'}}
[auto_trader.py][23:54:06] [INFO] 订单2577290632272678912已提交成功
[_client.py][23:54:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][23:54:07] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][23:54:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][23:54:07] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][23:54:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][23:54:07] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][23:54:07] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577290658422751232', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577290663523024896', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577290668656852992', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][23:54:21] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:54:21] [INFO] 执行平仓操作
[place_order.py][23:54:21] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross'}
[_client.py][23:54:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:54:21] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'tag': ''}], 'msg': ''}
[auto_trader.py][23:54:21] [INFO] 交易结果: {'success': True, 'order_id': None, 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'tag': ''}], 'msg': ''}}
[auto_trader.py][23:54:21] [INFO] 订单None已提交成功
[auto_trader.py][23:57:22] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:57:22] [INFO] 执行平仓操作
[place_order.py][23:57:22] [INFO] 正在撤销止盈止损订单...
[place_order.py][23:57:22] [ERROR] 平仓过程发生异常: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[auto_trader.py][23:57:22] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'", 'response': None}
[auto_trader.py][23:57:22] [ERROR] 交易失败: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[auto_trader.py][23:58:29] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 'N/A', 'stop_loss': 'N/A', 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:58:29] [INFO] 执行平仓操作
[place_order.py][23:58:29] [INFO] 正在撤销止盈止损订单...
[_client.py][23:58:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][23:58:29] [WARNING] 撤销止盈止损订单可能存在问题: Parameter algoIds error
[place_order.py][23:58:29] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross'}
[_client.py][23:58:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][23:58:29] [ERROR] 平仓失败: Position doesn't exist.
[auto_trader.py][23:58:29] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][23:58:29] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][23:58:52] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][23:58:52] [INFO] 执行加仓操作
[_client.py][23:58:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][23:58:53] [INFO] 设置杠杆成功：100倍
[_client.py][23:58:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][23:58:54] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][23:58:54] [INFO] 交易结果: {'success': True, 'order_id': '2577300284104380416', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577300284104380416', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749311933957'}], 'inTime': '1749311933955529', 'msg': '', 'outTime': '1749311933958604'}}
[auto_trader.py][23:58:54] [INFO] 订单2577300284104380416已提交成功
[_client.py][23:58:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][23:58:55] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][23:58:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][23:58:55] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][23:58:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][23:58:55] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][23:58:55] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577300315925151744', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577300322971582464', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577300328944271360', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][23:59:26] [ERROR] 配置文件JSON格式错误
[auto_trader.py][23:59:26] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][23:59:44] [ERROR] 配置文件JSON格式错误
[auto_trader.py][23:59:44] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][00:00:40] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:00:40] [INFO] 执行平仓操作
[place_order.py][00:00:40] [INFO] 正在撤销止盈止损订单...
[_client.py][00:00:40] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:00:40] [WARNING] 撤销止盈止损订单可能存在问题: Parameter algoIds error
[place_order.py][00:00:40] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross'}
[_client.py][00:00:41] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][00:00:41] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'tag': ''}], 'msg': ''}
[auto_trader.py][00:00:41] [INFO] 交易结果: {'success': True, 'order_id': None, 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'tag': ''}], 'msg': ''}}
[auto_trader.py][00:00:41] [INFO] 订单None已提交成功
[auto_trader.py][00:05:23] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:05:23] [INFO] 执行平仓操作
[place_order.py][00:05:23] [INFO] 正在撤销止盈止损订单...
[_client.py][00:05:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 200 OK"
[place_order.py][00:05:24] [WARNING] 撤销止盈止损订单可能存在问题: 
[place_order.py][00:05:24] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'posSide': 'net', 'mgnMode': 'cross'}
[_client.py][00:05:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/close-position "HTTP/2 200 OK"
[place_order.py][00:05:24] [ERROR] 平仓失败: Position doesn't exist.
[auto_trader.py][00:05:24] [INFO] 交易结果: {'success': False, 'error': "Position doesn't exist.", 'response': {'code': '51023', 'data': [], 'msg': "Position doesn't exist."}}
[auto_trader.py][00:05:24] [ERROR] 交易失败: Position doesn't exist.
[auto_trader.py][00:16:09] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:16:09] [INFO] 执行平仓操作
[_client.py][00:16:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:16:10] [ERROR] 当前没有持仓
[auto_trader.py][00:16:10] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749311933958', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049356382', 'uTime': '1749312041033', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:16:10] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:16:37] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:16:37] [INFO] 执行加仓操作
[_client.py][00:16:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][00:16:38] [INFO] 设置杠杆成功：100倍
[_client.py][00:16:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:16:39] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][00:16:39] [INFO] 交易结果: {'success': True, 'order_id': '2577336019104698368', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577336019104698368', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749312998942'}], 'inTime': '1749312998941769', 'msg': '', 'outTime': '1749312998944903'}}
[auto_trader.py][00:16:39] [INFO] 订单2577336019104698368已提交成功
[_client.py][00:16:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:16:39] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:16:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:16:39] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:16:40] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:16:40] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][00:16:40] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577336037201707008', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577336050422153216', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577336055623090176', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][00:16:49] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:16:49] [INFO] 执行平仓操作
[_client.py][00:16:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:16:50] [INFO] 当前持仓:-231.34, 平仓方向:buy
[place_order.py][00:16:50] [INFO] 正在撤销止盈止损订单...
[_client.py][00:16:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 200 OK"
[place_order.py][00:16:51] [WARNING] 撤销止盈止损订单可能存在问题: 
[place_order.py][00:16:51] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'tdMode': 'cross', 'side': 'buy', 'ordType': 'limit', 'sz': '231.34', 'px': '2515.0'}
[_client.py][00:16:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:16:51] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577336429005639680', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749313011158'}], 'inTime': '1749313011157167', 'msg': '', 'outTime': '1749313011160237'}
[auto_trader.py][00:16:51] [INFO] 交易结果: {'success': True, 'order_id': '2577336429005639680', 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577336429005639680', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749313011158'}], 'inTime': '1749313011157167', 'msg': '', 'outTime': '1749313011160237'}}
[auto_trader.py][00:16:51] [INFO] 订单2577336429005639680已提交成功
[auto_trader.py][00:26:25] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:26:25] [INFO] 执行平仓操作
[_client.py][00:26:26] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:26:26] [ERROR] 当前没有持仓
[auto_trader.py][00:26:26] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749312998943', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049370483', 'uTime': '1749313452769', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:26:26] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:26:50] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:26:50] [INFO] 执行加仓操作
[_client.py][00:26:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][00:26:51] [INFO] 设置杠杆成功：100倍
[_client.py][00:26:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:26:51] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][00:26:51] [INFO] 交易结果: {'success': True, 'order_id': '2577356579784232960', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577356579784232960', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749313611698'}], 'inTime': '1749313611697299', 'msg': '', 'outTime': '1749313611700397'}}
[auto_trader.py][00:26:51] [INFO] 订单2577356579784232960已提交成功
[_client.py][00:26:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:26:52] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:26:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:26:52] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:26:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:26:52] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][00:26:52] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577356597310816256', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577356602142654464', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577356607041601536', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][00:27:00] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:27:00] [INFO] 执行平仓操作
[_client.py][00:27:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:27:00] [INFO] 当前持仓:-231.34, 平仓方向:buy
[place_order.py][00:27:00] [INFO] 正在撤销止盈止损订单...
[_client.py][00:27:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?instId=ETH-USDT-SWAP "HTTP/2 400 Bad Request"
[_client.py][00:27:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[place_order.py][00:27:01] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'tdMode': 'cross', 'side': 'buy', 'ordType': 'market', 'sz': '231.34'}
[_client.py][00:27:01] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:27:01] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577356907443261440', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749313621463'}], 'inTime': '1749313621461991', 'msg': '', 'outTime': '1749313621464972'}
[auto_trader.py][00:27:01] [INFO] 交易结果: {'success': True, 'order_id': '2577356907443261440', 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577356907443261440', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749313621463'}], 'inTime': '1749313621461991', 'msg': '', 'outTime': '1749313621464972'}}
[auto_trader.py][00:27:01] [INFO] 订单2577356907443261440已提交成功
[auto_trader.py][00:31:08] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:31:08] [INFO] 执行平仓操作
[_client.py][00:31:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:31:09] [ERROR] 当前没有持仓
[auto_trader.py][00:31:09] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313611699', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049372848', 'uTime': '1749313621464', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:31:09] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:31:26] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:31:26] [INFO] 执行加仓操作
[_client.py][00:31:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][00:31:27] [INFO] 设置杠杆成功：100倍
[_client.py][00:31:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:31:27] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][00:31:27] [INFO] 交易结果: {'success': True, 'order_id': '2577365830002937856', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577365830002937856', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749313887376'}], 'inTime': '1749313887374906', 'msg': '', 'outTime': '1749313887378114'}}
[auto_trader.py][00:31:27] [INFO] 订单2577365830002937856已提交成功
[_client.py][00:31:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:31:28] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:31:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:31:28] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:31:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:31:29] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][00:31:29] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577365856320782336', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577365878869360640', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577365884674277376', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][00:32:02] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:32:02] [INFO] 执行平仓操作
[_client.py][00:32:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:32:03] [ERROR] 当前没有持仓
[auto_trader.py][00:32:03] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313611699', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049372848', 'uTime': '1749313621464', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:32:03] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:32:48] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:32:48] [INFO] 执行平仓操作
[_client.py][00:32:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:32:48] [INFO] 当前持仓:-231.34, 平仓方向:buy
[place_order.py][00:32:48] [INFO] 正在撤销止盈止损订单...
[_client.py][00:32:49] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:32:49] [ERROR] 平仓过程发生异常: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[auto_trader.py][00:32:49] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'", 'response': None}
[auto_trader.py][00:32:49] [ERROR] 交易失败: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[auto_trader.py][00:33:10] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:33:10] [INFO] 执行平仓操作
[_client.py][00:33:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:33:12] [INFO] 当前持仓:-231.34, 平仓方向:buy
[place_order.py][00:33:12] [INFO] 正在撤销止盈止损订单...
[_client.py][00:33:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:33:12] [ERROR] 平仓过程发生异常: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[auto_trader.py][00:33:12] [INFO] 交易结果: {'success': False, 'error': "TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'", 'response': None}
[auto_trader.py][00:33:12] [ERROR] 交易失败: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[auto_trader.py][00:34:32] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:34:32] [INFO] 执行平仓操作
[place_order.py][00:34:32] [INFO] 检查并撤销未成交订单...
[_client.py][00:34:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:34:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:34:32] [ERROR] 撤销订单过程中发生错误: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[_client.py][00:34:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:34:35] [INFO] 当前持仓:-231.34, 平仓方向:buy
[place_order.py][00:34:35] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'tdMode': 'cross', 'side': 'buy', 'ordType': 'market', 'sz': '231.34'}
[_client.py][00:34:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:34:35] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577372129646219264', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749314075120'}], 'inTime': '1749314075119437', 'msg': '', 'outTime': '1749314075122412'}
[auto_trader.py][00:34:35] [INFO] 交易结果: {'success': True, 'order_id': '2577372129646219264', 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577372129646219264', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749314075120'}], 'inTime': '1749314075119437', 'msg': '', 'outTime': '1749314075122412'}}
[auto_trader.py][00:34:35] [INFO] 订单2577372129646219264已提交成功
[auto_trader.py][00:35:14] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:35:14] [INFO] 执行平仓操作
[place_order.py][00:35:14] [INFO] 检查并撤销未成交订单...
[_client.py][00:35:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:35:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:35:15] [ERROR] 撤销订单过程中发生错误: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[_client.py][00:35:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:35:15] [ERROR] 当前没有持仓
[auto_trader.py][00:35:15] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:35:15] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:35:28] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:35:28] [INFO] 执行加仓操作
[_client.py][00:35:30] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][00:35:30] [INFO] 设置杠杆成功：100倍
[_client.py][00:35:30] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:35:30] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][00:35:30] [INFO] 交易结果: {'success': True, 'order_id': '2577373998393200640', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577373998393200640', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749314130813'}], 'inTime': '1749314130811631', 'msg': '', 'outTime': '1749314130814742'}}
[auto_trader.py][00:35:30] [INFO] 订单2577373998393200640已提交成功
[_client.py][00:35:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:35:31] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:35:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:35:31] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:35:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:35:32] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][00:35:32] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577374019644325888', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577374025113698304', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577374030146863104', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][00:35:43] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:35:43] [INFO] 执行平仓操作
[place_order.py][00:35:43] [INFO] 检查并撤销未成交订单...
[_client.py][00:35:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:35:44] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[place_order.py][00:35:44] [INFO] 成功撤销限价订单 2577373998393200640
[_client.py][00:35:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:35:44] [ERROR] 撤销订单过程中发生错误: TradeAPI.cancel_algo_order() got an unexpected keyword argument 'instId'
[_client.py][00:35:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:35:44] [ERROR] 当前没有持仓
[auto_trader.py][00:35:44] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:35:44] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:37:06] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:37:06] [INFO] 执行加仓操作
[_client.py][00:37:06] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][00:37:06] [INFO] 设置杠杆成功：100倍
[_client.py][00:37:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:37:07] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][00:37:07] [INFO] 交易结果: {'success': True, 'order_id': '2577377233745088512', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577377233745088512', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749314227234'}], 'inTime': '1749314227233603', 'msg': '', 'outTime': '1749314227236644'}}
[auto_trader.py][00:37:07] [INFO] 订单2577377233745088512已提交成功
[_client.py][00:37:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:37:08] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:37:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:37:08] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:37:08] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:37:08] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][00:37:08] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577377253922471936', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577377272343855104', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577377277679009792', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][00:37:16] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:37:16] [INFO] 执行平仓操作
[place_order.py][00:37:16] [INFO] 检查并撤销未成交订单...
[_client.py][00:37:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:37:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[place_order.py][00:37:18] [INFO] 成功撤销限价订单 2577377233745088512
[_client.py][00:37:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[_client.py][00:37:19] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:19] [WARNING] 撤销止盈止损订单 2577377277679009792 失败: Incorrect json data format
[_client.py][00:37:19] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:19] [WARNING] 撤销止盈止损订单 2577377272343855104 失败: Incorrect json data format
[_client.py][00:37:19] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:19] [WARNING] 撤销止盈止损订单 2577377253922471936 失败: Incorrect json data format
[_client.py][00:37:19] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:19] [WARNING] 撤销止盈止损订单 2577374030146863104 失败: Incorrect json data format
[_client.py][00:37:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:20] [WARNING] 撤销止盈止损订单 2577374025113698304 失败: Incorrect json data format
[_client.py][00:37:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:20] [WARNING] 撤销止盈止损订单 2577374019644325888 失败: Incorrect json data format
[_client.py][00:37:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:21] [WARNING] 撤销止盈止损订单 2577365884674277376 失败: Incorrect json data format
[_client.py][00:37:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:21] [WARNING] 撤销止盈止损订单 2577365878869360640 失败: Incorrect json data format
[_client.py][00:37:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:21] [WARNING] 撤销止盈止损订单 2577365856320782336 失败: Incorrect json data format
[_client.py][00:37:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:21] [WARNING] 撤销止盈止损订单 2577356607041601536 失败: Incorrect json data format
[_client.py][00:37:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:23] [WARNING] 撤销止盈止损订单 2577356602142654464 失败: Incorrect json data format
[_client.py][00:37:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:37:23] [WARNING] 撤销止盈止损订单 2577356597310816256 失败: Incorrect json data format
[_client.py][00:37:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:37:24] [ERROR] 当前没有持仓
[auto_trader.py][00:37:24] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:37:24] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:40:34] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:40:34] [INFO] 执行平仓操作
[place_order.py][00:40:34] [INFO] 检查并撤销未成交订单...
[_client.py][00:40:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:40:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[_client.py][00:40:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:35] [WARNING] 撤销止盈止损订单 2577377277679009792 失败: Incorrect json data format
[_client.py][00:40:35] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:35] [WARNING] 撤销止盈止损订单 2577377272343855104 失败: Incorrect json data format
[_client.py][00:40:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:36] [WARNING] 撤销止盈止损订单 2577377253922471936 失败: Incorrect json data format
[_client.py][00:40:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:36] [WARNING] 撤销止盈止损订单 2577374030146863104 失败: Incorrect json data format
[_client.py][00:40:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:36] [WARNING] 撤销止盈止损订单 2577374025113698304 失败: Incorrect json data format
[_client.py][00:40:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:36] [WARNING] 撤销止盈止损订单 2577374019644325888 失败: Incorrect json data format
[_client.py][00:40:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:36] [WARNING] 撤销止盈止损订单 2577365884674277376 失败: Incorrect json data format
[_client.py][00:40:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:36] [WARNING] 撤销止盈止损订单 2577365878869360640 失败: Incorrect json data format
[_client.py][00:40:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:37] [WARNING] 撤销止盈止损订单 2577365856320782336 失败: Incorrect json data format
[_client.py][00:40:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:37] [WARNING] 撤销止盈止损订单 2577356607041601536 失败: Incorrect json data format
[_client.py][00:40:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:37] [WARNING] 撤销止盈止损订单 2577356602142654464 失败: Incorrect json data format
[_client.py][00:40:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:40:37] [WARNING] 撤销止盈止损订单 2577356597310816256 失败: Incorrect json data format
[_client.py][00:40:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:40:38] [ERROR] 当前没有持仓
[auto_trader.py][00:40:38] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:40:38] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:45:36] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:45:36] [INFO] 执行平仓操作
[place_order.py][00:45:36] [INFO] 检查并撤销未成交订单...
[_client.py][00:45:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:45:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[_client.py][00:45:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:45:37] [WARNING] 批量撤销止盈止损订单失败: Incorrect json data format
[_client.py][00:45:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:45:38] [ERROR] 当前没有持仓
[auto_trader.py][00:45:38] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:45:38] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:50:08] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:50:08] [INFO] 执行平仓操作
[_client.py][00:50:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:50:09] [ERROR] 当前没有持仓
[auto_trader.py][00:50:09] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:50:09] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:51:23] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:51:23] [INFO] 执行加仓操作
[_client.py][00:51:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][00:51:24] [INFO] 设置杠杆成功：100倍
[_client.py][00:51:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][00:51:24] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][00:51:24] [INFO] 交易结果: {'success': True, 'order_id': '2577406000966275072', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577406000966275072', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749315084564'}], 'inTime': '1749315084562707', 'msg': '', 'outTime': '1749315084566002'}}
[auto_trader.py][00:51:24] [INFO] 订单2577406000966275072已提交成功
[_client.py][00:51:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:51:25] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:51:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:51:25] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][00:51:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][00:51:25] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][00:51:25] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577406016815136768', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577406021714083840', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577406026814357504', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][00:51:34] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:51:34] [INFO] 执行平仓操作
[_client.py][00:51:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:51:35] [ERROR] 当前没有持仓
[auto_trader.py][00:51:35] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:51:35] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:51:47] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:51:47] [INFO] 执行平仓操作
[_client.py][00:51:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:51:48] [ERROR] 当前没有持仓
[auto_trader.py][00:51:48] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:51:48] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][00:52:22] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'close_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][00:52:22] [INFO] 执行平仓操作
[place_order.py][00:52:22] [INFO] 检查并撤销未成交订单...
[_client.py][00:52:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[_client.py][00:52:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[place_order.py][00:52:23] [INFO] 成功撤销限价订单 2577406000966275072
[_client.py][00:52:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending?ordType=conditional,oco&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[_client.py][00:52:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:23] [WARNING] 撤销止盈止损订单 2577406026814357504 失败: Incorrect json data format
[_client.py][00:52:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:23] [WARNING] 撤销止盈止损订单 2577406021714083840 失败: Incorrect json data format
[_client.py][00:52:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:23] [WARNING] 撤销止盈止损订单 2577406016815136768 失败: Incorrect json data format
[_client.py][00:52:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:23] [WARNING] 撤销止盈止损订单 2577377277679009792 失败: Incorrect json data format
[_client.py][00:52:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:23] [WARNING] 撤销止盈止损订单 2577377272343855104 失败: Incorrect json data format
[_client.py][00:52:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:24] [WARNING] 撤销止盈止损订单 2577377253922471936 失败: Incorrect json data format
[_client.py][00:52:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:24] [WARNING] 撤销止盈止损订单 2577374030146863104 失败: Incorrect json data format
[_client.py][00:52:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:24] [WARNING] 撤销止盈止损订单 2577374025113698304 失败: Incorrect json data format
[_client.py][00:52:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:24] [WARNING] 撤销止盈止损订单 2577374019644325888 失败: Incorrect json data format
[_client.py][00:52:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:24] [WARNING] 撤销止盈止损订单 2577365884674277376 失败: Incorrect json data format
[_client.py][00:52:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:24] [WARNING] 撤销止盈止损订单 2577365878869360640 失败: Incorrect json data format
[_client.py][00:52:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:25] [WARNING] 撤销止盈止损订单 2577365856320782336 失败: Incorrect json data format
[_client.py][00:52:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:25] [WARNING] 撤销止盈止损订单 2577356607041601536 失败: Incorrect json data format
[_client.py][00:52:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:25] [WARNING] 撤销止盈止损订单 2577356602142654464 失败: Incorrect json data format
[_client.py][00:52:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-algos "HTTP/2 400 Bad Request"
[place_order.py][00:52:25] [WARNING] 撤销止盈止损订单 2577356597310816256 失败: Incorrect json data format
[_client.py][00:52:25] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][00:52:25] [ERROR] 当前没有持仓
[auto_trader.py][00:52:25] [INFO] 交易结果: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749313935705', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049377713', 'uTime': '1749314075121', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}, {'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749310074715', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2577237898328674304', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049355448', 'uTime': '1749311617743', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][00:52:25] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][01:11:25] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:11:25] [INFO] 执行加仓操作
[_client.py][01:11:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:11:25] [INFO] 设置杠杆成功：100倍
[_client.py][01:11:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:11:26] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[auto_trader.py][01:11:26] [INFO] 交易结果: {'success': True, 'order_id': '2577446321280389120', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577446321280389120', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749316286203'}], 'inTime': '1749316286201940', 'msg': '', 'outTime': '1749316286205102'}}
[auto_trader.py][01:11:26] [INFO] 订单2577446321280389120已提交成功
[_client.py][01:11:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][01:11:26] [INFO] OCO订单设置成功: 止盈价格=2480.0, 止损价格=2525.0, 数量=77.10000000000001 (771 lots)
[_client.py][01:11:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][01:11:26] [INFO] 条件订单设置成功: 止盈价格=2450.0, 数量=77.10000000000001 (771 lots)
[_client.py][01:11:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order-algo "HTTP/2 200 OK"
[tp_sl.py][01:11:27] [INFO] 条件订单设置成功: 止盈价格=2420.0, 数量=77.10000000000001 (771 lots)
[auto_trader.py][01:11:27] [INFO] 止盈止损设置结果: {'success': True, 'results': [{'type': 'oco', 'take_profit_price': 2480.0, 'stop_loss_price': 2525.0, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577446337397686272', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2450.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577446342632177664', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}, {'type': 'conditional', 'take_profit_price': 2420.0, 'stop_loss_price': None, 'size': 77.10000000000001, 'lots': 771, 'result': {'code': '0', 'data': [{'algoClOrdId': '', 'algoId': '2577446348000886784', 'clOrdId': '', 'sCode': '0', 'sMsg': '', 'tag': ''}], 'msg': ''}}]}
[auto_trader.py][01:16:21] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:16:21] [INFO] 执行加仓操作
[_client.py][01:16:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:16:21] [INFO] 设置杠杆成功：100倍
[_client.py][01:16:22] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:16:22] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:16:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:16:22] [ERROR] 交易失败: 未知错误
[auto_trader.py][01:19:03] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:19:03] [INFO] 执行加仓操作
[_client.py][01:19:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:19:03] [INFO] 设置杠杆成功：100倍
[_client.py][01:19:04] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:19:04] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:19:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:19:04] [ERROR] 交易失败: 未知错误
[auto_trader.py][01:19:04] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577461684747505664', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577461684747505664', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749316744070'}], 'inTime': '1749316744069134', 'msg': '', 'outTime': '1749316744072318'}}, 'tp_sl_orders': {'success': False, 'error': '未找到有效持仓', 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:20:40] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:20:40] [INFO] 执行加仓操作
[_client.py][01:20:41] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:20:41] [INFO] 设置杠杆成功：100倍
[_client.py][01:20:41] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:20:41] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:20:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:20:41] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:20:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:20:44] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:20:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:20:46] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:20:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:20:48] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:20:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:20:50] [ERROR] 交易失败: 未知错误
[auto_trader.py][01:20:50] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577464960767365120', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577464960767365120', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749316841703'}], 'inTime': '1749316841701967', 'msg': '', 'outTime': '1749316841705071'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
[auto_trader.py][01:23:13] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:23:13] [INFO] 执行加仓操作
[_client.py][01:23:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:23:14] [INFO] 设置杠杆成功：100倍
[_client.py][01:23:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:23:14] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:23:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577470091139354624 "HTTP/2 200 OK"
[place_order.py][01:23:14] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:23:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577470091139354624 "HTTP/2 200 OK"
[place_order.py][01:23:17] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:23:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577470091139354624 "HTTP/2 200 OK"
[place_order.py][01:23:19] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:23:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577470091139354624 "HTTP/2 200 OK"
[place_order.py][01:23:21] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:23:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577470091139354624 "HTTP/2 200 OK"
[place_order.py][01:23:23] [WARNING] 订单未完全成交，继续设置止盈止损
[_client.py][01:23:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:23:23] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:23:26] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:23:26] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:23:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:23:28] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:23:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:23:30] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:23:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:23:32] [ERROR] 交易失败: 未知错误
[auto_trader.py][01:23:32] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577470091139354624', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577470091139354624', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749316994600'}], 'inTime': '1749316994599348', 'msg': '', 'outTime': '1749316994610479'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
[auto_trader.py][01:24:56] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:24:56] [INFO] 执行加仓操作
[_client.py][01:24:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:24:56] [INFO] 设置杠杆成功：100倍
[_client.py][01:24:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:24:57] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:24:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577473525368360960 "HTTP/2 200 OK"
[place_order.py][01:24:57] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:24:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577473525368360960 "HTTP/2 200 OK"
[place_order.py][01:24:59] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:25:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577473525368360960 "HTTP/2 200 OK"
[place_order.py][01:25:01] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:25:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577473525368360960 "HTTP/2 200 OK"
[place_order.py][01:25:03] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:25:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577473525368360960 "HTTP/2 200 OK"
[place_order.py][01:25:05] [WARNING] 订单未完全成交，继续设置止盈止损
[_client.py][01:25:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:25:06] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:25:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:25:08] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:25:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:25:10] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:25:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:25:13] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:25:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:25:15] [ERROR] 交易失败: 未知错误
[auto_trader.py][01:25:15] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577473525368360960', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577473525368360960', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749317096948'}], 'inTime': '1749317096947481', 'msg': '', 'outTime': '1749317096950511'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
[auto_trader.py][01:31:38] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:31:38] [INFO] 执行加仓操作
[_client.py][01:31:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:31:39] [INFO] 设置杠杆成功：100倍
[_client.py][01:31:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:31:39] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:31:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577487031664775168 "HTTP/2 200 OK"
[place_order.py][01:31:39] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:31:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577487031664775168 "HTTP/2 200 OK"
[place_order.py][01:31:41] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:31:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577487031664775168 "HTTP/2 200 OK"
[place_order.py][01:31:44] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:31:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577487031664775168 "HTTP/2 200 OK"
[place_order.py][01:31:46] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:31:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577487031664775168 "HTTP/2 200 OK"
[place_order.py][01:31:48] [WARNING] 订单未完全成交，继续设置止盈止损
[_client.py][01:31:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:31:48] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:31:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:31:50] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:31:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:31:53] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:31:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:31:55] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:31:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:31:57] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][01:31:57] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577487031664775168', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577487031664775168', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749317499467'}], 'inTime': '1749317499465664', 'msg': '', 'outTime': '1749317499468943'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
[auto_trader.py][01:36:08] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:36:08] [INFO] 执行加仓操作
[_client.py][01:36:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:36:09] [INFO] 设置杠杆成功：100倍
[_client.py][01:36:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:36:09] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:36:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577496098273628160 "HTTP/2 200 OK"
[place_order.py][01:36:09] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:36:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577496098273628160 "HTTP/2 200 OK"
[place_order.py][01:36:12] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:36:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577496098273628160 "HTTP/2 200 OK"
[place_order.py][01:36:14] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:36:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577496098273628160 "HTTP/2 200 OK"
[place_order.py][01:36:16] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:36:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577496098273628160 "HTTP/2 200 OK"
[place_order.py][01:36:18] [WARNING] 订单未完全成交，继续设置止盈止损
[_client.py][01:36:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:36:19] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:36:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:36:21] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:36:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:36:23] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:36:25] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:36:25] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:36:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:36:27] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][01:36:27] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577496098273628160', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577496098273628160', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749317769673'}], 'inTime': '1749317769671974', 'msg': '', 'outTime': '1749317769675169'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
[auto_trader.py][01:36:47] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:36:47] [INFO] 执行加仓操作
[_client.py][01:36:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:36:47] [INFO] 设置杠杆成功：100倍
[_client.py][01:36:48] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:36:48] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:36:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:36:48] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][01:36:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:36:48] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'
[auto_trader.py][01:36:48] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][01:36:48] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577497389280399360', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577497389280399360', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749317808148'}], 'inTime': '1749317808147352', 'msg': '', 'outTime': '1749317808150402'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:38:09] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:38:09] [INFO] 执行加仓操作
[_client.py][01:38:09] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:38:09] [INFO] 设置杠杆成功：100倍
[_client.py][01:38:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:38:10] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:38:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:38:10] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][01:38:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:38:10] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'tpTriggerPx'
[auto_trader.py][01:38:10] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][01:38:10] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577500145340780544', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577500145340780544', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749317890285'}], 'inTime': '1749317890284650', 'msg': '', 'outTime': '1749317890287733'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'tpTriggerPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:39:26] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:39:26] [INFO] 执行加仓操作
[_client.py][01:39:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:39:26] [INFO] 设置杠杆成功：100倍
[_client.py][01:39:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:39:27] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:39:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:39:27] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][01:39:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:39:27] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'tpOrdPx'
[auto_trader.py][01:39:27] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][01:39:27] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577502720609882112', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577502720609882112', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749317967034'}], 'inTime': '1749317967033230', 'msg': '', 'outTime': '1749317967036314'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'tpOrdPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:40:19] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 'N/A', 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:40:19] [INFO] 执行加仓操作
[_client.py][01:40:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:40:20] [INFO] 设置杠杆成功：100倍
[_client.py][01:40:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:40:20] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:40:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:40:20] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][01:40:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:40:21] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'tpTriggerPx'
[auto_trader.py][01:40:21] [ERROR] 保存交易记录失败: could not convert string to float: 'N/A'
[auto_trader.py][01:40:21] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577504522919088128', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577504522919088128', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749318020747'}], 'inTime': '1749318020746818', 'msg': '', 'outTime': '1749318020750053'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'tpTriggerPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:44:54] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 'N/A', 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:44:54] [INFO] 执行加仓操作
[_client.py][01:44:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:44:54] [INFO] 设置杠杆成功：100倍
[_client.py][01:44:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:44:55] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:44:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:44:55] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][01:44:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:44:55] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'
[auto_trader.py][01:44:55] [ERROR] 保存交易记录失败: could not convert string to float: 'N/A'
[auto_trader.py][01:44:55] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577513729215041536', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577513729215041536', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749318295116'}], 'inTime': '1749318295115480', 'msg': '', 'outTime': '1749318295118494'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:46:01] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 'N/A', 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:46:01] [INFO] 执行加仓操作
[_client.py][01:46:02] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:46:02] [INFO] 设置杠杆成功：100倍
[_client.py][01:46:02] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:46:02] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:46:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:46:02] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][01:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:46:03] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'
[auto_trader.py][01:46:03] [ERROR] 保存交易记录失败: could not convert string to float: 'N/A'
[auto_trader.py][01:46:03] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577515996957773824', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577515996957773824', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749318362700'}], 'inTime': '1749318362699337', 'msg': '', 'outTime': '1749318362702450'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][01:46:41] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:46:41] [INFO] 执行加仓操作
[_client.py][01:46:41] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][01:46:41] [INFO] 设置杠杆成功：100倍
[_client.py][01:46:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][01:46:42] [INFO] 下单成功：方向=sell, 价格=2515.0, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][01:46:42] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577517316284485632 "HTTP/2 200 OK"
[place_order.py][01:46:42] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:46:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577517316284485632 "HTTP/2 200 OK"
[place_order.py][01:46:44] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:46:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577517316284485632 "HTTP/2 200 OK"
[place_order.py][01:46:46] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:46:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577517316284485632 "HTTP/2 200 OK"
[place_order.py][01:46:48] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][01:46:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577517316284485632 "HTTP/2 200 OK"
[place_order.py][01:46:50] [WARNING] 订单未完全成交，继续设置止盈止损
[_client.py][01:46:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:46:51] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:46:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:46:53] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:46:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:46:55] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:46:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:46:57] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][01:46:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][01:46:59] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][01:46:59] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577517316284485632', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577517316284485632', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749318402019'}], 'inTime': '1749318402018468', 'msg': '', 'outTime': '1749318402021644'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
[auto_trader.py][01:47:26] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:47:26] [INFO] 执行平仓操作
[_client.py][01:47:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:47:27] [ERROR] 当前没有持仓
[auto_trader.py][01:47:27] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][01:47:27] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749317890286', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049393107', 'uTime': '1749318372212', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][01:59:05] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][01:59:05] [INFO] 执行平仓操作
[_client.py][01:59:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][01:59:06] [ERROR] 当前没有持仓
[auto_trader.py][01:59:06] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][01:59:06] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749317890286', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049393107', 'uTime': '1749318372212', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:01:18] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:01:18] [INFO] 执行平仓操作
[_client.py][02:01:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:01:19] [INFO] {'code': '0', 'data': [{'accFillSz': '0', 'algoClOrdId': '', 'algoId': '', 'attachAlgoClOrdId': '', 'attachAlgoOrds': [], 'avgPx': '', 'cTime': '1749318402019', 'cancelSource': '', 'cancelSourceReason': '', 'category': 'normal', 'ccy': '', 'clOrdId': '', 'fee': '0', 'feeCcy': 'USDT', 'fillPx': '', 'fillSz': '0', 'fillTime': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'isTpLimit': 'false', 'lever': '100', 'linkedAlgoOrd': {'algoId': ''}, 'ordId': '2577517316284485632', 'ordType': 'limit', 'pnl': '0', 'posSide': 'net', 'px': '2515', 'pxType': '', 'pxUsd': '', 'pxVol': '', 'quickMgnType': '', 'rebate': '0', 'rebateCcy': 'USDT', 'reduceOnly': 'false', 'side': 'sell', 'slOrdPx': '', 'slTriggerPx': '', 'slTriggerPxType': '', 'source': '', 'state': 'live', 'stpId': '', 'stpMode': 'cancel_maker', 'sz': '231.34', 'tag': '', 'tdMode': 'cross', 'tgtCcy': '', 'tpOrdPx': '', 'tpTriggerPx': '', 'tpTriggerPxType': '', 'tradeId': '', 'uTime': '1749318402019'}], 'msg': ''}
[_client.py][02:01:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:01:19] [ERROR] 当前没有持仓
[auto_trader.py][02:01:19] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:01:19] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749317890286', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049393107', 'uTime': '1749318372212', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:01:44] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:01:44] [INFO] 执行平仓操作
[_client.py][02:01:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:01:44] [INFO] !!!!{'code': '0', 'data': [{'accFillSz': '0', 'algoClOrdId': '', 'algoId': '', 'attachAlgoClOrdId': '', 'attachAlgoOrds': [], 'avgPx': '', 'cTime': '1749318402019', 'cancelSource': '', 'cancelSourceReason': '', 'category': 'normal', 'ccy': '', 'clOrdId': '', 'fee': '0', 'feeCcy': 'USDT', 'fillPx': '', 'fillSz': '0', 'fillTime': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'isTpLimit': 'false', 'lever': '100', 'linkedAlgoOrd': {'algoId': ''}, 'ordId': '2577517316284485632', 'ordType': 'limit', 'pnl': '0', 'posSide': 'net', 'px': '2515', 'pxType': '', 'pxUsd': '', 'pxVol': '', 'quickMgnType': '', 'rebate': '0', 'rebateCcy': 'USDT', 'reduceOnly': 'false', 'side': 'sell', 'slOrdPx': '', 'slTriggerPx': '', 'slTriggerPxType': '', 'source': '', 'state': 'live', 'stpId': '', 'stpMode': 'cancel_maker', 'sz': '231.34', 'tag': '', 'tdMode': 'cross', 'tgtCcy': '', 'tpOrdPx': '', 'tpTriggerPx': '', 'tpTriggerPxType': '', 'tradeId': '', 'uTime': '1749318402019'}], 'msg': ''}
[_client.py][02:01:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:01:44] [ERROR] 当前没有持仓
[auto_trader.py][02:01:44] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:01:44] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749317890286', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049393107', 'uTime': '1749318372212', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:03:07] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:03:07] [INFO] 执行平仓操作
[_client.py][02:03:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:03:08] [INFO] !!!!2577517316284485632
[_client.py][02:03:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:03:09] [ERROR] 当前没有持仓
[auto_trader.py][02:03:09] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:03:09] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749317890286', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049393107', 'uTime': '1749318372212', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:04:33] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': False, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:04:33] [INFO] 执行平仓操作
[_client.py][02:04:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[_client.py][02:04:34] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[place_order.py][02:04:34] [INFO] 成功撤销限价订单 2577517316284485632
[_client.py][02:04:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:04:34] [ERROR] 当前没有持仓
[auto_trader.py][02:04:34] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:04:34] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749317890286', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049393107', 'uTime': '1749318372212', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:05:12] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'sell', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:05:12] [INFO] 执行加仓操作
[_client.py][02:05:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][02:05:13] [INFO] 设置杠杆成功：100倍
[_client.py][02:05:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][02:05:13] [INFO] 下单成功：方向=sell, 价格=market, 数量=231.34, 交易模式=cross, 杠杆=100倍
[_client.py][02:05:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:05:14] [INFO] 已确认持仓建立，开始设置止盈止损
[_client.py][02:05:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:05:14] [ERROR] 设置止盈止损时发生异常: TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'
[auto_trader.py][02:05:14] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][02:05:14] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577554622068428800', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577554622068428800', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749319513818'}], 'inTime': '1749319513817323', 'msg': '', 'outTime': '1749319513820229'}}, 'tp_sl_orders': {'success': False, 'error': "TradeAPI.place_order() got an unexpected keyword argument 'triggerPx'", 'response': None}, 'message': '主订单：成功, 止盈止损：失败'}
[auto_trader.py][02:05:46] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:05:46] [INFO] 执行平仓操作
[_client.py][02:05:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:05:46] [ERROR] 平仓过程发生异常: list index out of range
[auto_trader.py][02:05:46] [ERROR] 交易失败: list index out of range
[auto_trader.py][02:05:46] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': 'list index out of range', 'response': None}
[auto_trader.py][02:06:51] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:06:51] [INFO] 执行平仓操作
[_client.py][02:06:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:06:52] [ERROR] 平仓过程发生异常: list index out of range
[auto_trader.py][02:06:52] [ERROR] 交易失败: list index out of range
[auto_trader.py][02:06:52] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': 'list index out of range', 'response': None}
[auto_trader.py][02:07:17] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:07:17] [INFO] 执行平仓操作
[place_order.py][02:07:17] [ERROR] 平仓过程发生异常: name 'position_result' is not defined
[auto_trader.py][02:07:17] [ERROR] 交易失败: name 'position_result' is not defined
[auto_trader.py][02:07:17] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': "name 'position_result' is not defined", 'response': None}
[auto_trader.py][02:07:31] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:07:31] [INFO] 执行平仓操作
[_client.py][02:07:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:07:31] [INFO] 当前持仓:-231.34, 平仓方向:buy, 平仓数量:231.34
[_client.py][02:07:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&state=live "HTTP/2 200 OK"
[place_order.py][02:07:32] [INFO] 执行平仓: {'instId': 'ETH-USDT-SWAP', 'tdMode': 'cross', 'side': 'buy', 'ordType': 'market', 'sz': '231.34'}
[_client.py][02:07:32] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][02:07:32] [INFO] 平仓成功: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577559267545321472', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749319652264'}], 'inTime': '1749319652263479', 'msg': '', 'outTime': '1749319652266565'}
[auto_trader.py][02:07:32] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][02:07:32] [ERROR] 交易执行失败或返回结果格式不正确: {'success': True, 'order_id': '2577559267545321472', 'message': '平仓订单已提交', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577559267545321472', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749319652264'}], 'inTime': '1749319652263479', 'msg': '', 'outTime': '1749319652266565'}}
[auto_trader.py][02:08:06] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:08:06] [INFO] 执行平仓操作
[_client.py][02:08:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:08:06] [ERROR] 获取订单列表过程中发生异常: list index out of range
[auto_trader.py][02:08:06] [ERROR] 交易失败: list index out of range
[auto_trader.py][02:08:06] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': 'list index out of range', 'response': None}
[auto_trader.py][02:08:18] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:08:18] [INFO] 执行平仓操作
[_client.py][02:08:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:08:19] [ERROR] 获取订单列表过程中发生异常: list index out of range
[_client.py][02:08:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:08:20] [ERROR] 当前没有持仓
[auto_trader.py][02:08:20] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:08:20] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749319513819', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049399960', 'uTime': '1749319652265', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:14:11] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:14:11] [INFO] 执行平仓操作
[_client.py][02:14:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:14:11] [ERROR] 获取订单列表过程中发生异常: list index out of range
[_client.py][02:14:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:14:12] [ERROR] 当前没有持仓
[auto_trader.py][02:14:12] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:14:12] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749319513819', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049399960', 'uTime': '1749319652265', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:15:32] [INFO] 执行第1条交易指令: {'operation_comment': '当前存在未成交的空头限价订单，为确保仓位大小与最新风险管理计算一致，并优化止盈目标，撤销现有订单并重新下达。', 'type': 'close', 'price': 2515.0, 'stop_loss': 2525.0, 'take_profit': [{'price': 2480.0, 'size': 77.11}, {'price': 2450.0, 'size': 77.11}, {'price': 2420.0, 'size': 77.12}], 'size': 231.34, 'market': True, 'expected_winrate': 0.6308, 'expected_return': 0.00731, 'trade_RR_ratio': 3.5, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易风险控制在可用保证金的2%，采用分级止盈策略，TP1达成后止损上移。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期反弹风险，但整体趋势偏空。需警惕价格突破关键阻力位2525 USDT，这将是趋势反转的信号。严格执行止损，并关注资金费率和持仓量变化。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。'}
[auto_trader.py][02:15:32] [INFO] 执行平仓操作
[_client.py][02:15:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:15:32] [ERROR] 获取订单列表过程中发生异常: list index out of range
[_client.py][02:15:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:15:32] [ERROR] 当前没有持仓
[auto_trader.py][02:15:32] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:15:32] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749319513819', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049399960', 'uTime': '1749319652265', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:21:40] [ERROR] 第1条交易指令的size字段格式错误: 231.34
[auto_trader.py][02:21:40] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][02:30:15] [ERROR] 第1条交易指令的size字段格式错误: 231.34
[auto_trader.py][02:30:15] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][02:31:15] [ERROR] 第1条交易指令的size字段格式错误: 231.34
[auto_trader.py][02:31:15] [ERROR] 第2条交易指令的size字段格式错误: 42.61
[auto_trader.py][02:31:15] [INFO] 执行第1条交易指令: {'operation_comment': '检测到存在与当前看涨判断冲突的未成交空头限价订单，为避免潜在风险并确保交易方向一致性，优先撤销该订单。', 'type': 'close', 'price': 2515.0, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': '231.34', 'market': True, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'modify_order', 'risk_assessment': '撤销订单操作风险低，旨在规避潜在冲突。'}
[auto_trader.py][02:31:15] [INFO] 执行平仓操作
[okx_client.py][02:31:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending
[okx_client.py][02:31:15] [INFO] 401 Unauthorized
[okx_client.py][02:31:15] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[okx_client.py][02:31:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending
[okx_client.py][02:31:16] [INFO] 401 Unauthorized
[okx_client.py][02:31:16] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[place_order.py][02:31:16] [INFO] 已取消 0 个限价单和 0 个止盈止损单
[okx_client.py][02:31:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions
[okx_client.py][02:31:16] [INFO] 401 Unauthorized
[okx_client.py][02:31:16] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[place_order.py][02:31:16] [ERROR] 获取持仓信息失败: {"msg":"Invalid Sign","code":"50113"}
[auto_trader.py][02:31:16] [ERROR] 交易失败: {"msg":"Invalid Sign","code":"50113"}
[auto_trader.py][02:31:16] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '{"msg":"Invalid Sign","code":"50113"}', 'response': {'code': '401', 'msg': '{"msg":"Invalid Sign","code":"50113"}'}}
[auto_trader.py][02:31:16] [INFO] 执行第2条交易指令: {'operation_comment': '在撤销冲突订单后，根据H4和H1的强劲看涨趋势，在回调至关键支撑位附近建立多头头寸，以获取更好的风险回报比。', 'type': 'buy', 'price': 2505.0, 'stop_loss': 2450.0, 'take_profit': [{'price': 2575.0, 'size': 0.33}, {'price': 2650.0, 'size': 0.33}, {'price': 2700.0, 'size': 0.34}], 'size': '42.61', 'market': False, 'expected_winrate': 0.8858, 'expected_return': 0.0222, 'trade_RR_ratio': 1.27, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易最大亏损不超过可用保证金的2%。如果价格突破关键阻力（如2525 USDT）并伴随放量，则将止损上移至新的支撑位（如2510 USDT），并考虑小幅加仓。如果价格回调至2500-2505 USDT区域并获得支撑（如出现看涨K线或缩量），则视为入场机会，止损保持不变。如果价格跌破止损位（2450 USDT），或出现放量滞涨并迅速回落，则立即止损，并考虑反手做空或离场观望。在美联储会议纪要公布前，考虑减半仓位或将止损上移至盈亏平衡点，以规避突发消息面的影响。如果出现交易所大规模资金外流或链上数据急剧恶化等黑天鹅事件，将立即平仓所有头寸并暂停交易。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期回调风险，但整体趋势偏多。需警惕价格未能有效突破2525 USDT阻力。严格执行止损，并关注资金费率和持仓量变化。'}
[auto_trader.py][02:31:16] [INFO] 执行加仓操作
[okx_client.py][02:31:16] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage
[okx_client.py][02:31:17] [INFO] 401 Unauthorized
[okx_client.py][02:31:17] [ERROR] API请求失败: {"msg":"APIKey does not match current environment.","code":"50101"}
[place_order.py][02:31:17] [ERROR] 设置杠杆失败，错误信息：{"msg":"APIKey does not match current environment.","code":"50101"}
[auto_trader.py][02:31:17] [ERROR] 交易失败: {"msg":"APIKey does not match current environment.","code":"50101"}
[auto_trader.py][02:31:17] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '{"msg":"APIKey does not match current environment.","code":"50101"}', 'response': {'code': '401', 'msg': '{"msg":"APIKey does not match current environment.","code":"50101"}'}}
[auto_trader.py][02:32:42] [ERROR] 第1条交易指令的size字段格式错误: 231.34
[auto_trader.py][02:32:42] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][02:33:58] [INFO] 执行第1条交易指令: {'operation_comment': '检测到存在与当前看涨判断冲突的未成交空头限价订单，为避免潜在风险并确保交易方向一致性，优先撤销该订单。', 'type': 'close', 'price': 2515.0, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 231.34, 'market': True, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'modify_order', 'risk_assessment': '撤销订单操作风险低，旨在规避潜在冲突。'}
[auto_trader.py][02:33:58] [INFO] 执行平仓操作
[okx_client.py][02:33:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending
[okx_client.py][02:33:59] [INFO] 401 Unauthorized
[okx_client.py][02:33:59] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[okx_client.py][02:33:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending
[okx_client.py][02:33:59] [INFO] 401 Unauthorized
[okx_client.py][02:33:59] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[place_order.py][02:33:59] [INFO] 已取消 0 个限价单和 0 个止盈止损单
[okx_client.py][02:33:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions
[okx_client.py][02:34:00] [INFO] 401 Unauthorized
[okx_client.py][02:34:00] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[place_order.py][02:34:00] [ERROR] 获取持仓信息失败: {"msg":"Invalid Sign","code":"50113"}
[auto_trader.py][02:34:00] [ERROR] 交易失败: {"msg":"Invalid Sign","code":"50113"}
[auto_trader.py][02:34:00] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '{"msg":"Invalid Sign","code":"50113"}', 'response': {'code': '401', 'msg': '{"msg":"Invalid Sign","code":"50113"}'}}
[auto_trader.py][02:34:00] [INFO] 执行第2条交易指令: {'operation_comment': '在撤销冲突订单后，根据H4和H1的强劲看涨趋势，在回调至关键支撑位附近建立多头头寸，以获取更好的风险回报比。', 'type': 'buy', 'price': 2505.0, 'stop_loss': 2450.0, 'take_profit': [{'price': 2575.0, 'size': 0.33}, {'price': 2650.0, 'size': 0.33}, {'price': 2700.0, 'size': 0.34}], 'size': 42.61, 'market': False, 'expected_winrate': 0.8858, 'expected_return': 0.0222, 'trade_RR_ratio': 1.27, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易最大亏损不超过可用保证金的2%。如果价格突破关键阻力（如2525 USDT）并伴随放量，则将止损上移至新的支撑位（如2510 USDT），并考虑小幅加仓。如果价格回调至2500-2505 USDT区域并获得支撑（如出现看涨K线或缩量），则视为入场机会，止损保持不变。如果价格跌破止损位（2450 USDT），或出现放量滞涨并迅速回落，则立即止损，并考虑反手做空或离场观望。在美联储会议纪要公布前，考虑减半仓位或将止损上移至盈亏平衡点，以规避突发消息面的影响。如果出现交易所大规模资金外流或链上数据急剧恶化等黑天鹅事件，将立即平仓所有头寸并暂停交易。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期回调风险，但整体趋势偏多。需警惕价格未能有效突破2525 USDT阻力。严格执行止损，并关注资金费率和持仓量变化。'}
[auto_trader.py][02:34:00] [INFO] 执行加仓操作
[okx_client.py][02:34:00] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage
[okx_client.py][02:34:01] [INFO] 401 Unauthorized
[okx_client.py][02:34:01] [ERROR] API请求失败: {"msg":"APIKey does not match current environment.","code":"50101"}
[place_order.py][02:34:01] [ERROR] 设置杠杆失败，错误信息：{"msg":"APIKey does not match current environment.","code":"50101"}
[auto_trader.py][02:34:01] [ERROR] 交易失败: {"msg":"APIKey does not match current environment.","code":"50101"}
[auto_trader.py][02:34:01] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '{"msg":"APIKey does not match current environment.","code":"50101"}', 'response': {'code': '401', 'msg': '{"msg":"APIKey does not match current environment.","code":"50101"}'}}
[auto_trader.py][02:35:59] [INFO] 执行第1条交易指令: {'operation_comment': '检测到存在与当前看涨判断冲突的未成交空头限价订单，为避免潜在风险并确保交易方向一致性，优先撤销该订单。', 'type': 'close', 'price': 2515.0, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 231.34, 'market': True, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'modify_order', 'risk_assessment': '撤销订单操作风险低，旨在规避潜在冲突。'}
[auto_trader.py][02:35:59] [INFO] 执行平仓操作
[okx_client.py][02:35:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending
[okx_client.py][02:36:00] [INFO] 401 Unauthorized
[okx_client.py][02:36:00] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[okx_client.py][02:36:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-algo-pending
[okx_client.py][02:36:00] [INFO] 401 Unauthorized
[okx_client.py][02:36:00] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[place_order.py][02:36:00] [INFO] 已取消 0 个限价单和 0 个止盈止损单
[okx_client.py][02:36:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions
[okx_client.py][02:36:01] [INFO] 401 Unauthorized
[okx_client.py][02:36:01] [ERROR] API请求失败: {"msg":"Invalid Sign","code":"50113"}
[place_order.py][02:36:01] [ERROR] 获取持仓信息失败: {"msg":"Invalid Sign","code":"50113"}
[auto_trader.py][02:36:01] [ERROR] 交易失败: {"msg":"Invalid Sign","code":"50113"}
[auto_trader.py][02:36:01] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '{"msg":"Invalid Sign","code":"50113"}', 'response': {'code': '401', 'msg': '{"msg":"Invalid Sign","code":"50113"}'}}
[auto_trader.py][02:36:01] [INFO] 执行第2条交易指令: {'operation_comment': '在撤销冲突订单后，根据H4和H1的强劲看涨趋势，在回调至关键支撑位附近建立多头头寸，以获取更好的风险回报比。', 'type': 'buy', 'price': 2505.0, 'stop_loss': 2450.0, 'take_profit': [{'price': 2575.0, 'size': 0.33}, {'price': 2650.0, 'size': 0.33}, {'price': 2700.0, 'size': 0.34}], 'size': 42.61, 'market': False, 'expected_winrate': 0.8858, 'expected_return': 0.0222, 'trade_RR_ratio': 1.27, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易最大亏损不超过可用保证金的2%。如果价格突破关键阻力（如2525 USDT）并伴随放量，则将止损上移至新的支撑位（如2510 USDT），并考虑小幅加仓。如果价格回调至2500-2505 USDT区域并获得支撑（如出现看涨K线或缩量），则视为入场机会，止损保持不变。如果价格跌破止损位（2450 USDT），或出现放量滞涨并迅速回落，则立即止损，并考虑反手做空或离场观望。在美联储会议纪要公布前，考虑减半仓位或将止损上移至盈亏平衡点，以规避突发消息面的影响。如果出现交易所大规模资金外流或链上数据急剧恶化等黑天鹅事件，将立即平仓所有头寸并暂停交易。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期回调风险，但整体趋势偏多。需警惕价格未能有效突破2525 USDT阻力。严格执行止损，并关注资金费率和持仓量变化。'}
[auto_trader.py][02:36:01] [INFO] 执行加仓操作
[okx_client.py][02:36:01] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage
[okx_client.py][02:36:01] [INFO] 401 Unauthorized
[okx_client.py][02:36:01] [ERROR] API请求失败: {"msg":"APIKey does not match current environment.","code":"50101"}
[place_order.py][02:36:01] [ERROR] 设置杠杆失败，错误信息：{"msg":"APIKey does not match current environment.","code":"50101"}
[auto_trader.py][02:36:01] [ERROR] 交易失败: {"msg":"APIKey does not match current environment.","code":"50101"}
[auto_trader.py][02:36:01] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '{"msg":"APIKey does not match current environment.","code":"50101"}', 'response': {'code': '401', 'msg': '{"msg":"APIKey does not match current environment.","code":"50101"}'}}
[auto_trader.py][02:36:36] [ERROR] 第1条交易指令的size字段格式错误: 231.34
[auto_trader.py][02:36:36] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][02:36:47] [ERROR] 第1条交易指令的size字段格式错误: 231.34
[auto_trader.py][02:36:47] [ERROR] 加载配置文件失败，自动化交易终止。
[auto_trader.py][02:36:58] [INFO] 执行第1条交易指令: {'operation_comment': '检测到存在与当前看涨判断冲突的未成交空头限价订单，为避免潜在风险并确保交易方向一致性，优先撤销该订单。', 'type': 'close', 'price': 2515.0, 'stop_loss': 'N/A', 'take_profit': 'N/A', 'size': 231.34, 'market': True, 'expected_winrate': 'N/A', 'expected_return': 'N/A', 'trade_RR_ratio': 'N/A', 'signal_strength': 'N/A', 'position_action': 'modify_order', 'risk_assessment': '撤销订单操作风险低，旨在规避潜在冲突。'}
[auto_trader.py][02:36:58] [INFO] 执行平仓操作
[_client.py][02:36:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:36:58] [ERROR] 获取订单列表过程中发生异常: list index out of range
[_client.py][02:36:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:36:59] [ERROR] 当前没有持仓
[auto_trader.py][02:36:59] [ERROR] 交易失败: 当前没有持仓
[auto_trader.py][02:36:59] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'error': '当前没有持仓', 'response': {'code': '0', 'data': [{'adl': '', 'availPos': '', 'avgPx': '', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '', 'bizRefId': '', 'bizRefType': '', 'cTime': '1749319513819', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '', 'fundingFee': '', 'gammaBS': '', 'gammaPA': '', 'idxPx': '', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '', 'lever': '', 'liab': '', 'liabCcy': '', 'liqPenalty': '', 'liqPx': '', 'margin': '', 'markPx': '', 'maxSpotInUseAmt': '', 'mgnMode': 'cross', 'mgnRatio': '', 'mmr': '0', 'nonSettleAvgPx': '', 'notionalUsd': '', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '', 'pos': '0', 'posCcy': '', 'posId': '2576652912609333248', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1049399960', 'uTime': '1749319652265', 'upl': '', 'uplLastPx': '', 'uplRatio': '', 'uplRatioLastPx': '', 'usdPx': '', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}}
[auto_trader.py][02:36:59] [INFO] 执行第2条交易指令: {'operation_comment': '在撤销冲突订单后，根据H4和H1的强劲看涨趋势，在回调至关键支撑位附近建立多头头寸，以获取更好的风险回报比。', 'type': 'buy', 'price': 2505.0, 'stop_loss': 2450.0, 'take_profit': [{'price': 2575.0, 'size': 0.33}, {'price': 2650.0, 'size': 0.33}, {'price': 2700.0, 'size': 0.34}], 'size': 42.61, 'market': False, 'expected_winrate': 0.8858, 'expected_return': 0.0222, 'trade_RR_ratio': 1.27, 'signal_strength': 0.75, 'risk_management_strategy': '单笔交易最大亏损不超过可用保证金的2%。如果价格突破关键阻力（如2525 USDT）并伴随放量，则将止损上移至新的支撑位（如2510 USDT），并考虑小幅加仓。如果价格回调至2500-2505 USDT区域并获得支撑（如出现看涨K线或缩量），则视为入场机会，止损保持不变。如果价格跌破止损位（2450 USDT），或出现放量滞涨并迅速回落，则立即止损，并考虑反手做空或离场观望。在美联储会议纪要公布前，考虑减半仓位或将止损上移至盈亏平衡点，以规避突发消息面的影响。如果出现交易所大规模资金外流或链上数据急剧恶化等黑天鹅事件，将立即平仓所有头寸并暂停交易。本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场中性情绪，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。', 'position_action': 'add_position', 'risk_assessment': '市场波动性较高，存在短期回调风险，但整体趋势偏多。需警惕价格未能有效突破2525 USDT阻力。严格执行止损，并关注资金费率和持仓量变化。'}
[auto_trader.py][02:36:59] [INFO] 执行加仓操作
[_client.py][02:36:59] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[place_order.py][02:36:59] [INFO] 设置杠杆成功：100倍
[_client.py][02:36:59] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[place_order.py][02:36:59] [INFO] 下单成功：方向=buy, 价格=2505.0, 数量=42.61, 交易模式=cross, 杠杆=100倍
[_client.py][02:37:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577618566212620288 "HTTP/2 200 OK"
[place_order.py][02:37:00] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][02:37:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577618566212620288 "HTTP/2 200 OK"
[place_order.py][02:37:02] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][02:37:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577618566212620288 "HTTP/2 200 OK"
[place_order.py][02:37:04] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][02:37:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577618566212620288 "HTTP/2 200 OK"
[place_order.py][02:37:06] [INFO] 等待订单成交，2.0秒后重试...
[_client.py][02:37:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/order?instId=ETH-USDT-SWAP&ordId=2577618566212620288 "HTTP/2 200 OK"
[place_order.py][02:37:09] [WARNING] 订单未完全成交，继续设置止盈止损
[_client.py][02:37:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:37:09] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][02:37:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:37:11] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][02:37:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:37:13] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][02:37:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[place_order.py][02:37:15] [INFO] 等待持仓确认，2.0秒后重试...
[_client.py][02:37:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instType=SWAP&instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[auto_trader.py][02:37:18] [INFO] 交易记录已保存，止盈止损状态: 未设置
[auto_trader.py][02:37:18] [ERROR] 交易执行失败或返回结果格式不正确: {'success': False, 'main_order': {'success': True, 'order_id': '2577618566212620288', 'response': {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2577618566212620288', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1749321419502'}], 'inTime': '1749321419501735', 'msg': '', 'outTime': '1749321419505003'}}, 'tp_sl_orders': {'success': False, 'error': '等待持仓确认超时', 'response': None}, 'message': '主订单：成功, 止盈止损：失败（等待持仓确认超时）'}
