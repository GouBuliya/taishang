[gemini_api_caller.py][01:26:50] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_011601.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107365.5,
        "volume": 87090.82,
        "RSI": 47.379614692315215,
        "MACD_macd": -39.69020167528652,
        "MACD_signal": -43.44304568760684,
        "ATR": 337.6737630193398,
        "ADX": 18.462801304442,
        "Stoch_K": 41.37553089464343,
        "Stoch_D": 45.83531574522102,
        "StochRSI_K": 36.56889368953379,
        "StochRSI_D": 44.438626949034955,
        "BB_upper": 107838.26093156639,
        "BB_lower": 106906.69906843363,
        "BB_middle": 107372.48000000001,
        "EMA5": 107382.145580206,
        "EMA21": 107443.21285739729,
        "EMA55": 107552.70174467214,
        "EMA144": 107432.40962166115,
        "EMA200": 107321.15344734555,
        "VWAP": 107662.22127799096
      }
    },
    "1h": {
      "indicators": {文
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:16:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304005748.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106648.1",
        "lastSz": "7.9",
        "askPx": "106648.1",
        "askSz": "1915.66",
        "bidPx": "106648",
        "bidSz": "233.29",
        "open24h": "107701",
        "high24h": "108869.7",
        "low24h": "106410.4",
        "volCcy24h": "108657.4354",
        "vol24h": "10865743.54",
        "ts": "1748538972810",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:16:13+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-154.82974999999965",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][01:26:56] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][01:29:37] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_011601.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107365.5,
        "volume": 87090.82,
        "RSI": 47.379614692315215,
        "MACD_macd": -39.69020167528652,
        "MACD_signal": -43.44304568760684,
        "ATR": 337.6737630193398,
        "ADX": 18.462801304442,
        "Stoch_K": 41.37553089464343,
        "Stoch_D": 45.83531574522102,
        "StochRSI_K": 36.56889368953379,
        "StochRSI_D": 44.438626949034955,
        "BB_upper": 107838.26093156639,
        "BB_lower": 106906.69906843363,
        "BB_middle": 107372.48000000001,
        "EMA5": 107382.145580206,
        "EMA21": 107443.21285739729,
        "EMA55": 107552.70174467214,
        "EMA144": 107432.40962166115,
        "EMA200": 107321.15344734555,
        "VWAP": 107662.22127799096
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:16:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304005748.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106648.1",
        "lastSz": "7.9",
        "askPx": "106648.1",
        "askSz": "1915.66",
        "bidPx": "106648",
        "bidSz": "233.29",
        "open24h": "107701",
        "high24h": "108869.7",
        "low24h": "106410.4",
        "volCcy24h": "108657.4354",
        "vol24h": "10865743.54",
        "ts": "1748538972810",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:16:13+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-154.82974999999965",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][01:29:46] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][01:30:15] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_011601.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107365.5,
        "volume": 87090.82,
        "RSI": 47.379614692315215,
        "MACD_macd": -39.69020167528652,
        "MACD_signal": -43.44304568760684,
        "ATR": 337.6737630193398,
        "ADX": 18.462801304442,
        "Stoch_K": 41.37553089464343,
        "Stoch_D": 45.83531574522102,
        "StochRSI_K": 36.56889368953379,
        "StochRSI_D": 44.438626949034955,
        "BB_upper": 107838.26093156639,
        "BB_lower": 106906.69906843363,
        "BB_middle": 107372.48000000001,
        "EMA5": 107382.145580206,
        "EMA21": 107443.21285739729,
        "EMA55": 107552.70174467214,
        "EMA144": 107432.40962166115,
        "EMA200": 107321.15344734555,
        "VWAP": 107662.22127799096
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:16:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304005748.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106648.1",
        "lastSz": "7.9",
        "askPx": "106648.1",
        "askSz": "1915.66",
        "bidPx": "106648",
        "bidSz": "233.29",
        "open24h": "107701",
        "high24h": "108869.7",
        "low24h": "106410.4",
        "volCcy24h": "108657.4354",
        "vol24h": "10865743.54",
        "ts": "1748538972810",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:16:13+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-154.82974999999965",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][01:30:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][01:32:36] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_011735.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2640.6,
        "volume": 419315.4,
        "RSI": 46.012223664292904,
        "MACD_macd": -6.603370366606214,
        "MACD_signal": -9.249820633157775,
        "ATR": 14.92223871060608,
        "ADX": 16.276133748663966,
        "Stoch_K": 49.222912966252416,
        "Stoch_D": 48.22069763310103,
        "StochRSI_K": 65.38499390112327,
        "StochRSI_D": 63.16074028748852,
        "BB_upper": 2661.8168934756445,
        "BB_lower": 2615.779106524355,
        "BB_middle": 2638.798,
        "EMA5": 2642.348337625029,
        "EMA21": 2646.8326423236476,
        "EMA55": 2666.2885929927133,
        "EMA144": 2671.7010754208436,
        "EMA200": 2668.442656467882,
        "VWAP": 2692.0593602200825
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.34,
        "volume": 1214177.5,
        "RSI": 35.35876948527117,
        "MACD_macd": -16.783298953734175,
        "MACD_signal": -14.44141999212464,
        "ATR": 23.486573807741912,
        "ADX": 40.26942036787627,
        "Stoch_K": 35.0801920523038,
        "Stoch_D": 31.869104777471403,
        "StochRSI_K": 33.097748594967,
        "StochRSI_D": 14.437441944275983,
        "BB_upper": 2594.419898878921,
        "BB_lower": 2488.0271011210793,
        "BB_middle": 2541.2235,
        "EMA5": 2512.119895065772,
        "EMA21": 2534.287958995169,
        "EMA55": 2566.588715404715,
        "EMA144": 2604.9742317272626,
        "EMA200": 2614.267529867119,
        "VWAP": 2630.7121373036784
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:17:40+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$621337869.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2640.43",
        "lastSz": "0.01",
        "askPx": "2640.44",
        "askSz": "919.33",
        "bidPx": "2640.43",
        "bidSz": "2184.28",
        "open24h": "2660.99",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5595548.532",
        "vol24h": "55955485.32",
        "ts": "1748539063013",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T17:17:43+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][01:37:21] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_011735.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2640.6,
        "volume": 419315.4,
        "RSI": 46.012223664292904,
        "MACD_macd": -6.603370366606214,
        "MACD_signal": -9.249820633157775,
        "ATR": 14.92223871060608,
        "ADX": 16.276133748663966,
        "Stoch_K": 49.222912966252416,
        "Stoch_D": 48.22069763310103,
        "StochRSI_K": 65.38499390112327,
        "StochRSI_D": 63.16074028748852,
        "BB_upper": 2661.8168934756445,
        "BB_lower": 2615.779106524355,
        "BB_middle": 2638.798,
        "EMA5": 2642.348337625029,
        "EMA21": 2646.8326423236476,
        "EMA55": 2666.2885929927133,
        "EMA144": 2671.7010754208436,
        "EMA200": 2668.442656467882,
        "VWAP": 2692.0593602200825
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.34,
        "volume": 1214177.5,
        "RSI": 35.35876948527117,
        "MACD_macd": -16.783298953734175,
        "MACD_signal": -14.44141999212464,
        "ATR": 23.486573807741912,
        "ADX": 40.26942036787627,
        "Stoch_K": 35.0801920523038,
        "Stoch_D": 31.869104777471403,
        "StochRSI_K": 33.097748594967,
        "StochRSI_D": 14.437441944275983,
        "BB_upper": 2594.419898878921,
        "BB_lower": 2488.0271011210793,
        "BB_middle": 2541.2235,
        "EMA5": 2512.119895065772,
        "EMA21": 2534.287958995169,
        "EMA55": 2566.588715404715,
        "EMA144": 2604.9742317272626,
        "EMA200": 2614.267529867119,
        "VWAP": 2630.7121373036784
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:17:40+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$621337869.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2640.43",
        "lastSz": "0.01",
        "askPx": "2640.44",
        "askSz": "919.33",
        "bidPx": "2640.43",
        "bidSz": "2184.28",
        "open24h": "2660.99",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5595548.532",
        "vol24h": "55955485.32",
        "ts": "1748539063013",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T17:17:43+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][01:37:28] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][01:45:01] [INFO] 截图模块运行中...
[数据收集总模块][01:45:02] [INFO] 截图模块运行中...
[截图模块][01:45:02] [INFO]  __main__ 入口被执行
[截图模块][01:45:02] [INFO]  启动时主动清理内存...
[截图模块][01:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:45:03] [INFO]  已执行 pkill chrome
[截图模块][01:45:04] [INFO]  __main__ 入口被执行
[截图模块][01:45:04] [INFO]  启动时主动清理内存...
[截图模块][01:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:45:04] [INFO]  已执行 pkill chrome
[截图模块][01:45:04] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'js'
[截图模块][01:45:05] [ERROR]  第2次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: '2024.7.12.235938'
[截图模块][01:45:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:45:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][01:45:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:45:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][01:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][01:45:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][01:45:10] [ERROR]  启动Chrome失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[截图模块][01:45:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:45:10] [INFO]  尝试用/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy覆盖/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:10] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'Default'
[截图模块][01:45:11] [INFO] 启动浏览器 (有头模式)
[截图模块][01:45:12] [ERROR]  第二次启动Chrome仍然失败: [('/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy/Default', '/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/Default', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/Default'")]
[数据收集总模块][01:45:12] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][01:45:12] [INFO] 技术指标模块运行中...
[截图模块][01:45:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[技术指标模块][01:45:13] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:45:14] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:45:14] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:45:14] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:45:14] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:45:15] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:45:15] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:45:15] [INFO] 宏观因子模块运行中...
[数据收集总模块][01:45:19] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:45:19] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:45:20] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][01:45:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:45:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:45:20] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][01:45:20] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:45:21] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107387.7,
        "volume": 57083.74,
        "RSI": 46.06878122819031,
        "MACD_macd": -13.808387386874529,
        "MACD_signal": -45.81448393599745,
        "ATR": 369.53292757542954,
        "ADX": 20.370158551938268,
        "Stoch_K": 61.90610328638525,
        "Stoch_D": 73.29890453834189,
        "StochRSI_K": 57.21976941148835,
        "StochRSI_D": 69.93901134895684,
        "BB_upper": 107841.97697898459,
        "BB_lower": 106925.64302101538,
        "BB_middle": 107383.80999999998,
        "EMA5": 107496.60255546345,
        "EMA21": 107478.21831993898,
        "EMA55": 107558.79066141676,
        "EMA144": 107298.88101827017,
        "EMA200": 107119.42249244278,
        "VWAP": 107618.90502037485
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:45:16+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$302229096.00000167 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106121",
        "lastSz": "0.9",
        "askPx": "106121",
        "askSz": "129.35",
        "bidPx": "106120.9",
        "bidSz": "1234.41",
        "open24h": "107422.9",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "111689.7056",
        "vol24h": "11168970.56",
        "ts": "1748540720654",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:45:21+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-242.43775000000036",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][01:45:22] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107387.7,
        "volume": 57083.74,
        "RSI": 46.06878122819031,
        "MACD_macd": -13.808387386874529,
        "MACD_signal": -45.81448393599745,
        "ATR": 369.53292757542954,
        "ADX": 20.370158551938268,
        "Stoch_K": 61.90610328638525,
        "Stoch_D": 73.29890453834189,
        "StochRSI_K": 57.21976941148835,
        "StochRSI_D": 69.93901134895684,
        "BB_upper": 107841.97697898459,
        "BB_lower": 106925.64302101538,
        "BB_middle": 107383.80999999998,
        "EMA5": 107496.60255546345,
        "EMA21": 107478.21831993898,
        "EMA55": 107558.79066141676,
        "EMA144": 107298.88101827017,
        "EMA200": 107119.42249244278,
        "VWAP": 107618.90502037485
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:45:16+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$302229096.00000167 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106121",
        "lastSz": "0.9",
        "askPx": "106121",
        "askSz": "129.35",
        "bidPx": "106120.9",
        "bidSz": "1234.41",
        "open24h": "107422.9",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "111689.7056",
        "vol24h": "11168970.56",
        "ts": "1748540720654",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:45:21+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-242.43775000000036",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][01:45:28] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][01:45:42] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:45:42] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:45:42] [INFO]  打开目标图表页...
[截图模块][01:45:43] [INFO]  等待5秒加载页面...
[截图模块][01:45:48] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:45:55] [INFO]  快捷键已发送
[截图模块][01:45:56] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][01:45:57] [WARNING]  第2次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][01:45:58] [WARNING]  第3次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][01:45:58] [ERROR]  连续3次未检测到刚刚下载的K线图片（请检查下载权限或快捷键是否生效）
[截图模块][01:45:58] [INFO]  关闭浏览器...
[截图模块][01:45:58] [ERROR] 截图失败
[数据收集总模块][01:45:58] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][01:45:58] [INFO] 技术指标模块运行中...
[技术指标模块][01:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:45:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:45:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:46:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:46:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:46:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][01:46:02] [INFO] 截图模块运行中...
[数据收集总模块][01:46:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:46:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:46:03] [INFO] instrument_id: BTC-USDT-SWAP
[截图模块][01:46:03] [INFO]  __main__ 入口被执行
[截图模块][01:46:03] [INFO]  启动时主动清理内存...
[截图模块][01:46:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:46:03] [INFO]  已执行 pkill chrome
[_client.py][01:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:46:04] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][01:46:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:46:04] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107387.7,
        "volume": 57083.74,
        "RSI": 46.06878122819031,
        "MACD_macd": -13.808387386874529,
        "MACD_signal": -45.81448393599745,
        "ATR": 369.53292757542954,
        "ADX": 20.370158551938268,
        "Stoch_K": 61.90610328638525,
        "Stoch_D": 73.29890453834189,
        "StochRSI_K": 57.21976941148835,
        "StochRSI_D": 69.93901134895684,
        "BB_upper": 107841.97697898459,
        "BB_lower": 106925.64302101538,
        "BB_middle": 107383.80999999998,
        "EMA5": 107496.60255546345,
        "EMA21": 107478.21831993898,
        "EMA55": 107558.79066141676,
        "EMA144": 107298.88101827017,
        "EMA200": 107119.42249244278,
        "VWAP": 107618.90502037485
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:46:01+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$303179726.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106221.9",
        "lastSz": "1.41",
        "askPx": "106222",
        "askSz": "415.84",
        "bidPx": "106221.9",
        "bidSz": "555.23",
        "open24h": "107418.9",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "111950.7957",
        "vol24h": "11195079.57",
        "ts": "1748540764318",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:46:04+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-221.56974999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][01:46:07] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107387.7,
        "volume": 57083.74,
        "RSI": 46.06878122819031,
        "MACD_macd": -13.808387386874529,
        "MACD_signal": -45.81448393599745,
        "ATR": 369.53292757542954,
        "ADX": 20.370158551938268,
        "Stoch_K": 61.90610328638525,
        "Stoch_D": 73.29890453834189,
        "StochRSI_K": 57.21976941148835,
        "StochRSI_D": 69.93901134895684,
        "BB_upper": 107841.97697898459,
        "BB_lower": 106925.64302101538,
        "BB_middle": 107383.80999999998,
        "EMA5": 107496.60255546345,
        "EMA21": 107478.21831993898,
        "EMA55": 107558.79066141676,
        "EMA144": 107298.88101827017,
        "EMA200": 107119.42249244278,
        "VWAP": 107618.90502037485
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107465.9,
        "volume": 283836.06,
        "RSI": 37.02515577084645,
        "MACD_macd": -592.3157582283893,
        "MACD_signal": -440.7920237541449,
        "ATR": 696.13412761916,
        "ADX": 49.412007635145756,
        "Stoch_K": 28.379283062503564,
        "Stoch_D": 21.410747976386002,
        "StochRSI_K": 65.66750276342138,
        "StochRSI_D": 37.10237839391554,
        "BB_upper": 110803.8982863074,
        "BB_lower": 106294.28171369259,
        "BB_middle": 108549.09,
        "EMA5": 107364.37085242735,
        "EMA21": 108231.00567313998,
        "EMA55": 108673.3710907496,
        "EMA144": 108255.68935338948,
        "EMA200": 107999.47622777012,
        "VWAP": 108593.54618688555
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:46:01+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$303179726.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106221.9",
        "lastSz": "1.41",
        "askPx": "106222",
        "askSz": "415.84",
        "bidPx": "106221.9",
        "bidSz": "555.23",
        "open24h": "107418.9",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "111950.7957",
        "vol24h": "11195079.57",
        "ts": "1748540764318",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T17:46:04+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-221.56974999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[截图模块][01:46:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][01:46:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:46:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][01:46:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][01:46:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][01:46:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][01:46:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:46:10] [INFO]  启动浏览器 (有头模式)
[截图模块][01:46:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[_client.py][01:46:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][01:46:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:46:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:46:44] [INFO]  打开目标图表页...
[截图模块][01:46:53] [INFO]  等待5秒加载页面...
[数据收集总模块][01:46:53] [INFO] 截图模块运行中...
[截图模块][01:46:54] [INFO]  __main__ 入口被执行
[截图模块][01:46:54] [INFO]  启动时主动清理内存...
[截图模块][01:46:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:46:55] [INFO]  已执行 pkill chrome
[截图模块][01:46:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][01:46:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][01:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][01:46:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][01:46:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][01:46:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:46:58] [ERROR]  快捷键发送失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[截图模块][01:46:58] [INFO]  关闭浏览器...
[截图模块][01:46:58] [ERROR] 截图失败
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:03] [INFO]  __main__ 入口被执行
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:03] [INFO]  启动时主动清理内存...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:03] [INFO]  已执行 pkill chrome
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:07] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:44] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:44] [INFO]  打开目标图表页...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:53] [INFO]  等待5秒加载页面...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [ERROR]  快捷键发送失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [INFO]  关闭浏览器...
[数据收集总模块][01:46:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [ERROR] 截图失败
[数据收集总模块][01:46:59] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][01:46:59] [INFO] 技术指标模块运行中...
[技术指标模块][01:47:00] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:47:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:47:00] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:47:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:47:00] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:47:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:47:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:01] [INFO] 宏观因子模块运行中...
[宏观因子模块][01:47:02] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][01:47:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:47:04] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][01:47:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:47:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:47:04] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][01:47:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:05] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2639.67,
        "volume": 130237.73,
        "RSI": 43.6819517290264,
        "MACD_macd": -6.642419152536604,
        "MACD_signal": -10.68548869003925,
        "ATR": 16.56274968707442,
        "ADX": 17.96205217362937,
        "Stoch_K": 51.08919030004152,
        "Stoch_D": 69.8330107953255,
        "StochRSI_K": 64.95610043438133,
        "StochRSI_D": 84.29137193184125,
        "BB_upper": 2662.446785723557,
        "BB_lower": 2615.998214276444,
        "BB_middle": 2639.2225000000003,
        "EMA5": 2646.518759656315,
        "EMA21": 2648.5391907076464,
        "EMA55": 2668.600909388404,
        "EMA144": 2674.701391646088,
        "EMA200": 2672.0767243573614,
        "VWAP": 2691.9644827170564
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.34,
        "volume": 1214177.5,
        "RSI": 35.35876948527117,
        "MACD_macd": -16.783298953734175,
        "MACD_signal": -14.44141999212464,
        "ATR": 23.486573807741912,
        "ADX": 40.26942036787627,
        "Stoch_K": 35.0801920523038,
        "Stoch_D": 31.869104777471403,
        "StochRSI_K": 33.097748594967,
        "StochRSI_D": 14.437441944275983,
        "BB_upper": 2594.419898878921,
        "BB_lower": 2488.0271011210793,
        "BB_middle": 2541.2235,
        "EMA5": 2512.119895065772,
        "EMA21": 2534.287958995169,
        "EMA55": 2566.588715404715,
        "EMA144": 2604.9742317272626,
        "EMA200": 2614.267529867119,
        "VWAP": 2630.7121373036784
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:47:02+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$614010968.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2663.71",
        "lastSz": "1.06",
        "askPx": "2663.72",
        "askSz": "1133.98",
        "bidPx": "2663.71",
        "bidSz": "229.78",
        "open24h": "2650.91",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5626261.264",
        "vol24h": "56262612.64",
        "ts": "1748540825111",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T17:47:05+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[截图模块][01:47:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:47:06] [INFO]  启动浏览器 (有头模式)
[截图模块][01:47:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[gemini_api_caller.py][01:47:09] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2639.67,
        "volume": 130237.73,
        "RSI": 43.6819517290264,
        "MACD_macd": -6.642419152536604,
        "MACD_signal": -10.68548869003925,
        "ATR": 16.56274968707442,
        "ADX": 17.96205217362937,
        "Stoch_K": 51.08919030004152,
        "Stoch_D": 69.8330107953255,
        "StochRSI_K": 64.95610043438133,
        "StochRSI_D": 84.29137193184125,
        "BB_upper": 2662.446785723557,
        "BB_lower": 2615.998214276444,
        "BB_middle": 2639.2225000000003,
        "EMA5": 2646.518759656315,
        "EMA21": 2648.5391907076464,
        "EMA55": 2668.600909388404,
        "EMA144": 2674.701391646088,
        "EMA200": 2672.0767243573614,
        "VWAP": 2691.9644827170564
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.34,
        "volume": 1214177.5,
        "RSI": 35.35876948527117,
        "MACD_macd": -16.783298953734175,
        "MACD_signal": -14.44141999212464,
        "ATR": 23.486573807741912,
        "ADX": 40.26942036787627,
        "Stoch_K": 35.0801920523038,
        "Stoch_D": 31.869104777471403,
        "StochRSI_K": 33.097748594967,
        "StochRSI_D": 14.437441944275983,
        "BB_upper": 2594.419898878921,
        "BB_lower": 2488.0271011210793,
        "BB_middle": 2541.2235,
        "EMA5": 2512.119895065772,
        "EMA21": 2534.287958995169,
        "EMA55": 2566.588715404715,
        "EMA144": 2604.9742317272626,
        "EMA200": 2614.267529867119,
        "VWAP": 2630.7121373036784
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:47:02+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$614010968.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2663.71",
        "lastSz": "1.06",
        "askPx": "2663.72",
        "askSz": "1133.98",
        "bidPx": "2663.71",
        "bidSz": "229.78",
        "open24h": "2650.91",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5626261.264",
        "vol24h": "56262612.64",
        "ts": "1748540825111",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T17:47:05+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[截图模块][01:47:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:47:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:47:17] [INFO]  打开目标图表页...
[_client.py][01:47:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][01:47:23] [INFO]  等待5秒加载页面...
[截图模块][01:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:47:28] [INFO]  快捷键已发送
[截图模块][01:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_014729.png
[截图模块][01:47:29] [INFO]  关闭浏览器...
[数据收集总模块][01:47:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_014729.png
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:54] [INFO]  __main__ 入口被执行
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:54] [INFO]  启动时主动清理内存...
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:55] [INFO]  已执行 pkill chrome
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:06] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:17] [INFO]  打开目标图表页...
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:23] [INFO]  等待5秒加载页面...
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:28] [INFO]  快捷键已发送
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_014729.png
[数据收集总模块][01:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:29] [INFO]  关闭浏览器...
[数据收集总模块][01:47:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_014729.png
[数据收集总模块][01:47:30] [INFO] 技术指标模块运行中...
[技术指标模块][01:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:47:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:47:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][01:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][01:47:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:47:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][01:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:47:35] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][01:47:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:35] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_014729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2639.67,
        "volume": 130237.73,
        "RSI": 43.6819517290264,
        "MACD_macd": -6.642419152536604,
        "MACD_signal": -10.68548869003925,
        "ATR": 16.56274968707442,
        "ADX": 17.96205217362937,
        "Stoch_K": 51.08919030004152,
        "Stoch_D": 69.8330107953255,
        "StochRSI_K": 64.95610043438133,
        "StochRSI_D": 84.29137193184125,
        "BB_upper": 2662.446785723557,
        "BB_lower": 2615.998214276444,
        "BB_middle": 2639.2225000000003,
        "EMA5": 2646.518759656315,
        "EMA21": 2648.5391907076464,
        "EMA55": 2668.600909388404,
        "EMA144": 2674.701391646088,
        "EMA200": 2672.0767243573614,
        "VWAP": 2691.9644827170564
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.34,
        "volume": 1214177.5,
        "RSI": 35.35876948527117,
        "MACD_macd": -16.783298953734175,
        "MACD_signal": -14.44141999212464,
        "ATR": 23.486573807741912,
        "ADX": 40.26942036787627,
        "Stoch_K": 35.0801920523038,
        "Stoch_D": 31.869104777471403,
        "StochRSI_K": 33.097748594967,
        "StochRSI_D": 14.437441944275983,
        "BB_upper": 2594.419898878921,
        "BB_lower": 2488.0271011210793,
        "BB_middle": 2541.2235,
        "EMA5": 2512.119895065772,
        "EMA21": 2534.287958995169,
        "EMA55": 2566.588715404715,
        "EMA144": 2604.9742317272626,
        "EMA200": 2614.267529867119,
        "VWAP": 2630.7121373036784
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:47:32+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$613186753.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2661.88",
        "lastSz": "4.6",
        "askPx": "2661.89",
        "askSz": "1997.57",
        "bidPx": "2661.88",
        "bidSz": "120.32",
        "open24h": "2650.91",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5629311.322",
        "vol24h": "56293113.22",
        "ts": "1748540855310",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T17:47:35+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][01:47:36] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_014729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2639.67,
        "volume": 130237.73,
        "RSI": 43.6819517290264,
        "MACD_macd": -6.642419152536604,
        "MACD_signal": -10.68548869003925,
        "ATR": 16.56274968707442,
        "ADX": 17.96205217362937,
        "Stoch_K": 51.08919030004152,
        "Stoch_D": 69.8330107953255,
        "StochRSI_K": 64.95610043438133,
        "StochRSI_D": 84.29137193184125,
        "BB_upper": 2662.446785723557,
        "BB_lower": 2615.998214276444,
        "BB_middle": 2639.2225000000003,
        "EMA5": 2646.518759656315,
        "EMA21": 2648.5391907076464,
        "EMA55": 2668.600909388404,
        "EMA144": 2674.701391646088,
        "EMA200": 2672.0767243573614,
        "VWAP": 2691.9644827170564
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.34,
        "volume": 1214177.5,
        "RSI": 35.35876948527117,
        "MACD_macd": -16.783298953734175,
        "MACD_signal": -14.44141999212464,
        "ATR": 23.486573807741912,
        "ADX": 40.26942036787627,
        "Stoch_K": 35.0801920523038,
        "Stoch_D": 31.869104777471403,
        "StochRSI_K": 33.097748594967,
        "StochRSI_D": 14.437441944275983,
        "BB_upper": 2594.419898878921,
        "BB_lower": 2488.0271011210793,
        "BB_middle": 2541.2235,
        "EMA5": 2512.119895065772,
        "EMA21": 2534.287958995169,
        "EMA55": 2566.588715404715,
        "EMA144": 2604.9742317272626,
        "EMA200": 2614.267529867119,
        "VWAP": 2630.7121373036784
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T01:47:32+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$613186753.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2661.88",
        "lastSz": "4.6",
        "askPx": "2661.89",
        "askSz": "1997.57",
        "bidPx": "2661.88",
        "bidSz": "120.32",
        "open24h": "2650.91",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5629311.322",
        "vol24h": "56293113.22",
        "ts": "1748540855310",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T17:47:35+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][01:47:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][02:00:01] [INFO] 截图模块运行中...
[截图模块][02:00:02] [INFO]  __main__ 入口被执行
[截图模块][02:00:02] [INFO]  启动时主动清理内存...
[截图模块][02:00:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:00:02] [INFO]  已执行 pkill chrome
[数据收集总模块][02:00:02] [INFO] 截图模块运行中...
[截图模块][02:00:04] [INFO]  __main__ 入口被执行
[截图模块][02:00:04] [INFO]  启动时主动清理内存...
[截图模块][02:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:00:04] [INFO]  已执行 pkill chrome
[截图模块][02:00:04] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'Cache_Data'
[截图模块][02:00:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:00:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:00:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:00:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:00:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:00:07] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:00:07] [INFO] 技术指标模块运行中...
[截图模块][02:00:08] [INFO] 启动浏览器 (有头模式)
[技术指标模块][02:00:10] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:00:10] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:00:10] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[截图模块][02:00:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[技术指标模块][02:00:10] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:00:10] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:00:11] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:00:11] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:00:11] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:00:16] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:00:16] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:00:17] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:00:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:00:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:00:17] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:00:17] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:00:18] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107589.3,
        "volume": 245383.59,
        "RSI": 54.73854820597571,
        "MACD_macd": -5.667972419265425,
        "MACD_signal": -53.93192324156807,
        "ATR": 360.8148780842157,
        "ADX": 21.415957540061505,
        "Stoch_K": 80.83568075117454,
        "Stoch_D": 73.68388106416357,
        "StochRSI_K": 78.0822855605805,
        "StochRSI_D": 71.1319341327668,
        "BB_upper": 107845.799140572,
        "BB_lower": 106927.73085942797,
        "BB_middle": 107386.76499999998,
        "EMA5": 107551.05383319518,
        "EMA21": 107487.28297139225,
        "EMA55": 107569.51380163585,
        "EMA144": 107338.24393629355,
        "EMA200": 107176.40096033768,
        "VWAP": 107585.43713360054
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:00:12+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304014595.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106284.2",
        "lastSz": "0.06",
        "askPx": "106284.2",
        "askSz": "739.73",
        "bidPx": "106284.1",
        "bidSz": "1151.38",
        "open24h": "107600",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "114495.226",
        "vol24h": "11449522.6",
        "ts": "1748541617420",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:00:18+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-195.9430000000007",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:00:19] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107589.3,
        "volume": 245383.59,
        "RSI": 54.73854820597571,
        "MACD_macd": -5.667972419265425,
        "MACD_signal": -53.93192324156807,
        "ATR": 360.8148780842157,
        "ADX": 21.415957540061505,
        "Stoch_K": 80.83568075117454,
        "Stoch_D": 73.68388106416357,
        "StochRSI_K": 78.0822855605805,
        "StochRSI_D": 71.1319341327668,
        "BB_upper": 107845.799140572,
        "BB_lower": 106927.73085942797,
        "BB_middle": 107386.76499999998,
        "EMA5": 107551.05383319518,
        "EMA21": 107487.28297139225,
        "EMA55": 107569.51380163585,
        "EMA144": 107338.24393629355,
        "EMA200": 107176.40096033768,
        "VWAP": 107585.43713360054
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:00:12+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304014595.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106284.2",
        "lastSz": "0.06",
        "askPx": "106284.2",
        "askSz": "739.73",
        "bidPx": "106284.1",
        "bidSz": "1151.38",
        "open24h": "107600",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "114495.226",
        "vol24h": "11449522.6",
        "ts": "1748541617420",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:00:18+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-195.9430000000007",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][02:00:25] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:00:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:00:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:00:45] [INFO]  打开目标图表页...
[截图模块][02:00:51] [INFO]  等待5秒加载页面...
[截图模块][02:00:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:00:57] [INFO]  快捷键已发送
[截图模块][02:00:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020058.png
[截图模块][02:00:58] [INFO]  关闭浏览器...
[数据收集总模块][02:00:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020058.png
[数据收集总模块][02:00:58] [INFO] 技术指标模块运行中...
[技术指标模块][02:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:00:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:00:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:01:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:01:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:01:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:01:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:01:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:01:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:01:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:01:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:01:03] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:01:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:01:04] [INFO] 截图模块运行中...
[数据收集总模块][02:01:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020058.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107589.3,
        "volume": 245383.59,
        "RSI": 54.73854820597571,
        "MACD_macd": -5.667972419265425,
        "MACD_signal": -53.93192324156807,
        "ATR": 360.8148780842157,
        "ADX": 21.415957540061505,
        "Stoch_K": 80.83568075117454,
        "Stoch_D": 73.68388106416357,
        "StochRSI_K": 78.0822855605805,
        "StochRSI_D": 71.1319341327668,
        "BB_upper": 107845.799140572,
        "BB_lower": 106927.73085942797,
        "BB_middle": 107386.76499999998,
        "EMA5": 107551.05383319518,
        "EMA21": 107487.28297139225,
        "EMA55": 107569.51380163585,
        "EMA144": 107338.24393629355,
        "EMA200": 107176.40096033768,
        "VWAP": 107585.43713360054
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:01:01+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304052535.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106291.9",
        "lastSz": "2.95",
        "askPx": "106291.9",
        "askSz": "581.84",
        "bidPx": "106291.8",
        "bidSz": "361.26",
        "open24h": "107602.9",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "114516.7302",
        "vol24h": "11451673.02",
        "ts": "1748541664109",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:01:04+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-196.77724999999967",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[截图模块][02:01:05] [INFO]  __main__ 入口被执行
[截图模块][02:01:05] [INFO]  启动时主动清理内存...
[截图模块][02:01:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:01:05] [INFO]  已执行 pkill chrome
[gemini_api_caller.py][02:01:05] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020058.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107589.3,
        "volume": 245383.59,
        "RSI": 54.73854820597571,
        "MACD_macd": -5.667972419265425,
        "MACD_signal": -53.93192324156807,
        "ATR": 360.8148780842157,
        "ADX": 21.415957540061505,
        "Stoch_K": 80.83568075117454,
        "Stoch_D": 73.68388106416357,
        "StochRSI_K": 78.0822855605805,
        "StochRSI_D": 71.1319341327668,
        "BB_upper": 107845.799140572,
        "BB_lower": 106927.73085942797,
        "BB_middle": 107386.76499999998,
        "EMA5": 107551.05383319518,
        "EMA21": 107487.28297139225,
        "EMA55": 107569.51380163585,
        "EMA144": 107338.24393629355,
        "EMA200": 107176.40096033768,
        "VWAP": 107585.43713360054
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:01:01+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304052535.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106291.9",
        "lastSz": "2.95",
        "askPx": "106291.9",
        "askSz": "581.84",
        "bidPx": "106291.8",
        "bidSz": "361.26",
        "open24h": "107602.9",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "114516.7302",
        "vol24h": "11451673.02",
        "ts": "1748541664109",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:01:04+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-196.77724999999967",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[截图模块][02:01:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:01:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:01:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:01:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:01:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:01:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:01:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:01:12] [INFO]  启动浏览器 (有头模式)
[截图模块][02:01:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[_client.py][02:01:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:01:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:01:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:01:46] [INFO]  打开目标图表页...
[截图模块][02:01:54] [INFO]  等待5秒加载页面...
[数据收集总模块][02:01:54] [INFO] 截图模块运行中...
[截图模块][02:01:55] [INFO]  __main__ 入口被执行
[截图模块][02:01:55] [INFO]  启动时主动清理内存...
[截图模块][02:01:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:01:55] [INFO]  已执行 pkill chrome
[截图模块][02:01:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:01:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:01:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:01:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:01:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:01:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:01:59] [ERROR]  快捷键发送失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[截图模块][02:01:59] [INFO]  关闭浏览器...
[截图模块][02:01:59] [ERROR] 截图失败
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:05] [INFO]  __main__ 入口被执行
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:05] [INFO]  启动时主动清理内存...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:05] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:05] [INFO]  已执行 pkill chrome
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:08] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:12] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:46] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:46] [INFO]  打开目标图表页...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:54] [INFO]  等待5秒加载页面...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:59] [ERROR]  快捷键发送失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:59] [INFO]  关闭浏览器...
[数据收集总模块][02:02:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:59] [ERROR] 截图失败
[数据收集总模块][02:02:00] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:02:00] [INFO] 技术指标模块运行中...
[截图模块][02:02:00] [INFO]  启动浏览器 (有头模式)
[截图模块][02:02:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[技术指标模块][02:02:02] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:02:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:02:02] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:02:03] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:02:03] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:02:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:02:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:03] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:02:04] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:02:06] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:06] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:02:07] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:02:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:02:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:02:07] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:02:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:08] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2652.34,
        "volume": 994189.72,
        "RSI": 57.33933691679858,
        "MACD_macd": -6.60223197050982,
        "MACD_signal": -11.702138444410808,
        "ATR": 16.324714097544668,
        "ADX": 19.312120002711254,
        "Stoch_K": 79.56298200514186,
        "Stoch_D": 78.40664574840771,
        "StochRSI_K": 94.3450764741487,
        "StochRSI_D": 90.07115648438884,
        "BB_upper": 2663.5527613317136,
        "BB_lower": 2615.990238668286,
        "BB_middle": 2639.7715,
        "EMA5": 2649.9431394844723,
        "EMA21": 2649.4267603300545,
        "EMA55": 2669.895024549707,
        "EMA144": 2677.2519383376607,
        "EMA200": 2675.430745127215,
        "VWAP": 2691.6631431048118
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:02:04+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "74/100",
      "open_interest": "$612065872.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2659.27",
        "lastSz": "0.3",
        "askPx": "2659.27",
        "askSz": "6.47",
        "bidPx": "2659.26",
        "bidSz": "1712.7",
        "open24h": "2653.29",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5661943.663",
        "vol24h": "56619436.63",
        "ts": "1748541727837",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:02:08+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:02:15] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2652.34,
        "volume": 994189.72,
        "RSI": 57.33933691679858,
        "MACD_macd": -6.60223197050982,
        "MACD_signal": -11.702138444410808,
        "ATR": 16.324714097544668,
        "ADX": 19.312120002711254,
        "Stoch_K": 79.56298200514186,
        "Stoch_D": 78.40664574840771,
        "StochRSI_K": 94.3450764741487,
        "StochRSI_D": 90.07115648438884,
        "BB_upper": 2663.5527613317136,
        "BB_lower": 2615.990238668286,
        "BB_middle": 2639.7715,
        "EMA5": 2649.9431394844723,
        "EMA21": 2649.4267603300545,
        "EMA55": 2669.895024549707,
        "EMA144": 2677.2519383376607,
        "EMA200": 2675.430745127215,
        "VWAP": 2691.6631431048118
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:02:04+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "74/100",
      "open_interest": "$612065872.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2659.27",
        "lastSz": "0.3",
        "askPx": "2659.27",
        "askSz": "6.47",
        "bidPx": "2659.26",
        "bidSz": "1712.7",
        "open24h": "2653.29",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5661943.663",
        "vol24h": "56619436.63",
        "ts": "1748541727837",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:02:08+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[截图模块][02:02:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:02:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:02:18] [INFO]  打开目标图表页...
[_client.py][02:02:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:02:24] [INFO]  等待5秒加载页面...
[截图模块][02:02:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:02:30] [INFO]  快捷键已发送
[截图模块][02:02:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020231.png
[截图模块][02:02:31] [INFO]  关闭浏览器...
[数据收集总模块][02:02:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020231.png
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:55] [INFO]  __main__ 入口被执行
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:55] [INFO]  启动时主动清理内存...
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:55] [INFO]  已执行 pkill chrome
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:01:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:18] [INFO]  打开目标图表页...
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:24] [INFO]  等待5秒加载页面...
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:30] [INFO]  快捷键已发送
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020231.png
[数据收集总模块][02:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:31] [INFO]  关闭浏览器...
[数据收集总模块][02:02:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020231.png
[数据收集总模块][02:02:31] [INFO] 技术指标模块运行中...
[技术指标模块][02:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:02:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:02:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:02:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:02:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:02:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:02:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:02:39] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:02:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:02:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:02:39] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:02:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020231.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2652.34,
        "volume": 994189.72,
        "RSI": 57.33933691679858,
        "MACD_macd": -6.60223197050982,
        "MACD_signal": -11.702138444410808,
        "ATR": 16.324714097544668,
        "ADX": 19.312120002711254,
        "Stoch_K": 79.56298200514186,
        "Stoch_D": 78.40664574840771,
        "StochRSI_K": 94.3450764741487,
        "StochRSI_D": 90.07115648438884,
        "BB_upper": 2663.5527613317136,
        "BB_lower": 2615.990238668286,
        "BB_middle": 2639.7715,
        "EMA5": 2649.9431394844723,
        "EMA21": 2649.4267603300545,
        "EMA55": 2669.895024549707,
        "EMA144": 2677.2519383376607,
        "EMA200": 2675.430745127215,
        "VWAP": 2691.6631431048118
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:02:33+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "74/100",
      "open_interest": "$611995624.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2657.97",
        "lastSz": "4.59",
        "askPx": "2657.98",
        "askSz": "1245.78",
        "bidPx": "2657.97",
        "bidSz": "821.56",
        "open24h": "2653.29",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5662237.212",
        "vol24h": "56622372.12",
        "ts": "1748541758914",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:02:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:02:40] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_020231.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2652.34,
        "volume": 994189.72,
        "RSI": 57.33933691679858,
        "MACD_macd": -6.60223197050982,
        "MACD_signal": -11.702138444410808,
        "ATR": 16.324714097544668,
        "ADX": 19.312120002711254,
        "Stoch_K": 79.56298200514186,
        "Stoch_D": 78.40664574840771,
        "StochRSI_K": 94.3450764741487,
        "StochRSI_D": 90.07115648438884,
        "BB_upper": 2663.5527613317136,
        "BB_lower": 2615.990238668286,
        "BB_middle": 2639.7715,
        "EMA5": 2649.9431394844723,
        "EMA21": 2649.4267603300545,
        "EMA55": 2669.895024549707,
        "EMA144": 2677.2519383376607,
        "EMA200": 2675.430745127215,
        "VWAP": 2691.6631431048118
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:02:33+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "74/100",
      "open_interest": "$611995624.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2657.97",
        "lastSz": "4.59",
        "askPx": "2657.98",
        "askSz": "1245.78",
        "bidPx": "2657.97",
        "bidSz": "821.56",
        "open24h": "2653.29",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5662237.212",
        "vol24h": "56622372.12",
        "ts": "1748541758914",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:02:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][02:02:48] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][02:15:01] [INFO] 截图模块运行中...
[截图模块][02:15:02] [INFO]  __main__ 入口被执行
[截图模块][02:15:02] [INFO]  启动时主动清理内存...
[数据收集总模块][02:15:02] [INFO] 截图模块运行中...
[截图模块][02:15:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:15:02] [INFO]  已执行 pkill chrome
[截图模块][02:15:03] [INFO]  __main__ 入口被执行
[截图模块][02:15:03] [INFO]  启动时主动清理内存...
[截图模块][02:15:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:15:03] [INFO]  已执行 pkill chrome
[截图模块][02:15:03] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'js'
[截图模块][02:15:04] [ERROR]  第2次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: '/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile'
[截图模块][02:15:04] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:15:04] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:15:04] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:15:04] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:15:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:15:06] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:15:06] [INFO] 技术指标模块运行中...
[截图模块][02:15:08] [INFO] 启动浏览器 (有头模式)
[技术指标模块][02:15:09] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[截图模块][02:15:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[技术指标模块][02:15:12] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:15:12] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:15:13] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:15:13] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:15:13] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:15:14] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:15:14] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:15:16] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:15:16] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:15:16] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:15:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:15:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:15:17] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:15:17] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:15:17] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107550.1,
        "volume": 80011.94,
        "RSI": 53.25611574613485,
        "MACD_macd": -15.713893209322123,
        "MACD_signal": -66.12306468424589,
        "ATR": 356.540064441989,
        "ADX": 23.03781827793707,
        "Stoch_K": 77.15492957746588,
        "Stoch_D": 74.732394366198,
        "StochRSI_K": 74.51508527268332,
        "StochRSI_D": 72.46808394308714,
        "BB_upper": 107822.32828320436,
        "BB_lower": 106919.41171679563,
        "BB_middle": 107370.87,
        "EMA5": 107531.93074979278,
        "EMA21": 107477.09510971613,
        "EMA55": 107573.51703343578,
        "EMA144": 107378.57407951058,
        "EMA200": 107236.68208790399,
        "VWAP": 107568.0974806581
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:15:14+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305352723.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106419.9",
        "lastSz": "0.01",
        "askPx": "106420",
        "askSz": "262.49",
        "bidPx": "106419.9",
        "bidSz": "1591.73",
        "open24h": "107793.3",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "115437.7856",
        "vol24h": "11543778.56",
        "ts": "1748542517510",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:15:17+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-181.39650000000034",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:15:19] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107550.1,
        "volume": 80011.94,
        "RSI": 53.25611574613485,
        "MACD_macd": -15.713893209322123,
        "MACD_signal": -66.12306468424589,
        "ATR": 356.540064441989,
        "ADX": 23.03781827793707,
        "Stoch_K": 77.15492957746588,
        "Stoch_D": 74.732394366198,
        "StochRSI_K": 74.51508527268332,
        "StochRSI_D": 72.46808394308714,
        "BB_upper": 107822.32828320436,
        "BB_lower": 106919.41171679563,
        "BB_middle": 107370.87,
        "EMA5": 107531.93074979278,
        "EMA21": 107477.09510971613,
        "EMA55": 107573.51703343578,
        "EMA144": 107378.57407951058,
        "EMA200": 107236.68208790399,
        "VWAP": 107568.0974806581
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:15:14+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305352723.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106419.9",
        "lastSz": "0.01",
        "askPx": "106420",
        "askSz": "262.49",
        "bidPx": "106419.9",
        "bidSz": "1591.73",
        "open24h": "107793.3",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "115437.7856",
        "vol24h": "11543778.56",
        "ts": "1748542517510",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:15:17+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-181.39650000000034",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][02:15:25] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:15:38] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:15:38] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:15:38] [INFO]  打开目标图表页...
[截图模块][02:15:39] [INFO]  等待5秒加载页面...
[截图模块][02:15:44] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:15:52] [INFO]  快捷键已发送
[截图模块][02:15:53] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][02:15:54] [WARNING]  第2次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][02:15:55] [WARNING]  第3次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][02:15:55] [ERROR]  连续3次未检测到刚刚下载的K线图片（请检查下载权限或快捷键是否生效）
[截图模块][02:15:55] [INFO]  关闭浏览器...
[截图模块][02:15:55] [ERROR] 截图失败
[数据收集总模块][02:15:55] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:15:55] [INFO] 技术指标模块运行中...
[技术指标模块][02:15:56] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:15:56] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:15:56] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:15:57] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:15:57] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:15:57] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:15:57] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:15:57] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:16:00] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:16:00] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:16:00] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:16:04] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:16:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:16:04] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107550.1,
        "volume": 80011.94,
        "RSI": 53.25611574613485,
        "MACD_macd": -15.713893209322123,
        "MACD_signal": -66.12306468424589,
        "ATR": 356.540064441989,
        "ADX": 23.03781827793707,
        "Stoch_K": 77.15492957746588,
        "Stoch_D": 74.732394366198,
        "StochRSI_K": 74.51508527268332,
        "StochRSI_D": 72.46808394308714,
        "BB_upper": 107822.32828320436,
        "BB_lower": 106919.41171679563,
        "BB_middle": 107370.87,
        "EMA5": 107531.93074979278,
        "EMA21": 107477.09510971613,
        "EMA55": 107573.51703343578,
        "EMA144": 107378.57407951058,
        "EMA200": 107236.68208790399,
        "VWAP": 107568.0974806581
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:15:58+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305312998.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106451.7",
        "lastSz": "0.6",
        "askPx": "106451.8",
        "askSz": "436.72",
        "bidPx": "106451.7",
        "bidSz": "525.3",
        "open24h": "107716.3",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "115407.3938",
        "vol24h": "11540739.38",
        "ts": "1748542564077",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:16:04+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-178.75275000000033",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:16:05] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107550.1,
        "volume": 80011.94,
        "RSI": 53.25611574613485,
        "MACD_macd": -15.713893209322123,
        "MACD_signal": -66.12306468424589,
        "ATR": 356.540064441989,
        "ADX": 23.03781827793707,
        "Stoch_K": 77.15492957746588,
        "Stoch_D": 74.732394366198,
        "StochRSI_K": 74.51508527268332,
        "StochRSI_D": 72.46808394308714,
        "BB_upper": 107822.32828320436,
        "BB_lower": 106919.41171679563,
        "BB_middle": 107370.87,
        "EMA5": 107531.93074979278,
        "EMA21": 107477.09510971613,
        "EMA55": 107573.51703343578,
        "EMA144": 107378.57407951058,
        "EMA200": 107236.68208790399,
        "VWAP": 107568.0974806581
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:15:58+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305312998.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106451.7",
        "lastSz": "0.6",
        "askPx": "106451.8",
        "askSz": "436.72",
        "bidPx": "106451.7",
        "bidSz": "525.3",
        "open24h": "107716.3",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "115407.3938",
        "vol24h": "11540739.38",
        "ts": "1748542564077",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:16:04+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-178.75275000000033",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[数据收集总模块][02:16:08] [INFO] 截图模块运行中...
[截图模块][02:16:09] [INFO]  __main__ 入口被执行
[截图模块][02:16:09] [INFO]  启动时主动清理内存...
[截图模块][02:16:09] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:16:09] [INFO]  已执行 pkill chrome
[截图模块][02:16:11] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:16:11] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:16:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:16:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:16:11] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:16:11] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[_client.py][02:16:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:16:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:16:14] [INFO]  启动浏览器 (有头模式)
[截图模块][02:16:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:16:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:16:48] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:16:48] [INFO]  打开目标图表页...
[截图模块][02:16:55] [INFO]  等待5秒加载页面...
[数据收集总模块][02:16:56] [INFO] 截图模块运行中...
[截图模块][02:16:58] [INFO]  __main__ 入口被执行
[截图模块][02:16:58] [INFO]  启动时主动清理内存...
[截图模块][02:16:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:16:58] [INFO]  已执行 pkill chrome
[截图模块][02:17:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:17:00] [ERROR]  快捷键发送失败: Message: invalid session id: session deleted as the browser has closed the connection
from disconnected: not connected to DevTools
  (Session info: chrome=136.0.7103.113)
Stacktrace:
#0 0x56303c65471a <unknown>
#1 0x56303c0f70a0 <unknown>
#2 0x56303c0dd8ae <unknown>
#3 0x56303c105be9 <unknown>
#4 0x56303c176cef <unknown>
#5 0x56303c193c3c <unknown>
#6 0x56303c16e173 <unknown>
#7 0x56303c13ad4b <unknown>
#8 0x56303c13b9b1 <unknown>
#9 0x56303c6198cb <unknown>
#10 0x56303c61d7ca <unknown>
#11 0x56303c601622 <unknown>
#12 0x56303c61e354 <unknown>
#13 0x56303c5e645f <unknown>
#14 0x56303c6424f8 <unknown>
#15 0x56303c6426d6 <unknown>
#16 0x56303c653586 <unknown>
#17 0x7fb254ddb3fb start_thread

[截图模块][02:17:00] [INFO]  关闭浏览器...
[截图模块][02:17:00] [ERROR] 截图失败
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:09] [INFO]  __main__ 入口被执行
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:09] [INFO]  启动时主动清理内存...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:09] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:09] [INFO]  已执行 pkill chrome
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:11] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:11] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:11] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:11] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:14] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:48] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:48] [INFO]  打开目标图表页...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:55] [INFO]  等待5秒加载页面...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [ERROR]  快捷键发送失败: Message: invalid session id: session deleted as the browser has closed the connection
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] from disconnected: not connected to DevTools
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr]   (Session info: chrome=136.0.7103.113)
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] Stacktrace:
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #0 0x56303c65471a <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #1 0x56303c0f70a0 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #2 0x56303c0dd8ae <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #3 0x56303c105be9 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #4 0x56303c176cef <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #5 0x56303c193c3c <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #6 0x56303c16e173 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #7 0x56303c13ad4b <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #8 0x56303c13b9b1 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #9 0x56303c6198cb <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #10 0x56303c61d7ca <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #11 0x56303c601622 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #12 0x56303c61e354 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #13 0x56303c5e645f <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #14 0x56303c6424f8 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #15 0x56303c6426d6 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #16 0x56303c653586 <unknown>
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] #17 0x7fb254ddb3fb start_thread
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] 
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  关闭浏览器...
[数据收集总模块][02:17:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [ERROR] 截图失败
[数据收集总模块][02:17:00] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:17:00] [INFO] 技术指标模块运行中...
[截图模块][02:17:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:17:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:17:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:17:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[技术指标模块][02:17:01] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[截图模块][02:17:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[技术指标模块][02:17:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:17:02] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:17:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:17:02] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[截图模块][02:17:03] [INFO]  启动浏览器 (有头模式)
[截图模块][02:17:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[技术指标模块][02:17:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:17:04] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:04] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:17:05] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:17:06] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:06] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:17:08] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:17:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:17:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:17:08] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:17:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:09] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.95,
        "volume": 498473.34,
        "RSI": 56.980512491790385,
        "MACD_macd": -7.745397998201497,
        "MACD_signal": -12.98473688217011,
        "ATR": 15.499282319912584,
        "ADX": 21.46441436032611,
        "Stoch_K": 78.8468600807931,
        "Stoch_D": 81.35055313960497,
        "StochRSI_K": 93.57295885067015,
        "StochRSI_D": 90.25921689661482,
        "BB_upper": 2662.627042628816,
        "BB_lower": 2616.2199573711837,
        "BB_middle": 2639.4235,
        "EMA5": 2648.7447092267084,
        "EMA21": 2649.1362792864165,
        "EMA55": 2670.833634691628,
        "EMA144": 2680.2702841708974,
        "EMA200": 2679.586630402518,
        "VWAP": 2692.1723210846667
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:17:05+08:00",
    "factors": {
      "funding_rate": "0.0088%",
      "FGI": "74/100",
      "open_interest": "$612541924.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2666.24",
        "lastSz": "2.54",
        "askPx": "2666.25",
        "askSz": "164.71",
        "bidPx": "2666.24",
        "bidSz": "4811.37",
        "open24h": "2654.71",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5684143.324",
        "vol24h": "56841433.24",
        "ts": "1748542628408",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:17:09+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:17:15] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.95,
        "volume": 498473.34,
        "RSI": 56.980512491790385,
        "MACD_macd": -7.745397998201497,
        "MACD_signal": -12.98473688217011,
        "ATR": 15.499282319912584,
        "ADX": 21.46441436032611,
        "Stoch_K": 78.8468600807931,
        "Stoch_D": 81.35055313960497,
        "StochRSI_K": 93.57295885067015,
        "StochRSI_D": 90.25921689661482,
        "BB_upper": 2662.627042628816,
        "BB_lower": 2616.2199573711837,
        "BB_middle": 2639.4235,
        "EMA5": 2648.7447092267084,
        "EMA21": 2649.1362792864165,
        "EMA55": 2670.833634691628,
        "EMA144": 2680.2702841708974,
        "EMA200": 2679.586630402518,
        "VWAP": 2692.1723210846667
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:17:05+08:00",
    "factors": {
      "funding_rate": "0.0088%",
      "FGI": "74/100",
      "open_interest": "$612541924.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2666.24",
        "lastSz": "2.54",
        "askPx": "2666.25",
        "askSz": "164.71",
        "bidPx": "2666.24",
        "bidSz": "4811.37",
        "open24h": "2654.71",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5684143.324",
        "vol24h": "56841433.24",
        "ts": "1748542628408",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:17:09+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[截图模块][02:17:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:17:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:17:17] [INFO]  打开目标图表页...
[截图模块][02:17:24] [INFO]  等待5秒加载页面...
[_client.py][02:17:27] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:17:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:17:29] [INFO]  快捷键已发送
[截图模块][02:17:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_021731.png
[截图模块][02:17:31] [INFO]  关闭浏览器...
[数据收集总模块][02:17:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_021731.png
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:58] [INFO]  __main__ 入口被执行
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:58] [INFO]  启动时主动清理内存...
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:58] [INFO]  已执行 pkill chrome
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:17] [INFO]  打开目标图表页...
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:24] [INFO]  等待5秒加载页面...
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:29] [INFO]  快捷键已发送
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_021731.png
[数据收集总模块][02:17:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:31] [INFO]  关闭浏览器...
[数据收集总模块][02:17:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_021731.png
[数据收集总模块][02:17:31] [INFO] 技术指标模块运行中...
[技术指标模块][02:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:17:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:17:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:17:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:17:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:17:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:17:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:17:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:17:35] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:35] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:17:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:17:36] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:17:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_021731.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.95,
        "volume": 498473.34,
        "RSI": 56.980512491790385,
        "MACD_macd": -7.745397998201497,
        "MACD_signal": -12.98473688217011,
        "ATR": 15.499282319912584,
        "ADX": 21.46441436032611,
        "Stoch_K": 78.8468600807931,
        "Stoch_D": 81.35055313960497,
        "StochRSI_K": 93.57295885067015,
        "StochRSI_D": 90.25921689661482,
        "BB_upper": 2662.627042628816,
        "BB_lower": 2616.2199573711837,
        "BB_middle": 2639.4235,
        "EMA5": 2648.7447092267084,
        "EMA21": 2649.1362792864165,
        "EMA55": 2670.833634691628,
        "EMA144": 2680.2702841708974,
        "EMA200": 2679.586630402518,
        "VWAP": 2692.1723210846667
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:17:33+08:00",
    "factors": {
      "funding_rate": "0.0087%",
      "FGI": "74/100",
      "open_interest": "$612925524.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2666.26",
        "lastSz": "0.01",
        "askPx": "2666.27",
        "askSz": "196.54",
        "bidPx": "2666.26",
        "bidSz": "2777.06",
        "open24h": "2654.71",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5685667.821",
        "vol24h": "56856678.21",
        "ts": "1748542655610",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:17:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:17:37] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_021731.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.95,
        "volume": 498473.34,
        "RSI": 56.980512491790385,
        "MACD_macd": -7.745397998201497,
        "MACD_signal": -12.98473688217011,
        "ATR": 15.499282319912584,
        "ADX": 21.46441436032611,
        "Stoch_K": 78.8468600807931,
        "Stoch_D": 81.35055313960497,
        "StochRSI_K": 93.57295885067015,
        "StochRSI_D": 90.25921689661482,
        "BB_upper": 2662.627042628816,
        "BB_lower": 2616.2199573711837,
        "BB_middle": 2639.4235,
        "EMA5": 2648.7447092267084,
        "EMA21": 2649.1362792864165,
        "EMA55": 2670.833634691628,
        "EMA144": 2680.2702841708974,
        "EMA200": 2679.586630402518,
        "VWAP": 2692.1723210846667
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:17:33+08:00",
    "factors": {
      "funding_rate": "0.0087%",
      "FGI": "74/100",
      "open_interest": "$612925524.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2666.26",
        "lastSz": "0.01",
        "askPx": "2666.27",
        "askSz": "196.54",
        "bidPx": "2666.26",
        "bidSz": "2777.06",
        "open24h": "2654.71",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5685667.821",
        "vol24h": "56856678.21",
        "ts": "1748542655610",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:17:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][02:17:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][02:30:01] [INFO] 截图模块运行中...
[数据收集总模块][02:30:02] [INFO] 截图模块运行中...
[截图模块][02:30:02] [INFO]  __main__ 入口被执行
[截图模块][02:30:02] [INFO]  启动时主动清理内存...
[截图模块][02:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:30:03] [INFO]  已执行 pkill chrome
[截图模块][02:30:03] [INFO]  __main__ 入口被执行
[截图模块][02:30:03] [INFO]  启动时主动清理内存...
[截图模块][02:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:30:03] [INFO]  已执行 pkill chrome
[截图模块][02:30:03] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'js'
[截图模块][02:30:04] [ERROR]  第2次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'Cache_Data'
[截图模块][02:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:30:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:30:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][02:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][02:30:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:30:09] [ERROR]  启动Chrome失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[截图模块][02:30:09] [INFO]  尝试用/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy覆盖/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:09] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'Default'
[截图模块][02:30:11] [INFO]  覆盖完成，重试启动Chrome...
[截图模块][02:30:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:30:12] [ERROR]  第二次启动Chrome仍然失败: you cannot reuse the ChromeOptions object
[数据收集总模块][02:30:12] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:30:12] [INFO] 技术指标模块运行中...
[技术指标模块][02:30:13] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:30:13] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:30:13] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:30:14] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:30:14] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:30:14] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:30:14] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:30:14] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:30:17] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:30:17] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:30:17] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:30:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:30:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:30:18] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:30:18] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:30:18] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107400.0,
        "volume": 74405.15,
        "RSI": 47.555949901420846,
        "MACD_macd": -24.155077734554652,
        "MACD_signal": -78.63621979904732,
        "ATR": 352.65387076187005,
        "ADX": 22.90639132717826,
        "Stoch_K": 63.06103286385031,
        "Stoch_D": 81.64632237871739,
        "StochRSI_K": 60.79846388826038,
        "StochRSI_D": 80.42909648938856,
        "BB_upper": 107802.70695758046,
        "BB_lower": 106904.02304241952,
        "BB_middle": 107353.36499999999,
        "EMA5": 107522.84612468917,
        "EMA21": 107469.78476263523,
        "EMA55": 107571.01118988477,
        "EMA144": 107344.95011570788,
        "EMA200": 107187.6428163923,
        "VWAP": 107554.35593060857
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:30:15+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304640465.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106332",
        "lastSz": "0.32",
        "askPx": "106333.9",
        "askSz": "523.04",
        "bidPx": "106333.8",
        "bidSz": "581.8",
        "open24h": "107488.8",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116124.8246",
        "vol24h": "11612482.46",
        "ts": "1748543417414",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:30:18+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-191.91275000000036",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:30:19] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107400.0,
        "volume": 74405.15,
        "RSI": 47.555949901420846,
        "MACD_macd": -24.155077734554652,
        "MACD_signal": -78.63621979904732,
        "ATR": 352.65387076187005,
        "ADX": 22.90639132717826,
        "Stoch_K": 63.06103286385031,
        "Stoch_D": 81.64632237871739,
        "StochRSI_K": 60.79846388826038,
        "StochRSI_D": 80.42909648938856,
        "BB_upper": 107802.70695758046,
        "BB_lower": 106904.02304241952,
        "BB_middle": 107353.36499999999,
        "EMA5": 107522.84612468917,
        "EMA21": 107469.78476263523,
        "EMA55": 107571.01118988477,
        "EMA144": 107344.95011570788,
        "EMA200": 107187.6428163923,
        "VWAP": 107554.35593060857
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:30:15+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304640465.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106332",
        "lastSz": "0.32",
        "askPx": "106333.9",
        "askSz": "523.04",
        "bidPx": "106333.8",
        "bidSz": "581.8",
        "open24h": "107488.8",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116124.8246",
        "vol24h": "11612482.46",
        "ts": "1748543417414",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:30:18+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-191.91275000000036",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][02:30:25] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][02:31:04] [INFO] 截图模块运行中...
[截图模块][02:31:04] [INFO]  __main__ 入口被执行
[截图模块][02:31:04] [INFO]  启动时主动清理内存...
[截图模块][02:31:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:31:05] [INFO]  已执行 pkill chrome
[截图模块][02:31:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:31:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:31:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:31:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:31:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:31:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:31:09] [ERROR]  启动Chrome失败: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
[截图模块][02:31:09] [INFO]  尝试用/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy覆盖/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:31:11] [INFO]  覆盖完成，重试启动Chrome...
[截图模块][02:31:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:31:12] [ERROR]  第二次启动Chrome仍然失败: you cannot reuse the ChromeOptions object
[数据收集总模块][02:31:12] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:31:12] [INFO] 技术指标模块运行中...
[截图模块][02:31:13] [ERROR]  启动Chrome失败: <urlopen error EOF occurred in violation of protocol (_ssl.c:1007)>
[截图模块][02:31:13] [INFO]  尝试用/root/codespace/Qwen_quant_v1/code/chrome_profile_copy覆盖/root/codespace/Qwen_quant_v1/code/chrome_profile
[技术指标模块][02:31:13] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[截图模块][02:31:13] [INFO]  覆盖完成，重试启动Chrome...
[技术指标模块][02:31:14] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:31:14] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:31:14] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:31:14] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:31:14] [INFO] 成功获取并处理 4h 周期的数据。
[截图模块][02:31:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:31:15] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:31:15] [INFO] 宏观因子模块运行中...
[截图模块][02:31:17] [INFO]  启动浏览器 (有头模式)
[截图模块][02:31:17] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:31:18] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:31:18] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:31:18] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:31:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:31:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:31:19] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:31:19] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:31:19] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107400.0,
        "volume": 74405.15,
        "RSI": 47.555949901420846,
        "MACD_macd": -24.155077734554652,
        "MACD_signal": -78.63621979904732,
        "ATR": 352.65387076187005,
        "ADX": 22.90639132717826,
        "Stoch_K": 63.06103286385031,
        "Stoch_D": 81.64632237871739,
        "StochRSI_K": 60.79846388826038,
        "StochRSI_D": 80.42909648938856,
        "BB_upper": 107802.70695758046,
        "BB_lower": 106904.02304241952,
        "BB_middle": 107353.36499999999,
        "EMA5": 107522.84612468917,
        "EMA21": 107469.78476263523,
        "EMA55": 107571.01118988477,
        "EMA144": 107344.95011570788,
        "EMA200": 107187.6428163923,
        "VWAP": 107554.35593060857
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:31:16+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304628750.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106438.5",
        "lastSz": "0.23",
        "askPx": "106438.5",
        "askSz": "335.84",
        "bidPx": "106438.4",
        "bidSz": "2124.08",
        "open24h": "107478.6",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116129.8624",
        "vol24h": "11612986.24",
        "ts": "1748543479715",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:31:19+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-180.73849999999968",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:31:21] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107400.0,
        "volume": 74405.15,
        "RSI": 47.555949901420846,
        "MACD_macd": -24.155077734554652,
        "MACD_signal": -78.63621979904732,
        "ATR": 352.65387076187005,
        "ADX": 22.90639132717826,
        "Stoch_K": 63.06103286385031,
        "Stoch_D": 81.64632237871739,
        "StochRSI_K": 60.79846388826038,
        "StochRSI_D": 80.42909648938856,
        "BB_upper": 107802.70695758046,
        "BB_lower": 106904.02304241952,
        "BB_middle": 107353.36499999999,
        "EMA5": 107522.84612468917,
        "EMA21": 107469.78476263523,
        "EMA55": 107571.01118988477,
        "EMA144": 107344.95011570788,
        "EMA200": 107187.6428163923,
        "VWAP": 107554.35593060857
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:31:16+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304628750.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106438.5",
        "lastSz": "0.23",
        "askPx": "106438.5",
        "askSz": "335.84",
        "bidPx": "106438.4",
        "bidSz": "2124.08",
        "open24h": "107478.6",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116129.8624",
        "vol24h": "11612986.24",
        "ts": "1748543479715",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:31:19+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-180.73849999999968",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][02:31:28] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:31:50] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:31:50] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:31:50] [INFO]  打开目标图表页...
[截图模块][02:31:56] [INFO]  等待5秒加载页面...
[截图模块][02:32:01] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:32:02] [INFO]  快捷键已发送
[截图模块][02:32:03] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023203.png
[截图模块][02:32:03] [INFO]  关闭浏览器...
[数据收集总模块][02:32:04] [INFO] 截图模块运行中...
[数据收集总模块][02:32:04] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023203.png
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:04] [INFO]  __main__ 入口被执行
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:04] [INFO]  启动时主动清理内存...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:05] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:05] [INFO]  已执行 pkill chrome
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:07] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:13] [ERROR]  启动Chrome失败: <urlopen error EOF occurred in violation of protocol (_ssl.c:1007)>
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] Traceback (most recent call last):
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 1348, in do_open
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     h.request(req.get_method(), req.selector, req.data, headers,
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/http/client.py", line 1283, in request
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self._send_request(method, url, body, headers, encode_chunked)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/http/client.py", line 1329, in _send_request
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.endheaders(body, encode_chunked=encode_chunked)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/http/client.py", line 1278, in endheaders
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self._send_output(message_body, encode_chunked=encode_chunked)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/http/client.py", line 1038, in _send_output
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.send(msg)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/http/client.py", line 976, in send
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.connect()
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/http/client.py", line 1455, in connect
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.sock = self._context.wrap_socket(self.sock,
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/ssl.py", line 513, in wrap_socket
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     return self.sslsocket_class._create(
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/ssl.py", line 1104, in _create
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.do_handshake()
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/ssl.py", line 1375, in do_handshake
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self._sslobj.do_handshake()
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] ssl.SSLEOFError: EOF occurred in violation of protocol (_ssl.c:1007)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] 
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] During handling of the above exception, another exception occurred:
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] 
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] Traceback (most recent call last):
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/code/tradingview_auto_screenshot.py", line 112, in create_driver
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     driver = uc.Chrome(options=chrome_options, headless=headless, version_main=136)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/__init__.py", line 258, in __init__
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.patcher.auto()
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/patcher.py", line 175, in auto
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     release = self.fetch_release_number()
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/patcher.py", line 259, in fetch_release_number
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     with urlopen(self.url_repo + path) as conn:
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 216, in urlopen
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     return opener.open(url, data, timeout)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 519, in open
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     response = self._open(req, data)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 536, in _open
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     result = self._call_chain(self.handle_open, protocol, protocol +
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 496, in _call_chain
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     result = func(*args)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 1391, in https_open
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     return self.do_open(http.client.HTTPSConnection, req,
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/urllib/request.py", line 1351, in do_open
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr]     raise URLError(err)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] urllib.error.URLError: <urlopen error EOF occurred in violation of protocol (_ssl.c:1007)>
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:13] [INFO]  尝试用/root/codespace/Qwen_quant_v1/code/chrome_profile_copy覆盖/root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:13] [INFO]  覆盖完成，重试启动Chrome...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:17] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:17] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:50] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:50] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:50] [INFO]  打开目标图表页...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:31:56] [INFO]  等待5秒加载页面...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:01] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:02] [INFO]  快捷键已发送
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:03] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023203.png
[数据收集总模块][02:32:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:03] [INFO]  关闭浏览器...
[数据收集总模块][02:32:04] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023203.png
[数据收集总模块][02:32:04] [INFO] 技术指标模块运行中...
[技术指标模块][02:32:05] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[截图模块][02:32:05] [INFO]  __main__ 入口被执行
[截图模块][02:32:05] [INFO]  启动时主动清理内存...
[截图模块][02:32:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:32:05] [INFO]  已执行 pkill chrome
[技术指标模块][02:32:05] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:32:05] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:32:06] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:32:06] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:32:06] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:32:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:32:07] [INFO] 宏观因子模块运行中...
[截图模块][02:32:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:32:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:32:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:32:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:32:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:32:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[宏观因子模块][02:32:08] [INFO] [macro_factor_collector]  开始采集宏观因子...
[截图模块][02:32:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:32:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:32:10] [INFO] OKX 持仓模块运行中...
[截图模块][02:32:11] [INFO]  启动浏览器 (有头模式)
[截图模块][02:32:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[get_positions.py][02:32:12] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:32:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:32:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:32:12] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:32:12] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:32:13] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023203.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2646.14,
        "volume": 312209.66,
        "RSI": 51.739732953321386,
        "MACD_macd": -9.039247830237855,
        "MACD_signal": -14.284647359303994,
        "ATR": 15.19609616502421,
        "ADX": 20.83632302687587,
        "Stoch_K": 76.81009515928815,
        "Stoch_D": 86.08467797545137,
        "StochRSI_K": 82.29541942912459,
        "StochRSI_D": 92.40155174304597,
        "BB_upper": 2661.197368272949,
        "BB_lower": 2616.3136317270514,
        "BB_middle": 2638.7555,
        "EMA5": 2647.1420638400623,
        "EMA21": 2648.853809658605,
        "EMA55": 2671.15747642393,
        "EMA144": 2677.1899044634456,
        "EMA200": 2674.755248131577,
        "VWAP": 2692.239004620141
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:32:08+08:00",
    "factors": {
      "funding_rate": "0.0082%",
      "FGI": "74/100",
      "open_interest": "$609010859.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2657.95",
        "lastSz": "0.04",
        "askPx": "2657.95",
        "askSz": "1398.26",
        "bidPx": "2657.94",
        "bidSz": "128.83",
        "open24h": "2644.05",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5708667.777",
        "vol24h": "57086677.77",
        "ts": "1748543532616",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:32:13+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:32:14] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023203.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2646.14,
        "volume": 312209.66,
        "RSI": 51.739732953321386,
        "MACD_macd": -9.039247830237855,
        "MACD_signal": -14.284647359303994,
        "ATR": 15.19609616502421,
        "ADX": 20.83632302687587,
        "Stoch_K": 76.81009515928815,
        "Stoch_D": 86.08467797545137,
        "StochRSI_K": 82.29541942912459,
        "StochRSI_D": 92.40155174304597,
        "BB_upper": 2661.197368272949,
        "BB_lower": 2616.3136317270514,
        "BB_middle": 2638.7555,
        "EMA5": 2647.1420638400623,
        "EMA21": 2648.853809658605,
        "EMA55": 2671.15747642393,
        "EMA144": 2677.1899044634456,
        "EMA200": 2674.755248131577,
        "VWAP": 2692.239004620141
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:32:08+08:00",
    "factors": {
      "funding_rate": "0.0082%",
      "FGI": "74/100",
      "open_interest": "$609010859.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2657.95",
        "lastSz": "0.04",
        "askPx": "2657.95",
        "askSz": "1398.26",
        "bidPx": "2657.94",
        "bidSz": "128.83",
        "open24h": "2644.05",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5708667.777",
        "vol24h": "57086677.77",
        "ts": "1748543532616",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:32:13+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][02:32:22] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:32:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:32:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:32:45] [INFO]  打开目标图表页...
[截图模块][02:32:50] [INFO]  等待5秒加载页面...
[截图模块][02:32:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:32:57] [INFO]  快捷键已发送
[截图模块][02:32:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023258.png
[截图模块][02:32:58] [INFO]  关闭浏览器...
[数据收集总模块][02:32:58] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023258.png
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  __main__ 入口被执行
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  启动时主动清理内存...
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  已执行 pkill chrome
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:11] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:45] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:45] [INFO]  打开目标图表页...
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:50] [INFO]  等待5秒加载页面...
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:57] [INFO]  快捷键已发送
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023258.png
[数据收集总模块][02:32:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:58] [INFO]  关闭浏览器...
[数据收集总模块][02:32:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023258.png
[数据收集总模块][02:32:58] [INFO] 技术指标模块运行中...
[技术指标模块][02:32:59] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:32:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:32:59] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:32:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:32:59] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:33:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:33:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:33:00] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:33:01] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:33:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:33:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:33:03] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:33:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:33:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:33:03] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:33:03] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:33:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023258.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2646.14,
        "volume": 312209.66,
        "RSI": 51.739732953321386,
        "MACD_macd": -9.039247830237855,
        "MACD_signal": -14.284647359303994,
        "ATR": 15.19609616502421,
        "ADX": 20.83632302687587,
        "Stoch_K": 76.81009515928815,
        "Stoch_D": 86.08467797545137,
        "StochRSI_K": 82.29541942912459,
        "StochRSI_D": 92.40155174304597,
        "BB_upper": 2661.197368272949,
        "BB_lower": 2616.3136317270514,
        "BB_middle": 2638.7555,
        "EMA5": 2647.1420638400623,
        "EMA21": 2648.853809658605,
        "EMA55": 2671.15747642393,
        "EMA144": 2677.1899044634456,
        "EMA200": 2674.755248131577,
        "VWAP": 2692.239004620141
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:33:01+08:00",
    "factors": {
      "funding_rate": "0.0082%",
      "FGI": "74/100",
      "open_interest": "$608968023.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2659.2",
        "lastSz": "27.11",
        "askPx": "2659.2",
        "askSz": "1079.36",
        "bidPx": "2659.19",
        "bidSz": "1164.89",
        "open24h": "2644.4",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5707515.313",
        "vol24h": "57075153.13",
        "ts": "1748543583394",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:33:04+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:33:04] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_023258.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2646.14,
        "volume": 312209.66,
        "RSI": 51.739732953321386,
        "MACD_macd": -9.039247830237855,
        "MACD_signal": -14.284647359303994,
        "ATR": 15.19609616502421,
        "ADX": 20.83632302687587,
        "Stoch_K": 76.81009515928815,
        "Stoch_D": 86.08467797545137,
        "StochRSI_K": 82.29541942912459,
        "StochRSI_D": 92.40155174304597,
        "BB_upper": 2661.197368272949,
        "BB_lower": 2616.3136317270514,
        "BB_middle": 2638.7555,
        "EMA5": 2647.1420638400623,
        "EMA21": 2648.853809658605,
        "EMA55": 2671.15747642393,
        "EMA144": 2677.1899044634456,
        "EMA200": 2674.755248131577,
        "VWAP": 2692.239004620141
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:33:01+08:00",
    "factors": {
      "funding_rate": "0.0082%",
      "FGI": "74/100",
      "open_interest": "$608968023.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2659.2",
        "lastSz": "27.11",
        "askPx": "2659.2",
        "askSz": "1079.36",
        "bidPx": "2659.19",
        "bidSz": "1164.89",
        "open24h": "2644.4",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5707515.313",
        "vol24h": "57075153.13",
        "ts": "1748543583394",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:33:04+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][02:33:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][02:45:00] [INFO] 截图模块运行中...
[截图模块][02:45:01] [INFO]  __main__ 入口被执行
[截图模块][02:45:01] [INFO]  启动时主动清理内存...
[截图模块][02:45:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:45:02] [INFO]  已执行 pkill chrome
[数据收集总模块][02:45:02] [INFO] 截图模块运行中...
[截图模块][02:45:03] [INFO]  __main__ 入口被执行
[截图模块][02:45:03] [INFO]  启动时主动清理内存...
[截图模块][02:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:45:04] [INFO]  已执行 pkill chrome
[截图模块][02:45:04] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'Cache_Data'
[截图模块][02:45:04] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:45:04] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:45:04] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:45:04] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:45:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:45:07] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][02:45:07] [INFO] 技术指标模块运行中...
[截图模块][02:45:08] [INFO] 启动浏览器 (有头模式)
[技术指标模块][02:45:09] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:45:10] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:45:10] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[截图模块][02:45:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[技术指标模块][02:45:10] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:45:10] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:45:10] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:45:11] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:45:11] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:45:14] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:45:14] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:45:14] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:45:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:45:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:45:15] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:45:15] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:45:15] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107622.8,
        "volume": 46983.72,
        "RSI": 56.40429007654675,
        "MACD_macd": -19.301301382962265,
        "MACD_signal": -92.1606551635716,
        "ATR": 357.2468448136465,
        "ADX": 26.165377889204198,
        "Stoch_K": 83.98122065727782,
        "Stoch_D": 83.58059467918696,
        "StochRSI_K": 82.0906307815223,
        "StochRSI_D": 84.76549851610335,
        "BB_upper": 107797.21728009757,
        "BB_lower": 106897.10271990244,
        "BB_middle": 107347.16,
        "EMA5": 107584.26918703374,
        "EMA21": 107476.75263849899,
        "EMA55": 107573.7177867581,
        "EMA144": 107310.60383111022,
        "EMA200": 107136.16359587705,
        "VWAP": 107546.26364992453
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:45:12+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305563062.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106190",
        "lastSz": "0.01",
        "askPx": "106189.5",
        "askSz": "1204.82",
        "bidPx": "106189.4",
        "bidSz": "372.46",
        "open24h": "107716.2",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116267.2287",
        "vol24h": "11626722.87",
        "ts": "1748544315114",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:45:15+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-207.56375",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:45:17] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107622.8,
        "volume": 46983.72,
        "RSI": 56.40429007654675,
        "MACD_macd": -19.301301382962265,
        "MACD_signal": -92.1606551635716,
        "ATR": 357.2468448136465,
        "ADX": 26.165377889204198,
        "Stoch_K": 83.98122065727782,
        "Stoch_D": 83.58059467918696,
        "StochRSI_K": 82.0906307815223,
        "StochRSI_D": 84.76549851610335,
        "BB_upper": 107797.21728009757,
        "BB_lower": 106897.10271990244,
        "BB_middle": 107347.16,
        "EMA5": 107584.26918703374,
        "EMA21": 107476.75263849899,
        "EMA55": 107573.7177867581,
        "EMA144": 107310.60383111022,
        "EMA200": 107136.16359587705,
        "VWAP": 107546.26364992453
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:45:12+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305563062.0000018 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106190",
        "lastSz": "0.01",
        "askPx": "106189.5",
        "askSz": "1204.82",
        "bidPx": "106189.4",
        "bidSz": "372.46",
        "open24h": "107716.2",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116267.2287",
        "vol24h": "11626722.87",
        "ts": "1748544315114",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:45:15+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-207.56375",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][02:45:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:45:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:45:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:45:44] [INFO]  打开目标图表页...
[截图模块][02:45:51] [INFO]  等待5秒加载页面...
[截图模块][02:45:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:45:56] [INFO]  快捷键已发送
[截图模块][02:45:57] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][02:45:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024558.png
[截图模块][02:45:58] [INFO]  关闭浏览器...
[数据收集总模块][02:45:58] [INFO] 截图模块运行中...
[数据收集总模块][02:45:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024558.png
[数据收集总模块][02:45:59] [INFO] 技术指标模块运行中...
[截图模块][02:46:00] [INFO]  __main__ 入口被执行
[截图模块][02:46:00] [INFO]  启动时主动清理内存...
[技术指标模块][02:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[截图模块][02:46:00] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:46:00] [INFO]  已执行 pkill chrome
[技术指标模块][02:46:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:46:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:46:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:46:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:01] [INFO] 宏观因子模块运行中...
[截图模块][02:46:02] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:46:02] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:46:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:46:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:46:02] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:46:02] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:46:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:04] [INFO] OKX 持仓模块运行中...
[截图模块][02:46:06] [INFO]  启动浏览器 (有头模式)
[截图模块][02:46:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[get_positions.py][02:46:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:46:07] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][02:46:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107622.8,
        "volume": 46983.72,
        "RSI": 56.40429007654675,
        "MACD_macd": -19.301301382962265,
        "MACD_signal": -92.1606551635716,
        "ATR": 357.2468448136465,
        "ADX": 26.165377889204198,
        "Stoch_K": 83.98122065727782,
        "Stoch_D": 83.58059467918696,
        "StochRSI_K": 82.0906307815223,
        "StochRSI_D": 84.76549851610335,
        "BB_upper": 107797.21728009757,
        "BB_lower": 106897.10271990244,
        "BB_middle": 107347.16,
        "EMA5": 107584.26918703374,
        "EMA21": 107476.75263849899,
        "EMA55": 107573.7177867581,
        "EMA144": 107310.60383111022,
        "EMA200": 107136.16359587705,
        "VWAP": 107546.26364992453
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:46:03+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305681658.00000185 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106252.7",
        "lastSz": "11.46",
        "askPx": "106252.8",
        "askSz": "643.67",
        "bidPx": "106252.7",
        "bidSz": "142.79",
        "open24h": "107694.7",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116286.9773",
        "vol24h": "11628697.73",
        "ts": "1748544367572",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:46:07+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-201.865",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][02:46:09] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107622.8,
        "volume": 46983.72,
        "RSI": 56.40429007654675,
        "MACD_macd": -19.301301382962265,
        "MACD_signal": -92.1606551635716,
        "ATR": 357.2468448136465,
        "ADX": 26.165377889204198,
        "Stoch_K": 83.98122065727782,
        "Stoch_D": 83.58059467918696,
        "StochRSI_K": 82.0906307815223,
        "StochRSI_D": 84.76549851610335,
        "BB_upper": 107797.21728009757,
        "BB_lower": 106897.10271990244,
        "BB_middle": 107347.16,
        "EMA5": 107584.26918703374,
        "EMA21": 107476.75263849899,
        "EMA55": 107573.7177867581,
        "EMA144": 107310.60383111022,
        "EMA200": 107136.16359587705,
        "VWAP": 107546.26364992453
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107309.3,
        "volume": 398984.97,
        "RSI": 31.615686737122715,
        "MACD_macd": -606.2221658631606,
        "MACD_signal": -402.60347466413043,
        "ATR": 729.3549202065742,
        "ADX": 52.25819514632855,
        "Stoch_K": 23.613900553831193,
        "Stoch_D": 17.69543416257948,
        "StochRSI_K": 45.639524248686925,
        "StochRSI_D": 17.31690969668887,
        "BB_upper": 110907.76359693572,
        "BB_lower": 106411.6064030643,
        "BB_middle": 108659.68500000001,
        "EMA5": 107313.60627864102,
        "EMA21": 108307.48222019506,
        "EMA55": 108706.45149140288,
        "EMA144": 108158.97750449578,
        "EMA200": 107846.47412374357,
        "VWAP": 108552.90668019211
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:46:03+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$305681658.00000185 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "106252.7",
        "lastSz": "11.46",
        "askPx": "106252.8",
        "askSz": "643.67",
        "bidPx": "106252.7",
        "bidSz": "142.79",
        "open24h": "107694.7",
        "high24h": "108869.7",
        "low24h": "106050",
        "volCcy24h": "116286.9773",
        "vol24h": "11628697.73",
        "ts": "1748544367572",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T18:46:07+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-201.865",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][02:46:16] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:46:38] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:46:38] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:46:38] [INFO]  打开目标图表页...
[截图模块][02:46:42] [INFO]  等待5秒加载页面...
[截图模块][02:46:47] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:46:48] [INFO]  快捷键已发送
[截图模块][02:46:49] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024649.png
[截图模块][02:46:49] [INFO]  关闭浏览器...
[数据收集总模块][02:46:50] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024649.png
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:00] [INFO]  __main__ 入口被执行
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:00] [INFO]  启动时主动清理内存...
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:00] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:00] [INFO]  已执行 pkill chrome
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:02] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:02] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:02] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:02] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:06] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:38] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:38] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:38] [INFO]  打开目标图表页...
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:42] [INFO]  等待5秒加载页面...
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:47] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:48] [INFO]  快捷键已发送
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:49] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024649.png
[数据收集总模块][02:46:50] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:49] [INFO]  关闭浏览器...
[数据收集总模块][02:46:50] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024649.png
[数据收集总模块][02:46:50] [INFO] 技术指标模块运行中...
[技术指标模块][02:46:51] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:46:51] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:46:51] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:46:51] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:46:51] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:46:52] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:46:52] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:52] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:46:53] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:46:54] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:54] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:46:55] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:46:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:46:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:46:55] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:46:55] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:55] [INFO] 截图模块运行中...
[数据收集总模块][02:46:56] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024649.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.74,
        "volume": 167962.01,
        "RSI": 57.601514071948586,
        "MACD_macd": -9.971583821182776,
        "MACD_signal": -15.590086001046423,
        "ATR": 15.9801117352831,
        "ADX": 23.32830462280866,
        "Stoch_K": 88.39470417873363,
        "Stoch_D": 84.95379947593415,
        "StochRSI_K": 94.90923162635929,
        "StochRSI_D": 94.32376396599425,
        "BB_upper": 2660.916874281758,
        "BB_lower": 2616.3341257182424,
        "BB_middle": 2638.6255,
        "EMA5": 2647.643095760093,
        "EMA21": 2649.1245368799314,
        "EMA55": 2671.8603571107137,
        "EMA144": 2675.5534583431922,
        "EMA200": 2671.999650572371,
        "VWAP": 2692.144846084627
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:46:53+08:00",
    "factors": {
      "funding_rate": "0.0078%",
      "FGI": "74/100",
      "open_interest": "$609949851.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2648.07",
        "lastSz": "1",
        "askPx": "2648.07",
        "askSz": "797.52",
        "bidPx": "2648.06",
        "bidSz": "440.75",
        "open24h": "2650.9",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5740070.64",
        "vol24h": "57400706.4",
        "ts": "1748544415610",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:46:56+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[截图模块][02:46:56] [INFO]  __main__ 入口被执行
[截图模块][02:46:56] [INFO]  启动时主动清理内存...
[截图模块][02:46:57] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:46:57] [INFO]  已执行 pkill chrome
[gemini_api_caller.py][02:46:57] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024649.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.74,
        "volume": 167962.01,
        "RSI": 57.601514071948586,
        "MACD_macd": -9.971583821182776,
        "MACD_signal": -15.590086001046423,
        "ATR": 15.9801117352831,
        "ADX": 23.32830462280866,
        "Stoch_K": 88.39470417873363,
        "Stoch_D": 84.95379947593415,
        "StochRSI_K": 94.90923162635929,
        "StochRSI_D": 94.32376396599425,
        "BB_upper": 2660.916874281758,
        "BB_lower": 2616.3341257182424,
        "BB_middle": 2638.6255,
        "EMA5": 2647.643095760093,
        "EMA21": 2649.1245368799314,
        "EMA55": 2671.8603571107137,
        "EMA144": 2675.5534583431922,
        "EMA200": 2671.999650572371,
        "VWAP": 2692.144846084627
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:46:53+08:00",
    "factors": {
      "funding_rate": "0.0078%",
      "FGI": "74/100",
      "open_interest": "$609949851.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2648.07",
        "lastSz": "1",
        "askPx": "2648.07",
        "askSz": "797.52",
        "bidPx": "2648.06",
        "bidSz": "440.75",
        "open24h": "2650.9",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5740070.64",
        "vol24h": "57400706.4",
        "ts": "1748544415610",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:46:56+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[截图模块][02:46:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:46:59] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:46:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][02:46:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][02:46:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][02:46:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][02:47:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:47:02] [INFO]  启动浏览器 (有头模式)
[截图模块][02:47:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[_client.py][02:47:04] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][02:47:14] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:47:14] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:47:14] [INFO]  打开目标图表页...
[截图模块][02:47:19] [INFO]  等待5秒加载页面...
[截图模块][02:47:24] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:47:25] [INFO]  快捷键已发送
[截图模块][02:47:26] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024726.png
[截图模块][02:47:26] [INFO]  关闭浏览器...
[数据收集总模块][02:47:26] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024726.png
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:56] [INFO]  __main__ 入口被执行
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:56] [INFO]  启动时主动清理内存...
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:57] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:57] [INFO]  已执行 pkill chrome
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:59] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:46:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:02] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:14] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:14] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:14] [INFO]  打开目标图表页...
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:19] [INFO]  等待5秒加载页面...
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:24] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:25] [INFO]  快捷键已发送
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:26] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024726.png
[数据收集总模块][02:47:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:26] [INFO]  关闭浏览器...
[数据收集总模块][02:47:26] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024726.png
[数据收集总模块][02:47:26] [INFO] 技术指标模块运行中...
[技术指标模块][02:47:28] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:47:28] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:47:28] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:47:28] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:47:28] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:47:29] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:47:29] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:47:29] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:47:30] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:47:31] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:47:31] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:47:32] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:47:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:47:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:47:32] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][02:47:32] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:47:33] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024726.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.74,
        "volume": 167962.01,
        "RSI": 57.601514071948586,
        "MACD_macd": -9.971583821182776,
        "MACD_signal": -15.590086001046423,
        "ATR": 15.9801117352831,
        "ADX": 23.32830462280866,
        "Stoch_K": 88.39470417873363,
        "Stoch_D": 84.95379947593415,
        "StochRSI_K": 94.90923162635929,
        "StochRSI_D": 94.32376396599425,
        "BB_upper": 2660.916874281758,
        "BB_lower": 2616.3341257182424,
        "BB_middle": 2638.6255,
        "EMA5": 2647.643095760093,
        "EMA21": 2649.1245368799314,
        "EMA55": 2671.8603571107137,
        "EMA144": 2675.5534583431922,
        "EMA200": 2671.999650572371,
        "VWAP": 2692.144846084627
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:47:30+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$609770056.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2647.47",
        "lastSz": "5.43",
        "askPx": "2647.48",
        "askSz": "960",
        "bidPx": "2647.47",
        "bidSz": "1006.22",
        "open24h": "2649.12",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5739293.439",
        "vol24h": "57392934.39",
        "ts": "1748544452708",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:47:33+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][02:47:34] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_024726.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2651.74,
        "volume": 167962.01,
        "RSI": 57.601514071948586,
        "MACD_macd": -9.971583821182776,
        "MACD_signal": -15.590086001046423,
        "ATR": 15.9801117352831,
        "ADX": 23.32830462280866,
        "Stoch_K": 88.39470417873363,
        "Stoch_D": 84.95379947593415,
        "StochRSI_K": 94.90923162635929,
        "StochRSI_D": 94.32376396599425,
        "BB_upper": 2660.916874281758,
        "BB_lower": 2616.3341257182424,
        "BB_middle": 2638.6255,
        "EMA5": 2647.643095760093,
        "EMA21": 2649.1245368799314,
        "EMA55": 2671.8603571107137,
        "EMA144": 2675.5534583431922,
        "EMA200": 2671.999650572371,
        "VWAP": 2692.144846084627
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.99,
        "volume": 1493778.35,
        "RSI": 24.930307383945163,
        "MACD_macd": -17.055428941297123,
        "MACD_signal": -13.869786452069047,
        "ATR": 24.055277878588875,
        "ADX": 40.610024002760845,
        "Stoch_K": 27.571764225150492,
        "Stoch_D": 26.666002889677888,
        "StochRSI_K": 0.8067594753802411,
        "StochRSI_D": 6.799921709210157,
        "BB_upper": 2595.892960745735,
        "BB_lower": 2491.553039254266,
        "BB_middle": 2543.7230000000004,
        "EMA5": 2512.009842598658,
        "EMA21": 2536.484285087937,
        "EMA55": 2569.121515058939,
        "EMA144": 2611.1166433043472,
        "EMA200": 2622.4149935526843,
        "VWAP": 2631.7345279874844
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T02:47:30+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$609770056.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2647.47",
        "lastSz": "5.43",
        "askPx": "2647.48",
        "askSz": "960",
        "bidPx": "2647.47",
        "bidSz": "1006.22",
        "open24h": "2649.12",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5739293.439",
        "vol24h": "57392934.39",
        "ts": "1748544452708",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T18:47:33+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][02:47:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][03:00:01] [INFO] 截图模块运行中...
[截图模块][03:00:01] [INFO]  __main__ 入口被执行
[截图模块][03:00:01] [INFO]  启动时主动清理内存...
[截图模块][03:00:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:00:02] [INFO]  已执行 pkill chrome
[数据收集总模块][03:00:02] [INFO] 截图模块运行中...
[截图模块][03:00:03] [INFO]  __main__ 入口被执行
[截图模块][03:00:03] [INFO]  启动时主动清理内存...
[截图模块][03:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:00:03] [INFO]  已执行 pkill chrome
[数据收集总模块][03:00:04] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][03:00:04] [INFO] 技术指标模块运行中...
[数据收集总模块][03:00:04] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][03:00:04] [INFO] 技术指标模块运行中...
[技术指标模块][03:00:06] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:00:06] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:00:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:00:06] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:00:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:00:06] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:00:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:00:07] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:00:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:00:07] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:00:07] [INFO] 成功获取并处理 4h 周期的数据。
[技术指标模块][03:00:07] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:00:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:00:07] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:00:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:00:07] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:00:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:00:10] [INFO] OKX 持仓模块运行中...
[数据收集总模块][03:00:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:00:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:00:11] [INFO] instrument_id: BTC-USDT-SWAP
[get_positions.py][03:00:11] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:00:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:00:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:00:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:00:12] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][03:00:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:00:12] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][03:00:12] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:00:12] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:00:12] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107771.0,
        "volume": 71986.52,
        "RSI": 63.1811735604164,
        "MACD_macd": -35.395124937203946,
        "MACD_signal": -110.09263461463428,
        "ATR": 351.2849880559056,
        "ADX": 28.823143559236463,
        "Stoch_K": 97.89671361502403,
        "Stoch_D": 85.38871586036,
        "StochRSI_K": 98.39814253729328,
        "StochRSI_D": 89.17342500358183,
        "BB_upper": 107764.1958796528,
        "BB_lower": 106902.2441203472,
        "BB_middle": 107333.22,
        "EMA5": 107565.00378055061,
        "EMA21": 107462.1166199944,
        "EMA55": 107561.19600804908,
        "EMA144": 107207.15180373393,
        "EMA200": 106985.65307391918,
        "VWAP": 107500.26669597793
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:00:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304137157.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105821.1",
        "lastSz": "0.14",
        "askPx": "105821.1",
        "askSz": "60.28",
        "bidPx": "105821",
        "bidSz": "365.89",
        "open24h": "107462.6",
        "high24h": "108869.7",
        "low24h": "105700",
        "volCcy24h": "118763.108",
        "vol24h": "11876310.8",
        "ts": "1748545212184",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:00:12+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-246.53849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[数据收集总模块][03:00:12] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107771.0,
        "volume": 71986.52,
        "RSI": 63.1811735604164,
        "MACD_macd": -35.395124937203946,
        "MACD_signal": -110.09263461463428,
        "ATR": 351.2849880559056,
        "ADX": 28.823143559236463,
        "Stoch_K": 97.89671361502403,
        "Stoch_D": 85.38871586036,
        "StochRSI_K": 98.39814253729328,
        "StochRSI_D": 89.17342500358183,
        "BB_upper": 107764.1958796528,
        "BB_lower": 106902.2441203472,
        "BB_middle": 107333.22,
        "EMA5": 107565.00378055061,
        "EMA21": 107462.1166199944,
        "EMA55": 107561.19600804908,
        "EMA144": 107207.15180373393,
        "EMA200": 106985.65307391918,
        "VWAP": 107500.26669597793
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:00:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304137157.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105821.1",
        "lastSz": "0.94",
        "askPx": "105821.1",
        "askSz": "164.15",
        "bidPx": "105821",
        "bidSz": "266.95",
        "open24h": "107462.6",
        "high24h": "108869.7",
        "low24h": "105700",
        "volCcy24h": "118763.0587",
        "vol24h": "11876305.87",
        "ts": "1748545212016",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:00:12+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-246.53849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][03:00:14] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107771.0,
        "volume": 71986.52,
        "RSI": 63.1811735604164,
        "MACD_macd": -35.395124937203946,
        "MACD_signal": -110.09263461463428,
        "ATR": 351.2849880559056,
        "ADX": 28.823143559236463,
        "Stoch_K": 97.89671361502403,
        "Stoch_D": 85.38871586036,
        "StochRSI_K": 98.39814253729328,
        "StochRSI_D": 89.17342500358183,
        "BB_upper": 107764.1958796528,
        "BB_lower": 106902.2441203472,
        "BB_middle": 107333.22,
        "EMA5": 107565.00378055061,
        "EMA21": 107462.1166199944,
        "EMA55": 107561.19600804908,
        "EMA144": 107207.15180373393,
        "EMA200": 106985.65307391918,
        "VWAP": 107500.26669597793
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:00:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304137157.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105821.1",
        "lastSz": "0.94",
        "askPx": "105821.1",
        "askSz": "164.15",
        "bidPx": "105821",
        "bidSz": "266.95",
        "open24h": "107462.6",
        "high24h": "108869.7",
        "low24h": "105700",
        "volCcy24h": "118763.0587",
        "vol24h": "11876305.87",
        "ts": "1748545212016",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:00:12+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-246.53849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][03:00:14] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107771.0,
        "volume": 71986.52,
        "RSI": 63.1811735604164,
        "MACD_macd": -35.395124937203946,
        "MACD_signal": -110.09263461463428,
        "ATR": 351.2849880559056,
        "ADX": 28.823143559236463,
        "Stoch_K": 97.89671361502403,
        "Stoch_D": 85.38871586036,
        "StochRSI_K": 98.39814253729328,
        "StochRSI_D": 89.17342500358183,
        "BB_upper": 107764.1958796528,
        "BB_lower": 106902.2441203472,
        "BB_middle": 107333.22,
        "EMA5": 107565.00378055061,
        "EMA21": 107462.1166199944,
        "EMA55": 107561.19600804908,
        "EMA144": 107207.15180373393,
        "EMA200": 106985.65307391918,
        "VWAP": 107500.26669597793
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:00:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304137157.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105821.1",
        "lastSz": "0.94",
        "askPx": "105821.1",
        "askSz": "164.15",
        "bidPx": "105821",
        "bidSz": "266.95",
        "open24h": "107462.6",
        "high24h": "108869.7",
        "low24h": "105700",
        "volCcy24h": "118763.0587",
        "vol24h": "11876305.87",
        "ts": "1748545212016",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:00:12+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-246.53849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][03:00:20] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[_client.py][03:00:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][03:00:58] [INFO] 截图模块运行中...
[截图模块][03:00:59] [INFO]  __main__ 入口被执行
[截图模块][03:00:59] [INFO]  启动时主动清理内存...
[截图模块][03:00:59] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:00:59] [INFO]  已执行 pkill chrome
[数据收集总模块][03:01:01] [INFO] 截图模块运行中...
[截图模块][03:01:02] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][03:01:02] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:01:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][03:01:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][03:01:02] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][03:01:02] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][03:01:02] [INFO]  __main__ 入口被执行
[截图模块][03:01:02] [INFO]  启动时主动清理内存...
[截图模块][03:01:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:01:02] [INFO]  已执行 pkill chrome
[截图模块][03:01:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:01:05] [INFO]  启动浏览器 (有头模式)
[截图模块][03:01:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  __main__ 入口被执行
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  启动时主动清理内存...
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  已执行 pkill chrome
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr] Traceback (most recent call last):
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/code/tradingview_auto_screenshot.py", line 285, in <module>
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]     result = main()
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/code/tradingview_auto_screenshot.py", line 263, in main
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]     update_user_profile()
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/code/tradingview_auto_screenshot.py", line 247, in update_user_profile
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]     shutil.copytree(src, dst)
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/shutil.py", line 559, in copytree
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]     return _copytree(entries=entries, src=src, dst=dst, symlinks=symlinks,
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/usr/local/lib/python3.10/shutil.py", line 513, in _copytree
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr]     raise Error(errors)
[数据收集总模块][03:01:07] [ERROR] [tradingview_auto_screenshot.py][stderr] shutil.Error: [('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/Cache/Cache_Data/index-dir', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Cache/Cache_Data/index-dir', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Cache/Cache_Data/index-dir'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/Session Storage', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Session Storage', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Session Storage'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/Sessions', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Sessions', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Sessions'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/Sync Data', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Sync Data', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Sync Data'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/chrome_cart_db', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/chrome_cart_db', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/chrome_cart_db'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/ClientCertificates', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/ClientCertificates', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/ClientCertificates'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/Extension Scripts', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Extension Scripts', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/Extension Scripts'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Default/GPUCache', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/GPUCache', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Default/GPUCache'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/GraphiteDawnCache', '/root/codespace/Qwen_quant_v1/code/chrome_profile/GraphiteDawnCache', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/GraphiteDawnCache'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/hyphen-data', '/root/codespace/Qwen_quant_v1/code/chrome_profile/hyphen-data', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/hyphen-data'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/CertificateRevocation', '/root/codespace/Qwen_quant_v1/code/chrome_profile/CertificateRevocation', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/CertificateRevocation'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/AutofillStates', '/root/codespace/Qwen_quant_v1/code/chrome_profile/AutofillStates', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/AutofillStates'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Subresource Filter', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Subresource Filter', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Subresource Filter'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Crowd Deny', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Crowd Deny', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Crowd Deny'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/CookieReadinessList', '/root/codespace/Qwen_quant_v1/code/chrome_profile/CookieReadinessList', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/CookieReadinessList'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/FileTypePolicies', '/root/codespace/Qwen_quant_v1/code/chrome_profile/FileTypePolicies', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/FileTypePolicies'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/PrivacySandboxAttestationsPreloaded', '/root/codespace/Qwen_quant_v1/code/chrome_profile/PrivacySandboxAttestationsPreloaded', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/PrivacySandboxAttestationsPreloaded'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/TpcdMetadata', '/root/codespace/Qwen_quant_v1/code/chrome_profile/TpcdMetadata', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/TpcdMetadata'"), ('/root/codespace/Qwen_quant_v1/code/chrome_profile_copy/Safe Browsing', '/root/codespace/Qwen_quant_v1/code/chrome_profile/Safe Browsing', "[Errno 17] File exists: '/root/codespace/Qwen_quant_v1/code/chrome_profile/Safe Browsing'")]
[数据收集总模块][03:01:07] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][03:01:07] [INFO] 技术指标模块运行中...
[技术指标模块][03:01:08] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:01:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:01:08] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:01:09] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:01:09] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:01:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:01:10] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:10] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:01:10] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:01:12] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:12] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:01:13] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:01:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:01:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:01:13] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][03:01:14] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:14] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2653.99,
        "volume": 213879.33,
        "RSI": 59.96724544877341,
        "MACD_macd": -11.5923887320846,
        "MACD_signal": -16.996054025544947,
        "ATR": 17.004740855016287,
        "ADX": 26.12833912166358,
        "Stoch_K": 93.04923458833234,
        "Stoch_D": 82.00196096867352,
        "StochRSI_K": 100.0,
        "StochRSI_D": 95.42403792643775,
        "BB_upper": 2660.2765813900182,
        "BB_lower": 2616.5654186099823,
        "BB_middle": 2638.4210000000003,
        "EMA5": 2645.594643640139,
        "EMA21": 2648.863139037379,
        "EMA55": 2672.656357485131,
        "EMA144": 2676.356784957886,
        "EMA200": 2672.894392094382,
        "VWAP": 2692.0813249415023
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:01:10+08:00",
    "factors": {
      "funding_rate": "0.0075%",
      "FGI": "74/100",
      "open_interest": "$606543546.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2652.58",
        "lastSz": "0.1",
        "askPx": "2652.59",
        "askSz": "1060.56",
        "bidPx": "2652.58",
        "bidSz": "841.03",
        "open24h": "2639.73",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5714499.255",
        "vol24h": "57144992.55",
        "ts": "1748545273407",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:01:14+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:01:15] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2653.99,
        "volume": 213879.33,
        "RSI": 59.96724544877341,
        "MACD_macd": -11.5923887320846,
        "MACD_signal": -16.996054025544947,
        "ATR": 17.004740855016287,
        "ADX": 26.12833912166358,
        "Stoch_K": 93.04923458833234,
        "Stoch_D": 82.00196096867352,
        "StochRSI_K": 100.0,
        "StochRSI_D": 95.42403792643775,
        "BB_upper": 2660.2765813900182,
        "BB_lower": 2616.5654186099823,
        "BB_middle": 2638.4210000000003,
        "EMA5": 2645.594643640139,
        "EMA21": 2648.863139037379,
        "EMA55": 2672.656357485131,
        "EMA144": 2676.356784957886,
        "EMA200": 2672.894392094382,
        "VWAP": 2692.0813249415023
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:01:10+08:00",
    "factors": {
      "funding_rate": "0.0075%",
      "FGI": "74/100",
      "open_interest": "$606543546.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2652.58",
        "lastSz": "0.1",
        "askPx": "2652.59",
        "askSz": "1060.56",
        "bidPx": "2652.58",
        "bidSz": "841.03",
        "open24h": "2639.73",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5714499.255",
        "vol24h": "57144992.55",
        "ts": "1748545273407",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:01:14+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:01:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][03:01:39] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:01:39] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:01:39] [INFO]  打开目标图表页...
[截图模块][03:01:46] [INFO]  等待5秒加载页面...
[截图模块][03:01:51] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:01:52] [INFO]  快捷键已发送
[截图模块][03:01:53] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png
[截图模块][03:01:53] [INFO]  关闭浏览器...
[数据收集总模块][03:01:53] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:00:59] [INFO]  __main__ 入口被执行
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:00:59] [INFO]  启动时主动清理内存...
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:00:59] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:00:59] [INFO]  已执行 pkill chrome
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:02] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:05] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:39] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:39] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:39] [INFO]  打开目标图表页...
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:46] [INFO]  等待5秒加载页面...
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:51] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:52] [INFO]  快捷键已发送
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:53] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png
[数据收集总模块][03:01:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:01:53] [INFO]  关闭浏览器...
[数据收集总模块][03:01:53] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png
[数据收集总模块][03:01:53] [INFO] 技术指标模块运行中...
[技术指标模块][03:01:54] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:01:54] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:01:54] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:01:55] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:01:55] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:01:55] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:01:55] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:55] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:01:56] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:01:58] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:58] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:01:58] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:01:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:01:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:01:58] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][03:01:58] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:59] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2653.99,
        "volume": 213879.33,
        "RSI": 59.96724544877341,
        "MACD_macd": -11.5923887320846,
        "MACD_signal": -16.996054025544947,
        "ATR": 17.004740855016287,
        "ADX": 26.12833912166358,
        "Stoch_K": 93.04923458833234,
        "Stoch_D": 82.00196096867352,
        "StochRSI_K": 100.0,
        "StochRSI_D": 95.42403792643775,
        "BB_upper": 2660.2765813900182,
        "BB_lower": 2616.5654186099823,
        "BB_middle": 2638.4210000000003,
        "EMA5": 2645.594643640139,
        "EMA21": 2648.863139037379,
        "EMA55": 2672.656357485131,
        "EMA144": 2676.356784957886,
        "EMA200": 2672.894392094382,
        "VWAP": 2692.0813249415023
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:01:56+08:00",
    "factors": {
      "funding_rate": "0.0075%",
      "FGI": "74/100",
      "open_interest": "$606708208.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2654.12",
        "lastSz": "0.01",
        "askPx": "2654.13",
        "askSz": "828.1",
        "bidPx": "2654.12",
        "bidSz": "688.41",
        "open24h": "2639.73",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5715679.786",
        "vol24h": "57156797.86",
        "ts": "1748545319018",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:01:59+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:02:00] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2653.99,
        "volume": 213879.33,
        "RSI": 59.96724544877341,
        "MACD_macd": -11.5923887320846,
        "MACD_signal": -16.996054025544947,
        "ATR": 17.004740855016287,
        "ADX": 26.12833912166358,
        "Stoch_K": 93.04923458833234,
        "Stoch_D": 82.00196096867352,
        "StochRSI_K": 100.0,
        "StochRSI_D": 95.42403792643775,
        "BB_upper": 2660.2765813900182,
        "BB_lower": 2616.5654186099823,
        "BB_middle": 2638.4210000000003,
        "EMA5": 2645.594643640139,
        "EMA21": 2648.863139037379,
        "EMA55": 2672.656357485131,
        "EMA144": 2676.356784957886,
        "EMA200": 2672.894392094382,
        "VWAP": 2692.0813249415023
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:01:56+08:00",
    "factors": {
      "funding_rate": "0.0075%",
      "FGI": "74/100",
      "open_interest": "$606708208.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2654.12",
        "lastSz": "0.01",
        "askPx": "2654.13",
        "askSz": "828.1",
        "bidPx": "2654.12",
        "bidSz": "688.41",
        "open24h": "2639.73",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5715679.786",
        "vol24h": "57156797.86",
        "ts": "1748545319018",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:01:59+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:02:08] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:12:50] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107771.0,
        "volume": 71986.52,
        "RSI": 63.1811735604164,
        "MACD_macd": -35.395124937203946,
        "MACD_signal": -110.09263461463428,
        "ATR": 351.2849880559056,
        "ADX": 28.823143559236463,
        "Stoch_K": 97.89671361502403,
        "Stoch_D": 85.38871586036,
        "StochRSI_K": 98.39814253729328,
        "StochRSI_D": 89.17342500358183,
        "BB_upper": 107764.1958796528,
        "BB_lower": 106902.2441203472,
        "BB_middle": 107333.22,
        "EMA5": 107565.00378055061,
        "EMA21": 107462.1166199944,
        "EMA55": 107561.19600804908,
        "EMA144": 107207.15180373393,
        "EMA200": 106985.65307391918,
        "VWAP": 107500.26669597793
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:00:08+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$304137157.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105821.1",
        "lastSz": "0.94",
        "askPx": "105821.1",
        "askSz": "164.15",
        "bidPx": "105821",
        "bidSz": "266.95",
        "open24h": "107462.6",
        "high24h": "108869.7",
        "low24h": "105700",
        "volCcy24h": "118763.0587",
        "vol24h": "11876305.87",
        "ts": "1748545212016",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:00:12+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-246.53849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][03:12:56] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:13:33] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_030153.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2653.99,
        "volume": 213879.33,
        "RSI": 59.96724544877341,
        "MACD_macd": -11.5923887320846,
        "MACD_signal": -16.996054025544947,
        "ATR": 17.004740855016287,
        "ADX": 26.12833912166358,
        "Stoch_K": 93.04923458833234,
        "Stoch_D": 82.00196096867352,
        "StochRSI_K": 100.0,
        "StochRSI_D": 95.42403792643775,
        "BB_upper": 2660.2765813900182,
        "BB_lower": 2616.5654186099823,
        "BB_middle": 2638.4210000000003,
        "EMA5": 2645.594643640139,
        "EMA21": 2648.863139037379,
        "EMA55": 2672.656357485131,
        "EMA144": 2676.356784957886,
        "EMA200": 2672.894392094382,
        "VWAP": 2692.0813249415023
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:01:56+08:00",
    "factors": {
      "funding_rate": "0.0075%",
      "FGI": "74/100",
      "open_interest": "$606708208.0000012 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2654.12",
        "lastSz": "0.01",
        "askPx": "2654.13",
        "askSz": "828.1",
        "bidPx": "2654.12",
        "bidSz": "688.41",
        "open24h": "2639.73",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5715679.786",
        "vol24h": "57156797.86",
        "ts": "1748545319018",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:01:59+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:13:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][03:24:07] [INFO] 截图模块运行中...
[截图模块][03:24:08] [INFO]  __main__ 入口被执行
[截图模块][03:24:08] [INFO]  启动时主动清理内存...
[截图模块][03:24:08] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:24:08] [INFO]  已执行 pkill chrome
[截图模块][03:24:10] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:24:10] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:24:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][03:24:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][03:24:10] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:24:10] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][03:24:11] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:24:13] [INFO] 启动浏览器 (有头模式)
[截图模块][03:24:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:24:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:24:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:24:51] [INFO]  打开目标图表页...
[截图模块][03:24:57] [INFO]  等待5秒加载页面...
[截图模块][03:25:02] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:25:03] [INFO]  快捷键已发送
[截图模块][03:25:04] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032504.png
[截图模块][03:25:04] [INFO]  关闭浏览器...
[数据收集总模块][03:25:04] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032504.png
[数据收集总模块][03:25:04] [INFO] 技术指标模块运行中...
[技术指标模块][03:25:05] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:25:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:25:06] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:25:06] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:25:06] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:25:06] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:25:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:25:07] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:25:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:25:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:25:10] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:25:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:25:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:25:11] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][03:25:11] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:25:11] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032504.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107461.8,
        "volume": 67377.31,
        "RSI": 52.96219411260594,
        "MACD_macd": -70.6584635895124,
        "MACD_signal": -128.6490759288313,
        "ATR": 356.22099546966484,
        "ADX": 28.003573767002173,
        "Stoch_K": 68.86384976525903,
        "Stoch_D": 75.43378122829999,
        "StochRSI_K": 73.80763176008342,
        "StochRSI_D": 81.74698552994316,
        "BB_upper": 107778.07788413756,
        "BB_lower": 106893.45211586241,
        "BB_middle": 107335.76499999998,
        "EMA5": 107462.00567082589,
        "EMA21": 107431.21523903207,
        "EMA55": 107548.96256469996,
        "EMA144": 107157.95273821084,
        "EMA200": 106917.04500958516,
        "VWAP": 107469.50473247738
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:25:07+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$306752156.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105841.2",
        "lastSz": "0.04",
        "askPx": "105841.2",
        "askSz": "132.24",
        "bidPx": "105841.1",
        "bidSz": "838.76",
        "open24h": "107437.4",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "121087.8632",
        "vol24h": "12108786.32",
        "ts": "1748546710541",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:25:11+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-251.08575000000104",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][03:25:12] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032504.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107461.8,
        "volume": 67377.31,
        "RSI": 52.96219411260594,
        "MACD_macd": -70.6584635895124,
        "MACD_signal": -128.6490759288313,
        "ATR": 356.22099546966484,
        "ADX": 28.003573767002173,
        "Stoch_K": 68.86384976525903,
        "Stoch_D": 75.43378122829999,
        "StochRSI_K": 73.80763176008342,
        "StochRSI_D": 81.74698552994316,
        "BB_upper": 107778.07788413756,
        "BB_lower": 106893.45211586241,
        "BB_middle": 107335.76499999998,
        "EMA5": 107462.00567082589,
        "EMA21": 107431.21523903207,
        "EMA55": 107548.96256469996,
        "EMA144": 107157.95273821084,
        "EMA200": 106917.04500958516,
        "VWAP": 107469.50473247738
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:25:07+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$306752156.0000017 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105841.2",
        "lastSz": "0.04",
        "askPx": "105841.2",
        "askSz": "132.24",
        "bidPx": "105841.1",
        "bidSz": "838.76",
        "open24h": "107437.4",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "121087.8632",
        "vol24h": "12108786.32",
        "ts": "1748546710541",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:25:11+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-251.08575000000104",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][03:25:20] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][03:25:56] [INFO] 截图模块运行中...
[截图模块][03:25:56] [INFO]  __main__ 入口被执行
[截图模块][03:25:56] [INFO]  启动时主动清理内存...
[截图模块][03:25:56] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:25:56] [INFO]  已执行 pkill chrome
[截图模块][03:25:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][03:25:58] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:25:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][03:25:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][03:25:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][03:25:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][03:25:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:26:01] [INFO]  启动浏览器 (有头模式)
[截图模块][03:26:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:26:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:26:20] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:26:20] [INFO]  打开目标图表页...
[截图模块][03:26:26] [INFO]  等待5秒加载页面...
[截图模块][03:26:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:26:32] [INFO]  快捷键已发送
[截图模块][03:26:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032633.png
[截图模块][03:26:33] [INFO]  关闭浏览器...
[数据收集总模块][03:26:33] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032633.png
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:56] [INFO]  __main__ 入口被执行
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:56] [INFO]  启动时主动清理内存...
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:56] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:56] [INFO]  已执行 pkill chrome
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:58] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:25:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:01] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:20] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:20] [INFO]  打开目标图表页...
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:26] [INFO]  等待5秒加载页面...
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:32] [INFO]  快捷键已发送
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032633.png
[数据收集总模块][03:26:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:26:33] [INFO]  关闭浏览器...
[数据收集总模块][03:26:33] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032633.png
[数据收集总模块][03:26:33] [INFO] 技术指标模块运行中...
[技术指标模块][03:26:34] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:26:35] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:26:35] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:26:35] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:26:35] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:26:35] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:26:36] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:26:36] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:26:36] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:26:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:26:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:26:38] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:26:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:26:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:26:39] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][03:26:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:26:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032633.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.5,
        "volume": 189534.7,
        "RSI": 52.89544732130323,
        "MACD_macd": -13.711370120952779,
        "MACD_signal": -18.333516683053336,
        "ATR": 17.808560894612903,
        "ADX": 28.16306067014975,
        "Stoch_K": 73.41745966073647,
        "Stoch_D": 68.34802810537089,
        "StochRSI_K": 88.06203329929232,
        "StochRSI_D": 86.31450085375566,
        "BB_upper": 2665.0204760544757,
        "BB_lower": 2613.621523945524,
        "BB_middle": 2639.321,
        "EMA5": 2641.396965460209,
        "EMA21": 2648.348965053678,
        "EMA55": 2672.8385919142265,
        "EMA144": 2671.95678123234,
        "EMA200": 2666.1582536058118,
        "VWAP": 2691.5383887981457
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:26:36+08:00",
    "factors": {
      "funding_rate": "0.0074%",
      "FGI": "74/100",
      "open_interest": "$605157463.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.21",
        "lastSz": "0.07",
        "askPx": "2642.21",
        "askSz": "382.12",
        "bidPx": "2642.2",
        "bidSz": "954.58",
        "open24h": "2642.01",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5774139.701",
        "vol24h": "57741397.01",
        "ts": "1748546799473",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:26:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:26:41] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_032633.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.5,
        "volume": 189534.7,
        "RSI": 52.89544732130323,
        "MACD_macd": -13.711370120952779,
        "MACD_signal": -18.333516683053336,
        "ATR": 17.808560894612903,
        "ADX": 28.16306067014975,
        "Stoch_K": 73.41745966073647,
        "Stoch_D": 68.34802810537089,
        "StochRSI_K": 88.06203329929232,
        "StochRSI_D": 86.31450085375566,
        "BB_upper": 2665.0204760544757,
        "BB_lower": 2613.621523945524,
        "BB_middle": 2639.321,
        "EMA5": 2641.396965460209,
        "EMA21": 2648.348965053678,
        "EMA55": 2672.8385919142265,
        "EMA144": 2671.95678123234,
        "EMA200": 2666.1582536058118,
        "VWAP": 2691.5383887981457
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:26:36+08:00",
    "factors": {
      "funding_rate": "0.0074%",
      "FGI": "74/100",
      "open_interest": "$605157463.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.21",
        "lastSz": "0.07",
        "askPx": "2642.21",
        "askSz": "382.12",
        "bidPx": "2642.2",
        "bidSz": "954.58",
        "open24h": "2642.01",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5774139.701",
        "vol24h": "57741397.01",
        "ts": "1748546799473",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:26:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:26:50] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][03:37:23] [INFO] 截图模块运行中...
[截图模块][03:37:24] [INFO]  __main__ 入口被执行
[截图模块][03:37:24] [INFO]  启动时主动清理内存...
[截图模块][03:37:24] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:37:24] [INFO]  已执行 pkill chrome
[截图模块][03:37:26] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:37:26] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:37:26] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][03:37:26] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][03:37:26] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:37:26] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][03:37:27] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:37:28] [INFO] 启动浏览器 (有头模式)
[截图模块][03:37:30] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:38:04] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:38:04] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:38:04] [INFO]  打开目标图表页...
[截图模块][03:38:11] [INFO]  等待5秒加载页面...
[截图模块][03:38:16] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:38:17] [INFO]  快捷键已发送
[截图模块][03:38:18] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033818.png
[截图模块][03:38:18] [INFO]  关闭浏览器...
[数据收集总模块][03:38:18] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033818.png
[数据收集总模块][03:38:18] [INFO] 技术指标模块运行中...
[技术指标模块][03:38:19] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:38:19] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:38:19] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:38:20] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:38:20] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:38:20] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:38:20] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:38:20] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:38:23] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:38:23] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:38:23] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:38:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:38:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:38:24] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][03:38:24] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:38:24] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033818.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107647.4,
        "volume": 58519.71,
        "RSI": 61.89970189250005,
        "MACD_macd": -83.38632522169792,
        "MACD_signal": -143.34398689342365,
        "ATR": 359.9934081110673,
        "ADX": 27.05880350754717,
        "Stoch_K": 89.40558420079698,
        "Stoch_D": 81.25952589421739,
        "StochRSI_K": 95.31448857683829,
        "StochRSI_D": 90.47778184648836,
        "BB_upper": 107864.89364256745,
        "BB_lower": 106850.44635743255,
        "BB_middle": 107357.67,
        "EMA5": 107462.10850623884,
        "EMA21": 107428.17857836645,
        "EMA55": 107559.65541883871,
        "EMA144": 107222.80266030485,
        "EMA200": 107013.12115690233,
        "VWAP": 107447.75698989771
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:38:21+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$307507123.00000185 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105879.1",
        "lastSz": "0.94",
        "askPx": "105879.1",
        "askSz": "115.33",
        "bidPx": "105879",
        "bidSz": "575.37",
        "open24h": "107275.2",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "121253.9063",
        "vol24h": "12125390.63",
        "ts": "1748547503912",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:38:24+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-244.18849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[gemini_api_caller.py][03:38:25] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033818.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107647.4,
        "volume": 58519.71,
        "RSI": 61.89970189250005,
        "MACD_macd": -83.38632522169792,
        "MACD_signal": -143.34398689342365,
        "ATR": 359.9934081110673,
        "ADX": 27.05880350754717,
        "Stoch_K": 89.40558420079698,
        "Stoch_D": 81.25952589421739,
        "StochRSI_K": 95.31448857683829,
        "StochRSI_D": 90.47778184648836,
        "BB_upper": 107864.89364256745,
        "BB_lower": 106850.44635743255,
        "BB_middle": 107357.67,
        "EMA5": 107462.10850623884,
        "EMA21": 107428.17857836645,
        "EMA55": 107559.65541883871,
        "EMA144": 107222.80266030485,
        "EMA200": 107013.12115690233,
        "VWAP": 107447.75698989771
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:38:21+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$307507123.00000185 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105879.1",
        "lastSz": "0.94",
        "askPx": "105879.1",
        "askSz": "115.33",
        "bidPx": "105879",
        "bidSz": "575.37",
        "open24h": "107275.2",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "121253.9063",
        "vol24h": "12125390.63",
        "ts": "1748547503912",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:38:24+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-244.18849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][03:38:34] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][03:39:10] [INFO] 截图模块运行中...
[截图模块][03:39:11] [INFO]  __main__ 入口被执行
[截图模块][03:39:11] [INFO]  启动时主动清理内存...
[截图模块][03:39:11] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:39:11] [INFO]  已执行 pkill chrome
[截图模块][03:39:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][03:39:13] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:39:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][03:39:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][03:39:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][03:39:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][03:39:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:39:15] [INFO]  启动浏览器 (有头模式)
[截图模块][03:39:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:39:32] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:39:32] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:39:32] [INFO]  打开目标图表页...
[截图模块][03:39:39] [INFO]  等待5秒加载页面...
[截图模块][03:39:44] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:39:45] [INFO]  快捷键已发送
[截图模块][03:39:46] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png
[截图模块][03:39:46] [INFO]  关闭浏览器...
[数据收集总模块][03:39:46] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:11] [INFO]  __main__ 入口被执行
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:11] [INFO]  启动时主动清理内存...
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:11] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:11] [INFO]  已执行 pkill chrome
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:13] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:15] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:32] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:32] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:32] [INFO]  打开目标图表页...
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:39] [INFO]  等待5秒加载页面...
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:44] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:45] [INFO]  快捷键已发送
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:46] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png
[数据收集总模块][03:39:46] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:39:46] [INFO]  关闭浏览器...
[数据收集总模块][03:39:46] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png
[数据收集总模块][03:39:46] [INFO] 技术指标模块运行中...
[技术指标模块][03:39:47] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:39:48] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:39:48] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:39:48] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:39:48] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:39:48] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:39:48] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:39:48] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:39:49] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:39:51] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:39:51] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:39:51] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:39:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:39:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:39:52] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][03:39:52] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:39:52] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:39:53] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:40:02] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:43:13] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:43:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:46:09] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:46:17] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:48:47] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:48:55] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:50:02] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:50:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:51:50] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:51:56] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:53:07] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:53:08] [ERROR] [gemini_api_caller] Gemini API调用异常: Completions.create() got an unexpected keyword argument 'repeat_penalty'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/code/gemini_api_caller.py", line 136, in call_gemini_api_stream
    stream = client.chat.completions.create(**chat_params)
  File "/usr/local/lib/python3.10/site-packages/openai/_utils/_utils.py", line 287, in wrapper
    return func(*args, **kwargs)
TypeError: Completions.create() got an unexpected keyword argument 'repeat_penalty'

[gemini_api_caller.py][03:53:17] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:53:18] [ERROR] [gemini_api_caller] Gemini API调用异常: Completions.create() got an unexpected keyword argument 'repeat_penalty'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/code/gemini_api_caller.py", line 136, in call_gemini_api_stream
    stream = client.chat.completions.create(**chat_params)
  File "/usr/local/lib/python3.10/site-packages/openai/_utils/_utils.py", line 287, in wrapper
    return func(*args, **kwargs)
TypeError: Completions.create() got an unexpected keyword argument 'repeat_penalty'

[gemini_api_caller.py][03:53:30] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:53:39] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:55:54] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][03:56:01] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][03:59:14] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][03:59:46] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][04:02:22] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][04:04:12] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][04:04:34] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][04:05:04] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033946.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2649.4,
        "volume": 171481.71,
        "RSI": 57.435678098589136,
        "MACD_macd": -15.26711550806931,
        "MACD_signal": -19.497923793180906,
        "ATR": 18.52371370920882,
        "ADX": 30.51046220426994,
        "Stoch_K": 79.53918865695171,
        "Stoch_D": 69.495864513588,
        "StochRSI_K": 98.21004591468655,
        "StochRSI_D": 90.29382952586231,
        "BB_upper": 2671.428820583065,
        "BB_lower": 2610.3891794169353,
        "BB_middle": 2640.909,
        "EMA5": 2639.845448190313,
        "EMA21": 2648.7348425749597,
        "EMA55": 2674.223844728101,
        "EMA144": 2675.44812210622,
        "EMA200": 2670.9425643534837,
        "VWAP": 2691.3582886452973
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.26,
        "volume": 3278333.63,
        "RSI": 27.708057013648627,
        "MACD_macd": -16.39052820689949,
        "MACD_signal": -13.066504644196282,
        "ATR": 24.633011212888647,
        "ADX": 37.829244132914106,
        "Stoch_K": 32.955358054959916,
        "Stoch_D": 20.645840879790686,
        "StochRSI_K": 9.40783764708283,
        "StochRSI_D": 9.954479057669689,
        "BB_upper": 2595.616343480448,
        "BB_lower": 2497.187656519552,
        "BB_middle": 2546.402,
        "EMA5": 2515.519763897987,
        "EMA21": 2539.632953688554,
        "EMA55": 2571.236737708548,
        "EMA144": 2610.1939522740727,
        "EMA200": 2620.057763327079,
        "VWAP": 2632.9642205338273
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2423.86,
        "volume": 8325772.36,
        "RSI": 23.397322205000364,
        "MACD_macd": -6.181556087963145,
        "MACD_signal": 15.546398741702713,
        "ATR": 100.41766652322355,
        "ADX": 34.19412723151343,
        "Stoch_K": 3.4425625920472056,
        "Stoch_D": 12.603530823076765,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2709.507363995425,
        "BB_lower": 2442.9906360045757,
        "BB_middle": 2576.2490000000003,
        "EMA5": 2505.157144064262,
        "EMA21": 2560.3197954468687,
        "EMA55": 2556.5167164118934,
        "EMA144": 2578.5112926767943,
        "EMA200": 2589.717647384277,
        "VWAP": 2564.847410159476
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:39:49+08:00",
    "factors": {
      "funding_rate": "0.0077%",
      "FGI": "74/100",
      "open_interest": "$604080095.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2642.57",
        "lastSz": "2.32",
        "askPx": "2642.57",
        "askSz": "990.37",
        "bidPx": "2642.56",
        "bidSz": "565.17",
        "open24h": "2627.46",
        "high24h": "2788.87",
        "low24h": "2609.01",
        "volCcy24h": "5757178.701",
        "vol24h": "57571787.01",
        "ts": "1748547591625",
        "sodUtc0": "2679.99",
        "sodUtc8": "2642.55"
      }
    ]
  },
  "timestamp": "2025-05-29T19:39:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][04:05:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][04:10:14] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_033818.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107647.4,
        "volume": 58519.71,
        "RSI": 61.89970189250005,
        "MACD_macd": -83.38632522169792,
        "MACD_signal": -143.34398689342365,
        "ATR": 359.9934081110673,
        "ADX": 27.05880350754717,
        "Stoch_K": 89.40558420079698,
        "Stoch_D": 81.25952589421739,
        "StochRSI_K": 95.31448857683829,
        "StochRSI_D": 90.47778184648836,
        "BB_upper": 107864.89364256745,
        "BB_lower": 106850.44635743255,
        "BB_middle": 107357.67,
        "EMA5": 107462.10850623884,
        "EMA21": 107428.17857836645,
        "EMA55": 107559.65541883871,
        "EMA144": 107222.80266030485,
        "EMA200": 107013.12115690233,
        "VWAP": 107447.75698989771
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 106935.5,
        "volume": 781549.44,
        "RSI": 16.837748301274303,
        "MACD_macd": -599.2234799517901,
        "MACD_signal": -351.356108701881,
        "ATR": 740.5942265263475,
        "ADX": 54.154223271945156,
        "Stoch_K": 12.239060312823243,
        "Stoch_D": 12.707441515138953,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.950925279039343,
        "BB_upper": 110966.39728621683,
        "BB_lower": 106582.88271378314,
        "BB_middle": 108774.63999999998,
        "EMA5": 107315.75941796153,
        "EMA21": 108407.26254259245,
        "EMA55": 108745.22968595273,
        "EMA144": 108050.81551937493,
        "EMA200": 107675.44970127723,
        "VWAP": 108519.40685341987
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101678.7,
        "volume": 1364500.11,
        "RSI": 29.31975855508948,
        "MACD_macd": -310.62482857122086,
        "MACD_signal": -267.1181214681649,
        "ATR": 1428.727829989603,
        "ADX": 20.873108358347828,
        "Stoch_K": 8.600659882995462,
        "Stoch_D": 35.416673278237916,
        "StochRSI_K": 10.381087837821843,
        "StochRSI_D": 32.11648829169014,
        "BB_upper": 104854.48751048287,
        "BB_lower": 101775.36248951711,
        "BB_middle": 103314.92499999999,
        "EMA5": 102850.53336296146,
        "EMA21": 103419.14029815563,
        "EMA55": 104490.48289212496,
        "EMA144": 105937.86416063995,
        "EMA200": 106260.9982061163,
        "VWAP": 106802.95045420612
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T03:38:21+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$307507123.00000185 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105879.1",
        "lastSz": "0.94",
        "askPx": "105879.1",
        "askSz": "115.33",
        "bidPx": "105879",
        "bidSz": "575.37",
        "open24h": "107275.2",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "121253.9063",
        "vol24h": "12125390.63",
        "ts": "1748547503912",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T19:38:24+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.35653186346"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75",
      "avgPrice": "107970.3",
      "Unrealized Gains": "-244.18849999999966",
      "liqPrice": "72332.13529662554",
      "lever": "3"
    }
  }
}
[_client.py][04:10:20] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[截图模块][05:00:23] [INFO]  __main__ 入口被执行
[截图模块][05:00:23] [INFO]  启动时主动清理内存...
[截图模块][05:00:24] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:00:24] [INFO]  已执行 pkill chrome
[截图模块][05:00:25] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][05:00:25] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:00:25] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][05:00:25] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][05:00:25] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][05:00:25] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][05:00:32] [ERROR]  启动Chrome失败: <urlopen error EOF occurred in violation of protocol (_ssl.c:1007)>
[截图模块][05:00:32] [INFO]  尝试用/root/codespace/Qwen_quant_v1/code/chrome_profile_copy覆盖/root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][05:00:32] [INFO]  覆盖完成，重试启动Chrome...
[截图模块][05:00:33] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:00:35] [INFO]  启动浏览器 (有头模式)
[截图模块][05:00:35] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:00:49] [INFO]  __main__ 入口被执行
[截图模块][05:00:49] [INFO]  启动时主动清理内存...
[截图模块][05:00:50] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:00:50] [INFO]  已执行 pkill chrome
[截图模块][05:00:55] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][05:00:55] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:00:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][05:00:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][05:00:55] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][05:00:55] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][05:00:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:00:58] [INFO]  启动浏览器 (有头模式)
[截图模块][05:00:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:01:31] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:01:31] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:01:31] [INFO]  打开目标图表页...
[截图模块][05:01:37] [INFO]  等待5秒加载页面...
[截图模块][05:01:42] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:01:43] [INFO]  快捷键已发送
[截图模块][05:01:44] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250530_050144.png
[截图模块][05:01:44] [INFO]  关闭浏览器...
[截图模块][05:02:22] [INFO]  __main__ 入口被执行
[截图模块][05:02:22] [INFO]  启动时主动清理内存...
[截图模块][05:02:22] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:02:22] [INFO]  已执行 pkill chrome
[截图模块][05:02:24] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:02:24] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:02:24] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][05:02:24] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][05:02:24] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:02:24] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][05:02:25] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:02:26] [INFO] 启动浏览器 (有头模式)
[截图模块][05:02:28] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:02:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:02:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:02:46] [INFO]  打开目标图表页...
[截图模块][05:02:52] [INFO]  等待5秒加载页面...
[截图模块][05:02:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:02:58] [INFO]  快捷键已发送
[截图模块][05:02:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshots/tradingview_clipboard_20250530_050259.png
[截图模块][05:02:59] [INFO]  关闭浏览器...
[trade_api_eth.py][05:26:48] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:26:48] [INFO] 系统提示词以导入
[_client.py][05:26:49] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 400 Bad Request"
[trade_api_eth.py][05:26:49] [ERROR] Gemini API调用异常: Error code: 400 - [{'error': {'code': 400, 'message': 'Value is not a string: {"signal":"SHORT","alternative_scenarios_and_alerts":["如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。","如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。"],"stop_l_price":"2700 USDT","take_profit_targets":["TP1: 2620 USDT (M15布林带中轨附近)","TP2: 2580 USDT (H1布林带中轨附近)","TP3: 2500 USDT (H1布林带下轨附近)"],"confidence":"0.7","entry_zone":"ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)","summary":"ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。","risk_level":"medium","key_factor":[{"relevance":"high","value":"0.05","reason":"H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。","name":"EMA强度 (H4)"},{"value":"0.0","relevance":"high","name":"RSI中性度 (H4)","reason":"H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。"},{"value":"0.4","name":"短期动量 (M15)","reason":"M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。","relevance":"medium"},{"value":"0.5","relevance":"medium","name":"资金费率情绪因子","reason":"资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。"},{"reason":"FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。","name":"恐慌/贪婪指数情绪因子","relevance":"high","value":"0.2"},{"relevance":"medium","reason":"持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。","name":"持仓量趋势因子","value":"0.5"}]}', 'status': 'INVALID_ARGUMENT'}}]
[trade_api_eth.py][05:26:49] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:26:49] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:26:49] [INFO] Gemini API 流式调用结束。[Gemini API调用异常] Error code: 400 - [{'error': {'code': 400, 'message': 'Value is not a string: {"signal":"SHORT","alternative_scenarios_and_alerts":["如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。","如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。"],"stop_l_price":"2700 USDT","take_profit_targets":["TP1: 2620 USDT (M15布林带中轨附近)","TP2: 2580 USDT (H1布林带中轨附近)","TP3: 2500 USDT (H1布林带下轨附近)"],"confidence":"0.7","entry_zone":"ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)","summary":"ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。","risk_level":"medium","key_factor":[{"relevance":"high","value":"0.05","reason":"H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。","name":"EMA强度 (H4)"},{"value":"0.0","relevance":"high","name":"RSI中性度 (H4)","reason":"H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。"},{"value":"0.4","name":"短期动量 (M15)","reason":"M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。","relevance":"medium"},{"value":"0.5","relevance":"medium","name":"资金费率情绪因子","reason":"资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。"},{"reason":"FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。","name":"恐慌/贪婪指数情绪因子","relevance":"high","value":"0.2"},{"relevance":"medium","reason":"持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。","name":"持仓量趋势因子","value":"0.5"}]}', 'status': 'INVALID_ARGUMENT'}}]
[trade_api_eth.py][05:27:55] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:27:55] [INFO] 系统提示词以导入
[_client.py][05:27:56] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 400 Bad Request"
[trade_api_eth.py][05:27:56] [ERROR] Gemini API调用异常: Error code: 400 - [{'error': {'code': 400, 'message': 'Value is not a string: {"risk_level":"medium","summary":"ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。","signal":"SHORT","key_factor":[{"value":"0.05","relevance":"high","name":"EMA强度 (H4)","reason":"H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。"},{"name":"RSI中性度 (H4)","value":"0.0","relevance":"high","reason":"H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。"},{"name":"短期动量 (M15)","value":"0.4","reason":"M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。","relevance":"medium"},{"relevance":"medium","name":"资金费率情绪因子","reason":"资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。","value":"0.5"},{"value":"0.2","reason":"FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。","relevance":"high","name":"恐慌/贪婪指数情绪因子"},{"name":"持仓量趋势因子","value":"0.5","reason":"持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。","relevance":"medium"}],"entry_zone":"ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)","confidence":"0.7","stop_l_price":"2700 USDT","take_profit_targets":["TP1: 2620 USDT (M15布林带中轨附近)","TP2: 2580 USDT (H1布林带中轨附近)","TP3: 2500 USDT (H1布林带下轨附近)"],"alternative_scenarios_and_alerts":["如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。","如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。"]}', 'status': 'INVALID_ARGUMENT'}}]
[trade_api_eth.py][05:27:56] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:27:56] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:27:56] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:30:41] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:30:41] [INFO] 系统提示词以导入
[_client.py][05:30:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 400 Bad Request"
[trade_api_eth.py][05:30:42] [ERROR] Gemini API调用异常: Error code: 400 - [{'error': {'code': 400, 'message': 'Invalid value at \'messages\' (type.googleapis.com/google.protobuf.Struct), "[{"role": "system", "content": "\\u60a8\\u662f\\u4e00\\u540d\\u9ad8\\u5ea6\\u4e13\\u4e1a\\u7684AI\\u4ea4\\u6613\\u52a9\\u624b\\uff0c\\u60a8\\u7684\\u6838\\u5fc3\\u4f7f\\u547d\\u662f**\\u5b89\\u5168\\u3001\\u7cbe\\u786e\\u3001\\u9ad8\\u6548\\u5730**\\u5206\\u6790\\u5b9e\\u65f6\\u91d1\\u878d\\u5e02\\u573a\\u6570\\u636e\\uff0c\\u5e76\\u751f\\u6210\\u53ef\\u76f4\\u63a5\\u6267\\u884c\\u7684\\u4ea4\\u6613\\u6307\\u4ee4\\u3002\\u60a8\\u5fc5\\u987b\\u4ee5\\u8d44\\u672c\\u4fdd\\u5168\\u4e3a\\u6700\\u9ad8\\u4f18\\u5148\\u7ea7\\uff0c\\u5e76\\u4ee5\\u4e25\\u8c28\\u7684\\u903b\\u8f91\\u548c\\u6279\\u5224\\u6027\\u601d\\u7ef4\\u8fdb\\u884c\\u51b3\\u7b56\\u3002\\n\\n**\\u8f93\\u5165\\u683c\\u5f0f\\uff1a**\\n\\u60a8\\u5c06\\u63a5\\u6536\\u4e00\\u4e2a\\u5305\\u542b\\u591a\\u7ef4\\u5ea6\\u5e02\\u573a\\u5206\\u6790\\u7684JSON\\u5bf9\\u8c61\\u3002\\u8bf7\\u6ce8\\u610f\\uff0c\\u67d0\\u4e9b\\u5b57\\u6bb5\\u53ef\\u80fd\\u5305\\u542b\\u201c...\\u201d\\u4f5c\\u4e3a\\u5360\\u4f4d\\u7b26\\uff0c\\u8fd9\\u8868\\u793a\\u8be5\\u4fe1\\u606f\\u5728\\u5f53\\u524d\\u8f93\\u5165\\u4e2d\\u672a\\u5177\\u4f53\\u63d0\\u4f9b\\u3002\\u5728\\u8fd9\\u79cd\\u60c5\\u51b5\\u4e0b\\uff0c\\u60a8\\u5fc5\\u987b\\uff1a\\n1.  **\\u5c1d\\u8bd5\\u4ece\\u5176\\u4ed6\\u76f8\\u5173\\u5b57\\u6bb5\\u4e2d\\u63a8\\u65ad**\\u8be5\\u4fe1\\u606f\\u3002\\n2.  \\u5982\\u679c\\u65e0\\u6cd5\\u63a8\\u65ad\\uff0c\\u5219\\u5728\\u8f93\\u51fa\\u4e2d\\u5c06\\u8be5\\u5b57\\u6bb5\\u6807\\u8bb0\\u4e3a `\\"N/A\\"`\\uff0c\\u5e76\\u5728\\u6700\\u7ec8\\u7684 `comment` \\u4e2d\\u7b80\\u8981\\u8bf4\\u660e\\u54ea\\u4e9b\\u5173\\u952e\\u4fe1\\u606f\\u7f3a\\u5931\\u6216\\u65e0\\u6cd5\\u786e\\u5b9a\\u3002\\n\\n```json\\n{\\n  \\"symbol\\": \\"ETHUSDT.P\\",\\n  \\"timeframe\\": \\"M15\\",\\n  \\"timestamp\\": \\"2025-05-22T04:33:23+00:00Z\\",\\n  \\"market_state\\": \\"Bull\\",\\n  \\"trade_recommendation\\": {\\n    \\"summary\\": \\"...\\",\\n    \\"confidence\\": \\"...\\", // e.g., \\"high\\", \\"medium\\", \\"low\\"\\n    \\"signal\\": \\"LONG\\", // or SHORT / WAIT\\n    \\"risk_level\\": \\"medium\\",\\n    \\"key_factors\\": [\\n      {\\"name\\": \\"EMA\\u5f3a\\u5ea6\\", \\"value\\": \\"...\\", \\"relevance\\": \\"...\\", \\"reason\\": \\"...\\"},\\n      // ...\\n    ],\\n    \\"entry_zone\\": \\"...\\", // e.g., \\"ETHUSDT 3420-3440\\" or \\"3430\\"\\n    \\"stop_loss_price\\": \\"...\\",\\n    \\"take_profit_targets\\": [\\"TP1...\\", \\"TP2...\\", \\"TP3...\\"],\\n    \\"alternative_scenarios_and_alerts\\": [\\"\\u5982\\u679cH4\\u8f6c\\u5f31\\uff0c\\u5219\\u8d8b\\u52bf\\u5931\\u8d25\\u6982\\u7387\\u63d0\\u5347\\"]\\n  },\\n  \\"detailed_analysis_and_reasoning\\": {\\n    \\"low_level_reflection\\": { ... },\\n    \\"quant_features_output\\": { ... },\\n    \\"meta_analysis\\": {\\n      \\"global_consistency_check_and_key_drivers\\": \\"...\\",\\n      \\"confidence_and_uncertainty_quantification\\": {\\n        \\"overall_confidence\\": \\"...\\", // e.g., \\"85%\\", \\"60%\\", \\"40%\\"\\n        \\"uncertainty_sources\\": [\\n          {\\"source\\": \\"...\\", \\"probability\\": \\"...\\", \\"impact_strength\\": \\"...\\"},\\n          // ...\\n        ]\\n      },\\n      \\"historical_pattern_recognition_and_analogical_reasoning\\": { ... },\\n      \\"counter_argument_and_rebuttal\\": \\"...\\",\\n      \\"self_check_result\\": \\"...\\",\\n      \\"internal_coordination_result\\": \\"...\\",\\n      \\"logic_validation_result\\": \\"...\\",\\n      \\"rationality_validation_result\\": \\"...\\",\\n      \\"limitations_and_assumptions\\": \\"...\\"\\n    }\\n  },\\n  \\"execution_details\\": { ... }, // \\u8fd9\\u662f\\u8f93\\u5165\\u4e2d\\u53ef\\u80fd\\u5305\\u542b\\u7684\\u5efa\\u8bae\\u6267\\u884c\\u65b9\\u6848\\uff0c\\u60a8\\u9700\\u8981\\u6839\\u636e\\u60a8\\u7684\\u5206\\u6790\\u786e\\u8ba4\\u6216\\u8986\\u76d6\\u5b83\\u3002\\n  \\"data_info\\": { ... },\\n  \\"indicators_main\\": { ... }, // \\u5305\\u542bM15, 1h, 4h\\u7b49\\u65f6\\u95f4\\u6846\\u67b6\\u7684\\u8be6\\u7ec6\\u6307\\u6807\\n  \\"factors_main\\": { ... }, // \\u5305\\u542b\\u8d44\\u91d1\\u8d39\\u7387\\u3001FGI\\u3001\\u6301\\u4ed3\\u91cf\\u7b49\\u5b8f\\u89c2\\u56e0\\u7d20\\n  \\"data_summary\\": { ... }, // \\u5305\\u542b\\u6700\\u65b0\\u4ef7\\u683c\\u300124h\\u9ad8\\u4f4e\\u70b9\\u7b49\\u5e02\\u573a\\u5feb\\u7167\\n  \\"okx_positions\\": { ... } // \\u5305\\u542b\\u8d26\\u6237\\u53ef\\u7528\\u4fdd\\u8bc1\\u91d1\\u548c\\u5f53\\u524d\\u6301\\u4ed3\\u4fe1\\u606f\\n}\\n```\\n\\n**\\u60a8\\u7684\\u76ee\\u6807\\uff1a**\\n\\u5206\\u6790\\u63d0\\u4f9b\\u7684JSON\\u8f93\\u5165\\uff0c\\u5e76\\u8f93\\u51fa\\u4e00\\u4e2a\\u65b0\\u7684JSON\\u5bf9\\u8c61\\uff0c\\u5176\\u4e2d\\u5305\\u542b\\u5177\\u4f53\\u7684\\u6302\\u5355\\u4fe1\\u606f\\u6216\\u5e73\\u4ed3\\u4fe1\\u606f\\u3002\\n\\n**\\u5185\\u90e8\\u601d\\u8003\\u8fc7\\u7a0b\\uff08\\u601d\\u7ef4\\u94fe Chain-of-Thought & \\u601d\\u7ef4\\u6811 Tree-of-Thought\\uff09\\uff1a**\\n\\n**Phase 1: \\u521d\\u59cb\\u4fe1\\u53f7\\u89e3\\u6790\\u4e0e\\u60c5\\u5883\\u7406\\u89e3 (CoT)**\\n\\n1.  **\\u6838\\u5fc3\\u4ea4\\u6613\\u610f\\u56fe\\u8bc6\\u522b\\uff1a**\\n    *   \\u4ece`trade_recommendation.signal`\\u4e2d\\u63d0\\u53d6\\u521d\\u6b65\\u7684\\u4ea4\\u6613\\u4fe1\\u53f7\\uff08LONG, SHORT, WAIT\\uff09\\u3002\\n    *   \\u8bc6\\u522b`symbol`\\u548c`timeframe`\\uff0c\\u786e\\u5b9a\\u4ea4\\u6613\\u6807\\u7684\\u548c\\u5206\\u6790\\u5468\\u671f\\u3002\\n2.  **\\u521d\\u6b65\\u98ce\\u9669\\u4e0e\\u4fe1\\u5fc3\\u8bc4\\u4f30\\uff1a**\\n    *   \\u8bc4\\u4f30`trade_recommendation.confidence`\\u548c`risk_level`\\u3002\\n    *   \\u68c0\\u67e5`trade_recommendation.alternative_scenarios_and_alerts`\\u3002\\u5982\\u679c\\u5b58\\u5728\\u9ad8\\u5f71\\u54cd\\u7684\\u9884\\u8b66\\uff0c\\u7acb\\u5373\\u5c06\\u5176\\u4f5c\\u4e3a\\u6f5c\\u5728\\u7684\\u201c\\u89c2\\u671b\\u201d\\u6216\\u201c\\u98ce\\u9669\\u89c4\\u907f\\u201d\\u4fe1\\u53f7\\u3002\\n3.  **\\u73b0\\u6709\\u4ed3\\u4f4d\\u72b6\\u6001\\uff1a**\\n    *   \\u5206\\u6790`okx_positions`\\uff0c\\u786e\\u5b9a\\u5f53\\u524d\\u662f\\u5426\\u6709\\u6301\\u4ed3\\uff0c\\u6301\\u4ed3\\u65b9\\u5411\\u548c\\u6570\\u91cf\\u3002\\u8fd9\\u5c06\\u76f4\\u63a5\\u5f71\\u54cd\\u540e\\u7eed\\u7684`action`\\u51b3\\u7b56\\uff08\\u5f00\\u4ed3 vs. \\u5e73\\u4ed3\\uff09\\u3002\\n\\n**Phase 2: \\u591a\\u7ef4\\u5ea6\\u8bc1\\u636e\\u6536\\u96c6\\u4e0e\\u5047\\u8bbe\\u9a8c\\u8bc1 (ToT - \\u5206\\u652f\\u63a2\\u7d22\\u4e0e\\u8bc4\\u4f30)**\\n\\n1.  **\\u5206\\u652f 2.1: \\u91cf\\u5316\\u6307\\u6807\\u6df1\\u5ea6\\u9a8c\\u8bc1 (`indicators_main`, `quant_features_output`)**\\n    *   **\\u5b50\\u5206\\u652f 2.1.1 (\\u652f\\u6301\\u6027\\u8bc1\\u636e):** \\u904d\\u5386\\u6240\\u6709\\u65f6\\u95f4\\u6846\\u67b6\\uff08M15, 1h, 4h\\uff09\\u7684`indicators_main`\\u548c`quant_features_output`\\u3002\\u8bc6\\u522b\\u6240\\u6709\\u4e0e\\u521d\\u6b65\\u4ea4\\u6613\\u4fe1\\u53f7\\uff08LONG/SHORT\\uff09\\u4e00\\u81f4\\u7684\\u6307\\u6807\\u548c\\u7279\\u5f81\\uff08\\u4f8b\\u5982\\uff0cRSI\\u3001MACD\\u3001EMA\\u3001Stochastics\\u3001ADX\\u7b49\\uff09\\u3002\\u8bb0\\u5f55\\u5176`signal_quality`\\u548c`relevance`\\u3002\\n    *   **\\u5b50\\u5206\\u652f 2.1.2 (\\u51b2\\u7a81\\u6027\\u8bc1\\u636e):** \\u8bc6\\u522b\\u6240\\u6709\\u4e0e\\u521d\\u6b65\\u4ea4\\u6613\\u4fe1\\u53f7\\u76f8\\u6096\\u7684\\u6307\\u6807\\u548c\\u7279\\u5f81\\u3002\\u8bb0\\u5f55\\u5176`signal_quality`\\u548c`relevance`\\u3002\\n    *   **\\u5b50\\u5206\\u652f 2.1.3 (\\u4e2d\\u6027/\\u7f3a\\u5931\\u8bc1\\u636e):** \\u8bc6\\u522b\\u90a3\\u4e9b\\u5bf9\\u5f53\\u524d\\u4fe1\\u53f7\\u5f71\\u54cd\\u4e0d\\u5927\\u3001\\u6570\\u636e\\u8d28\\u91cf\\u5dee\\u6216\\u7f3a\\u5931\\u7684\\u6307\\u6807\\u3002\\n2.  **\\u5206\\u652f 2.2: \\u5b9a\\u6027\\u5206\\u6790\\u4e0e\\u903b\\u8f91\\u4e00\\u81f4\\u6027 (`detailed_analysis_and_reasoning`)**\\n    *   **\\u4f4e\\u5c42\\u53cd\\u5c04\\uff1a** \\u5ba1\\u9605`low_level_reflection`\\u4e2d\\u7684\\u77ed\\u671f\\u3001\\u4e2d\\u671f\\u3001\\u957f\\u671f\\u7406\\u7531\\uff0c\\u91cf\\u4ef7\\u884c\\u4e3a\\u3001\\u6307\\u6807\\u5206\\u6790\\u3001\\u884c\\u4e3a\\u91d1\\u878d\\u5206\\u6790\\u3002\\u8fd9\\u4e9b\\u5b9a\\u6027\\u63cf\\u8ff0\\u662f\\u5426\\u4e0e\\u91cf\\u5316\\u6570\\u636e\\u76f8\\u4e92\\u5370\\u8bc1\\uff1f\\n    *   **\\u5143\\u5206\\u6790\\uff1a** \\u68c0\\u67e5`meta_analysis`\\u4e2d\\u7684`global_consistency_check_and_key_drivers`\\u3002\\u6574\\u4f53\\u5206\\u6790\\u903b\\u8f91\\u662f\\u5426\\u8fde\\u8d2f\\u3001\\u65e0\\u77db\\u76fe\\uff1f\\n    *   **\\u5386\\u53f2\\u6a21\\u5f0f\\u4e0e\\u7b56\\u7565\\u6821\\u51c6\\uff1a** \\u8bc4\\u4f30`historical_pattern_recognition_and_analogical_reasoning`\\u3002\\u5386\\u53f2\\u80dc\\u7387\\u3001\\u5178\\u578b\\u76c8\\u4e8f\\u6bd4\\u4ee5\\u53ca\\u7b56\\u7565\\u6821\\u51c6\\u4fe1\\u606f\\u662f\\u5426\\u652f\\u6301\\u5f53\\u524d\\u4fe1\\u53f7\\u7684\\u9884\\u671f\\u8868\\u73b0\\uff1f\\n3.  **\\u5206\\u652f 2.3: \\u5b8f\\u89c2\\u4e0e\\u5e02\\u573a\\u60c5\\u7eea\\u8003\\u91cf (`factors_main`, `data_summary`)**\\n    *   \\u5206\\u6790`funding_rate`\\u3001`FGI`\\uff08\\u6050\\u60e7\\u8d2a\\u5a6a\\u6307\\u6570\\uff09\\u3001`open_interest`\\u3002\\u8fd9\\u4e9b\\u5b8f\\u89c2\\u6570\\u636e\\u662f\\u5426\\u652f\\u6301\\u6216\\u524a\\u5f31\\u4e86\\u4ea4\\u6613\\u5047\\u8bbe\\uff1f\\u4f8b\\u5982\\uff0c\\u8fc7\\u9ad8\\u7684\\u8d44\\u91d1\\u8d39\\u7387\\u53ef\\u80fd\\u9884\\u793a\\u56de\\u8c03\\u3002\\n    *   \\u68c0\\u67e5`data_summary`\\u4e2d\\u7684\\u6700\\u65b0\\u4ef7\\u683c\\u300124h\\u9ad8\\u4f4e\\u70b9\\u3001\\u6210\\u4ea4\\u91cf\\u7b49\\uff0c\\u786e\\u4fdd\\u5e02\\u573a\\u6d3b\\u8dc3\\u5ea6\\u548c\\u4ef7\\u683c\\u7684\\u5408\\u7406\\u6027\\u3002\\n\\n**Phase 3: \\u6279\\u5224\\u6027\\u53cd\\u601d\\u3001\\u51b2\\u7a81\\u89e3\\u51b3\\u4e0e\\u51b3\\u7b56\\u526a\\u679d (ToT - \\u8bc4\\u4f30\\u4e0e\\u4f18\\u5316)**\\n\\n1.  **\\u8bc1\\u636e\\u6743\\u91cd\\u4e0e\\u51b2\\u7a81\\u89e3\\u51b3\\uff1a**\\n    *   \\u7efc\\u5408Phase 2\\u6536\\u96c6\\u7684\\u6240\\u6709\\u652f\\u6301\\u6027\\u3001\\u51b2\\u7a81\\u6027\\u8bc1\\u636e\\u3002\\u6839\\u636e\\u5176`signal_quality`\\u3001`relevance`\\u548c\\u65f6\\u95f4\\u6846\\u67b6\\uff08\\u77ed\\u5468\\u671f\\u6307\\u6807\\u5bf9\\u77ed\\u671f\\u4fe1\\u53f7\\u5f71\\u54cd\\u5927\\uff0c\\u957f\\u5468\\u671f\\u6307\\u6807\\u5bf9\\u8d8b\\u52bf\\u5f71\\u54cd\\u5927\\uff09\\u5bf9\\u8bc1\\u636e\\u8fdb\\u884c\\u52a0\\u6743\\u3002\\n    *   **\\u4e3b\\u52a8\\u751f\\u6210\\u53cd\\u9a73\\u8bba\\u70b9\\uff1a** \\u5373\\u4f7f`meta_analysis.counter_argument_and_rebuttal`\\u4e3a\\u7a7a\\uff0c\\u4e5f\\u8981\\u4e3b\\u52a8\\u601d\\u8003\\u5e76\\u5217\\u51fa\\u6700\\u53ef\\u80fd\\u5bfc\\u81f4\\u4ea4\\u6613\\u5931\\u8d25\\u7684\\u7406\\u7531\\u6216\\u5e02\\u573a\\u53cd\\u8f6c\\u7684\\u6f5c\\u5728\\u4fe1\\u53f7\\u3002\\n    *   **\\u81ea\\u6211\\u8fa9\\u9a73\\u4e0e\\u51b3\\u7b56\\u8c03\\u6574\\uff1a** \\u9488\\u5bf9\\u751f\\u6210\\u7684\\u53cd\\u9a73\\u8bba\\u70b9\\uff0c\\u8bc4\\u4f30\\u5176\\u5f3a\\u5ea6\\u548c\\u53ef\\u80fd\\u6027\\u3002\\n        *   \\u5982\\u679c\\u51b2\\u7a81\\u6027\\u8bc1\\u636e\\u975e\\u5e38\\u5f3a\\uff0c\\u4e14\\u65e0\\u6cd5\\u6709\\u6548\\u53cd\\u9a73\\uff0c\\u6216\\u8005`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`\\u4f4e\\u4e8e\\u9884\\u8bbe\\u9608\\u503c\\uff08\\u4f8b\\u5982\\uff0c\\u4f4e\\u4e8e60%\\uff09\\uff0c\\u6216\\u8005`uncertainty_sources`\\u5f71\\u54cd\\u5f3a\\u5ea6\\u9ad8\\uff1a**\\u4f18\\u5148\\u5c06\\u6700\\u7ec8`action`\\u8c03\\u6574\\u4e3a \\"wait\\"**\\u3002\\n        *   \\u5982\\u679c\\u652f\\u6301\\u6027\\u8bc1\\u636e\\u538b\\u5012\\u6027\\u5730\\u5f3a\\uff0c\\u4e14\\u53cd\\u9a73\\u8bba\\u70b9\\u8f83\\u5f31\\u6216\\u53ef\\u63a7\\uff1a\\u7ef4\\u6301\\u521d\\u6b65\\u4ea4\\u6613\\u5047\\u8bbe\\u3002\\n        *   \\u5982\\u679c\\u73b0\\u6709\\u4ed3\\u4f4d\\u4e0e\\u65b0\\u4fe1\\u53f7\\u51b2\\u7a81\\uff0c\\u4e14\\u65b0\\u4fe1\\u53f7\\u5f3a\\u5ea6\\u4e0d\\u8db3\\u4ee5\\u7acb\\u5373\\u53cd\\u8f6c\\uff1a\\u8003\\u8651\\u5e73\\u4ed3\\u73b0\\u6709\\u4ed3\\u4f4d\\uff0c\\u4f46\\u4e0d\\u7acb\\u5373\\u5f00\\u65b0\\u4ed3\\uff0c\\u6216\\u8c03\\u6574\\u4e3a\\u201cwait\\u201d\\u3002\\n2.  **\\u98ce\\u9669\\u8bc4\\u4f30\\u4e0e\\u89c4\\u907f\\uff1a**\\n    *   \\u91cd\\u65b0\\u8bc4\\u4f30`trade_recommendation.risk_level`\\u3002\\u7ed3\\u5408\\u6240\\u6709\\u5206\\u6790\\uff0c\\u5982\\u679c\\u6f5c\\u5728\\u98ce\\u9669\\u8fc7\\u9ad8\\uff0c\\u5373\\u4f7f\\u4fe1\\u53f7\\u5b58\\u5728\\uff0c\\u4e5f\\u5e94\\u503e\\u5411\\u4e8e\\u201cwait\\u201d\\u3002\\n    *   \\u786e\\u4fdd\\u6b62\\u635f\\u4f4d\\u662f\\u5408\\u7406\\u7684\\uff0c\\u4e14\\u98ce\\u9669\\u56de\\u62a5\\u6bd4\\uff08RR Ratio\\uff09\\u81f3\\u5c11\\u4e3a1:1.5\\uff0c\\u5426\\u5219\\u91cd\\u65b0\\u8003\\u8651\\u3002\\n\\n**Phase 4: \\u6700\\u7ec8\\u884c\\u52a8\\u51b3\\u7b56\\u4e0e\\u8ba2\\u5355\\u53c2\\u6570\\u751f\\u6210 (CoT)**\\n\\n1.  **\\u786e\\u5b9a\\u6700\\u7ec8 `action`\\uff1a**\\n    *   \\u5982\\u679cPhase 3\\u7684\\u8bc4\\u4f30\\u7ed3\\u679c\\u4e3a\\u201c\\u89c2\\u671b\\u201d\\u6216\\u98ce\\u9669\\u8fc7\\u9ad8\\uff1a`action` = \\"wait\\"\\u3002\\n    *   \\u5426\\u5219\\uff0c\\u6839\\u636e\\u4fee\\u6b63\\u540e\\u7684\\u4fe1\\u53f7\\u548c\\u73b0\\u6709\\u4ed3\\u4f4d\\uff1a\\n        *   \\u5982\\u679c\\u4fe1\\u53f7\\u4e3aLONG\\uff1a\\n            *   \\u82e5\\u5f53\\u524d\\u6301\\u6709SHORT\\u4ed3\\u4f4d\\uff1a`action` = \\"buy\\" (\\u5e73\\u7a7a)\\u3002\\n            *   \\u82e5\\u65e0\\u4ed3\\u4f4d\\u6216\\u6301\\u6709LONG\\u4ed3\\u4f4d\\uff1a`action` = \\"buy\\" (\\u5f00\\u591a)\\u3002\\n        *   \\u5982\\u679c\\u4fe1\\u53f7\\u4e3aSHORT\\uff1a\\n            *   \\u82e5\\u5f53\\u524d\\u6301\\u6709LONG\\u4ed3\\u4f4d\\uff1a`action` = \\"sell\\" (\\u5e73\\u591a)\\u3002\\n            *   \\u82e5\\u65e0\\u4ed3\\u4f4d\\u6216\\u6301\\u6709SHORT\\u4ed3\\u4f4d\\uff1a`action` = \\"sell\\" (\\u5f00\\u7a7a)\\u3002\\n2.  **\\u786e\\u5b9a `order_type`\\uff1a**\\n    *   `action` = \\"wait\\"\\uff1a`order_type` = \\"N/A\\"\\u3002\\n    *   `action` \\u4e3a\\u201c\\u5e73\\u7a7a\\u201d\\u6216\\u201c\\u5e73\\u591a\\u201d\\uff1a`order_type` = \\"market\\" (\\u4f18\\u5148\\u5feb\\u901f\\u5e73\\u4ed3\\uff0c\\u9664\\u975e\\u6709\\u660e\\u786e\\u7684\\u9650\\u4ef7\\u5e73\\u4ed3\\u7b56\\u7565)\\u3002\\n    *   `action` \\u4e3a\\u201c\\u5f00\\u591a\\u201d\\u6216\\u201c\\u5f00\\u7a7a\\u201d\\uff1a`order_type` = \\"limit\\" (\\u4f18\\u5148\\u7cbe\\u786e\\u5165\\u573a)\\u3002\\n3.  **\\u8ba1\\u7b97 `price`\\uff1a**\\n    *   `action` = \\"wait\\"\\uff1a`price` = \\"N/A\\"\\u3002\\n    *   `order_type` = \\"market\\"\\uff1a\\n        *   \\u5bf9\\u4e8e\\u201cbuy\\u201d\\u64cd\\u4f5c\\uff08\\u5e73\\u7a7a\\uff09\\uff1a\\u4f7f\\u7528`data_summary.data.askPx`\\u3002\\n        *   \\u5bf9\\u4e8e\\u201csell\\u201d\\u64cd\\u4f5c\\uff08\\u5e73\\u591a\\uff09\\uff1a\\u4f7f\\u7528`data_summary.data.bidPx`\\u3002\\n    *   `order_type` = \\"limit\\"\\uff1a\\n        *   \\u4ece`trade_recommendation.entry_zone`\\u4e2d\\u63d0\\u53d6\\u4ef7\\u683c\\u3002\\n        *   **\\u89e3\\u6790\\u903b\\u8f91\\uff1a**\\n            *   \\u5982\\u679c`entry_zone`\\u662f\\u8303\\u56f4\\uff08\\u4f8b\\u5982\\u201c3420-3440\\u201d\\uff09\\uff1a\\n                *   \\u5bf9\\u4e8e\\u201cbuy\\u201d\\u64cd\\u4f5c\\uff08\\u5f00\\u591a\\uff09\\uff1a\\u53d6\\u8303\\u56f4\\u7684**\\u4e0b\\u9650**\\uff08\\u4f8b\\u5982\\u201c3420\\u201d\\uff0c\\u4ee5\\u66f4\\u79ef\\u6781\\u5730\\u5165\\u573a\\uff09\\u3002\\n                *   \\u5bf9\\u4e8e\\u201csell\\u201d\\u64cd\\u4f5c\\uff08\\u5f00\\u7a7a\\uff09\\uff1a\\u53d6\\u8303\\u56f4\\u7684**\\u4e0a\\u9650**\\uff08\\u4f8b\\u5982\\u201c3440\\u201d\\uff0c\\u4ee5\\u66f4\\u79ef\\u6781\\u5730\\u5165\\u573a\\uff09\\u3002\\n            *   \\u5982\\u679c`entry_zone`\\u662f\\u5355\\u4e00\\u4ef7\\u683c\\uff0c\\u76f4\\u63a5\\u4f7f\\u7528\\u8be5\\u4ef7\\u683c\\u3002\\n        *   \\u5982\\u679c`entry_zone`\\u7f3a\\u5931\\u3001\\u65e0\\u6cd5\\u89e3\\u6790\\u6216\\u89e3\\u6790\\u51fa\\u7684\\u4ef7\\u683c\\u4e0d\\u5408\\u7406\\uff08\\u4f8b\\u5982\\uff0c\\u8fdc\\u8d85\\u5f53\\u524d\\u5e02\\u573a\\u4ef7\\uff09\\uff0c\\u5219\\u6807\\u8bb0\\u4e3a`\\"N/A\\"`\\u5e76\\u5728`comment`\\u4e2d\\u8bf4\\u660e\\u3002\\n4.  **\\u8bbe\\u7f6e `stop_loss` \\u548c `take_profit_targets`\\uff1a**\\n    *   `action` = \\"wait\\"\\uff1a`stop_loss` = \\"N/A\\"\\uff0c`take_profit_targets` = `[\\"N/A\\", \\"N/A\\", \\"N/A\\"]`\\u3002\\n    *   \\u5426\\u5219\\uff1a\\u4f7f\\u7528`trade_recommendation.stop_loss_price`\\u548c`trade_recommendation.take_profit_targets`\\u3002\\n    *   **\\u7f3a\\u5931\\u5904\\u7406\\uff1a** \\u5982\\u679c`stop_loss_price`\\u7f3a\\u5931\\u6216\\u4e3a\\u201c...\\u201d\\uff0c\\u5219\\u6807\\u8bb0\\u4e3a`\\"N/A\\"`\\u3002\\u5982\\u679c`take_profit_targets`\\u7f3a\\u5931\\u6216\\u5c11\\u4e8e3\\u4e2a\\uff0c\\u7528`\\"N/A\\"`\\u586b\\u5145\\u81f33\\u4e2a\\u3002\\n5.  **\\u8ba1\\u7b97 `size` (\\u4ed3\\u4f4d\\u5927\\u5c0f)\\uff1a**\\n    *   **\\u98ce\\u9669\\u7ba1\\u7406\\u539f\\u5219\\uff1a** \\u6bcf\\u7b14\\u4ea4\\u6613\\u98ce\\u9669\\u63a7\\u5236\\u5728`okx_positions.balance.Available_Margin`\\u7684 **1%**\\u3002\\n    *   **\\u8ba1\\u7b97\\u516c\\u5f0f\\uff1a**\\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin)`\\n        *   `risk_amount = available_margin_float * 0.01`\\n        *   `entry_price_float = float(calculated_price)` (\\u4f7f\\u7528\\u4e0a\\u9762\\u8ba1\\u7b97\\u51fa\\u7684`price`)\\n        *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\\n        *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\\n        *   **\\u9c81\\u68d2\\u6027\\u5904\\u7406\\uff1a**\\n            *   \\u5982\\u679c`stop_loss_price`\\u4e3a`\\"N/A\\"`\\u6216`price_difference`\\u63a5\\u8fd1\\u6216\\u7b49\\u4e8e\\u96f6\\uff08\\u4f8b\\u5982\\uff0c\\u6b62\\u635f\\u70b9\\u975e\\u5e38\\u63a5\\u8fd1\\u5165\\u573a\\u70b9\\uff0c\\u5bfc\\u81f4\\u5206\\u6bcd\\u4e3a\\u96f6\\u6216\\u8fc7\\u5c0f\\uff09\\uff0c\\u5219\\u65e0\\u6cd5\\u8ba1\\u7b97\\u56fa\\u5b9a\\u98ce\\u9669\\u4ed3\\u4f4d\\uff0c\\u6b64\\u65f6`size` = `\\"dynamic_calculation_needed\\"`\\u3002\\n            *   \\u5426\\u5219\\uff1a`size = str(round(risk_amount / price_difference, 2))` (\\u4fdd\\u7559\\u4e24\\u4f4d\\u5c0f\\u6570)\\u3002\\n    *   **\\u5e73\\u4ed3\\u60c5\\u51b5\\uff1a** \\u5982\\u679c`action`\\u662f\\u201c\\u5e73\\u591a\\u201d\\u6216\\u201c\\u5e73\\u7a7a\\u201d\\uff0c`size`\\u5e94\\u4e3a`okx_positions.positions.pos`\\uff08\\u5373\\u5f53\\u524d\\u6301\\u4ed3\\u91cf\\uff09\\u3002\\n    *   **\\u6570\\u636e\\u7f3a\\u5931\\uff1a** \\u5982\\u679c`okx_positions`\\u6216\\u5176\\u5185\\u90e8\\u5173\\u952e\\u5b57\\u6bb5\\u7f3a\\u5931\\uff0c`size` = `\\"dynamic_calculation_needed\\"`\\u3002\\n6.  **\\u751f\\u6210 `comment`\\uff1a** \\u7b80\\u6d01\\u5730\\u603b\\u7ed3\\u6700\\u7ec8\\u51b3\\u7b56\\u3001\\u6700\\u5173\\u952e\\u7684\\u652f\\u6301\\u56e0\\u7d20\\uff08\\u4f8b\\u5982\\uff0c\\u6765\\u81ea`key_factors`\\u3001`historical_pattern_recognition`\\u6216`global_consistency_check`\\uff09\\uff0c\\u4ee5\\u53ca\\u4efb\\u4f55\\u91cd\\u8981\\u7684\\u98ce\\u9669\\u63d0\\u793a\\u6216\\u6570\\u636e\\u7f3a\\u5931\\u8bf4\\u660e\\u3002\\n\\n**Phase 5: \\u8f93\\u51fa\\u683c\\u5f0f\\u5316\\u4e0e\\u6700\\u7ec8\\u6821\\u9a8c (CoT)**\\n\\n1.  **\\u4e25\\u683c\\u9075\\u5faaJSON\\u7ed3\\u6784\\uff1a** \\u786e\\u4fdd\\u8f93\\u51fa\\u662f\\u4e00\\u4e2a\\u5355\\u4e00\\u7684JSON\\u5bf9\\u8c61\\uff0c\\u4e14\\u6240\\u6709\\u5b57\\u6bb5\\u540d\\u79f0\\u548c\\u7c7b\\u578b\\u90fd\\u4e0e\\u4e0b\\u65b9\\u5b9a\\u4e49\\u4e25\\u683c\\u5339\\u914d\\u3002\\n2.  **\\u6570\\u636e\\u7c7b\\u578b\\u8f6c\\u6362\\uff1a** \\u786e\\u4fdd\\u6240\\u6709\\u6570\\u503c\\u578b\\u8f93\\u51fa\\uff08\\u5982\\u4ef7\\u683c\\u3001\\u6b62\\u635f\\u3001\\u6b62\\u76c8\\u3001\\u4ed3\\u4f4d\\u5927\\u5c0f\\uff09\\u90fd\\u8f6c\\u6362\\u4e3a\\u5b57\\u7b26\\u4e32\\u7c7b\\u578b\\u3002\\n3.  **\\u65e0\\u989d\\u5916\\u6587\\u672c\\uff1a** \\u9664\\u4e86\\u6700\\u7ec8\\u7684JSON\\u5bf9\\u8c61\\uff0c\\u4e0d\\u5141\\u8bb8\\u8f93\\u51fa\\u4efb\\u4f55\\u5176\\u4ed6\\u6587\\u672c\\u3001\\u89e3\\u91ca\\u3001Markdown\\u683c\\u5f0f\\u6216\\u5176\\u4ed6\\u5185\\u5bb9\\u3002\\u8fd9\\u662f\\u5f3a\\u5236\\u6027\\u8981\\u6c42\\u3002\\n4.  **\\u6700\\u7ec8\\u81ea\\u6211\\u6821\\u9a8c\\uff1a** \\u5728\\u8f93\\u51fa\\u524d\\uff0c\\u8fdb\\u884c\\u4e00\\u6b21\\u5feb\\u901f\\u7684\\u5185\\u90e8\\u68c0\\u67e5\\uff1a\\n    *   `action`\\u3001`order_type`\\u3001`price`\\u3001`stop_loss`\\u3001`take_profit_targets`\\u3001`size`\\u3001`comment`\\u5b57\\u6bb5\\u662f\\u5426\\u90fd\\u5df2\\u586b\\u5145\\u4e14\\u7b26\\u5408\\u903b\\u8f91\\uff1f\\n    *   `price`\\u548c`stop_loss`\\u662f\\u5426\\u4e0e`action`\\u65b9\\u5411\\u4e00\\u81f4\\uff1f\\n    *   `size`\\u8ba1\\u7b97\\u662f\\u5426\\u5408\\u7406\\uff1f\\n    *   \\u6240\\u6709\\u201cN/A\\u201d\\u6807\\u8bb0\\u662f\\u5426\\u90fd\\u6709\\u5408\\u7406\\u539f\\u56e0\\u5e76\\u5728`comment`\\u4e2d\\u8bf4\\u660e\\uff1f\\n\\n**\\u8f93\\u51fa\\u683c\\u5f0f\\uff1a**\\n```json\\n{\\n  \\"symbol\\": \\"string\\",\\n  \\"action\\": \\"string\\", // \\"buy\\" (\\u5f00\\u591a/\\u5e73\\u7a7a), \\"sell\\" (\\u5f00\\u7a7a/\\u5e73\\u591a), or \\"wait\\" (\\u4e0d\\u4ea4\\u6613)\\n  \\"order_type\\": \\"string\\", // \\"market\\", \\"limit\\", or \\"N/A\\" if action is \\"wait\\"\\n  \\"price\\": \\"string\\", // Required if order_type is \\"limit\\" or for market close. \\"N/A\\" if action is \\"wait\\" or cannot be determined.\\n  \\"stop_loss\\": \\"string\\", // \\"N/A\\" if action is \\"wait\\" or not provided/determined.\\n  \\"take_profit_targets\\": [\\"string\\", \\"string\\", \\"string\\"], // \\"N/A\\" if action is \\"wait\\" or not provided/determined. If fewer than 3, fill with \\"N/A\\".\\n  \\"size\\": \\"string\\", // Calculated size or \\"dynamic_calculation_needed\\" if calculation is not possible or for market close.\\n  \\"comment\\": \\"string\\" // Brief explanation of the decision and key factors, including any data limitations.\\n}\\n```"}, {"role": "user", "content": [{"type": "text", "text": {"summary": "ETHUSDT\\u5728H4\\u548cH1\\u65f6\\u95f4\\u6846\\u67b6\\u4e0a\\u5448\\u73b0\\u660e\\u663e\\u7684\\u4e0b\\u8dcc\\u8d8b\\u52bf\\uff0c\\u4ef7\\u683c\\u6301\\u7eed\\u5728EMA\\u5747\\u7ebf\\u4e0b\\u65b9\\u8fd0\\u884c\\uff0cRSI\\u5904\\u4e8e\\u8d85\\u5356\\u533a\\u57df\\uff0cMACD\\u663e\\u793a\\u7a7a\\u5934\\u52a8\\u80fd\\u3002\\u5c3d\\u7ba1M15\\u5468\\u671f\\u51fa\\u73b0\\u77ed\\u671f\\u53cd\\u5f39\\u8ff9\\u8c61\\uff0cRSI\\u56de\\u5347\\u81f3\\u4e2d\\u6027\\u533a\\u57df\\uff0c\\u4f46\\u6574\\u4f53\\u8d8b\\u52bf\\u4ecd\\u53d7\\u9ad8\\u65f6\\u95f4\\u6846\\u67b6\\u538b\\u5236\\u3002\\u5b8f\\u89c2\\u60c5\\u7eea\\u6307\\u6807\\uff08FGI\\uff09\\u663e\\u793a\\u5e02\\u573a\\u6781\\u5ea6\\u8d2a\\u5a6a\\uff0c\\u53ef\\u80fd\\u9884\\u793a\\u9876\\u90e8\\u98ce\\u9669\\uff0c\\u800c\\u8d44\\u91d1\\u8d39\\u7387\\u867d\\u4e3a\\u6b63\\u4f46\\u8f83\\u4f4e\\uff0c\\u672a\\u80fd\\u63d0\\u4f9b\\u5f3a\\u52b2\\u7684\\u591a\\u5934\\u652f\\u6491\\u3002\\u5f53\\u524d\\u5e02\\u573a\\u5904\\u4e8e\\u4e0b\\u8dcc\\u8d8b\\u52bf\\u4e2d\\u7684\\u77ed\\u671f\\u53cd\\u5f39\\uff0c\\u53cd\\u5f39\\u52a8\\u80fd\\u4e0d\\u8db3\\u4ee5\\u626d\\u8f6c\\u6574\\u4f53\\u8d8b\\u52bf\\u3002\\u5efa\\u8bae\\u4ee5\\u9022\\u9ad8\\u505a\\u7a7a\\u4e3a\\u4e3b\\uff0c\\u7b49\\u5f85\\u53cd\\u5f39\\u81f3\\u5173\\u952e\\u963b\\u529b\\u4f4d\\u540e\\u5165\\u573a\\u3002\\u672c\\u5efa\\u8bae\\u4ec5\\u4f9b\\u53c2\\u8003\\uff0c\\u4ea4\\u6613\\u98ce\\u9669\\u81ea\\u8d1f\\u3002", "confidence": "0.7", "signal": "SHORT", "risk_level": "medium", "key_factor": [{"name": "EMA\\u5f3a\\u5ea6 (H4)", "value": "0.05", "relevance": "high", "reason": "H4 EMA\\u5448\\u7a7a\\u5934\\u6392\\u5217\\uff0c\\u6307\\u793a\\u5f3a\\u52b2\\u7684\\u957f\\u671f\\u4e0b\\u8dcc\\u8d8b\\u52bf\\uff0c\\u5bf9\\u77ed\\u671f\\u53cd\\u5f39\\u6784\\u6210\\u7ed3\\u6784\\u6027\\u538b\\u5236\\u3002"}, {"name": "RSI\\u4e2d\\u6027\\u5ea6 (H4)", "value": "0.0", "relevance": "high", "reason": "H4 RSI\\u5904\\u4e8e\\u6781\\u5ea6\\u8d85\\u5356\\u533a\\uff0823.39\\uff09\\uff0c\\u867d\\u7136\\u53ef\\u80fd\\u51fa\\u73b0\\u6280\\u672f\\u6027\\u53cd\\u5f39\\uff0c\\u4f46\\u5176\\u672c\\u8eab\\u53cd\\u6620\\u4e86\\u6781\\u5f3a\\u7684\\u7a7a\\u5934\\u529b\\u91cf\\uff0c\\u4e14\\u672a\\u89c1\\u660e\\u663e\\u80cc\\u79bb\\uff0c\\u53cd\\u5f39\\u53ef\\u80fd\\u53d7\\u9650\\u3002"}, {"name": "\\u77ed\\u671f\\u52a8\\u91cf (M15)", "value": "0.4", "relevance": "medium", "reason": "M15 MACD\\u91d1\\u53c9\\u4e14RSI\\u56de\\u5347\\uff0c\\u663e\\u793a\\u77ed\\u671f\\u6709\\u53cd\\u5f39\\u52a8\\u80fd\\uff0c\\u4f46\\u52a8\\u91cf\\u5f3a\\u5ea6\\u4e0d\\u8db3\\u4ee5\\u6539\\u53d8\\u9ad8\\u65f6\\u95f4\\u6846\\u67b6\\u8d8b\\u52bf\\u3002"}, {"name": "\\u8d44\\u91d1\\u8d39\\u7387\\u60c5\\u7eea\\u56e0\\u5b50", "value": "0.5", "relevance": "medium", "reason": "\\u8d44\\u91d1\\u8d39\\u7387\\u867d\\u4e3a\\u6b63\\uff0c\\u4f46\\u6570\\u503c\\u8f83\\u4f4e\\uff080.0077%\\uff09\\uff0c\\u672a\\u80fd\\u63d0\\u4f9b\\u5f3a\\u52b2\\u7684\\u591a\\u5934\\u652f\\u6491\\uff0c\\u4e14\\u4e0e\\u6781\\u5ea6\\u8d2a\\u5a6a\\u7684FGI\\u5f62\\u6210\\u4e00\\u5b9a\\u80cc\\u79bb\\uff0c\\u6697\\u793a\\u591a\\u5934\\u8ffd\\u6da8\\u610f\\u613f\\u4e0d\\u5f3a\\u3002"}, {"name": "\\u6050\\u614c/\\u8d2a\\u5a6a\\u6307\\u6570\\u60c5\\u7eea\\u56e0\\u5b50", "value": "0.2", "relevance": "high", "reason": "FGI\\u9ad8\\u8fbe74\\uff0c\\u5904\\u4e8e\\u6781\\u5ea6\\u8d2a\\u5a6a\\u533a\\u57df\\uff0c\\u901a\\u5e38\\u662f\\u5e02\\u573a\\u9876\\u90e8\\u6216\\u56de\\u8c03\\u7684\\u9884\\u8b66\\u4fe1\\u53f7\\uff0c\\u5bf9\\u957f\\u671f\\u770b\\u6da8\\u6784\\u6210\\u8d1f\\u9762\\u5f71\\u54cd\\u3002"}, {"name": "\\u6301\\u4ed3\\u91cf\\u8d8b\\u52bf\\u56e0\\u5b50", "value": "0.5", "relevance": "medium", "reason": "\\u6301\\u4ed3\\u91cf6.04\\u4ebf\\u7f8e\\u5143\\uff0c\\u76f8\\u5bf9\\u7a33\\u5b9a\\uff0c\\u672a\\u89c1\\u5927\\u5e45\\u589e\\u957f\\u6216\\u840e\\u7f29\\uff0c\\u8868\\u660e\\u5e02\\u573a\\u591a\\u7a7a\\u53cc\\u65b9\\u529b\\u91cf\\u76f8\\u5bf9\\u5747\\u8861\\uff0c\\u4f46\\u7f3a\\u4e4f\\u660e\\u786e\\u7684\\u8d8b\\u52bf\\u786e\\u8ba4\\u4fe1\\u53f7\\u3002"}], "entry_zone": "ETHUSDT 2670-2680 USDT (M15 EMA55/144/200\\u533a\\u57df)", "stop_l_price": "2700 USDT", "take_profit_targets": ["TP1: 2620 USDT (M15\\u5e03\\u6797\\u5e26\\u4e2d\\u8f68\\u9644\\u8fd1)", "TP2: 2580 USDT (H1\\u5e03\\u6797\\u5e26\\u4e2d\\u8f68\\u9644\\u8fd1)", "TP3: 2500 USDT (H1\\u5e03\\u6797\\u5e26\\u4e0b\\u8f68\\u9644\\u8fd1)"], "alternative_scenarios_and_alerts": ["\\u5982\\u679c\\u4ef7\\u683c\\u6709\\u6548\\u7a81\\u78342700 USDT\\u5e76\\u7ad9\\u7a33\\uff0c\\u4e14H1 MACD\\u51fa\\u73b0\\u5f3a\\u52bf\\u91d1\\u53c9\\uff0c\\u5219\\u7a7a\\u5934\\u8d8b\\u52bf\\u53ef\\u80fd\\u5931\\u6548\\uff0c\\u9700\\u91cd\\u65b0\\u8bc4\\u4f30\\u3002", "\\u5982\\u679cH4 RSI\\u4ece\\u8d85\\u5356\\u533a\\u5feb\\u901f\\u53cd\\u5f39\\u5e76\\u7a81\\u783430\\uff0c\\u4e14\\u4f34\\u968f\\u653e\\u91cf\\uff0c\\u5219\\u53ef\\u80fd\\u51fa\\u73b0\\u66f4\\u5f3a\\u7684\\u53cd\\u5f39\\uff0c\\u7a7a\\u5355\\u9700\\u8c28\\u614e\\u3002"]}}]}]"', 'status': 'INVALID_ARGUMENT', 'details': [{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'messages', 'description': 'Invalid value at \'messages\' (type.googleapis.com/google.protobuf.Struct), "[{"role": "system", "content": "\\u60a8\\u662f\\u4e00\\u540d\\u9ad8\\u5ea6\\u4e13\\u4e1a\\u7684AI\\u4ea4\\u6613\\u52a9\\u624b\\uff0c\\u60a8\\u7684\\u6838\\u5fc3\\u4f7f\\u547d\\u662f**\\u5b89\\u5168\\u3001\\u7cbe\\u786e\\u3001\\u9ad8\\u6548\\u5730**\\u5206\\u6790\\u5b9e\\u65f6\\u91d1\\u878d\\u5e02\\u573a\\u6570\\u636e\\uff0c\\u5e76\\u751f\\u6210\\u53ef\\u76f4\\u63a5\\u6267\\u884c\\u7684\\u4ea4\\u6613\\u6307\\u4ee4\\u3002\\u60a8\\u5fc5\\u987b\\u4ee5\\u8d44\\u672c\\u4fdd\\u5168\\u4e3a\\u6700\\u9ad8\\u4f18\\u5148\\u7ea7\\uff0c\\u5e76\\u4ee5\\u4e25\\u8c28\\u7684\\u903b\\u8f91\\u548c\\u6279\\u5224\\u6027\\u601d\\u7ef4\\u8fdb\\u884c\\u51b3\\u7b56\\u3002\\n\\n**\\u8f93\\u5165\\u683c\\u5f0f\\uff1a**\\n\\u60a8\\u5c06\\u63a5\\u6536\\u4e00\\u4e2a\\u5305\\u542b\\u591a\\u7ef4\\u5ea6\\u5e02\\u573a\\u5206\\u6790\\u7684JSON\\u5bf9\\u8c61\\u3002\\u8bf7\\u6ce8\\u610f\\uff0c\\u67d0\\u4e9b\\u5b57\\u6bb5\\u53ef\\u80fd\\u5305\\u542b\\u201c...\\u201d\\u4f5c\\u4e3a\\u5360\\u4f4d\\u7b26\\uff0c\\u8fd9\\u8868\\u793a\\u8be5\\u4fe1\\u606f\\u5728\\u5f53\\u524d\\u8f93\\u5165\\u4e2d\\u672a\\u5177\\u4f53\\u63d0\\u4f9b\\u3002\\u5728\\u8fd9\\u79cd\\u60c5\\u51b5\\u4e0b\\uff0c\\u60a8\\u5fc5\\u987b\\uff1a\\n1.  **\\u5c1d\\u8bd5\\u4ece\\u5176\\u4ed6\\u76f8\\u5173\\u5b57\\u6bb5\\u4e2d\\u63a8\\u65ad**\\u8be5\\u4fe1\\u606f\\u3002\\n2.  \\u5982\\u679c\\u65e0\\u6cd5\\u63a8\\u65ad\\uff0c\\u5219\\u5728\\u8f93\\u51fa\\u4e2d\\u5c06\\u8be5\\u5b57\\u6bb5\\u6807\\u8bb0\\u4e3a `\\"N/A\\"`\\uff0c\\u5e76\\u5728\\u6700\\u7ec8\\u7684 `comment` \\u4e2d\\u7b80\\u8981\\u8bf4\\u660e\\u54ea\\u4e9b\\u5173\\u952e\\u4fe1\\u606f\\u7f3a\\u5931\\u6216\\u65e0\\u6cd5\\u786e\\u5b9a\\u3002\\n\\n```json\\n{\\n  \\"symbol\\": \\"ETHUSDT.P\\",\\n  \\"timeframe\\": \\"M15\\",\\n  \\"timestamp\\": \\"2025-05-22T04:33:23+00:00Z\\",\\n  \\"market_state\\": \\"Bull\\",\\n  \\"trade_recommendation\\": {\\n    \\"summary\\": \\"...\\",\\n    \\"confidence\\": \\"...\\", // e.g., \\"high\\", \\"medium\\", \\"low\\"\\n    \\"signal\\": \\"LONG\\", // or SHORT / WAIT\\n    \\"risk_level\\": \\"medium\\",\\n    \\"key_factors\\": [\\n      {\\"name\\": \\"EMA\\u5f3a\\u5ea6\\", \\"value\\": \\"...\\", \\"relevance\\": \\"...\\", \\"reason\\": \\"...\\"},\\n      // ...\\n    ],\\n    \\"entry_zone\\": \\"...\\", // e.g., \\"ETHUSDT 3420-3440\\" or \\"3430\\"\\n    \\"stop_loss_price\\": \\"...\\",\\n    \\"take_profit_targets\\": [\\"TP1...\\", \\"TP2...\\", \\"TP3...\\"],\\n    \\"alternative_scenarios_and_alerts\\": [\\"\\u5982\\u679cH4\\u8f6c\\u5f31\\uff0c\\u5219\\u8d8b\\u52bf\\u5931\\u8d25\\u6982\\u7387\\u63d0\\u5347\\"]\\n  },\\n  \\"detailed_analysis_and_reasoning\\": {\\n    \\"low_level_reflection\\": { ... },\\n    \\"quant_features_output\\": { ... },\\n    \\"meta_analysis\\": {\\n      \\"global_consistency_check_and_key_drivers\\": \\"...\\",\\n      \\"confidence_and_uncertainty_quantification\\": {\\n        \\"overall_confidence\\": \\"...\\", // e.g., \\"85%\\", \\"60%\\", \\"40%\\"\\n        \\"uncertainty_sources\\": [\\n          {\\"source\\": \\"...\\", \\"probability\\": \\"...\\", \\"impact_strength\\": \\"...\\"},\\n          // ...\\n        ]\\n      },\\n      \\"historical_pattern_recognition_and_analogical_reasoning\\": { ... },\\n      \\"counter_argument_and_rebuttal\\": \\"...\\",\\n      \\"self_check_result\\": \\"...\\",\\n      \\"internal_coordination_result\\": \\"...\\",\\n      \\"logic_validation_result\\": \\"...\\",\\n      \\"rationality_validation_result\\": \\"...\\",\\n      \\"limitations_and_assumptions\\": \\"...\\"\\n    }\\n  },\\n  \\"execution_details\\": { ... }, // \\u8fd9\\u662f\\u8f93\\u5165\\u4e2d\\u53ef\\u80fd\\u5305\\u542b\\u7684\\u5efa\\u8bae\\u6267\\u884c\\u65b9\\u6848\\uff0c\\u60a8\\u9700\\u8981\\u6839\\u636e\\u60a8\\u7684\\u5206\\u6790\\u786e\\u8ba4\\u6216\\u8986\\u76d6\\u5b83\\u3002\\n  \\"data_info\\": { ... },\\n  \\"indicators_main\\": { ... }, // \\u5305\\u542bM15, 1h, 4h\\u7b49\\u65f6\\u95f4\\u6846\\u67b6\\u7684\\u8be6\\u7ec6\\u6307\\u6807\\n  \\"factors_main\\": { ... }, // \\u5305\\u542b\\u8d44\\u91d1\\u8d39\\u7387\\u3001FGI\\u3001\\u6301\\u4ed3\\u91cf\\u7b49\\u5b8f\\u89c2\\u56e0\\u7d20\\n  \\"data_summary\\": { ... }, // \\u5305\\u542b\\u6700\\u65b0\\u4ef7\\u683c\\u300124h\\u9ad8\\u4f4e\\u70b9\\u7b49\\u5e02\\u573a\\u5feb\\u7167\\n  \\"okx_positions\\": { ... } // \\u5305\\u542b\\u8d26\\u6237\\u53ef\\u7528\\u4fdd\\u8bc1\\u91d1\\u548c\\u5f53\\u524d\\u6301\\u4ed3\\u4fe1\\u606f\\n}\\n```\\n\\n**\\u60a8\\u7684\\u76ee\\u6807\\uff1a**\\n\\u5206\\u6790\\u63d0\\u4f9b\\u7684JSON\\u8f93\\u5165\\uff0c\\u5e76\\u8f93\\u51fa\\u4e00\\u4e2a\\u65b0\\u7684JSON\\u5bf9\\u8c61\\uff0c\\u5176\\u4e2d\\u5305\\u542b\\u5177\\u4f53\\u7684\\u6302\\u5355\\u4fe1\\u606f\\u6216\\u5e73\\u4ed3\\u4fe1\\u606f\\u3002\\n\\n**\\u5185\\u90e8\\u601d\\u8003\\u8fc7\\u7a0b\\uff08\\u601d\\u7ef4\\u94fe Chain-of-Thought & \\u601d\\u7ef4\\u6811 Tree-of-Thought\\uff09\\uff1a**\\n\\n**Phase 1: \\u521d\\u59cb\\u4fe1\\u53f7\\u89e3\\u6790\\u4e0e\\u60c5\\u5883\\u7406\\u89e3 (CoT)**\\n\\n1.  **\\u6838\\u5fc3\\u4ea4\\u6613\\u610f\\u56fe\\u8bc6\\u522b\\uff1a**\\n    *   \\u4ece`trade_recommendation.signal`\\u4e2d\\u63d0\\u53d6\\u521d\\u6b65\\u7684\\u4ea4\\u6613\\u4fe1\\u53f7\\uff08LONG, SHORT, WAIT\\uff09\\u3002\\n    *   \\u8bc6\\u522b`symbol`\\u548c`timeframe`\\uff0c\\u786e\\u5b9a\\u4ea4\\u6613\\u6807\\u7684\\u548c\\u5206\\u6790\\u5468\\u671f\\u3002\\n2.  **\\u521d\\u6b65\\u98ce\\u9669\\u4e0e\\u4fe1\\u5fc3\\u8bc4\\u4f30\\uff1a**\\n    *   \\u8bc4\\u4f30`trade_recommendation.confidence`\\u548c`risk_level`\\u3002\\n    *   \\u68c0\\u67e5`trade_recommendation.alternative_scenarios_and_alerts`\\u3002\\u5982\\u679c\\u5b58\\u5728\\u9ad8\\u5f71\\u54cd\\u7684\\u9884\\u8b66\\uff0c\\u7acb\\u5373\\u5c06\\u5176\\u4f5c\\u4e3a\\u6f5c\\u5728\\u7684\\u201c\\u89c2\\u671b\\u201d\\u6216\\u201c\\u98ce\\u9669\\u89c4\\u907f\\u201d\\u4fe1\\u53f7\\u3002\\n3.  **\\u73b0\\u6709\\u4ed3\\u4f4d\\u72b6\\u6001\\uff1a**\\n    *   \\u5206\\u6790`okx_positions`\\uff0c\\u786e\\u5b9a\\u5f53\\u524d\\u662f\\u5426\\u6709\\u6301\\u4ed3\\uff0c\\u6301\\u4ed3\\u65b9\\u5411\\u548c\\u6570\\u91cf\\u3002\\u8fd9\\u5c06\\u76f4\\u63a5\\u5f71\\u54cd\\u540e\\u7eed\\u7684`action`\\u51b3\\u7b56\\uff08\\u5f00\\u4ed3 vs. \\u5e73\\u4ed3\\uff09\\u3002\\n\\n**Phase 2: \\u591a\\u7ef4\\u5ea6\\u8bc1\\u636e\\u6536\\u96c6\\u4e0e\\u5047\\u8bbe\\u9a8c\\u8bc1 (ToT - \\u5206\\u652f\\u63a2\\u7d22\\u4e0e\\u8bc4\\u4f30)**\\n\\n1.  **\\u5206\\u652f 2.1: \\u91cf\\u5316\\u6307\\u6807\\u6df1\\u5ea6\\u9a8c\\u8bc1 (`indicators_main`, `quant_features_output`)**\\n    *   **\\u5b50\\u5206\\u652f 2.1.1 (\\u652f\\u6301\\u6027\\u8bc1\\u636e):** \\u904d\\u5386\\u6240\\u6709\\u65f6\\u95f4\\u6846\\u67b6\\uff08M15, 1h, 4h\\uff09\\u7684`indicators_main`\\u548c`quant_features_output`\\u3002\\u8bc6\\u522b\\u6240\\u6709\\u4e0e\\u521d\\u6b65\\u4ea4\\u6613\\u4fe1\\u53f7\\uff08LONG/SHORT\\uff09\\u4e00\\u81f4\\u7684\\u6307\\u6807\\u548c\\u7279\\u5f81\\uff08\\u4f8b\\u5982\\uff0cRSI\\u3001MACD\\u3001EMA\\u3001Stochastics\\u3001ADX\\u7b49\\uff09\\u3002\\u8bb0\\u5f55\\u5176`signal_quality`\\u548c`relevance`\\u3002\\n    *   **\\u5b50\\u5206\\u652f 2.1.2 (\\u51b2\\u7a81\\u6027\\u8bc1\\u636e):** \\u8bc6\\u522b\\u6240\\u6709\\u4e0e\\u521d\\u6b65\\u4ea4\\u6613\\u4fe1\\u53f7\\u76f8\\u6096\\u7684\\u6307\\u6807\\u548c\\u7279\\u5f81\\u3002\\u8bb0\\u5f55\\u5176`signal_quality`\\u548c`relevance`\\u3002\\n    *   **\\u5b50\\u5206\\u652f 2.1.3 (\\u4e2d\\u6027/\\u7f3a\\u5931\\u8bc1\\u636e):** \\u8bc6\\u522b\\u90a3\\u4e9b\\u5bf9\\u5f53\\u524d\\u4fe1\\u53f7\\u5f71\\u54cd\\u4e0d\\u5927\\u3001\\u6570\\u636e\\u8d28\\u91cf\\u5dee\\u6216\\u7f3a\\u5931\\u7684\\u6307\\u6807\\u3002\\n2.  **\\u5206\\u652f 2.2: \\u5b9a\\u6027\\u5206\\u6790\\u4e0e\\u903b\\u8f91\\u4e00\\u81f4\\u6027 (`detailed_analysis_and_reasoning`)**\\n    *   **\\u4f4e\\u5c42\\u53cd\\u5c04\\uff1a** \\u5ba1\\u9605`low_level_reflection`\\u4e2d\\u7684\\u77ed\\u671f\\u3001\\u4e2d\\u671f\\u3001\\u957f\\u671f\\u7406\\u7531\\uff0c\\u91cf\\u4ef7\\u884c\\u4e3a\\u3001\\u6307\\u6807\\u5206\\u6790\\u3001\\u884c\\u4e3a\\u91d1\\u878d\\u5206\\u6790\\u3002\\u8fd9\\u4e9b\\u5b9a\\u6027\\u63cf\\u8ff0\\u662f\\u5426\\u4e0e\\u91cf\\u5316\\u6570\\u636e\\u76f8\\u4e92\\u5370\\u8bc1\\uff1f\\n    *   **\\u5143\\u5206\\u6790\\uff1a** \\u68c0\\u67e5`meta_analysis`\\u4e2d\\u7684`global_consistency_check_and_key_drivers`\\u3002\\u6574\\u4f53\\u5206\\u6790\\u903b\\u8f91\\u662f\\u5426\\u8fde\\u8d2f\\u3001\\u65e0\\u77db\\u76fe\\uff1f\\n    *   **\\u5386\\u53f2\\u6a21\\u5f0f\\u4e0e\\u7b56\\u7565\\u6821\\u51c6\\uff1a** \\u8bc4\\u4f30`historical_pattern_recognition_and_analogical_reasoning`\\u3002\\u5386\\u53f2\\u80dc\\u7387\\u3001\\u5178\\u578b\\u76c8\\u4e8f\\u6bd4\\u4ee5\\u53ca\\u7b56\\u7565\\u6821\\u51c6\\u4fe1\\u606f\\u662f\\u5426\\u652f\\u6301\\u5f53\\u524d\\u4fe1\\u53f7\\u7684\\u9884\\u671f\\u8868\\u73b0\\uff1f\\n3.  **\\u5206\\u652f 2.3: \\u5b8f\\u89c2\\u4e0e\\u5e02\\u573a\\u60c5\\u7eea\\u8003\\u91cf (`factors_main`, `data_summary`)**\\n    *   \\u5206\\u6790`funding_rate`\\u3001`FGI`\\uff08\\u6050\\u60e7\\u8d2a\\u5a6a\\u6307\\u6570\\uff09\\u3001`open_interest`\\u3002\\u8fd9\\u4e9b\\u5b8f\\u89c2\\u6570\\u636e\\u662f\\u5426\\u652f\\u6301\\u6216\\u524a\\u5f31\\u4e86\\u4ea4\\u6613\\u5047\\u8bbe\\uff1f\\u4f8b\\u5982\\uff0c\\u8fc7\\u9ad8\\u7684\\u8d44\\u91d1\\u8d39\\u7387\\u53ef\\u80fd\\u9884\\u793a\\u56de\\u8c03\\u3002\\n    *   \\u68c0\\u67e5`data_summary`\\u4e2d\\u7684\\u6700\\u65b0\\u4ef7\\u683c\\u300124h\\u9ad8\\u4f4e\\u70b9\\u3001\\u6210\\u4ea4\\u91cf\\u7b49\\uff0c\\u786e\\u4fdd\\u5e02\\u573a\\u6d3b\\u8dc3\\u5ea6\\u548c\\u4ef7\\u683c\\u7684\\u5408\\u7406\\u6027\\u3002\\n\\n**Phase 3: \\u6279\\u5224\\u6027\\u53cd\\u601d\\u3001\\u51b2\\u7a81\\u89e3\\u51b3\\u4e0e\\u51b3\\u7b56\\u526a\\u679d (ToT - \\u8bc4\\u4f30\\u4e0e\\u4f18\\u5316)**\\n\\n1.  **\\u8bc1\\u636e\\u6743\\u91cd\\u4e0e\\u51b2\\u7a81\\u89e3\\u51b3\\uff1a**\\n    *   \\u7efc\\u5408Phase 2\\u6536\\u96c6\\u7684\\u6240\\u6709\\u652f\\u6301\\u6027\\u3001\\u51b2\\u7a81\\u6027\\u8bc1\\u636e\\u3002\\u6839\\u636e\\u5176`signal_quality`\\u3001`relevance`\\u548c\\u65f6\\u95f4\\u6846\\u67b6\\uff08\\u77ed\\u5468\\u671f\\u6307\\u6807\\u5bf9\\u77ed\\u671f\\u4fe1\\u53f7\\u5f71\\u54cd\\u5927\\uff0c\\u957f\\u5468\\u671f\\u6307\\u6807\\u5bf9\\u8d8b\\u52bf\\u5f71\\u54cd\\u5927\\uff09\\u5bf9\\u8bc1\\u636e\\u8fdb\\u884c\\u52a0\\u6743\\u3002\\n    *   **\\u4e3b\\u52a8\\u751f\\u6210\\u53cd\\u9a73\\u8bba\\u70b9\\uff1a** \\u5373\\u4f7f`meta_analysis.counter_argument_and_rebuttal`\\u4e3a\\u7a7a\\uff0c\\u4e5f\\u8981\\u4e3b\\u52a8\\u601d\\u8003\\u5e76\\u5217\\u51fa\\u6700\\u53ef\\u80fd\\u5bfc\\u81f4\\u4ea4\\u6613\\u5931\\u8d25\\u7684\\u7406\\u7531\\u6216\\u5e02\\u573a\\u53cd\\u8f6c\\u7684\\u6f5c\\u5728\\u4fe1\\u53f7\\u3002\\n    *   **\\u81ea\\u6211\\u8fa9\\u9a73\\u4e0e\\u51b3\\u7b56\\u8c03\\u6574\\uff1a** \\u9488\\u5bf9\\u751f\\u6210\\u7684\\u53cd\\u9a73\\u8bba\\u70b9\\uff0c\\u8bc4\\u4f30\\u5176\\u5f3a\\u5ea6\\u548c\\u53ef\\u80fd\\u6027\\u3002\\n        *   \\u5982\\u679c\\u51b2\\u7a81\\u6027\\u8bc1\\u636e\\u975e\\u5e38\\u5f3a\\uff0c\\u4e14\\u65e0\\u6cd5\\u6709\\u6548\\u53cd\\u9a73\\uff0c\\u6216\\u8005`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`\\u4f4e\\u4e8e\\u9884\\u8bbe\\u9608\\u503c\\uff08\\u4f8b\\u5982\\uff0c\\u4f4e\\u4e8e60%\\uff09\\uff0c\\u6216\\u8005`uncertainty_sources`\\u5f71\\u54cd\\u5f3a\\u5ea6\\u9ad8\\uff1a**\\u4f18\\u5148\\u5c06\\u6700\\u7ec8`action`\\u8c03\\u6574\\u4e3a \\"wait\\"**\\u3002\\n        *   \\u5982\\u679c\\u652f\\u6301\\u6027\\u8bc1\\u636e\\u538b\\u5012\\u6027\\u5730\\u5f3a\\uff0c\\u4e14\\u53cd\\u9a73\\u8bba\\u70b9\\u8f83\\u5f31\\u6216\\u53ef\\u63a7\\uff1a\\u7ef4\\u6301\\u521d\\u6b65\\u4ea4\\u6613\\u5047\\u8bbe\\u3002\\n        *   \\u5982\\u679c\\u73b0\\u6709\\u4ed3\\u4f4d\\u4e0e\\u65b0\\u4fe1\\u53f7\\u51b2\\u7a81\\uff0c\\u4e14\\u65b0\\u4fe1\\u53f7\\u5f3a\\u5ea6\\u4e0d\\u8db3\\u4ee5\\u7acb\\u5373\\u53cd\\u8f6c\\uff1a\\u8003\\u8651\\u5e73\\u4ed3\\u73b0\\u6709\\u4ed3\\u4f4d\\uff0c\\u4f46\\u4e0d\\u7acb\\u5373\\u5f00\\u65b0\\u4ed3\\uff0c\\u6216\\u8c03\\u6574\\u4e3a\\u201cwait\\u201d\\u3002\\n2.  **\\u98ce\\u9669\\u8bc4\\u4f30\\u4e0e\\u89c4\\u907f\\uff1a**\\n    *   \\u91cd\\u65b0\\u8bc4\\u4f30`trade_recommendation.risk_level`\\u3002\\u7ed3\\u5408\\u6240\\u6709\\u5206\\u6790\\uff0c\\u5982\\u679c\\u6f5c\\u5728\\u98ce\\u9669\\u8fc7\\u9ad8\\uff0c\\u5373\\u4f7f\\u4fe1\\u53f7\\u5b58\\u5728\\uff0c\\u4e5f\\u5e94\\u503e\\u5411\\u4e8e\\u201cwait\\u201d\\u3002\\n    *   \\u786e\\u4fdd\\u6b62\\u635f\\u4f4d\\u662f\\u5408\\u7406\\u7684\\uff0c\\u4e14\\u98ce\\u9669\\u56de\\u62a5\\u6bd4\\uff08RR Ratio\\uff09\\u81f3\\u5c11\\u4e3a1:1.5\\uff0c\\u5426\\u5219\\u91cd\\u65b0\\u8003\\u8651\\u3002\\n\\n**Phase 4: \\u6700\\u7ec8\\u884c\\u52a8\\u51b3\\u7b56\\u4e0e\\u8ba2\\u5355\\u53c2\\u6570\\u751f\\u6210 (CoT)**\\n\\n1.  **\\u786e\\u5b9a\\u6700\\u7ec8 `action`\\uff1a**\\n    *   \\u5982\\u679cPhase 3\\u7684\\u8bc4\\u4f30\\u7ed3\\u679c\\u4e3a\\u201c\\u89c2\\u671b\\u201d\\u6216\\u98ce\\u9669\\u8fc7\\u9ad8\\uff1a`action` = \\"wait\\"\\u3002\\n    *   \\u5426\\u5219\\uff0c\\u6839\\u636e\\u4fee\\u6b63\\u540e\\u7684\\u4fe1\\u53f7\\u548c\\u73b0\\u6709\\u4ed3\\u4f4d\\uff1a\\n        *   \\u5982\\u679c\\u4fe1\\u53f7\\u4e3aLONG\\uff1a\\n            *   \\u82e5\\u5f53\\u524d\\u6301\\u6709SHORT\\u4ed3\\u4f4d\\uff1a`action` = \\"buy\\" (\\u5e73\\u7a7a)\\u3002\\n            *   \\u82e5\\u65e0\\u4ed3\\u4f4d\\u6216\\u6301\\u6709LONG\\u4ed3\\u4f4d\\uff1a`action` = \\"buy\\" (\\u5f00\\u591a)\\u3002\\n        *   \\u5982\\u679c\\u4fe1\\u53f7\\u4e3aSHORT\\uff1a\\n            *   \\u82e5\\u5f53\\u524d\\u6301\\u6709LONG\\u4ed3\\u4f4d\\uff1a`action` = \\"sell\\" (\\u5e73\\u591a)\\u3002\\n            *   \\u82e5\\u65e0\\u4ed3\\u4f4d\\u6216\\u6301\\u6709SHORT\\u4ed3\\u4f4d\\uff1a`action` = \\"sell\\" (\\u5f00\\u7a7a)\\u3002\\n2.  **\\u786e\\u5b9a `order_type`\\uff1a**\\n    *   `action` = \\"wait\\"\\uff1a`order_type` = \\"N/A\\"\\u3002\\n    *   `action` \\u4e3a\\u201c\\u5e73\\u7a7a\\u201d\\u6216\\u201c\\u5e73\\u591a\\u201d\\uff1a`order_type` = \\"market\\" (\\u4f18\\u5148\\u5feb\\u901f\\u5e73\\u4ed3\\uff0c\\u9664\\u975e\\u6709\\u660e\\u786e\\u7684\\u9650\\u4ef7\\u5e73\\u4ed3\\u7b56\\u7565)\\u3002\\n    *   `action` \\u4e3a\\u201c\\u5f00\\u591a\\u201d\\u6216\\u201c\\u5f00\\u7a7a\\u201d\\uff1a`order_type` = \\"limit\\" (\\u4f18\\u5148\\u7cbe\\u786e\\u5165\\u573a)\\u3002\\n3.  **\\u8ba1\\u7b97 `price`\\uff1a**\\n    *   `action` = \\"wait\\"\\uff1a`price` = \\"N/A\\"\\u3002\\n    *   `order_type` = \\"market\\"\\uff1a\\n        *   \\u5bf9\\u4e8e\\u201cbuy\\u201d\\u64cd\\u4f5c\\uff08\\u5e73\\u7a7a\\uff09\\uff1a\\u4f7f\\u7528`data_summary.data.askPx`\\u3002\\n        *   \\u5bf9\\u4e8e\\u201csell\\u201d\\u64cd\\u4f5c\\uff08\\u5e73\\u591a\\uff09\\uff1a\\u4f7f\\u7528`data_summary.data.bidPx`\\u3002\\n    *   `order_type` = \\"limit\\"\\uff1a\\n        *   \\u4ece`trade_recommendation.entry_zone`\\u4e2d\\u63d0\\u53d6\\u4ef7\\u683c\\u3002\\n        *   **\\u89e3\\u6790\\u903b\\u8f91\\uff1a**\\n            *   \\u5982\\u679c`entry_zone`\\u662f\\u8303\\u56f4\\uff08\\u4f8b\\u5982\\u201c3420-3440\\u201d\\uff09\\uff1a\\n                *   \\u5bf9\\u4e8e\\u201cbuy\\u201d\\u64cd\\u4f5c\\uff08\\u5f00\\u591a\\uff09\\uff1a\\u53d6\\u8303\\u56f4\\u7684**\\u4e0b\\u9650**\\uff08\\u4f8b\\u5982\\u201c3420\\u201d\\uff0c\\u4ee5\\u66f4\\u79ef\\u6781\\u5730\\u5165\\u573a\\uff09\\u3002\\n                *   \\u5bf9\\u4e8e\\u201csell\\u201d\\u64cd\\u4f5c\\uff08\\u5f00\\u7a7a\\uff09\\uff1a\\u53d6\\u8303\\u56f4\\u7684**\\u4e0a\\u9650**\\uff08\\u4f8b\\u5982\\u201c3440\\u201d\\uff0c\\u4ee5\\u66f4\\u79ef\\u6781\\u5730\\u5165\\u573a\\uff09\\u3002\\n            *   \\u5982\\u679c`entry_zone`\\u662f\\u5355\\u4e00\\u4ef7\\u683c\\uff0c\\u76f4\\u63a5\\u4f7f\\u7528\\u8be5\\u4ef7\\u683c\\u3002\\n        *   \\u5982\\u679c`entry_zone`\\u7f3a\\u5931\\u3001\\u65e0\\u6cd5\\u89e3\\u6790\\u6216\\u89e3\\u6790\\u51fa\\u7684\\u4ef7\\u683c\\u4e0d\\u5408\\u7406\\uff08\\u4f8b\\u5982\\uff0c\\u8fdc\\u8d85\\u5f53\\u524d\\u5e02\\u573a\\u4ef7\\uff09\\uff0c\\u5219\\u6807\\u8bb0\\u4e3a`\\"N/A\\"`\\u5e76\\u5728`comment`\\u4e2d\\u8bf4\\u660e\\u3002\\n4.  **\\u8bbe\\u7f6e `stop_loss` \\u548c `take_profit_targets`\\uff1a**\\n    *   `action` = \\"wait\\"\\uff1a`stop_loss` = \\"N/A\\"\\uff0c`take_profit_targets` = `[\\"N/A\\", \\"N/A\\", \\"N/A\\"]`\\u3002\\n    *   \\u5426\\u5219\\uff1a\\u4f7f\\u7528`trade_recommendation.stop_loss_price`\\u548c`trade_recommendation.take_profit_targets`\\u3002\\n    *   **\\u7f3a\\u5931\\u5904\\u7406\\uff1a** \\u5982\\u679c`stop_loss_price`\\u7f3a\\u5931\\u6216\\u4e3a\\u201c...\\u201d\\uff0c\\u5219\\u6807\\u8bb0\\u4e3a`\\"N/A\\"`\\u3002\\u5982\\u679c`take_profit_targets`\\u7f3a\\u5931\\u6216\\u5c11\\u4e8e3\\u4e2a\\uff0c\\u7528`\\"N/A\\"`\\u586b\\u5145\\u81f33\\u4e2a\\u3002\\n5.  **\\u8ba1\\u7b97 `size` (\\u4ed3\\u4f4d\\u5927\\u5c0f)\\uff1a**\\n    *   **\\u98ce\\u9669\\u7ba1\\u7406\\u539f\\u5219\\uff1a** \\u6bcf\\u7b14\\u4ea4\\u6613\\u98ce\\u9669\\u63a7\\u5236\\u5728`okx_positions.balance.Available_Margin`\\u7684 **1%**\\u3002\\n    *   **\\u8ba1\\u7b97\\u516c\\u5f0f\\uff1a**\\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin)`\\n        *   `risk_amount = available_margin_float * 0.01`\\n        *   `entry_price_float = float(calculated_price)` (\\u4f7f\\u7528\\u4e0a\\u9762\\u8ba1\\u7b97\\u51fa\\u7684`price`)\\n        *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\\n        *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\\n        *   **\\u9c81\\u68d2\\u6027\\u5904\\u7406\\uff1a**\\n            *   \\u5982\\u679c`stop_loss_price`\\u4e3a`\\"N/A\\"`\\u6216`price_difference`\\u63a5\\u8fd1\\u6216\\u7b49\\u4e8e\\u96f6\\uff08\\u4f8b\\u5982\\uff0c\\u6b62\\u635f\\u70b9\\u975e\\u5e38\\u63a5\\u8fd1\\u5165\\u573a\\u70b9\\uff0c\\u5bfc\\u81f4\\u5206\\u6bcd\\u4e3a\\u96f6\\u6216\\u8fc7\\u5c0f\\uff09\\uff0c\\u5219\\u65e0\\u6cd5\\u8ba1\\u7b97\\u56fa\\u5b9a\\u98ce\\u9669\\u4ed3\\u4f4d\\uff0c\\u6b64\\u65f6`size` = `\\"dynamic_calculation_needed\\"`\\u3002\\n            *   \\u5426\\u5219\\uff1a`size = str(round(risk_amount / price_difference, 2))` (\\u4fdd\\u7559\\u4e24\\u4f4d\\u5c0f\\u6570)\\u3002\\n    *   **\\u5e73\\u4ed3\\u60c5\\u51b5\\uff1a** \\u5982\\u679c`action`\\u662f\\u201c\\u5e73\\u591a\\u201d\\u6216\\u201c\\u5e73\\u7a7a\\u201d\\uff0c`size`\\u5e94\\u4e3a`okx_positions.positions.pos`\\uff08\\u5373\\u5f53\\u524d\\u6301\\u4ed3\\u91cf\\uff09\\u3002\\n    *   **\\u6570\\u636e\\u7f3a\\u5931\\uff1a** \\u5982\\u679c`okx_positions`\\u6216\\u5176\\u5185\\u90e8\\u5173\\u952e\\u5b57\\u6bb5\\u7f3a\\u5931\\uff0c`size` = `\\"dynamic_calculation_needed\\"`\\u3002\\n6.  **\\u751f\\u6210 `comment`\\uff1a** \\u7b80\\u6d01\\u5730\\u603b\\u7ed3\\u6700\\u7ec8\\u51b3\\u7b56\\u3001\\u6700\\u5173\\u952e\\u7684\\u652f\\u6301\\u56e0\\u7d20\\uff08\\u4f8b\\u5982\\uff0c\\u6765\\u81ea`key_factors`\\u3001`historical_pattern_recognition`\\u6216`global_consistency_check`\\uff09\\uff0c\\u4ee5\\u53ca\\u4efb\\u4f55\\u91cd\\u8981\\u7684\\u98ce\\u9669\\u63d0\\u793a\\u6216\\u6570\\u636e\\u7f3a\\u5931\\u8bf4\\u660e\\u3002\\n\\n**Phase 5: \\u8f93\\u51fa\\u683c\\u5f0f\\u5316\\u4e0e\\u6700\\u7ec8\\u6821\\u9a8c (CoT)**\\n\\n1.  **\\u4e25\\u683c\\u9075\\u5faaJSON\\u7ed3\\u6784\\uff1a** \\u786e\\u4fdd\\u8f93\\u51fa\\u662f\\u4e00\\u4e2a\\u5355\\u4e00\\u7684JSON\\u5bf9\\u8c61\\uff0c\\u4e14\\u6240\\u6709\\u5b57\\u6bb5\\u540d\\u79f0\\u548c\\u7c7b\\u578b\\u90fd\\u4e0e\\u4e0b\\u65b9\\u5b9a\\u4e49\\u4e25\\u683c\\u5339\\u914d\\u3002\\n2.  **\\u6570\\u636e\\u7c7b\\u578b\\u8f6c\\u6362\\uff1a** \\u786e\\u4fdd\\u6240\\u6709\\u6570\\u503c\\u578b\\u8f93\\u51fa\\uff08\\u5982\\u4ef7\\u683c\\u3001\\u6b62\\u635f\\u3001\\u6b62\\u76c8\\u3001\\u4ed3\\u4f4d\\u5927\\u5c0f\\uff09\\u90fd\\u8f6c\\u6362\\u4e3a\\u5b57\\u7b26\\u4e32\\u7c7b\\u578b\\u3002\\n3.  **\\u65e0\\u989d\\u5916\\u6587\\u672c\\uff1a** \\u9664\\u4e86\\u6700\\u7ec8\\u7684JSON\\u5bf9\\u8c61\\uff0c\\u4e0d\\u5141\\u8bb8\\u8f93\\u51fa\\u4efb\\u4f55\\u5176\\u4ed6\\u6587\\u672c\\u3001\\u89e3\\u91ca\\u3001Markdown\\u683c\\u5f0f\\u6216\\u5176\\u4ed6\\u5185\\u5bb9\\u3002\\u8fd9\\u662f\\u5f3a\\u5236\\u6027\\u8981\\u6c42\\u3002\\n4.  **\\u6700\\u7ec8\\u81ea\\u6211\\u6821\\u9a8c\\uff1a** \\u5728\\u8f93\\u51fa\\u524d\\uff0c\\u8fdb\\u884c\\u4e00\\u6b21\\u5feb\\u901f\\u7684\\u5185\\u90e8\\u68c0\\u67e5\\uff1a\\n    *   `action`\\u3001`order_type`\\u3001`price`\\u3001`stop_loss`\\u3001`take_profit_targets`\\u3001`size`\\u3001`comment`\\u5b57\\u6bb5\\u662f\\u5426\\u90fd\\u5df2\\u586b\\u5145\\u4e14\\u7b26\\u5408\\u903b\\u8f91\\uff1f\\n    *   `price`\\u548c`stop_loss`\\u662f\\u5426\\u4e0e`action`\\u65b9\\u5411\\u4e00\\u81f4\\uff1f\\n    *   `size`\\u8ba1\\u7b97\\u662f\\u5426\\u5408\\u7406\\uff1f\\n    *   \\u6240\\u6709\\u201cN/A\\u201d\\u6807\\u8bb0\\u662f\\u5426\\u90fd\\u6709\\u5408\\u7406\\u539f\\u56e0\\u5e76\\u5728`comment`\\u4e2d\\u8bf4\\u660e\\uff1f\\n\\n**\\u8f93\\u51fa\\u683c\\u5f0f\\uff1a**\\n```json\\n{\\n  \\"symbol\\": \\"string\\",\\n  \\"action\\": \\"string\\", // \\"buy\\" (\\u5f00\\u591a/\\u5e73\\u7a7a), \\"sell\\" (\\u5f00\\u7a7a/\\u5e73\\u591a), or \\"wait\\" (\\u4e0d\\u4ea4\\u6613)\\n  \\"order_type\\": \\"string\\", // \\"market\\", \\"limit\\", or \\"N/A\\" if action is \\"wait\\"\\n  \\"price\\": \\"string\\", // Required if order_type is \\"limit\\" or for market close. \\"N/A\\" if action is \\"wait\\" or cannot be determined.\\n  \\"stop_loss\\": \\"string\\", // \\"N/A\\" if action is \\"wait\\" or not provided/determined.\\n  \\"take_profit_targets\\": [\\"string\\", \\"string\\", \\"string\\"], // \\"N/A\\" if action is \\"wait\\" or not provided/determined. If fewer than 3, fill with \\"N/A\\".\\n  \\"size\\": \\"string\\", // Calculated size or \\"dynamic_calculation_needed\\" if calculation is not possible or for market close.\\n  \\"comment\\": \\"string\\" // Brief explanation of the decision and key factors, including any data limitations.\\n}\\n```"}, {"role": "user", "content": [{"type": "text", "text": {"summary": "ETHUSDT\\u5728H4\\u548cH1\\u65f6\\u95f4\\u6846\\u67b6\\u4e0a\\u5448\\u73b0\\u660e\\u663e\\u7684\\u4e0b\\u8dcc\\u8d8b\\u52bf\\uff0c\\u4ef7\\u683c\\u6301\\u7eed\\u5728EMA\\u5747\\u7ebf\\u4e0b\\u65b9\\u8fd0\\u884c\\uff0cRSI\\u5904\\u4e8e\\u8d85\\u5356\\u533a\\u57df\\uff0cMACD\\u663e\\u793a\\u7a7a\\u5934\\u52a8\\u80fd\\u3002\\u5c3d\\u7ba1M15\\u5468\\u671f\\u51fa\\u73b0\\u77ed\\u671f\\u53cd\\u5f39\\u8ff9\\u8c61\\uff0cRSI\\u56de\\u5347\\u81f3\\u4e2d\\u6027\\u533a\\u57df\\uff0c\\u4f46\\u6574\\u4f53\\u8d8b\\u52bf\\u4ecd\\u53d7\\u9ad8\\u65f6\\u95f4\\u6846\\u67b6\\u538b\\u5236\\u3002\\u5b8f\\u89c2\\u60c5\\u7eea\\u6307\\u6807\\uff08FGI\\uff09\\u663e\\u793a\\u5e02\\u573a\\u6781\\u5ea6\\u8d2a\\u5a6a\\uff0c\\u53ef\\u80fd\\u9884\\u793a\\u9876\\u90e8\\u98ce\\u9669\\uff0c\\u800c\\u8d44\\u91d1\\u8d39\\u7387\\u867d\\u4e3a\\u6b63\\u4f46\\u8f83\\u4f4e\\uff0c\\u672a\\u80fd\\u63d0\\u4f9b\\u5f3a\\u52b2\\u7684\\u591a\\u5934\\u652f\\u6491\\u3002\\u5f53\\u524d\\u5e02\\u573a\\u5904\\u4e8e\\u4e0b\\u8dcc\\u8d8b\\u52bf\\u4e2d\\u7684\\u77ed\\u671f\\u53cd\\u5f39\\uff0c\\u53cd\\u5f39\\u52a8\\u80fd\\u4e0d\\u8db3\\u4ee5\\u626d\\u8f6c\\u6574\\u4f53\\u8d8b\\u52bf\\u3002\\u5efa\\u8bae\\u4ee5\\u9022\\u9ad8\\u505a\\u7a7a\\u4e3a\\u4e3b\\uff0c\\u7b49\\u5f85\\u53cd\\u5f39\\u81f3\\u5173\\u952e\\u963b\\u529b\\u4f4d\\u540e\\u5165\\u573a\\u3002\\u672c\\u5efa\\u8bae\\u4ec5\\u4f9b\\u53c2\\u8003\\uff0c\\u4ea4\\u6613\\u98ce\\u9669\\u81ea\\u8d1f\\u3002", "confidence": "0.7", "signal": "SHORT", "risk_level": "medium", "key_factor": [{"name": "EMA\\u5f3a\\u5ea6 (H4)", "value": "0.05", "relevance": "high", "reason": "H4 EMA\\u5448\\u7a7a\\u5934\\u6392\\u5217\\uff0c\\u6307\\u793a\\u5f3a\\u52b2\\u7684\\u957f\\u671f\\u4e0b\\u8dcc\\u8d8b\\u52bf\\uff0c\\u5bf9\\u77ed\\u671f\\u53cd\\u5f39\\u6784\\u6210\\u7ed3\\u6784\\u6027\\u538b\\u5236\\u3002"}, {"name": "RSI\\u4e2d\\u6027\\u5ea6 (H4)", "value": "0.0", "relevance": "high", "reason": "H4 RSI\\u5904\\u4e8e\\u6781\\u5ea6\\u8d85\\u5356\\u533a\\uff0823.39\\uff09\\uff0c\\u867d\\u7136\\u53ef\\u80fd\\u51fa\\u73b0\\u6280\\u672f\\u6027\\u53cd\\u5f39\\uff0c\\u4f46\\u5176\\u672c\\u8eab\\u53cd\\u6620\\u4e86\\u6781\\u5f3a\\u7684\\u7a7a\\u5934\\u529b\\u91cf\\uff0c\\u4e14\\u672a\\u89c1\\u660e\\u663e\\u80cc\\u79bb\\uff0c\\u53cd\\u5f39\\u53ef\\u80fd\\u53d7\\u9650\\u3002"}, {"name": "\\u77ed\\u671f\\u52a8\\u91cf (M15)", "value": "0.4", "relevance": "medium", "reason": "M15 MACD\\u91d1\\u53c9\\u4e14RSI\\u56de\\u5347\\uff0c\\u663e\\u793a\\u77ed\\u671f\\u6709\\u53cd\\u5f39\\u52a8\\u80fd\\uff0c\\u4f46\\u52a8\\u91cf\\u5f3a\\u5ea6\\u4e0d\\u8db3\\u4ee5\\u6539\\u53d8\\u9ad8\\u65f6\\u95f4\\u6846\\u67b6\\u8d8b\\u52bf\\u3002"}, {"name": "\\u8d44\\u91d1\\u8d39\\u7387\\u60c5\\u7eea\\u56e0\\u5b50", "value": "0.5", "relevance": "medium", "reason": "\\u8d44\\u91d1\\u8d39\\u7387\\u867d\\u4e3a\\u6b63\\uff0c\\u4f46\\u6570\\u503c\\u8f83\\u4f4e\\uff080.0077%\\uff09\\uff0c\\u672a\\u80fd\\u63d0\\u4f9b\\u5f3a\\u52b2\\u7684\\u591a\\u5934\\u652f\\u6491\\uff0c\\u4e14\\u4e0e\\u6781\\u5ea6\\u8d2a\\u5a6a\\u7684FGI\\u5f62\\u6210\\u4e00\\u5b9a\\u80cc\\u79bb\\uff0c\\u6697\\u793a\\u591a\\u5934\\u8ffd\\u6da8\\u610f\\u613f\\u4e0d\\u5f3a\\u3002"}, {"name": "\\u6050\\u614c/\\u8d2a\\u5a6a\\u6307\\u6570\\u60c5\\u7eea\\u56e0\\u5b50", "value": "0.2", "relevance": "high", "reason": "FGI\\u9ad8\\u8fbe74\\uff0c\\u5904\\u4e8e\\u6781\\u5ea6\\u8d2a\\u5a6a\\u533a\\u57df\\uff0c\\u901a\\u5e38\\u662f\\u5e02\\u573a\\u9876\\u90e8\\u6216\\u56de\\u8c03\\u7684\\u9884\\u8b66\\u4fe1\\u53f7\\uff0c\\u5bf9\\u957f\\u671f\\u770b\\u6da8\\u6784\\u6210\\u8d1f\\u9762\\u5f71\\u54cd\\u3002"}, {"name": "\\u6301\\u4ed3\\u91cf\\u8d8b\\u52bf\\u56e0\\u5b50", "value": "0.5", "relevance": "medium", "reason": "\\u6301\\u4ed3\\u91cf6.04\\u4ebf\\u7f8e\\u5143\\uff0c\\u76f8\\u5bf9\\u7a33\\u5b9a\\uff0c\\u672a\\u89c1\\u5927\\u5e45\\u589e\\u957f\\u6216\\u840e\\u7f29\\uff0c\\u8868\\u660e\\u5e02\\u573a\\u591a\\u7a7a\\u53cc\\u65b9\\u529b\\u91cf\\u76f8\\u5bf9\\u5747\\u8861\\uff0c\\u4f46\\u7f3a\\u4e4f\\u660e\\u786e\\u7684\\u8d8b\\u52bf\\u786e\\u8ba4\\u4fe1\\u53f7\\u3002"}], "entry_zone": "ETHUSDT 2670-2680 USDT (M15 EMA55/144/200\\u533a\\u57df)", "stop_l_price": "2700 USDT", "take_profit_targets": ["TP1: 2620 USDT (M15\\u5e03\\u6797\\u5e26\\u4e2d\\u8f68\\u9644\\u8fd1)", "TP2: 2580 USDT (H1\\u5e03\\u6797\\u5e26\\u4e2d\\u8f68\\u9644\\u8fd1)", "TP3: 2500 USDT (H1\\u5e03\\u6797\\u5e26\\u4e0b\\u8f68\\u9644\\u8fd1)"], "alternative_scenarios_and_alerts": ["\\u5982\\u679c\\u4ef7\\u683c\\u6709\\u6548\\u7a81\\u78342700 USDT\\u5e76\\u7ad9\\u7a33\\uff0c\\u4e14H1 MACD\\u51fa\\u73b0\\u5f3a\\u52bf\\u91d1\\u53c9\\uff0c\\u5219\\u7a7a\\u5934\\u8d8b\\u52bf\\u53ef\\u80fd\\u5931\\u6548\\uff0c\\u9700\\u91cd\\u65b0\\u8bc4\\u4f30\\u3002", "\\u5982\\u679cH4 RSI\\u4ece\\u8d85\\u5356\\u533a\\u5feb\\u901f\\u53cd\\u5f39\\u5e76\\u7a81\\u783430\\uff0c\\u4e14\\u4f34\\u968f\\u653e\\u91cf\\uff0c\\u5219\\u53ef\\u80fd\\u51fa\\u73b0\\u66f4\\u5f3a\\u7684\\u53cd\\u5f39\\uff0c\\u7a7a\\u5355\\u9700\\u8c28\\u614e\\u3002"]}}]}]"'}]}]}}]
[trade_api_eth.py][05:30:42] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:30:42] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:30:42] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:31:45] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:31:45] [INFO] 系统提示词以导入
[_client.py][05:31:50] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:31:51] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:31:51] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:31:51] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:33:56] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:33:56] [INFO] 系统提示词以导入
[_client.py][05:34:01] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:34:03] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:34:03] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:34:31] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:34:31] [INFO] 系统提示词以导入
[_client.py][05:34:36] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:34:38] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:34:38] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:35:24] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:35:24] [INFO] 系统提示词以导入
[_client.py][05:35:29] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:35:30] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:35:30] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:36:44] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:36:44] [INFO] 系统提示词以导入
[trade_api_eth.py][05:37:24] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:37:24] [INFO] 系统提示词以导入
[trade_api_eth.py][05:40:20] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:40:20] [INFO] 系统提示词以导入
[_client.py][05:40:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:40:28] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:40:28] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:40:49] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:40:49] [INFO] 系统提示词以导入
[_client.py][05:40:54] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:40:56] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:40:56] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:41:16] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:41:16] [INFO] 系统提示词以导入
[_client.py][05:41:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:41:23] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:41:23] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:41:39] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:41:39] [INFO] 系统提示词以导入
[_client.py][05:41:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:41:45] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:41:45] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:42:14] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:42:14] [INFO] 系统提示词以导入
[_client.py][05:42:19] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:42:20] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:42:20] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][05:44:23] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][05:44:23] [INFO] 系统提示词以导入
[_client.py][05:44:29] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][05:44:30] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][05:44:30] [INFO] Gemini API 流式调用结束。
[get_positions.py][05:47:07] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:47:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:47:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:47:08] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[get_positions.py][05:48:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:48:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[get_positions.py][05:49:20] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:49:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:49:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:49:21] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[get_positions.py][05:49:40] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:49:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:49:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:49:40] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[get_positions.py][05:53:16] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:53:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:53:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:53:17] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[get_positions.py][05:53:35] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:53:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:53:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:53:35] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[get_positions.py][05:53:56] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:53:56] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:53:56] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:53:56] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[get_positions.py][05:54:14] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:54:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:54:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:54:14] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[get_positions.py][05:57:30] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:57:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:57:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:57:30] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[trade_api_eth.py][06:13:26] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:13:26] [INFO] 系统提示词以导入
[get_positions.py][06:13:27] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:13:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:13:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:13:27] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:13:28] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 400 Bad Request"
[trade_api_eth.py][06:13:28] [ERROR] Gemini API调用异常: Error code: 400 - [{'error': {'code': 400, 'message': 'Value is not a string: {"balance":{"Available_Margin":"102651.36 USDT"},"positions":{"Position direction":"N/A","avgPrice":"N/A","instrument_id":"ETH-USDT-SWAP","liqPrice":"N/A","lever":"N/A","Unrealized Gains":"N/A","Margin_Model":"N/A","pos":"0"},"instrument_id":"ETH-USDT-SWAP"}', 'status': 'INVALID_ARGUMENT'}}]
[trade_api_eth.py][06:13:28] [INFO] 
Gemini API 流式调用结束。
[trade_api_eth.py][06:13:28] [INFO] Gemini API 流式调用结束。
[trade_api_eth.py][06:14:27] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:14:27] [INFO] 系统提示词以导入
[get_positions.py][06:14:28] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:14:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:14:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:14:28] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:14:29] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 400 Bad Request"
[trade_api_eth.py][06:14:29] [ERROR] Gemini API调用异常: Error code: 400 - [{'error': {'code': 400, 'message': 'Value is not a string: {"balance":{"Available_Margin":"102651.36 USDT"},"instrument_id":"ETH-USDT-SWAP","positions":{"liqPrice":"N/A","Position direction":"N/A","instrument_id":"ETH-USDT-SWAP","avgPrice":"N/A","lever":"N/A","Margin_Model":"N/A","Unrealized Gains":"N/A","pos":"0"}}', 'status': 'INVALID_ARGUMENT'}}]
[trade_api_eth.py][06:14:29] [INFO] Gemini API 流式调用结束。['[Gemini API调用异常] Error code: 400 - [{\'error\': {\'code\': 400, \'message\': \'Value is not a string: {"balance":{"Available_Margin":"102651.36 USDT"},"instrument_id":"ETH-USDT-SWAP","positions":{"liqPrice":"N/A","Position direction":"N/A","instrument_id":"ETH-USDT-SWAP","avgPrice":"N/A","lever":"N/A","Margin_Model":"N/A","Unrealized Gains":"N/A","pos":"0"}}\', \'status\': \'INVALID_ARGUMENT\'}}]']
[trade_api_eth.py][06:15:39] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:15:39] [INFO] 系统提示词以导入
[get_positions.py][06:15:39] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:15:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:15:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:15:40] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[trade_api_eth.py][06:15:40] [INFO] messages_str: [
    {
        "role": "system",
        "content": "您是一名高度专业的AI交易助手，您的核心使命是**安全、精确、高效地**分析实时金融市场数据，并生成可直接执行的交易指令。您必须以资本保全为最高优先级，并以严谨的逻辑和批判性思维进行决策。**所有交易操作（开仓或平仓）都必须以“全仓模式”进行。**\n\n**输入格式：**\n您将接收一个包含多维度市场分析的JSON对象。请注意，某些字段可能包含“...”作为占位符，这表示该信息在当前输入中未具体提供。在这种情况下，您必须：\n1.  **尝试从其他相关字段中推断**该信息。\n2.  如果无法推断，则在输出中将该字段标记为 `\"N/A\"`，并在最终的 `comment` 中简要说明哪些关键信息缺失或无法确定。\n3.  **重要提示：** 对于包含单位的数值字段（如`Available_Margin`, `pos`, `avgPrice`, `Unrealized Gains`, `liqPrice`, `lever`），您需要先去除单位（如\"USDT\", \"piece\", \"x\"），然后将其转换为浮点数进行计算。\n\n```json\n{\n  \"symbol\": \"ETHUSDT.P\",\n  \"timeframe\": \"M15\",\n  \"timestamp\": \"2025-05-22T04:33:23+00:00Z\",\n  \"market_state\": \"Bull\",\n  \"trade_recommendation\": {\n    \"summary\": \"...\",\n    \"confidence\": \"...\", // e.g., \"high\", \"medium\", \"low\"\n    \"signal\": \"LONG\", // or SHORT / WAIT\n    \"risk_level\": \"medium\",\n    \"key_factors\": [\n      {\"name\": \"EMA强度\", \"value\": \"...\", \"relevance\": \"...\", \"reason\": \"...\"},\n      // ...\n    ],\n    \"entry_zone\": \"...\", // e.g., \"ETHUSDT 3420-3440\" or \"3430\"\n    \"stop_loss_price\": \"...\",\n    \"take_profit_targets\": [\"TP1...\", \"TP2...\", \"TP3...\"],\n    \"alternative_scenarios_and_alerts\": [\"如果H4转弱，则趋势失败概率提升\"]\n  },\n  \"detailed_analysis_and_reasoning\": {\n    \"low_level_reflection\": { ... },\n    \"quant_features_output\": { ... },\n    \"meta_analysis\": {\n      \"global_consistency_check_and_key_drivers\": \"...\",\n      \"confidence_and_uncertainty_quantification\": {\n        \"overall_confidence\": \"...\", // e.g., \"85%\", \"60%\", \"40%\"\n        \"uncertainty_sources\": [\n          {\"source\": \"...\", \"probability\": \"...\", \"impact_strength\": \"...\"},\n          // ...\n        ]\n      },\n      \"historical_pattern_recognition_and_analogical_reasoning\": { ... },\n      \"counter_argument_and_rebuttal\": \"...\",\n      \"self_check_result\": \"...\",\n      \"internal_coordination_result\": \"...\",\n      \"logic_validation_result\": \"...\",\n      \"rationality_validation_result\": \"...\",\n      \"limitations_and_assumptions\": \"...\"\n    }\n  },\n  \"execution_details\": { ... }, // 这是输入中可能包含的建议执行方案，您需要根据您的分析确认或覆盖它。\n  \"data_info\": { ... },\n  \"indicators_main\": { ... }, // 包含M15, 1h, 4h等时间框架的详细指标\n  \"factors_main\": { ... }, // 包含资金费率、FGI、持仓量等宏观因素\n  \"data_summary\": { ... }, // 包含最新价格、24h高低点等市场快照\n  \"okx_positions\": { // 账户可用保证金和当前持仓信息\n    \"instrument_id\": \"BTC-USDT-SWAP\",\n    \"balance\": {\n      \"Available_Margin\": \"102651.36 USDT\" // 注意单位\n    },\n    \"positions\": {\n      \"instrument_id\": \"BTC-USDT-SWAP\",\n      \"Margin_Model\": \"isolated\",\n      \"Position direction\": \"long\", // \"long\", \"short\", or \"N/A\" if no position\n      \"pos\": \"11.75 piece\", // 注意单位\n      \"avgPrice\": \"107970.3 USDT\", // 注意单位\n      \"Unrealized Gains\": \"-184.86275000000035 USDT\", // 注意单位\n      \"liqPrice\": \"72332.13529662554 USDT\", // 注意单位\n      \"lever\": \"3 x\" // 注意单位\n    }\n  }\n}\n```\n\n**您的目标：**\n分析提供的JSON输入，并输出一个新的JSON对象，其中包含具体的挂单信息或平仓信息。**所有操作都必须是“全仓模式”：即开仓时根据风险计算最大仓位，平仓时平掉所有现有仓位。**\n\n**内部思考过程（思维链 Chain-of-Thought & 思维树 Tree-of-Thought）：**\n\n**Phase 1: 初始信号解析与情境理解 (CoT)**\n\n1.  **核心交易意图识别：**\n    *   从`trade_recommendation.signal`中提取初步的交易信号（LONG, SHORT, WAIT）。\n    *   识别`symbol`和`timeframe`，确定交易标的和分析周期。\n2.  **初步风险与信心评估：**\n    *   评估`trade_recommendation.confidence`和`risk_level`。\n    *   检查`trade_recommendation.alternative_scenarios_and_alerts`。如果存在高影响的预警，立即将其作为潜在的“观望”或“风险规避”信号。\n3.  **现有仓位状态：**\n    *   分析`okx_positions`，**首先解析`okx_positions.balance.Available_Margin`和`okx_positions.positions.pos`（如果存在）的数值，去除单位。**\n    *   确定当前是否有持仓（通过检查`okx_positions.positions`是否存在且`Position direction`不为\"N/A\"），持仓方向和数量。这将直接影响后续的`action`决策（开仓 vs. 平仓）。\n\n**Phase 2: 多维度证据收集与假设验证 (ToT - 分支探索与评估)**\n\n1.  **分支 2.1: 量化指标深度验证 (`indicators_main`, `quant_features_output`)**\n    *   **子分支 2.1.1 (支持性证据):** 遍历所有时间框架（M15, 1h, 4h）的`indicators_main`和`quant_features_output`。识别所有与初步交易信号（LONG/SHORT）一致的指标和特征（例如，RSI、MACD、EMA、Stochastics、ADX等）。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.2 (冲突性证据):** 识别所有与初步交易信号相悖的指标和特征。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.3 (中性/缺失证据):** 识别那些对当前信号影响不大、数据质量差或缺失的指标。\n2.  **分支 2.2: 定性分析与逻辑一致性 (`detailed_analysis_and_reasoning`)**\n    *   **低层反射：** 审阅`low_level_reflection`中的短期、中期、长期理由，量价行为、指标分析、行为金融分析。这些定性描述是否与量化数据相互印证？\n    *   **元分析：** 检查`meta_analysis`中的`global_consistency_check_and_key_drivers`。整体分析逻辑是否连贯、无矛盾？\n    *   **历史模式与策略校准：** 评估`historical_pattern_recognition_and_analogical_reasoning`。历史胜率、典型盈亏比以及策略校准信息是否支持当前信号的预期表现？\n3.  **分支 2.3: 宏观与市场情绪考量 (`factors_main`, `data_summary`)**\n    *   分析`funding_rate`、`FGI`（恐惧贪婪指数）、`open_interest`。这些宏观数据是否支持或削弱了交易假设？例如，过高的资金费率可能预示回调。\n    *   检查`data_summary`中的最新价格、24h高低点、成交量等，确保市场活跃度和价格的合理性。\n\n**Phase 3: 批判性反思、冲突解决与决策剪枝 (ToT - 评估与优化)**\n\n1.  **证据权重与冲突解决：**\n    *   综合Phase 2收集的所有支持性、冲突性证据。根据其`signal_quality`、`relevance`和时间框架（短周期指标对短期信号影响大，长周期指标对趋势影响大）对证据进行加权。\n    *   **主动生成反驳论点：** 即使`meta_analysis.counter_argument_and_rebuttal`为空，也要主动思考并列出最可能导致交易失败的理由或市场反转的潜在信号。\n    *   **自我辩驳与决策调整：** 针对生成的反驳论点，评估其强度和可能性。\n        *   如果冲突性证据非常强，且无法有效反驳，或者`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`低于预设阈值（例如，低于60%），或者`uncertainty_sources`影响强度高：**优先将最终`action`调整为 \"wait\"**。\n        *   如果支持性证据压倒性地强，且反驳论点较弱或可控：维持初步交易假设。\n        *   如果现有仓位与新信号冲突，且新信号强度不足以立即反转：考虑平仓现有仓位，但不立即开新仓，或调整为“wait”。\n2.  **风险评估与规避：**\n    *   重新评估`trade_recommendation.risk_level`。结合所有分析，如果潜在风险过高，即使信号存在，也应倾向于“wait”。\n    *   确保止损位是合理的，且风险回报比（RR Ratio）至少为1:1.5，否则重新考虑。\n\n**Phase 4: 最终行动决策与订单参数生成 (CoT)**\n\n1.  **确定最终 `action`：**\n    *   如果Phase 3的评估结果为“观望”或风险过高：`action` = \"wait\"。\n    *   否则，根据修正后的信号和现有仓位：\n        *   如果信号为LONG：\n            *   若当前持有SHORT仓位：`action` = \"buy\" (平空)。\n            *   若无仓位或持有LONG仓位：`action` = \"buy\" (开多)。\n        *   如果信号为SHORT：\n            *   若当前持有LONG仓位：`action` = \"sell\" (平多)。\n            *   若无仓位或持有SHORT仓位：`action` = \"sell\" (开空)。\n2.  **确定 `order_type`：**\n    *   `action` = \"wait\"：`order_type` = \"N/A\"。\n    *   `action` 为“平空”或“平多”：`order_type` = \"market\" (优先快速平仓，除非有明确的限价平仓策略)。\n    *   `action` 为“开多”或“开空”：`order_type` = \"limit\" (优先精确入场)。\n3.  **计算 `price`：**\n    *   `action` = \"wait\"：`price` = \"N/A\"。\n    *   `order_type` = \"market\"：\n        *   对于“buy”操作（平空）：使用`data_summary.data.askPx`。\n        *   对于“sell”操作（平多）：使用`data_summary.data.bidPx`。\n    *   `order_type` = \"limit\"：\n        *   从`trade_recommendation.entry_zone`中提取价格。\n        *   **解析逻辑：**\n            *   如果`entry_zone`是范围（例如“3420-3440”）：\n                *   对于“buy”操作（开多）：取范围的**下限**（例如“3420”，以更积极地入场）。\n                *   对于“sell”操作（开空）：取范围的**上限**（例如“3440”，以更积极地入场）。\n            *   如果`entry_zone`是单一价格，直接使用该价格。\n        *   如果`entry_zone`缺失、无法解析或解析出的价格不合理（例如，远超当前市场价），则标记为`\"N/A\"`并在`comment`中说明。\n4.  **设置 `stop_loss` 和 `take_profit_targets`：**\n    *   `action` = \"wait\"：`stop_loss` = \"N/A\"，`take_profit_targets` = `[\"N/A\", \"N/A\", \"N/A\"]`。\n    *   否则：使用`trade_recommendation.stop_loss_price`和`trade_recommendation.take_profit_targets`。\n    *   **缺失处理：** 如果`stop_loss_price`缺失或为“...”，则标记为`\"N/A\"`。如果`take_profit_targets`缺失或少于3个，用`\"N/A\"`填充至3个。\n5.  **计算 `size` (仓位大小) - **强制“全仓模式”**：**\n    *   **数据准备：**\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin.replace(' USDT', ''))`\n        *   `current_pos_float = float(okx_positions.positions.pos.replace(' piece', ''))` (如果`okx_positions.positions.pos`存在)\n    *   **情景判断：**\n        *   **如果 `action` 是“平多”或“平空”：**\n            *   `size` 必须是当前持仓的全部数量。\n            *   `size = str(current_pos_float)`\n        *   **如果 `action` 是“开多”或“开空”：**\n            *   这是新开“全仓”的逻辑，基于风险管理。\n            *   **风险管理原则：** 每笔交易风险控制在`available_margin_float`的 **1%**。\n            *   `risk_amount = available_margin_float * 0.01`\n            *   `entry_price_float = float(calculated_price)` (使用上面计算出的`price`)\n            *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\n            *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\n            *   **鲁棒性处理：**\n                *   如果`stop_loss_price`为`\"N/A\"`或`price_difference`接近或等于零（例如，止损点非常接近入场点，导致分母为零或过小），则无法计算固定风险仓位，此时`size` = `\"dynamic_calculation_needed\"`。\n                *   否则：`size = str(round(risk_amount / price_difference, 2))` (保留两位小数)。\n    *   **数据缺失：** 如果`okx_positions`或其内部关键字段缺失，`size` = `\"dynamic_calculation_needed\"`。\n6.  **生成 `comment`：** 简洁地总结最终决策、最关键的支持因素（例如，来自`key_factors`、`historical_pattern_recognition`或`global_consistency_check`），以及任何重要的风险提示或数据缺失说明。\n\n**Phase 5: 输出格式化与最终校验 (CoT)**\n\n1.  **严格遵循JSON结构：** 确保输出是一个单一的JSON对象，且所有字段名称和类型都与下方定义严格匹配。\n2.  **数据类型转换：** 确保所有数值型输出（如价格、止损、止盈、仓位大小）都转换为字符串类型。\n3.  **无额外文本：** 除了最终的JSON对象，不允许输出任何其他文本、解释、Markdown格式或其他内容。这是强制性要求。\n4.  **最终自我校验：** 在输出前，进行一次快速的内部检查：\n    *   `action`、`order_type`、`price`、`stop_loss`、`take_profit_targets`、`size`、`comment`字段是否都已填充且符合逻辑？\n    *   `price`和`stop_loss`是否与`action`方向一致？\n    *   `size`计算是否合理，并符合“全仓模式”的定义？\n    *   所有“N/A”标记是否都有合理原因并在`comment`中说明？\n\n**输出格式：**\n```json\n{\n  \"symbol\": \"string\",\n  \"action\": \"string\", // \"buy\" (开多/平空), \"sell\" (开空/平多), or \"wait\" (不交易)\n  \"order_type\": \"string\", // \"market\", \"limit\", or \"N/A\" if action is \"wait\"\n  \"price\": \"string\", // Required if order_type is \"limit\" or for market close. \"N/A\" if action is \"wait\" or cannot be determined.\n  \"stop_loss\": \"string\", // \"N/A\" if action is \"wait\" or not provided/determined.\n  \"take_profit_targets\": [\"string\", \"string\", \"string\"], // \"N/A\" if action is \"wait\" or not provided/determined. If fewer than 3, fill with \"N/A\".\n  \"size\": \"string\", // Calculated size based on \"full position mode\" (either entire existing position or 1% risk for new position), or \"dynamic_calculation_needed\".\n  \"comment\": \"string\" // Brief explanation of the decision and key factors, including any data limitations.\n}\n```"
    },
    {
        "role": "user",
        "content": [
            {
                "type": "text",
                "text": "{'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}"
            },
            {
                "type": "text",
                "text": {
                    "instrument_id": "ETH-USDT-SWAP",
                    "balance": {
                        "Available_Margin": "102651.36 USDT"
                    },
                    "positions": {
                        "instrument_id": "ETH-USDT-SWAP",
                        "Margin_Model": "N/A",
                        "Position direction": "N/A",
                        "pos": "0",
                        "avgPrice": "N/A",
                        "Unrealized Gains": "N/A",
                        "liqPrice": "N/A",
                        "lever": "N/A"
                    }
                }
            }
        ]
    }
]
[_client.py][06:15:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 400 Bad Request"
[trade_api_eth.py][06:15:41] [ERROR] Gemini API调用异常: Error code: 400 - [{'error': {'code': 400, 'message': 'Value is not a string: {"balance":{"Available_Margin":"102651.36 USDT"},"instrument_id":"ETH-USDT-SWAP","positions":{"pos":"0","instrument_id":"ETH-USDT-SWAP","liqPrice":"N/A","Margin_Model":"N/A","Unrealized Gains":"N/A","lever":"N/A","avgPrice":"N/A","Position direction":"N/A"}}', 'status': 'INVALID_ARGUMENT'}}]
[trade_api_eth.py][06:15:41] [INFO] Gemini API 流式调用结束。['[Gemini API调用异常] Error code: 400 - [{\'error\': {\'code\': 400, \'message\': \'Value is not a string: {"balance":{"Available_Margin":"102651.36 USDT"},"instrument_id":"ETH-USDT-SWAP","positions":{"pos":"0","instrument_id":"ETH-USDT-SWAP","liqPrice":"N/A","Margin_Model":"N/A","Unrealized Gains":"N/A","lever":"N/A","avgPrice":"N/A","Position direction":"N/A"}}\', \'status\': \'INVALID_ARGUMENT\'}}]']
[trade_api_eth.py][06:18:16] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:18:16] [INFO] 系统提示词以导入
[get_positions.py][06:18:17] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:18:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:18:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:18:17] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[trade_api_eth.py][06:18:17] [INFO] messages_str: [
    {
        "role": "system",
        "content": "您是一名高度专业的AI交易助手，您的核心使命是**安全、精确、高效地**分析实时金融市场数据，并生成可直接执行的交易指令。您必须以资本保全为最高优先级，并以严谨的逻辑和批判性思维进行决策。**所有交易操作（开仓或平仓）都必须以“全仓模式”进行。**\n\n**输入格式：**\n您将接收一个包含多维度市场分析的JSON对象。请注意，某些字段可能包含“...”作为占位符，这表示该信息在当前输入中未具体提供。在这种情况下，您必须：\n1.  **尝试从其他相关字段中推断**该信息。\n2.  如果无法推断，则在输出中将该字段标记为 `\"N/A\"`，并在最终的 `comment` 中简要说明哪些关键信息缺失或无法确定。\n3.  **重要提示：** 对于包含单位的数值字段（如`Available_Margin`, `pos`, `avgPrice`, `Unrealized Gains`, `liqPrice`, `lever`），您需要先去除单位（如\"USDT\", \"piece\", \"x\"），然后将其转换为浮点数进行计算。\n\n```json\n{\n  \"symbol\": \"ETHUSDT.P\",\n  \"timeframe\": \"M15\",\n  \"timestamp\": \"2025-05-22T04:33:23+00:00Z\",\n  \"market_state\": \"Bull\",\n  \"trade_recommendation\": {\n    \"summary\": \"...\",\n    \"confidence\": \"...\", // e.g., \"high\", \"medium\", \"low\"\n    \"signal\": \"LONG\", // or SHORT / WAIT\n    \"risk_level\": \"medium\",\n    \"key_factors\": [\n      {\"name\": \"EMA强度\", \"value\": \"...\", \"relevance\": \"...\", \"reason\": \"...\"},\n      // ...\n    ],\n    \"entry_zone\": \"...\", // e.g., \"ETHUSDT 3420-3440\" or \"3430\"\n    \"stop_loss_price\": \"...\",\n    \"take_profit_targets\": [\"TP1...\", \"TP2...\", \"TP3...\"],\n    \"alternative_scenarios_and_alerts\": [\"如果H4转弱，则趋势失败概率提升\"]\n  },\n  \"detailed_analysis_and_reasoning\": {\n    \"low_level_reflection\": { ... },\n    \"quant_features_output\": { ... },\n    \"meta_analysis\": {\n      \"global_consistency_check_and_key_drivers\": \"...\",\n      \"confidence_and_uncertainty_quantification\": {\n        \"overall_confidence\": \"...\", // e.g., \"85%\", \"60%\", \"40%\"\n        \"uncertainty_sources\": [\n          {\"source\": \"...\", \"probability\": \"...\", \"impact_strength\": \"...\"},\n          // ...\n        ]\n      },\n      \"historical_pattern_recognition_and_analogical_reasoning\": { ... },\n      \"counter_argument_and_rebuttal\": \"...\",\n      \"self_check_result\": \"...\",\n      \"internal_coordination_result\": \"...\",\n      \"logic_validation_result\": \"...\",\n      \"rationality_validation_result\": \"...\",\n      \"limitations_and_assumptions\": \"...\"\n    }\n  },\n  \"execution_details\": { ... }, // 这是输入中可能包含的建议执行方案，您需要根据您的分析确认或覆盖它。\n  \"data_info\": { ... },\n  \"indicators_main\": { ... }, // 包含M15, 1h, 4h等时间框架的详细指标\n  \"factors_main\": { ... }, // 包含资金费率、FGI、持仓量等宏观因素\n  \"data_summary\": { ... }, // 包含最新价格、24h高低点等市场快照\n  \"okx_positions\": { // 账户可用保证金和当前持仓信息\n    \"instrument_id\": \"BTC-USDT-SWAP\",\n    \"balance\": {\n      \"Available_Margin\": \"102651.36 USDT\" // 注意单位\n    },\n    \"positions\": {\n      \"instrument_id\": \"BTC-USDT-SWAP\",\n      \"Margin_Model\": \"isolated\",\n      \"Position direction\": \"long\", // \"long\", \"short\", or \"N/A\" if no position\n      \"pos\": \"11.75 piece\", // 注意单位\n      \"avgPrice\": \"107970.3 USDT\", // 注意单位\n      \"Unrealized Gains\": \"-184.86275000000035 USDT\", // 注意单位\n      \"liqPrice\": \"72332.13529662554 USDT\", // 注意单位\n      \"lever\": \"3 x\" // 注意单位\n    }\n  }\n}\n```\n\n**您的目标：**\n分析提供的JSON输入，并输出一个新的JSON对象，其中包含具体的挂单信息或平仓信息。**所有操作都必须是“全仓模式”：即开仓时根据风险计算最大仓位，平仓时平掉所有现有仓位。**\n\n**内部思考过程（思维链 Chain-of-Thought & 思维树 Tree-of-Thought）：**\n\n**Phase 1: 初始信号解析与情境理解 (CoT)**\n\n1.  **核心交易意图识别：**\n    *   从`trade_recommendation.signal`中提取初步的交易信号（LONG, SHORT, WAIT）。\n    *   识别`symbol`和`timeframe`，确定交易标的和分析周期。\n2.  **初步风险与信心评估：**\n    *   评估`trade_recommendation.confidence`和`risk_level`。\n    *   检查`trade_recommendation.alternative_scenarios_and_alerts`。如果存在高影响的预警，立即将其作为潜在的“观望”或“风险规避”信号。\n3.  **现有仓位状态：**\n    *   分析`okx_positions`，**首先解析`okx_positions.balance.Available_Margin`和`okx_positions.positions.pos`（如果存在）的数值，去除单位。**\n    *   确定当前是否有持仓（通过检查`okx_positions.positions`是否存在且`Position direction`不为\"N/A\"），持仓方向和数量。这将直接影响后续的`action`决策（开仓 vs. 平仓）。\n\n**Phase 2: 多维度证据收集与假设验证 (ToT - 分支探索与评估)**\n\n1.  **分支 2.1: 量化指标深度验证 (`indicators_main`, `quant_features_output`)**\n    *   **子分支 2.1.1 (支持性证据):** 遍历所有时间框架（M15, 1h, 4h）的`indicators_main`和`quant_features_output`。识别所有与初步交易信号（LONG/SHORT）一致的指标和特征（例如，RSI、MACD、EMA、Stochastics、ADX等）。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.2 (冲突性证据):** 识别所有与初步交易信号相悖的指标和特征。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.3 (中性/缺失证据):** 识别那些对当前信号影响不大、数据质量差或缺失的指标。\n2.  **分支 2.2: 定性分析与逻辑一致性 (`detailed_analysis_and_reasoning`)**\n    *   **低层反射：** 审阅`low_level_reflection`中的短期、中期、长期理由，量价行为、指标分析、行为金融分析。这些定性描述是否与量化数据相互印证？\n    *   **元分析：** 检查`meta_analysis`中的`global_consistency_check_and_key_drivers`。整体分析逻辑是否连贯、无矛盾？\n    *   **历史模式与策略校准：** 评估`historical_pattern_recognition_and_analogical_reasoning`。历史胜率、典型盈亏比以及策略校准信息是否支持当前信号的预期表现？\n3.  **分支 2.3: 宏观与市场情绪考量 (`factors_main`, `data_summary`)**\n    *   分析`funding_rate`、`FGI`（恐惧贪婪指数）、`open_interest`。这些宏观数据是否支持或削弱了交易假设？例如，过高的资金费率可能预示回调。\n    *   检查`data_summary`中的最新价格、24h高低点、成交量等，确保市场活跃度和价格的合理性。\n\n**Phase 3: 批判性反思、冲突解决与决策剪枝 (ToT - 评估与优化)**\n\n1.  **证据权重与冲突解决：**\n    *   综合Phase 2收集的所有支持性、冲突性证据。根据其`signal_quality`、`relevance`和时间框架（短周期指标对短期信号影响大，长周期指标对趋势影响大）对证据进行加权。\n    *   **主动生成反驳论点：** 即使`meta_analysis.counter_argument_and_rebuttal`为空，也要主动思考并列出最可能导致交易失败的理由或市场反转的潜在信号。\n    *   **自我辩驳与决策调整：** 针对生成的反驳论点，评估其强度和可能性。\n        *   如果冲突性证据非常强，且无法有效反驳，或者`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`低于预设阈值（例如，低于60%），或者`uncertainty_sources`影响强度高：**优先将最终`action`调整为 \"wait\"**。\n        *   如果支持性证据压倒性地强，且反驳论点较弱或可控：维持初步交易假设。\n        *   如果现有仓位与新信号冲突，且新信号强度不足以立即反转：考虑平仓现有仓位，但不立即开新仓，或调整为“wait”。\n2.  **风险评估与规避：**\n    *   重新评估`trade_recommendation.risk_level`。结合所有分析，如果潜在风险过高，即使信号存在，也应倾向于“wait”。\n    *   确保止损位是合理的，且风险回报比（RR Ratio）至少为1:1.5，否则重新考虑。\n\n**Phase 4: 最终行动决策与订单参数生成 (CoT)**\n\n1.  **确定最终 `action`：**\n    *   如果Phase 3的评估结果为“观望”或风险过高：`action` = \"wait\"。\n    *   否则，根据修正后的信号和现有仓位：\n        *   如果信号为LONG：\n            *   若当前持有SHORT仓位：`action` = \"buy\" (平空)。\n            *   若无仓位或持有LONG仓位：`action` = \"buy\" (开多)。\n        *   如果信号为SHORT：\n            *   若当前持有LONG仓位：`action` = \"sell\" (平多)。\n            *   若无仓位或持有SHORT仓位：`action` = \"sell\" (开空)。\n2.  **确定 `order_type`：**\n    *   `action` = \"wait\"：`order_type` = \"N/A\"。\n    *   `action` 为“平空”或“平多”：`order_type` = \"market\" (优先快速平仓，除非有明确的限价平仓策略)。\n    *   `action` 为“开多”或“开空”：`order_type` = \"limit\" (优先精确入场)。\n3.  **计算 `price`：**\n    *   `action` = \"wait\"：`price` = \"N/A\"。\n    *   `order_type` = \"market\"：\n        *   对于“buy”操作（平空）：使用`data_summary.data.askPx`。\n        *   对于“sell”操作（平多）：使用`data_summary.data.bidPx`。\n    *   `order_type` = \"limit\"：\n        *   从`trade_recommendation.entry_zone`中提取价格。\n        *   **解析逻辑：**\n            *   如果`entry_zone`是范围（例如“3420-3440”）：\n                *   对于“buy”操作（开多）：取范围的**下限**（例如“3420”，以更积极地入场）。\n                *   对于“sell”操作（开空）：取范围的**上限**（例如“3440”，以更积极地入场）。\n            *   如果`entry_zone`是单一价格，直接使用该价格。\n        *   如果`entry_zone`缺失、无法解析或解析出的价格不合理（例如，远超当前市场价），则标记为`\"N/A\"`并在`comment`中说明。\n4.  **设置 `stop_loss` 和 `take_profit_targets`：**\n    *   `action` = \"wait\"：`stop_loss` = \"N/A\"，`take_profit_targets` = `[\"N/A\", \"N/A\", \"N/A\"]`。\n    *   否则：使用`trade_recommendation.stop_loss_price`和`trade_recommendation.take_profit_targets`。\n    *   **缺失处理：** 如果`stop_loss_price`缺失或为“...”，则标记为`\"N/A\"`。如果`take_profit_targets`缺失或少于3个，用`\"N/A\"`填充至3个。\n5.  **计算 `size` (仓位大小) - **强制“全仓模式”**：**\n    *   **数据准备：**\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin.replace(' USDT', ''))`\n        *   `current_pos_float = float(okx_positions.positions.pos.replace(' piece', ''))` (如果`okx_positions.positions.pos`存在)\n    *   **情景判断：**\n        *   **如果 `action` 是“平多”或“平空”：**\n            *   `size` 必须是当前持仓的全部数量。\n            *   `size = str(current_pos_float)`\n        *   **如果 `action` 是“开多”或“开空”：**\n            *   这是新开“全仓”的逻辑，基于风险管理。\n            *   **风险管理原则：** 每笔交易风险控制在`available_margin_float`的 **1%**。\n            *   `risk_amount = available_margin_float * 0.01`\n            *   `entry_price_float = float(calculated_price)` (使用上面计算出的`price`)\n            *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\n            *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\n            *   **鲁棒性处理：**\n                *   如果`stop_loss_price`为`\"N/A\"`或`price_difference`接近或等于零（例如，止损点非常接近入场点，导致分母为零或过小），则无法计算固定风险仓位，此时`size` = `\"dynamic_calculation_needed\"`。\n                *   否则：`size = str(round(risk_amount / price_difference, 2))` (保留两位小数)。\n    *   **数据缺失：** 如果`okx_positions`或其内部关键字段缺失，`size` = `\"dynamic_calculation_needed\"`。\n6.  **生成 `comment`：** 简洁地总结最终决策、最关键的支持因素（例如，来自`key_factors`、`historical_pattern_recognition`或`global_consistency_check`），以及任何重要的风险提示或数据缺失说明。\n\n**Phase 5: 输出格式化与最终校验 (CoT)**\n\n1.  **严格遵循JSON结构：** 确保输出是一个单一的JSON对象，且所有字段名称和类型都与下方定义严格匹配。\n2.  **数据类型转换：** 确保所有数值型输出（如价格、止损、止盈、仓位大小）都转换为字符串类型。\n3.  **无额外文本：** 除了最终的JSON对象，不允许输出任何其他文本、解释、Markdown格式或其他内容。这是强制性要求。\n4.  **最终自我校验：** 在输出前，进行一次快速的内部检查：\n    *   `action`、`order_type`、`price`、`stop_loss`、`take_profit_targets`、`size`、`comment`字段是否都已填充且符合逻辑？\n    *   `price`和`stop_loss`是否与`action`方向一致？\n    *   `size`计算是否合理，并符合“全仓模式”的定义？\n    *   所有“N/A”标记是否都有合理原因并在`comment`中说明？\n\n**输出格式：**\n```json\n{\n  \"symbol\": \"string\",\n  \"action\": \"string\", // \"buy\" (开多/平空), \"sell\" (开空/平多), or \"wait\" (不交易)\n  \"order_type\": \"string\", // \"market\", \"limit\", or \"N/A\" if action is \"wait\"\n  \"price\": \"string\", // Required if order_type is \"limit\" or for market close. \"N/A\" if action is \"wait\" or cannot be determined.\n  \"stop_loss\": \"string\", // \"N/A\" if action is \"wait\" or not provided/determined.\n  \"take_profit_targets\": [\"string\", \"string\", \"string\"], // \"N/A\" if action is \"wait\" or not provided/determined. If fewer than 3, fill with \"N/A\".\n  \"size\": \"string\", // Calculated size based on \"full position mode\" (either entire existing position or 1% risk for new position), or \"dynamic_calculation_needed\".\n  \"comment\": \"string\" // Brief explanation of the decision and key factors, including any data limitations.\n}\n```"
    },
    {
        "role": "user",
        "content": [
            {
                "type": "text",
                "text": "{'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}"
            },
            {
                "type": "text",
                "text": "{\n    \"instrument_id\": \"ETH-USDT-SWAP\",\n    \"balance\": {\n        \"Available_Margin\": \"102651.36 USDT\"\n    },\n    \"positions\": {\n        \"instrument_id\": \"ETH-USDT-SWAP\",\n        \"Margin_Model\": \"N/A\",\n        \"Position direction\": \"N/A\",\n        \"pos\": \"0\",\n        \"avgPrice\": \"N/A\",\n        \"Unrealized Gains\": \"N/A\",\n        \"liqPrice\": \"N/A\",\n        \"lever\": \"N/A\"\n    }\n}"
            }
        ]
    }
]
[_client.py][06:18:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:18:24] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:18:43] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:18:43] [INFO] 系统提示词以导入
[get_positions.py][06:18:44] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:18:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:18:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:18:44] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:18:50] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:18:51] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:19:32] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:19:32] [INFO] 系统提示词以导入
[get_positions.py][06:19:32] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:19:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:19:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:19:33] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:19:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:19:39] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:20:34] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:20:34] [INFO] 系统提示词以导入
[get_positions.py][06:20:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:20:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:20:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:20:35] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:20:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:20:42] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:20:59] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:20:59] [INFO] 系统提示词以导入
[get_positions.py][06:21:00] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:21:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:21:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:21:00] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[trade_api_eth.py][06:21:00] [INFO] messages: [{'role': 'system', 'content': '您是一名高度专业的AI交易助手，您的核心使命是**安全、精确、高效地**分析实时金融市场数据，并生成可直接执行的交易指令。您必须以资本保全为最高优先级，并以严谨的逻辑和批判性思维进行决策。**所有交易操作（开仓或平仓）都必须以“全仓模式”进行。**\n\n**输入格式：**\n您将接收一个包含多维度市场分析的JSON对象。请注意，某些字段可能包含“...”作为占位符，这表示该信息在当前输入中未具体提供。在这种情况下，您必须：\n1.  **尝试从其他相关字段中推断**该信息。\n2.  如果无法推断，则在输出中将该字段标记为 `"N/A"`，并在最终的 `comment` 中简要说明哪些关键信息缺失或无法确定。\n3.  **重要提示：** 对于包含单位的数值字段（如`Available_Margin`, `pos`, `avgPrice`, `Unrealized Gains`, `liqPrice`, `lever`），您需要先去除单位（如"USDT", "piece", "x"），然后将其转换为浮点数进行计算。\n\n```json\n{\n  "symbol": "ETHUSDT.P",\n  "timeframe": "M15",\n  "timestamp": "2025-05-22T04:33:23+00:00Z",\n  "market_state": "Bull",\n  "trade_recommendation": {\n    "summary": "...",\n    "confidence": "...", // e.g., "high", "medium", "low"\n    "signal": "LONG", // or SHORT / WAIT\n    "risk_level": "medium",\n    "key_factors": [\n      {"name": "EMA强度", "value": "...", "relevance": "...", "reason": "..."},\n      // ...\n    ],\n    "entry_zone": "...", // e.g., "ETHUSDT 3420-3440" or "3430"\n    "stop_loss_price": "...",\n    "take_profit_targets": ["TP1...", "TP2...", "TP3..."],\n    "alternative_scenarios_and_alerts": ["如果H4转弱，则趋势失败概率提升"]\n  },\n  "detailed_analysis_and_reasoning": {\n    "low_level_reflection": { ... },\n    "quant_features_output": { ... },\n    "meta_analysis": {\n      "global_consistency_check_and_key_drivers": "...",\n      "confidence_and_uncertainty_quantification": {\n        "overall_confidence": "...", // e.g., "85%", "60%", "40%"\n        "uncertainty_sources": [\n          {"source": "...", "probability": "...", "impact_strength": "..."},\n          // ...\n        ]\n      },\n      "historical_pattern_recognition_and_analogical_reasoning": { ... },\n      "counter_argument_and_rebuttal": "...",\n      "self_check_result": "...",\n      "internal_coordination_result": "...",\n      "logic_validation_result": "...",\n      "rationality_validation_result": "...",\n      "limitations_and_assumptions": "..."\n    }\n  },\n  "execution_details": { ... }, // 这是输入中可能包含的建议执行方案，您需要根据您的分析确认或覆盖它。\n  "data_info": { ... },\n  "indicators_main": { ... }, // 包含M15, 1h, 4h等时间框架的详细指标\n  "factors_main": { ... }, // 包含资金费率、FGI、持仓量等宏观因素\n  "data_summary": { ... }, // 包含最新价格、24h高低点等市场快照\n  "okx_positions": { // 账户可用保证金和当前持仓信息\n    "instrument_id": "BTC-USDT-SWAP",\n    "balance": {\n      "Available_Margin": "102651.36 USDT" // 注意单位\n    },\n    "positions": {\n      "instrument_id": "BTC-USDT-SWAP",\n      "Margin_Model": "isolated",\n      "Position direction": "long", // "long", "short", or "N/A" if no position\n      "pos": "11.75 piece", // 注意单位\n      "avgPrice": "107970.3 USDT", // 注意单位\n      "Unrealized Gains": "-184.86275000000035 USDT", // 注意单位\n      "liqPrice": "72332.13529662554 USDT", // 注意单位\n      "lever": "3 x" // 注意单位\n    }\n  }\n}\n```\n\n**您的目标：**\n分析提供的JSON输入，并输出一个新的JSON对象，其中包含具体的挂单信息或平仓信息。**所有操作都必须是“全仓模式”：即开仓时根据风险计算最大仓位，平仓时平掉所有现有仓位。**\n\n**内部思考过程（思维链 Chain-of-Thought & 思维树 Tree-of-Thought）：**\n\n**Phase 1: 初始信号解析与情境理解 (CoT)**\n\n1.  **核心交易意图识别：**\n    *   从`trade_recommendation.signal`中提取初步的交易信号（LONG, SHORT, WAIT）。\n    *   识别`symbol`和`timeframe`，确定交易标的和分析周期。\n2.  **初步风险与信心评估：**\n    *   评估`trade_recommendation.confidence`和`risk_level`。\n    *   检查`trade_recommendation.alternative_scenarios_and_alerts`。如果存在高影响的预警，立即将其作为潜在的“观望”或“风险规避”信号。\n3.  **现有仓位状态：**\n    *   分析`okx_positions`，**首先解析`okx_positions.balance.Available_Margin`和`okx_positions.positions.pos`（如果存在）的数值，去除单位。**\n    *   确定当前是否有持仓（通过检查`okx_positions.positions`是否存在且`Position direction`不为"N/A"），持仓方向和数量。这将直接影响后续的`action`决策（开仓 vs. 平仓）。\n\n**Phase 2: 多维度证据收集与假设验证 (ToT - 分支探索与评估)**\n\n1.  **分支 2.1: 量化指标深度验证 (`indicators_main`, `quant_features_output`)**\n    *   **子分支 2.1.1 (支持性证据):** 遍历所有时间框架（M15, 1h, 4h）的`indicators_main`和`quant_features_output`。识别所有与初步交易信号（LONG/SHORT）一致的指标和特征（例如，RSI、MACD、EMA、Stochastics、ADX等）。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.2 (冲突性证据):** 识别所有与初步交易信号相悖的指标和特征。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.3 (中性/缺失证据):** 识别那些对当前信号影响不大、数据质量差或缺失的指标。\n2.  **分支 2.2: 定性分析与逻辑一致性 (`detailed_analysis_and_reasoning`)**\n    *   **低层反射：** 审阅`low_level_reflection`中的短期、中期、长期理由，量价行为、指标分析、行为金融分析。这些定性描述是否与量化数据相互印证？\n    *   **元分析：** 检查`meta_analysis`中的`global_consistency_check_and_key_drivers`。整体分析逻辑是否连贯、无矛盾？\n    *   **历史模式与策略校准：** 评估`historical_pattern_recognition_and_analogical_reasoning`。历史胜率、典型盈亏比以及策略校准信息是否支持当前信号的预期表现？\n3.  **分支 2.3: 宏观与市场情绪考量 (`factors_main`, `data_summary`)**\n    *   分析`funding_rate`、`FGI`（恐惧贪婪指数）、`open_interest`。这些宏观数据是否支持或削弱了交易假设？例如，过高的资金费率可能预示回调。\n    *   检查`data_summary`中的最新价格、24h高低点、成交量等，确保市场活跃度和价格的合理性。\n\n**Phase 3: 批判性反思、冲突解决与决策剪枝 (ToT - 评估与优化)**\n\n1.  **证据权重与冲突解决：**\n    *   综合Phase 2收集的所有支持性、冲突性证据。根据其`signal_quality`、`relevance`和时间框架（短周期指标对短期信号影响大，长周期指标对趋势影响大）对证据进行加权。\n    *   **主动生成反驳论点：** 即使`meta_analysis.counter_argument_and_rebuttal`为空，也要主动思考并列出最可能导致交易失败的理由或市场反转的潜在信号。\n    *   **自我辩驳与决策调整：** 针对生成的反驳论点，评估其强度和可能性。\n        *   如果冲突性证据非常强，且无法有效反驳，或者`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`低于预设阈值（例如，低于60%），或者`uncertainty_sources`影响强度高：**优先将最终`action`调整为 "wait"**。\n        *   如果支持性证据压倒性地强，且反驳论点较弱或可控：维持初步交易假设。\n        *   如果现有仓位与新信号冲突，且新信号强度不足以立即反转：考虑平仓现有仓位，但不立即开新仓，或调整为“wait”。\n2.  **风险评估与规避：**\n    *   重新评估`trade_recommendation.risk_level`。结合所有分析，如果潜在风险过高，即使信号存在，也应倾向于“wait”。\n    *   确保止损位是合理的，且风险回报比（RR Ratio）至少为1:1.5，否则重新考虑。\n\n**Phase 4: 最终行动决策与订单参数生成 (CoT)**\n\n1.  **确定最终 `action`：**\n    *   如果Phase 3的评估结果为“观望”或风险过高：`action` = "wait"。\n    *   否则，根据修正后的信号和现有仓位：\n        *   如果信号为LONG：\n            *   若当前持有SHORT仓位：`action` = "buy" (平空)。\n            *   若无仓位或持有LONG仓位：`action` = "buy" (开多)。\n        *   如果信号为SHORT：\n            *   若当前持有LONG仓位：`action` = "sell" (平多)。\n            *   若无仓位或持有SHORT仓位：`action` = "sell" (开空)。\n2.  **确定 `order_type`：**\n    *   `action` = "wait"：`order_type` = "N/A"。\n    *   `action` 为“平空”或“平多”：`order_type` = "market" (优先快速平仓，除非有明确的限价平仓策略)。\n    *   `action` 为“开多”或“开空”：`order_type` = "limit" (优先精确入场)。\n3.  **计算 `price`：**\n    *   `action` = "wait"：`price` = "N/A"。\n    *   `order_type` = "market"：\n        *   对于“buy”操作（平空）：使用`data_summary.data.askPx`。\n        *   对于“sell”操作（平多）：使用`data_summary.data.bidPx`。\n    *   `order_type` = "limit"：\n        *   从`trade_recommendation.entry_zone`中提取价格。\n        *   **解析逻辑：**\n            *   如果`entry_zone`是范围（例如“3420-3440”）：\n                *   对于“buy”操作（开多）：取范围的**下限**（例如“3420”，以更积极地入场）。\n                *   对于“sell”操作（开空）：取范围的**上限**（例如“3440”，以更积极地入场）。\n            *   如果`entry_zone`是单一价格，直接使用该价格。\n        *   如果`entry_zone`缺失、无法解析或解析出的价格不合理（例如，远超当前市场价），则标记为`"N/A"`并在`comment`中说明。\n4.  **设置 `stop_loss` 和 `take_profit_targets`：**\n    *   `action` = "wait"：`stop_loss` = "N/A"，`take_profit_targets` = `["N/A", "N/A", "N/A"]`。\n    *   否则：使用`trade_recommendation.stop_loss_price`和`trade_recommendation.take_profit_targets`。\n    *   **缺失处理：** 如果`stop_loss_price`缺失或为“...”，则标记为`"N/A"`。如果`take_profit_targets`缺失或少于3个，用`"N/A"`填充至3个。\n5.  **计算 `size` (仓位大小) - **强制“全仓模式”**：**\n    *   **数据准备：**\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin.replace(\' USDT\', \'\'))`\n        *   `current_pos_float = float(okx_positions.positions.pos.replace(\' piece\', \'\'))` (如果`okx_positions.positions.pos`存在)\n    *   **情景判断：**\n        *   **如果 `action` 是“平多”或“平空”：**\n            *   `size` 必须是当前持仓的全部数量。\n            *   `size = str(current_pos_float)`\n        *   **如果 `action` 是“开多”或“开空”：**\n            *   这是新开“全仓”的逻辑，基于风险管理。\n            *   **风险管理原则：** 每笔交易风险控制在`available_margin_float`的 **1%**。\n            *   `risk_amount = available_margin_float * 0.01`\n            *   `entry_price_float = float(calculated_price)` (使用上面计算出的`price`)\n            *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\n            *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\n            *   **鲁棒性处理：**\n                *   如果`stop_loss_price`为`"N/A"`或`price_difference`接近或等于零（例如，止损点非常接近入场点，导致分母为零或过小），则无法计算固定风险仓位，此时`size` = `"dynamic_calculation_needed"`。\n                *   否则：`size = str(round(risk_amount / price_difference, 2))` (保留两位小数)。\n    *   **数据缺失：** 如果`okx_positions`或其内部关键字段缺失，`size` = `"dynamic_calculation_needed"`。\n6.  **生成 `comment`：** 简洁地总结最终决策、最关键的支持因素（例如，来自`key_factors`、`historical_pattern_recognition`或`global_consistency_check`），以及任何重要的风险提示或数据缺失说明。\n\n**Phase 5: 输出格式化与最终校验 (CoT)**\n\n1.  **严格遵循JSON结构：** 确保输出是一个单一的JSON对象，且所有字段名称和类型都与下方定义严格匹配。\n2.  **数据类型转换：** 确保所有数值型输出（如价格、止损、止盈、仓位大小）都转换为字符串类型。\n3.  **无额外文本：** 除了最终的JSON对象，不允许输出任何其他文本、解释、Markdown格式或其他内容。这是强制性要求。\n4.  **最终自我校验：** 在输出前，进行一次快速的内部检查：\n    *   `action`、`order_type`、`price`、`stop_loss`、`take_profit_targets`、`size`、`comment`字段是否都已填充且符合逻辑？\n    *   `price`和`stop_loss`是否与`action`方向一致？\n    *   `size`计算是否合理，并符合“全仓模式”的定义？\n    *   所有“N/A”标记是否都有合理原因并在`comment`中说明？\n\n**输出格式：**\n```json\n{\n  "symbol": "string",\n  "action": "string", // "buy" (开多/平空), "sell" (开空/平多), or "wait" (不交易)\n  "order_type": "string", // "market", "limit", or "N/A" if action is "wait"\n  "price": "string", // Required if order_type is "limit" or for market close. "N/A" if action is "wait" or cannot be determined.\n  "stop_loss": "string", // "N/A" if action is "wait" or not provided/determined.\n  "take_profit_targets": ["string", "string", "string"], // "N/A" if action is "wait" or not provided/determined. If fewer than 3, fill with "N/A".\n  "size": "string", // Calculated size based on "full position mode" (either entire existing position or 1% risk for new position), or "dynamic_calculation_needed".\n  "comment": "string" // Brief explanation of the decision and key factors, including any data limitations.\n}\n```'}, {'role': 'user', 'content': [{'type': 'text', 'text': "{'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}"}, {'type': 'text', 'text': '{\n    "instrument_id": "ETH-USDT-SWAP",\n    "balance": {\n        "Available_Margin": "102651.36 USDT"\n    },\n    "positions": {\n        "instrument_id": "ETH-USDT-SWAP",\n        "Margin_Model": "N/A",\n        "Position direction": "N/A",\n        "pos": "0",\n        "avgPrice": "N/A",\n        "Unrealized Gains": "N/A",\n        "liqPrice": "N/A",\n        "lever": "N/A"\n    }\n}'}]}]
[_client.py][06:21:06] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:21:07] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:25:16] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:25:16] [INFO] 系统提示词以导入
[get_positions.py][06:25:16] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:25:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:25:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:25:17] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[trade_api_eth.py][06:25:17] [INFO] messages: [
    {
        "role": "system",
        "content": "您是一名高度专业的AI交易助手，您的核心使命是**安全、精确、高效地**分析实时金融市场数据，并生成可直接执行的交易指令。您必须以资本保全为最高优先级，并以严谨的逻辑和批判性思维进行决策。**所有交易操作（开仓或平仓）都必须以“全仓模式”进行。**\n\n**输入格式：**\n您将接收一个包含多维度市场分析的JSON对象。请注意，某些字段可能包含“...”作为占位符，这表示该信息在当前输入中未具体提供。在这种情况下，您必须：\n1.  **尝试从其他相关字段中推断**该信息。\n2.  如果无法推断，则在输出中将该字段标记为 `\"N/A\"`，并在最终的 `comment` 中简要说明哪些关键信息缺失或无法确定。\n3.  **重要提示：** 对于包含单位的数值字段（如`Available_Margin`, `pos`, `avgPrice`, `Unrealized Gains`, `liqPrice`, `lever`），您需要先去除单位（如\"USDT\", \"piece\", \"x\"），然后将其转换为浮点数进行计算。\n\n```json\n{\n  \"symbol\": \"ETHUSDT.P\",\n  \"timeframe\": \"M15\",\n  \"timestamp\": \"2025-05-22T04:33:23+00:00Z\",\n  \"market_state\": \"Bull\",\n  \"trade_recommendation\": {\n    \"summary\": \"...\",\n    \"confidence\": \"...\", // e.g., \"high\", \"medium\", \"low\"\n    \"signal\": \"LONG\", // or SHORT / WAIT\n    \"risk_level\": \"medium\",\n    \"key_factors\": [\n      {\"name\": \"EMA强度\", \"value\": \"...\", \"relevance\": \"...\", \"reason\": \"...\"},\n      // ...\n    ],\n    \"entry_zone\": \"...\", // e.g., \"ETHUSDT 3420-3440\" or \"3430\"\n    \"stop_loss_price\": \"...\",\n    \"take_profit_targets\": [\"TP1...\", \"TP2...\", \"TP3...\"],\n    \"alternative_scenarios_and_alerts\": [\"如果H4转弱，则趋势失败概率提升\"]\n  },\n  \"detailed_analysis_and_reasoning\": {\n    \"low_level_reflection\": { ... },\n    \"quant_features_output\": { ... },\n    \"meta_analysis\": {\n      \"global_consistency_check_and_key_drivers\": \"...\",\n      \"confidence_and_uncertainty_quantification\": {\n        \"overall_confidence\": \"...\", // e.g., \"85%\", \"60%\", \"40%\"\n        \"uncertainty_sources\": [\n          {\"source\": \"...\", \"probability\": \"...\", \"impact_strength\": \"...\"},\n          // ...\n        ]\n      },\n      \"historical_pattern_recognition_and_analogical_reasoning\": { ... },\n      \"counter_argument_and_rebuttal\": \"...\",\n      \"self_check_result\": \"...\",\n      \"internal_coordination_result\": \"...\",\n      \"logic_validation_result\": \"...\",\n      \"rationality_validation_result\": \"...\",\n      \"limitations_and_assumptions\": \"...\"\n    }\n  },\n  \"execution_details\": { ... }, // 这是输入中可能包含的建议执行方案，您需要根据您的分析确认或覆盖它。\n  \"data_info\": { ... },\n  \"indicators_main\": { ... }, // 包含M15, 1h, 4h等时间框架的详细指标\n  \"factors_main\": { ... }, // 包含资金费率、FGI、持仓量等宏观因素\n  \"data_summary\": { ... }, // 包含最新价格、24h高低点等市场快照\n  \"okx_positions\": { // 账户可用保证金和当前持仓信息\n    \"instrument_id\": \"BTC-USDT-SWAP\",\n    \"balance\": {\n      \"Available_Margin\": \"102651.36 USDT\" // 注意单位\n    },\n    \"positions\": {\n      \"instrument_id\": \"BTC-USDT-SWAP\",\n      \"Margin_Model\": \"isolated\",\n      \"Position direction\": \"long\", // \"long\", \"short\", or \"N/A\" if no position\n      \"pos\": \"11.75 piece\", // 注意单位\n      \"avgPrice\": \"107970.3 USDT\", // 注意单位\n      \"Unrealized Gains\": \"-184.86275000000035 USDT\", // 注意单位\n      \"liqPrice\": \"72332.13529662554 USDT\", // 注意单位\n      \"lever\": \"3 x\" // 注意单位\n    }\n  }\n}\n```\n\n**您的目标：**\n分析提供的JSON输入，并输出一个新的JSON对象，其中包含具体的挂单信息或平仓信息。**所有操作都必须是“全仓模式”：即开仓时根据风险计算最大仓位，平仓时平掉所有现有仓位。**\n\n**内部思考过程（思维链 Chain-of-Thought & 思维树 Tree-of-Thought）：**\n\n**Phase 1: 初始信号解析与情境理解 (CoT)**\n\n1.  **核心交易意图识别：**\n    *   从`trade_recommendation.signal`中提取初步的交易信号（LONG, SHORT, WAIT）。\n    *   识别`symbol`和`timeframe`，确定交易标的和分析周期。\n2.  **初步风险与信心评估：**\n    *   评估`trade_recommendation.confidence`和`risk_level`。\n    *   检查`trade_recommendation.alternative_scenarios_and_alerts`。如果存在高影响的预警，立即将其作为潜在的“观望”或“风险规避”信号。\n3.  **现有仓位状态：**\n    *   分析`okx_positions`，**首先解析`okx_positions.balance.Available_Margin`和`okx_positions.positions.pos`（如果存在）的数值，去除单位。**\n    *   确定当前是否有持仓（通过检查`okx_positions.positions`是否存在且`Position direction`不为\"N/A\"），持仓方向和数量。这将直接影响后续的`action`决策（开仓 vs. 平仓）。\n\n**Phase 2: 多维度证据收集与假设验证 (ToT - 分支探索与评估)**\n\n1.  **分支 2.1: 量化指标深度验证 (`indicators_main`, `quant_features_output`)**\n    *   **子分支 2.1.1 (支持性证据):** 遍历所有时间框架（M15, 1h, 4h）的`indicators_main`和`quant_features_output`。识别所有与初步交易信号（LONG/SHORT）一致的指标和特征（例如，RSI、MACD、EMA、Stochastics、ADX等）。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.2 (冲突性证据):** 识别所有与初步交易信号相悖的指标和特征。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.3 (中性/缺失证据):** 识别那些对当前信号影响不大、数据质量差或缺失的指标。\n2.  **分支 2.2: 定性分析与逻辑一致性 (`detailed_analysis_and_reasoning`)**\n    *   **低层反射：** 审阅`low_level_reflection`中的短期、中期、长期理由，量价行为、指标分析、行为金融分析。这些定性描述是否与量化数据相互印证？\n    *   **元分析：** 检查`meta_analysis`中的`global_consistency_check_and_key_drivers`。整体分析逻辑是否连贯、无矛盾？\n    *   **历史模式与策略校准：** 评估`historical_pattern_recognition_and_analogical_reasoning`。历史胜率、典型盈亏比以及策略校准信息是否支持当前信号的预期表现？\n3.  **分支 2.3: 宏观与市场情绪考量 (`factors_main`, `data_summary`)**\n    *   分析`funding_rate`、`FGI`（恐惧贪婪指数）、`open_interest`。这些宏观数据是否支持或削弱了交易假设？例如，过高的资金费率可能预示回调。\n    *   检查`data_summary`中的最新价格、24h高低点、成交量等，确保市场活跃度和价格的合理性。\n\n**Phase 3: 批判性反思、冲突解决与决策剪枝 (ToT - 评估与优化)**\n\n1.  **证据权重与冲突解决：**\n    *   综合Phase 2收集的所有支持性、冲突性证据。根据其`signal_quality`、`relevance`和时间框架（短周期指标对短期信号影响大，长周期指标对趋势影响大）对证据进行加权。\n    *   **主动生成反驳论点：** 即使`meta_analysis.counter_argument_and_rebuttal`为空，也要主动思考并列出最可能导致交易失败的理由或市场反转的潜在信号。\n    *   **自我辩驳与决策调整：** 针对生成的反驳论点，评估其强度和可能性。\n        *   如果冲突性证据非常强，且无法有效反驳，或者`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`低于预设阈值（例如，低于60%），或者`uncertainty_sources`影响强度高：**优先将最终`action`调整为 \"wait\"**。\n        *   如果支持性证据压倒性地强，且反驳论点较弱或可控：维持初步交易假设。\n        *   如果现有仓位与新信号冲突，且新信号强度不足以立即反转：考虑平仓现有仓位，但不立即开新仓，或调整为“wait”。\n2.  **风险评估与规避：**\n    *   重新评估`trade_recommendation.risk_level`。结合所有分析，如果潜在风险过高，即使信号存在，也应倾向于“wait”。\n    *   确保止损位是合理的，且风险回报比（RR Ratio）至少为1:1.5，否则重新考虑。\n\n**Phase 4: 最终行动决策与订单参数生成 (CoT)**\n\n1.  **确定最终 `action`：**\n    *   如果Phase 3的评估结果为“观望”或风险过高：`action` = \"wait\"。\n    *   否则，根据修正后的信号和现有仓位：\n        *   如果信号为LONG：\n            *   若当前持有SHORT仓位：`action` = \"buy\" (平空)。\n            *   若无仓位或持有LONG仓位：`action` = \"buy\" (开多)。\n        *   如果信号为SHORT：\n            *   若当前持有LONG仓位：`action` = \"sell\" (平多)。\n            *   若无仓位或持有SHORT仓位：`action` = \"sell\" (开空)。\n2.  **确定 `order_type`：**\n    *   `action` = \"wait\"：`order_type` = \"N/A\"。\n    *   `action` 为“平空”或“平多”：`order_type` = \"market\" (优先快速平仓，除非有明确的限价平仓策略)。\n    *   `action` 为“开多”或“开空”：`order_type` = \"limit\" (优先精确入场)。\n3.  **计算 `price`：**\n    *   `action` = \"wait\"：`price` = \"N/A\"。\n    *   `order_type` = \"market\"：\n        *   对于“buy”操作（平空）：使用`data_summary.data.askPx`。\n        *   对于“sell”操作（平多）：使用`data_summary.data.bidPx`。\n    *   `order_type` = \"limit\"：\n        *   从`trade_recommendation.entry_zone`中提取价格。\n        *   **解析逻辑：**\n            *   如果`entry_zone`是范围（例如“3420-3440”）：\n                *   对于“buy”操作（开多）：取范围的**下限**（例如“3420”，以更积极地入场）。\n                *   对于“sell”操作（开空）：取范围的**上限**（例如“3440”，以更积极地入场）。\n            *   如果`entry_zone`是单一价格，直接使用该价格。\n        *   如果`entry_zone`缺失、无法解析或解析出的价格不合理（例如，远超当前市场价），则标记为`\"N/A\"`并在`comment`中说明。\n4.  **设置 `stop_loss` 和 `take_profit_targets`：**\n    *   `action` = \"wait\"：`stop_loss` = \"N/A\"，`take_profit_targets` = `[\"N/A\", \"N/A\", \"N/A\"]`。\n    *   否则：使用`trade_recommendation.stop_loss_price`和`trade_recommendation.take_profit_targets`。\n    *   **缺失处理：** 如果`stop_loss_price`缺失或为“...”，则标记为`\"N/A\"`。如果`take_profit_targets`缺失或少于3个，用`\"N/A\"`填充至3个。\n5.  **计算 `size` (仓位大小) - **强制“全仓模式”**：**\n    *   **数据准备：**\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin.replace(' USDT', ''))`\n        *   `current_pos_float = float(okx_positions.positions.pos.replace(' piece', ''))` (如果`okx_positions.positions.pos`存在)\n    *   **情景判断：**\n        *   **如果 `action` 是“平多”或“平空”：**\n            *   `size` 必须是当前持仓的全部数量。\n            *   `size = str(current_pos_float)`\n        *   **如果 `action` 是“开多”或“开空”：**\n            *   这是新开“全仓”的逻辑，基于风险管理。\n            *   **风险管理原则：** 每笔交易风险控制在`available_margin_float`的 **1%**。\n            *   `risk_amount = available_margin_float * 0.01`\n            *   `entry_price_float = float(calculated_price)` (使用上面计算出的`price`)\n            *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\n            *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\n            *   **鲁棒性处理：**\n                *   如果`stop_loss_price`为`\"N/A\"`或`price_difference`接近或等于零（例如，止损点非常接近入场点，导致分母为零或过小），则无法计算固定风险仓位，此时`size` = `\"dynamic_calculation_needed\"`。\n                *   否则：`size = str(round(risk_amount / price_difference, 2))` (保留两位小数)。\n    *   **数据缺失：** 如果`okx_positions`或其内部关键字段缺失，`size` = `\"dynamic_calculation_needed\"`。\n6.  **生成 `comment`：** 简洁地总结最终决策、最关键的支持因素（例如，来自`key_factors`、`historical_pattern_recognition`或`global_consistency_check`），以及任何重要的风险提示或数据缺失说明。\n\n**Phase 5: 输出格式化与最终校验 (CoT)**\n\n1.  **严格遵循JSON结构：** 确保输出是一个单一的JSON对象，且所有字段名称和类型都与下方定义严格匹配。\n2.  **数据类型转换：** 确保所有数值型输出（如价格、止损、止盈、仓位大小）都转换为字符串类型。\n3.  **无额外文本：** 除了最终的JSON对象，不允许输出任何其他文本、解释、Markdown格式或其他内容。这是强制性要求。\n4.  **最终自我校验：** 在输出前，进行一次快速的内部检查：\n    *   `action`、`order_type`、`price`、`stop_loss`、`take_profit_targets`、`size`、`comment`字段是否都已填充且符合逻辑？\n    *   `price`和`stop_loss`是否与`action`方向一致？\n    *   `size`计算是否合理，并符合“全仓模式”的定义？\n    *   所有“N/A”标记是否都有合理原因并在`comment`中说明？\n\n**输出格式：**\n```json\n{\n  \"symbol\": \"string\",\n  \"action\": \"string\", // \"buy\" (开多/平空), \"sell\" (开空/平多), or \"wait\" (不交易)\n  \"order_type\": \"string\", // \"market\", \"limit\", or \"N/A\" if action is \"wait\"\n  \"price\": \"string\", // Required if order_type is \"limit\" or for market close. \"N/A\" if action is \"wait\" or cannot be determined.\n  \"stop_loss\": \"string\", // \"N/A\" if action is \"wait\" or not provided/determined.\n  \"take_profit_targets\": [\"string\", \"string\", \"string\"], // \"N/A\" if action is \"wait\" or not provided/determined. If fewer than 3, fill with \"N/A\".\n  \"size\": \"string\", // Calculated size based on \"full position mode\" (either entire existing position or 1% risk for new position), or \"dynamic_calculation_needed\".\n  \"comment\": \"string\" // Brief explanation of the decision and key factors, including any data limitations.\n}\n```"
    },
    {
        "role": "user",
        "content": [
            {
                "type": "text",
                "text": "{'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}"
            },
            {
                "type": "text",
                "text": "{\n    \"instrument_id\": \"ETH-USDT-SWAP\",\n    \"balance\": {\n        \"Available_Margin\": \"102651.36 USDT\"\n    },\n    \"positions\": {\n        \"instrument_id\": \"ETH-USDT-SWAP\",\n        \"Margin_Model\": \"N/A\",\n        \"Position direction\": \"N/A\",\n        \"pos\": \"0\",\n        \"avgPrice\": \"N/A\",\n        \"Unrealized Gains\": \"N/A\",\n        \"liqPrice\": \"N/A\",\n        \"lever\": \"N/A\"\n    }\n}"
            }
        ]
    }
]
[_client.py][06:25:22] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:25:24] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:25:56] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:25:56] [INFO] 系统提示词以导入
[get_positions.py][06:25:57] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:25:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:25:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:25:57] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[trade_api_eth.py][06:25:57] [INFO] messages: [{'role': 'system', 'content': '您是一名高度专业的AI交易助手，您的核心使命是**安全、精确、高效地**分析实时金融市场数据，并生成可直接执行的交易指令。您必须以资本保全为最高优先级，并以严谨的逻辑和批判性思维进行决策。**所有交易操作（开仓或平仓）都必须以“全仓模式”进行。**\n\n**输入格式：**\n您将接收一个包含多维度市场分析的JSON对象。请注意，某些字段可能包含“...”作为占位符，这表示该信息在当前输入中未具体提供。在这种情况下，您必须：\n1.  **尝试从其他相关字段中推断**该信息。\n2.  如果无法推断，则在输出中将该字段标记为 `"N/A"`，并在最终的 `comment` 中简要说明哪些关键信息缺失或无法确定。\n3.  **重要提示：** 对于包含单位的数值字段（如`Available_Margin`, `pos`, `avgPrice`, `Unrealized Gains`, `liqPrice`, `lever`），您需要先去除单位（如"USDT", "piece", "x"），然后将其转换为浮点数进行计算。\n\n```json\n{\n  "symbol": "ETHUSDT.P",\n  "timeframe": "M15",\n  "timestamp": "2025-05-22T04:33:23+00:00Z",\n  "market_state": "Bull",\n  "trade_recommendation": {\n    "summary": "...",\n    "confidence": "...", // e.g., "high", "medium", "low"\n    "signal": "LONG", // or SHORT / WAIT\n    "risk_level": "medium",\n    "key_factors": [\n      {"name": "EMA强度", "value": "...", "relevance": "...", "reason": "..."},\n      // ...\n    ],\n    "entry_zone": "...", // e.g., "ETHUSDT 3420-3440" or "3430"\n    "stop_loss_price": "...",\n    "take_profit_targets": ["TP1...", "TP2...", "TP3..."],\n    "alternative_scenarios_and_alerts": ["如果H4转弱，则趋势失败概率提升"]\n  },\n  "detailed_analysis_and_reasoning": {\n    "low_level_reflection": { ... },\n    "quant_features_output": { ... },\n    "meta_analysis": {\n      "global_consistency_check_and_key_drivers": "...",\n      "confidence_and_uncertainty_quantification": {\n        "overall_confidence": "...", // e.g., "85%", "60%", "40%"\n        "uncertainty_sources": [\n          {"source": "...", "probability": "...", "impact_strength": "..."},\n          // ...\n        ]\n      },\n      "historical_pattern_recognition_and_analogical_reasoning": { ... },\n      "counter_argument_and_rebuttal": "...",\n      "self_check_result": "...",\n      "internal_coordination_result": "...",\n      "logic_validation_result": "...",\n      "rationality_validation_result": "...",\n      "limitations_and_assumptions": "..."\n    }\n  },\n  "execution_details": { ... }, // 这是输入中可能包含的建议执行方案，您需要根据您的分析确认或覆盖它。\n  "data_info": { ... },\n  "indicators_main": { ... }, // 包含M15, 1h, 4h等时间框架的详细指标\n  "factors_main": { ... }, // 包含资金费率、FGI、持仓量等宏观因素\n  "data_summary": { ... }, // 包含最新价格、24h高低点等市场快照\n  "okx_positions": { // 账户可用保证金和当前持仓信息\n    "instrument_id": "BTC-USDT-SWAP",\n    "balance": {\n      "Available_Margin": "102651.36 USDT" // 注意单位\n    },\n    "positions": {\n      "instrument_id": "BTC-USDT-SWAP",\n      "Margin_Model": "isolated",\n      "Position direction": "long", // "long", "short", or "N/A" if no position\n      "pos": "11.75 piece", // 注意单位\n      "avgPrice": "107970.3 USDT", // 注意单位\n      "Unrealized Gains": "-184.86275000000035 USDT", // 注意单位\n      "liqPrice": "72332.13529662554 USDT", // 注意单位\n      "lever": "3 x" // 注意单位\n    }\n  }\n}\n```\n\n**您的目标：**\n分析提供的JSON输入，并输出一个新的JSON对象，其中包含具体的挂单信息或平仓信息。**所有操作都必须是“全仓模式”：即开仓时根据风险计算最大仓位，平仓时平掉所有现有仓位。**\n\n**内部思考过程（思维链 Chain-of-Thought & 思维树 Tree-of-Thought）：**\n\n**Phase 1: 初始信号解析与情境理解 (CoT)**\n\n1.  **核心交易意图识别：**\n    *   从`trade_recommendation.signal`中提取初步的交易信号（LONG, SHORT, WAIT）。\n    *   识别`symbol`和`timeframe`，确定交易标的和分析周期。\n2.  **初步风险与信心评估：**\n    *   评估`trade_recommendation.confidence`和`risk_level`。\n    *   检查`trade_recommendation.alternative_scenarios_and_alerts`。如果存在高影响的预警，立即将其作为潜在的“观望”或“风险规避”信号。\n3.  **现有仓位状态：**\n    *   分析`okx_positions`，**首先解析`okx_positions.balance.Available_Margin`和`okx_positions.positions.pos`（如果存在）的数值，去除单位。**\n    *   确定当前是否有持仓（通过检查`okx_positions.positions`是否存在且`Position direction`不为"N/A"），持仓方向和数量。这将直接影响后续的`action`决策（开仓 vs. 平仓）。\n\n**Phase 2: 多维度证据收集与假设验证 (ToT - 分支探索与评估)**\n\n1.  **分支 2.1: 量化指标深度验证 (`indicators_main`, `quant_features_output`)**\n    *   **子分支 2.1.1 (支持性证据):** 遍历所有时间框架（M15, 1h, 4h）的`indicators_main`和`quant_features_output`。识别所有与初步交易信号（LONG/SHORT）一致的指标和特征（例如，RSI、MACD、EMA、Stochastics、ADX等）。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.2 (冲突性证据):** 识别所有与初步交易信号相悖的指标和特征。记录其`signal_quality`和`relevance`。\n    *   **子分支 2.1.3 (中性/缺失证据):** 识别那些对当前信号影响不大、数据质量差或缺失的指标。\n2.  **分支 2.2: 定性分析与逻辑一致性 (`detailed_analysis_and_reasoning`)**\n    *   **低层反射：** 审阅`low_level_reflection`中的短期、中期、长期理由，量价行为、指标分析、行为金融分析。这些定性描述是否与量化数据相互印证？\n    *   **元分析：** 检查`meta_analysis`中的`global_consistency_check_and_key_drivers`。整体分析逻辑是否连贯、无矛盾？\n    *   **历史模式与策略校准：** 评估`historical_pattern_recognition_and_analogical_reasoning`。历史胜率、典型盈亏比以及策略校准信息是否支持当前信号的预期表现？\n3.  **分支 2.3: 宏观与市场情绪考量 (`factors_main`, `data_summary`)**\n    *   分析`funding_rate`、`FGI`（恐惧贪婪指数）、`open_interest`。这些宏观数据是否支持或削弱了交易假设？例如，过高的资金费率可能预示回调。\n    *   检查`data_summary`中的最新价格、24h高低点、成交量等，确保市场活跃度和价格的合理性。\n\n**Phase 3: 批判性反思、冲突解决与决策剪枝 (ToT - 评估与优化)**\n\n1.  **证据权重与冲突解决：**\n    *   综合Phase 2收集的所有支持性、冲突性证据。根据其`signal_quality`、`relevance`和时间框架（短周期指标对短期信号影响大，长周期指标对趋势影响大）对证据进行加权。\n    *   **主动生成反驳论点：** 即使`meta_analysis.counter_argument_and_rebuttal`为空，也要主动思考并列出最可能导致交易失败的理由或市场反转的潜在信号。\n    *   **自我辩驳与决策调整：** 针对生成的反驳论点，评估其强度和可能性。\n        *   如果冲突性证据非常强，且无法有效反驳，或者`meta_analysis.confidence_and_uncertainty_quantification.overall_confidence`低于预设阈值（例如，低于60%），或者`uncertainty_sources`影响强度高：**优先将最终`action`调整为 "wait"**。\n        *   如果支持性证据压倒性地强，且反驳论点较弱或可控：维持初步交易假设。\n        *   如果现有仓位与新信号冲突，且新信号强度不足以立即反转：考虑平仓现有仓位，但不立即开新仓，或调整为“wait”。\n2.  **风险评估与规避：**\n    *   重新评估`trade_recommendation.risk_level`。结合所有分析，如果潜在风险过高，即使信号存在，也应倾向于“wait”。\n    *   确保止损位是合理的，且风险回报比（RR Ratio）至少为1:1.5，否则重新考虑。\n\n**Phase 4: 最终行动决策与订单参数生成 (CoT)**\n\n1.  **确定最终 `action`：**\n    *   如果Phase 3的评估结果为“观望”或风险过高：`action` = "wait"。\n    *   否则，根据修正后的信号和现有仓位：\n        *   如果信号为LONG：\n            *   若当前持有SHORT仓位：`action` = "buy" (平空)。\n            *   若无仓位或持有LONG仓位：`action` = "buy" (开多)。\n        *   如果信号为SHORT：\n            *   若当前持有LONG仓位：`action` = "sell" (平多)。\n            *   若无仓位或持有SHORT仓位：`action` = "sell" (开空)。\n2.  **确定 `order_type`：**\n    *   `action` = "wait"：`order_type` = "N/A"。\n    *   `action` 为“平空”或“平多”：`order_type` = "market" (优先快速平仓，除非有明确的限价平仓策略)。\n    *   `action` 为“开多”或“开空”：`order_type` = "limit" (优先精确入场)。\n3.  **计算 `price`：**\n    *   `action` = "wait"：`price` = "N/A"。\n    *   `order_type` = "market"：\n        *   对于“buy”操作（平空）：使用`data_summary.data.askPx`。\n        *   对于“sell”操作（平多）：使用`data_summary.data.bidPx`。\n    *   `order_type` = "limit"：\n        *   从`trade_recommendation.entry_zone`中提取价格。\n        *   **解析逻辑：**\n            *   如果`entry_zone`是范围（例如“3420-3440”）：\n                *   对于“buy”操作（开多）：取范围的**下限**（例如“3420”，以更积极地入场）。\n                *   对于“sell”操作（开空）：取范围的**上限**（例如“3440”，以更积极地入场）。\n            *   如果`entry_zone`是单一价格，直接使用该价格。\n        *   如果`entry_zone`缺失、无法解析或解析出的价格不合理（例如，远超当前市场价），则标记为`"N/A"`并在`comment`中说明。\n4.  **设置 `stop_loss` 和 `take_profit_targets`：**\n    *   `action` = "wait"：`stop_loss` = "N/A"，`take_profit_targets` = `["N/A", "N/A", "N/A"]`。\n    *   否则：使用`trade_recommendation.stop_loss_price`和`trade_recommendation.take_profit_targets`。\n    *   **缺失处理：** 如果`stop_loss_price`缺失或为“...”，则标记为`"N/A"`。如果`take_profit_targets`缺失或少于3个，用`"N/A"`填充至3个。\n5.  **计算 `size` (仓位大小) - **强制“全仓模式”**：**\n    *   **数据准备：**\n        *   `available_margin_float = float(okx_positions.balance.Available_Margin.replace(\' USDT\', \'\'))`\n        *   `current_pos_float = float(okx_positions.positions.pos.replace(\' piece\', \'\'))` (如果`okx_positions.positions.pos`存在)\n    *   **情景判断：**\n        *   **如果 `action` 是“平多”或“平空”：**\n            *   `size` 必须是当前持仓的全部数量。\n            *   `size = str(current_pos_float)`\n        *   **如果 `action` 是“开多”或“开空”：**\n            *   这是新开“全仓”的逻辑，基于风险管理。\n            *   **风险管理原则：** 每笔交易风险控制在`available_margin_float`的 **1%**。\n            *   `risk_amount = available_margin_float * 0.01`\n            *   `entry_price_float = float(calculated_price)` (使用上面计算出的`price`)\n            *   `stop_loss_price_float = float(trade_recommendation.stop_loss_price)`\n            *   `price_difference = abs(entry_price_float - stop_loss_price_float)`\n            *   **鲁棒性处理：**\n                *   如果`stop_loss_price`为`"N/A"`或`price_difference`接近或等于零（例如，止损点非常接近入场点，导致分母为零或过小），则无法计算固定风险仓位，此时`size` = `"dynamic_calculation_needed"`。\n                *   否则：`size = str(round(risk_amount / price_difference, 2))` (保留两位小数)。\n    *   **数据缺失：** 如果`okx_positions`或其内部关键字段缺失，`size` = `"dynamic_calculation_needed"`。\n6.  **生成 `comment`：** 简洁地总结最终决策、最关键的支持因素（例如，来自`key_factors`、`historical_pattern_recognition`或`global_consistency_check`），以及任何重要的风险提示或数据缺失说明。\n\n**Phase 5: 输出格式化与最终校验 (CoT)**\n\n1.  **严格遵循JSON结构：** 确保输出是一个单一的JSON对象，且所有字段名称和类型都与下方定义严格匹配。\n2.  **数据类型转换：** 确保所有数值型输出（如价格、止损、止盈、仓位大小）都转换为字符串类型。\n3.  **无额外文本：** 除了最终的JSON对象，不允许输出任何其他文本、解释、Markdown格式或其他内容。这是强制性要求。\n4.  **最终自我校验：** 在输出前，进行一次快速的内部检查：\n    *   `action`、`order_type`、`price`、`stop_loss`、`take_profit_targets`、`size`、`comment`字段是否都已填充且符合逻辑？\n    *   `price`和`stop_loss`是否与`action`方向一致？\n    *   `size`计算是否合理，并符合“全仓模式”的定义？\n    *   所有“N/A”标记是否都有合理原因并在`comment`中说明？\n\n**输出格式：**\n```json\n{\n  "symbol": "string",\n  "action": "string", // "buy" (开多/平空), "sell" (开空/平多), or "wait" (不交易)\n  "order_type": "string", // "market", "limit", or "N/A" if action is "wait"\n  "price": "string", // Required if order_type is "limit" or for market close. "N/A" if action is "wait" or cannot be determined.\n  "stop_loss": "string", // "N/A" if action is "wait" or not provided/determined.\n  "take_profit_targets": ["string", "string", "string"], // "N/A" if action is "wait" or not provided/determined. If fewer than 3, fill with "N/A".\n  "size": "string", // Calculated size based on "full position mode" (either entire existing position or 1% risk for new position), or "dynamic_calculation_needed".\n  "comment": "string" // Brief explanation of the decision and key factors, including any data limitations.\n}\n```'}, {'role': 'user', 'content': [{'type': 'text', 'text': "{'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}"}, {'type': 'text', 'text': '{\n    "instrument_id": "ETH-USDT-SWAP",\n    "balance": {\n        "Available_Margin": "102651.36 USDT"\n    },\n    "positions": {\n        "instrument_id": "ETH-USDT-SWAP",\n        "Margin_Model": "N/A",\n        "Position direction": "N/A",\n        "pos": "0",\n        "avgPrice": "N/A",\n        "Unrealized Gains": "N/A",\n        "liqPrice": "N/A",\n        "lever": "N/A"\n    }\n}'}]}]
[_client.py][06:26:03] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:26:04] [INFO] Gemini API 流式调用结束。['```json\n{\n  ', '"symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type": "limit",\n  "price": "2680.0",\n  "stop_loss": "27', '00.0",\n  "take_profit_targets": [\n    "2620.0",\n    "2580.0",\n    "2500.0"\n  ],', '\n  "size": "51.33",\n  "comment": "基于H4/H1的强劲下跌趋势和极度贪婪的FGI，建议逢高做空。M15短期反弹动', '能不足以扭转高时间框架趋势。当前无持仓，按可用保证金1%风险计算仓位。止损位明确，风险可控。如果价格有效突破2700 USDT并站稳，则', '空头趋势可能失效。"\n}\n```']
[trade_api_eth.py][06:30:55] [INFO] {'summary': 'ETHUSDT在H4和H1时间框架上呈现明显的下跌趋势，价格持续在EMA均线下方运行，RSI处于超卖区域，MACD显示空头动能。尽管M15周期出现短期反弹迹象，RSI回升至中性区域，但整体趋势仍受高时间框架压制。宏观情绪指标（FGI）显示市场极度贪婪，可能预示顶部风险，而资金费率虽为正但较低，未能提供强劲的多头支撑。当前市场处于下跌趋势中的短期反弹，反弹动能不足以扭转整体趋势。建议以逢高做空为主，等待反弹至关键阻力位后入场。本建议仅供参考，交易风险自负。', 'confidence': '0.7', 'signal': 'SHORT', 'risk_level': 'medium', 'key_factor': [{'name': 'EMA强度 (H4)', 'value': '0.05', 'relevance': 'high', 'reason': 'H4 EMA呈空头排列，指示强劲的长期下跌趋势，对短期反弹构成结构性压制。'}, {'name': 'RSI中性度 (H4)', 'value': '0.0', 'relevance': 'high', 'reason': 'H4 RSI处于极度超卖区（23.39），虽然可能出现技术性反弹，但其本身反映了极强的空头力量，且未见明显背离，反弹可能受限。'}, {'name': '短期动量 (M15)', 'value': '0.4', 'relevance': 'medium', 'reason': 'M15 MACD金叉且RSI回升，显示短期有反弹动能，但动量强度不足以改变高时间框架趋势。'}, {'name': '资金费率情绪因子', 'value': '0.5', 'relevance': 'medium', 'reason': '资金费率虽为正，但数值较低（0.0077%），未能提供强劲的多头支撑，且与极度贪婪的FGI形成一定背离，暗示多头追涨意愿不强。'}, {'name': '恐慌/贪婪指数情绪因子', 'value': '0.2', 'relevance': 'high', 'reason': 'FGI高达74，处于极度贪婪区域，通常是市场顶部或回调的预警信号，对长期看涨构成负面影响。'}, {'name': '持仓量趋势因子', 'value': '0.5', 'relevance': 'medium', 'reason': '持仓量6.04亿美元，相对稳定，未见大幅增长或萎缩，表明市场多空双方力量相对均衡，但缺乏明确的趋势确认信号。'}], 'entry_zone': 'ETHUSDT 2670-2680 USDT (M15 EMA55/144/200区域)', 'stop_l_price': '2700 USDT', 'take_profit_targets': ['TP1: 2620 USDT (M15布林带中轨附近)', 'TP2: 2580 USDT (H1布林带中轨附近)', 'TP3: 2500 USDT (H1布林带下轨附近)'], 'alternative_scenarios_and_alerts': ['如果价格有效突破2700 USDT并站稳，且H1 MACD出现强势金叉，则空头趋势可能失效，需重新评估。', '如果H4 RSI从超卖区快速反弹并突破30，且伴随放量，则可能出现更强的反弹，空单需谨慎。']}
[trade_api_eth.py][06:30:55] [INFO] 系统提示词以导入
[trade_api_eth.py][06:30:55] [INFO] Gemini API 流式调用结束。["[Gemini API调用异常] local variable 'user_content_parts' referenced before assignment"]
[trade_api_eth.py][06:35:28] [INFO] 系统提示词以导入
[get_positions.py][06:35:28] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:35:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:35:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:35:29] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:35:35] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:35:36] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:40:09] [INFO] 系统提示词以导入
[get_positions.py][06:40:09] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:40:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:40:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:40:10] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:40:15] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:40:16] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:43:39] [INFO] 系统提示词以导入
[get_positions.py][06:43:40] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:43:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:43:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:43:40] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:43:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:43:47] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:45:15] [INFO] 系统提示词以导入
[get_positions.py][06:45:15] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:45:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:45:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:45:16] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:45:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:45:22] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:46:17] [INFO] 系统提示词以导入
[get_positions.py][06:46:17] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:46:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:46:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:46:18] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:46:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:46:24] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:47:38] [INFO] 系统提示词以导入
[get_positions.py][06:47:38] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:47:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:47:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:47:39] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:47:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:47:46] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:48:09] [INFO] 系统提示词以导入
[get_positions.py][06:48:10] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:48:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:48:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:48:10] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:48:15] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:48:17] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:48:34] [INFO] 系统提示词以导入
[get_positions.py][06:48:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:48:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:48:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:48:35] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:48:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:48:41] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:49:52] [INFO] 系统提示词以导入
[get_positions.py][06:49:52] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:49:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:49:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:49:53] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:49:57] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:49:59] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[trade_api_eth.py][06:52:56] [INFO] 系统提示词以导入
[get_positions.py][06:52:57] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:52:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:52:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:52:57] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:53:03] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[trade_api_eth.py][06:53:04] [INFO] Gemini API 流式调用结束。['```json\n{\n  "symbol": "ETHUSDT.P",\n  "action": "sell",\n  "order_type', '": "limit",\n  "price": "2680.0",\n  "stop_loss": "2700.0",\n  "take_profit_targets": [\n    "2620.0', '",\n    "2580.0",\n    "2500.0"\n  ],\n  "size": "51.33",\n  "comment": "基于H4/H1强', '劲下跌趋势和FGI极度贪婪信号，建议逢高做空。M15短期反弹被视为下跌中继。入场价取推荐区间上限，止损设于2700，风险', '控制在可用保证金的1%。"\n}\n```']
[数据收集总模块][06:55:57] [INFO] 截图模块运行中...
[截图模块][06:55:57] [INFO]  __main__ 入口被执行
[截图模块][06:55:57] [INFO]  启动时主动清理内存...
[截图模块][06:55:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:55:58] [INFO]  已执行 pkill chrome
[截图模块][06:55:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:55:59] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:55:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][06:55:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][06:55:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:55:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][06:56:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:56:02] [INFO] 启动浏览器 (有头模式)
[截图模块][06:56:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:56:40] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:56:40] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:56:40] [INFO]  打开目标图表页...
[截图模块][06:56:45] [INFO]  等待5秒加载页面...
[截图模块][06:56:50] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:56:51] [INFO]  快捷键已发送
[截图模块][06:56:52] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065652.png
[截图模块][06:56:52] [INFO]  关闭浏览器...
[数据收集总模块][06:56:53] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065652.png
[数据收集总模块][06:56:53] [INFO] 技术指标模块运行中...
[技术指标模块][06:56:54] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:56:54] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:56:54] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:56:55] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:56:55] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:56:55] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:56:55] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:56:55] [INFO] 宏观因子模块运行中...
[数据收集总模块][06:56:59] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:56:59] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:57:00] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][06:57:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:57:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:57:01] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][06:57:01] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:57:01] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065652.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107446.8,
        "volume": 34776.41,
        "RSI": 43.44943543588212,
        "MACD_macd": -155.4860058433842,
        "MACD_signal": -94.8223489732921,
        "ATR": 342.53333374998454,
        "ADX": 29.46028783024252,
        "Stoch_K": 29.860513173756214,
        "Stoch_D": 17.74295390620516,
        "StochRSI_K": 41.3137938893272,
        "StochRSI_D": 17.951527453501214,
        "BB_upper": 108386.74604679643,
        "BB_lower": 107138.30395320356,
        "BB_middle": 107762.525,
        "EMA5": 107398.16108303244,
        "EMA21": 107672.17426294589,
        "EMA55": 107717.33161200538,
        "EMA144": 107248.5586564058,
        "EMA200": 107030.77981330588,
        "VWAP": 107376.01050688438
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107375.5,
        "volume": 112223.47,
        "RSI": 21.11597789399123,
        "MACD_macd": -425.80118487164145,
        "MACD_signal": -160.78846853258855,
        "ATR": 789.7257117149917,
        "ADX": 48.47200012612154,
        "Stoch_K": 8.227621066362397,
        "Stoch_D": 14.535572585466726,
        "StochRSI_K": 8.443018033313777,
        "StochRSI_D": 12.013843696639974,
        "BB_upper": 110895.20791087316,
        "BB_lower": 107421.46208912686,
        "BB_middle": 109158.335,
        "EMA5": 107860.9505356201,
        "EMA21": 108831.71790098283,
        "EMA55": 108948.12896641296,
        "EMA144": 108245.65194804218,
        "EMA200": 107920.59989439971,
        "VWAP": 108503.49618572656
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102624.0,
        "volume": 968105.08,
        "RSI": 37.19344714436181,
        "MACD_macd": -175.91389397294552,
        "MACD_signal": -255.30365777994345,
        "ATR": 1436.0546916503727,
        "ADX": 18.013212658997986,
        "Stoch_K": 33.029508943830606,
        "Stoch_D": 53.82315796228763,
        "StochRSI_K": 28.163375123318673,
        "StochRSI_D": 47.606316298742705,
        "BB_upper": 104748.72442255582,
        "BB_lower": 102075.39557744417,
        "BB_middle": 103412.06,
        "EMA5": 103436.45004444219,
        "EMA21": 103593.08061487305,
        "EMA55": 104559.13536998886,
        "EMA144": 105668.92566470335,
        "EMA200": 105824.2658428315,
        "VWAP": 106832.63256836422
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T06:56:56+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$312478850.0000019 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105909.9",
        "lastSz": "0.67",
        "askPx": "105909.9",
        "askSz": "281.93",
        "bidPx": "105909.8",
        "bidSz": "474.11",
        "open24h": "107397.1",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "120854.1565",
        "vol24h": "12085415.65",
        "ts": "1748559420784",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "timestamp": "2025-05-29T22:57:01+00:00Z",
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-242.17925000000068 USDT",
      "liqPrice": "72332.13529662554 USDT",
      "lever": "3 x"
    }
  }
}
[数据收集总模块][06:58:06] [INFO] 截图模块运行中...
[截图模块][06:58:07] [INFO]  __main__ 入口被执行
[截图模块][06:58:07] [INFO]  启动时主动清理内存...
[截图模块][06:58:07] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:58:07] [INFO]  已执行 pkill chrome
[截图模块][06:58:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:58:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:58:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][06:58:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][06:58:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:58:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][06:58:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:58:11] [INFO] 启动浏览器 (有头模式)
[截图模块][06:58:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:58:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:58:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:58:47] [INFO]  打开目标图表页...
[截图模块][06:58:52] [INFO]  等待5秒加载页面...
[截图模块][06:58:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:58:58] [INFO]  快捷键已发送
[截图模块][06:58:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065859.png
[截图模块][06:58:59] [INFO]  关闭浏览器...
[数据收集总模块][06:58:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065859.png
[数据收集总模块][06:58:59] [INFO] 技术指标模块运行中...
[技术指标模块][06:59:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:59:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:59:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:59:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:59:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:59:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:59:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:59:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][06:59:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:59:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:59:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][06:59:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:59:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:59:05] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][06:59:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:59:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065859.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107446.8,
        "volume": 34776.41,
        "RSI": 43.44943543588212,
        "MACD_macd": -155.4860058433842,
        "MACD_signal": -94.8223489732921,
        "ATR": 342.53333374998454,
        "ADX": 29.46028783024252,
        "Stoch_K": 29.860513173756214,
        "Stoch_D": 17.74295390620516,
        "StochRSI_K": 41.3137938893272,
        "StochRSI_D": 17.951527453501214,
        "BB_upper": 108386.74604679643,
        "BB_lower": 107138.30395320356,
        "BB_middle": 107762.525,
        "EMA5": 107398.16108303244,
        "EMA21": 107672.17426294589,
        "EMA55": 107717.33161200538,
        "EMA144": 107248.5586564058,
        "EMA200": 107030.77981330588,
        "VWAP": 107376.01050688438
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107375.5,
        "volume": 112223.47,
        "RSI": 21.11597789399123,
        "MACD_macd": -425.80118487164145,
        "MACD_signal": -160.78846853258855,
        "ATR": 789.7257117149917,
        "ADX": 48.47200012612154,
        "Stoch_K": 8.227621066362397,
        "Stoch_D": 14.535572585466726,
        "StochRSI_K": 8.443018033313777,
        "StochRSI_D": 12.013843696639974,
        "BB_upper": 110895.20791087316,
        "BB_lower": 107421.46208912686,
        "BB_middle": 109158.335,
        "EMA5": 107860.9505356201,
        "EMA21": 108831.71790098283,
        "EMA55": 108948.12896641296,
        "EMA144": 108245.65194804218,
        "EMA200": 107920.59989439971,
        "VWAP": 108503.49618572656
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102624.0,
        "volume": 968105.08,
        "RSI": 37.19344714436181,
        "MACD_macd": -175.91389397294552,
        "MACD_signal": -255.30365777994345,
        "ATR": 1436.0546916503727,
        "ADX": 18.013212658997986,
        "Stoch_K": 33.029508943830606,
        "Stoch_D": 53.82315796228763,
        "StochRSI_K": 28.163375123318673,
        "StochRSI_D": 47.606316298742705,
        "BB_upper": 104748.72442255582,
        "BB_lower": 102075.39557744417,
        "BB_middle": 103412.06,
        "EMA5": 103436.45004444219,
        "EMA21": 103593.08061487305,
        "EMA55": 104559.13536998886,
        "EMA144": 105668.92566470335,
        "EMA200": 105824.2658428315,
        "VWAP": 106832.63256836422
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T06:59:02+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$312452129.0000019 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105920.5",
        "lastSz": "0.01",
        "askPx": "105920.5",
        "askSz": "1316.3",
        "bidPx": "105920.4",
        "bidSz": "104.33",
        "open24h": "107344.1",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "120910.4226",
        "vol24h": "12091042.26",
        "ts": "1748559545609",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-241.4625 USDT",
      "liqPrice": "72332.13529662554 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-29T22:59:06+00:00Z"
}
[gemini_api_caller.py][07:16:28] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065859.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107446.8,
        "volume": 34776.41,
        "RSI": 43.44943543588212,
        "MACD_macd": -155.4860058433842,
        "MACD_signal": -94.8223489732921,
        "ATR": 342.53333374998454,
        "ADX": 29.46028783024252,
        "Stoch_K": 29.860513173756214,
        "Stoch_D": 17.74295390620516,
        "StochRSI_K": 41.3137938893272,
        "StochRSI_D": 17.951527453501214,
        "BB_upper": 108386.74604679643,
        "BB_lower": 107138.30395320356,
        "BB_middle": 107762.525,
        "EMA5": 107398.16108303244,
        "EMA21": 107672.17426294589,
        "EMA55": 107717.33161200538,
        "EMA144": 107248.5586564058,
        "EMA200": 107030.77981330588,
        "VWAP": 107376.01050688438
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107375.5,
        "volume": 112223.47,
        "RSI": 21.11597789399123,
        "MACD_macd": -425.80118487164145,
        "MACD_signal": -160.78846853258855,
        "ATR": 789.7257117149917,
        "ADX": 48.47200012612154,
        "Stoch_K": 8.227621066362397,
        "Stoch_D": 14.535572585466726,
        "StochRSI_K": 8.443018033313777,
        "StochRSI_D": 12.013843696639974,
        "BB_upper": 110895.20791087316,
        "BB_lower": 107421.46208912686,
        "BB_middle": 109158.335,
        "EMA5": 107860.9505356201,
        "EMA21": 108831.71790098283,
        "EMA55": 108948.12896641296,
        "EMA144": 108245.65194804218,
        "EMA200": 107920.59989439971,
        "VWAP": 108503.49618572656
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102624.0,
        "volume": 968105.08,
        "RSI": 37.19344714436181,
        "MACD_macd": -175.91389397294552,
        "MACD_signal": -255.30365777994345,
        "ATR": 1436.0546916503727,
        "ADX": 18.013212658997986,
        "Stoch_K": 33.029508943830606,
        "Stoch_D": 53.82315796228763,
        "StochRSI_K": 28.163375123318673,
        "StochRSI_D": 47.606316298742705,
        "BB_upper": 104748.72442255582,
        "BB_lower": 102075.39557744417,
        "BB_middle": 103412.06,
        "EMA5": 103436.45004444219,
        "EMA21": 103593.08061487305,
        "EMA55": 104559.13536998886,
        "EMA144": 105668.92566470335,
        "EMA200": 105824.2658428315,
        "VWAP": 106832.63256836422
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T06:59:02+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$312452129.0000019 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105920.5",
        "lastSz": "0.01",
        "askPx": "105920.5",
        "askSz": "1316.3",
        "bidPx": "105920.4",
        "bidSz": "104.33",
        "open24h": "107344.1",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "120910.4226",
        "vol24h": "12091042.26",
        "ts": "1748559545609",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-241.4625 USDT",
      "liqPrice": "72332.13529662554 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-29T22:59:06+00:00Z"
}
[_client.py][07:16:35] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][07:19:19] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250530_065859.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107446.8,
        "volume": 34776.41,
        "RSI": 43.44943543588212,
        "MACD_macd": -155.4860058433842,
        "MACD_signal": -94.8223489732921,
        "ATR": 342.53333374998454,
        "ADX": 29.46028783024252,
        "Stoch_K": 29.860513173756214,
        "Stoch_D": 17.74295390620516,
        "StochRSI_K": 41.3137938893272,
        "StochRSI_D": 17.951527453501214,
        "BB_upper": 108386.74604679643,
        "BB_lower": 107138.30395320356,
        "BB_middle": 107762.525,
        "EMA5": 107398.16108303244,
        "EMA21": 107672.17426294589,
        "EMA55": 107717.33161200538,
        "EMA144": 107248.5586564058,
        "EMA200": 107030.77981330588,
        "VWAP": 107376.01050688438
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 107375.5,
        "volume": 112223.47,
        "RSI": 21.11597789399123,
        "MACD_macd": -425.80118487164145,
        "MACD_signal": -160.78846853258855,
        "ATR": 789.7257117149917,
        "ADX": 48.47200012612154,
        "Stoch_K": 8.227621066362397,
        "Stoch_D": 14.535572585466726,
        "StochRSI_K": 8.443018033313777,
        "StochRSI_D": 12.013843696639974,
        "BB_upper": 110895.20791087316,
        "BB_lower": 107421.46208912686,
        "BB_middle": 109158.335,
        "EMA5": 107860.9505356201,
        "EMA21": 108831.71790098283,
        "EMA55": 108948.12896641296,
        "EMA144": 108245.65194804218,
        "EMA200": 107920.59989439971,
        "VWAP": 108503.49618572656
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102624.0,
        "volume": 968105.08,
        "RSI": 37.19344714436181,
        "MACD_macd": -175.91389397294552,
        "MACD_signal": -255.30365777994345,
        "ATR": 1436.0546916503727,
        "ADX": 18.013212658997986,
        "Stoch_K": 33.029508943830606,
        "Stoch_D": 53.82315796228763,
        "StochRSI_K": 28.163375123318673,
        "StochRSI_D": 47.606316298742705,
        "BB_upper": 104748.72442255582,
        "BB_lower": 102075.39557744417,
        "BB_middle": 103412.06,
        "EMA5": 103436.45004444219,
        "EMA21": 103593.08061487305,
        "EMA55": 104559.13536998886,
        "EMA144": 105668.92566470335,
        "EMA200": 105824.2658428315,
        "VWAP": 106832.63256836422
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-30T06:59:02+08:00",
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "74/100",
      "open_interest": "$312452129.0000019 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "105920.5",
        "lastSz": "0.01",
        "askPx": "105920.5",
        "askSz": "1316.3",
        "bidPx": "105920.4",
        "bidSz": "104.33",
        "open24h": "107344.1",
        "high24h": "108869.7",
        "low24h": "105600",
        "volCcy24h": "120910.4226",
        "vol24h": "12091042.26",
        "ts": "1748559545609",
        "sodUtc0": "107720.7",
        "sodUtc8": "106992.3"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-241.4625 USDT",
      "liqPrice": "72332.13529662554 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-29T22:59:06+00:00Z"
}
[_client.py][07:19:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][09:32:20] [INFO] 截图模块运行中...
[截图模块][09:32:21] [INFO]  __main__ 入口被执行
[截图模块][09:32:21] [INFO]  启动时主动清理内存...
[截图模块][09:32:21] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:32:21] [INFO]  已执行 pkill chrome
[截图模块][09:32:23] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:32:23] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:32:23] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:32:23] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:32:24] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:32:26] [INFO] 启动浏览器 (有头模式)
[截图模块][09:32:28] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:33:02] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:33:02] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:33:02] [INFO]  打开目标图表页...
[截图模块][09:33:09] [INFO]  等待5秒加载页面...
[截图模块][09:33:14] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:33:15] [INFO]  快捷键已发送
[截图模块][09:33:16] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_093316.png
[截图模块][09:33:16] [INFO]  关闭浏览器...
[数据收集总模块][09:33:16] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_093316.png
[数据收集总模块][09:33:16] [INFO] 技术指标模块运行中...
[技术指标模块][09:33:17] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:33:17] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:33:17] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:33:18] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:33:18] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:33:18] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:33:18] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:33:18] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:33:22] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:33:22] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:33:23] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:33:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:33:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:33:23] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][09:33:24] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:33:24] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_093316.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105766.8,
        "volume": 66532.06,
        "RSI": 51.778049882342884,
        "MACD_macd": -45.87141492818773,
        "MACD_signal": 38.609840153869335,
        "ATR": 572.8005217353709,
        "ADX": 42.59777908847297,
        "Stoch_K": 76.49962509372703,
        "Stoch_D": 48.55274770795027,
        "StochRSI_K": 69.70798052419988,
        "StochRSI_D": 23.235993508066628,
        "BB_upper": 106429.40869208028,
        "BB_lower": 105300.2613079197,
        "BB_middle": 105864.83499999999,
        "EMA5": 105538.86365474443,
        "EMA21": 105730.90043710868,
        "EMA55": 105553.23966253827,
        "EMA144": 104978.84648924973,
        "EMA200": 104759.95220789687,
        "VWAP": 105021.97524757902
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109288.0,
        "volume": 169406.2,
        "RSI": 54.98177022990188,
        "MACD_macd": 7.036621830557124,
        "MACD_signal": 45.40169812177422,
        "ATR": 791.6447110641938,
        "ADX": 20.834901713471268,
        "Stoch_K": 75.6216216216215,
        "Stoch_D": 75.50887828454357,
        "StochRSI_K": 91.0702705520457,
        "StochRSI_D": 90.85506579748368,
        "BB_upper": 110347.82701341304,
        "BB_lower": 108248.26298658695,
        "BB_middle": 109298.045,
        "EMA5": 109121.35561684525,
        "EMA21": 109120.39495935963,
        "EMA55": 108616.45580273359,
        "EMA144": 107074.073401234,
        "EMA200": 106482.0218276739,
        "VWAP": 107401.38888783619
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:33:19+08:00",
    "factors": {
      "funding_rate": "0.0093%",
      "FGI": "50/100",
      "open_interest": "$290789603.00000125 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103948.1",
        "lastSz": "4.98",
        "askPx": "103948.2",
        "askSz": "13.46",
        "bidPx": "103948.1",
        "bidSz": "598.45",
        "open24h": "105619.9",
        "high24h": "106277.2",
        "low24h": "103502",
        "volCcy24h": "98778.7793",
        "vol24h": "9877877.93",
        "ts": "1748655203318",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-474.1125 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T01:33:24+00:00Z"
}
[gemini_api_caller.py][09:33:25] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_093316.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105766.8,
        "volume": 66532.06,
        "RSI": 51.778049882342884,
        "MACD_macd": -45.87141492818773,
        "MACD_signal": 38.609840153869335,
        "ATR": 572.8005217353709,
        "ADX": 42.59777908847297,
        "Stoch_K": 76.49962509372703,
        "Stoch_D": 48.55274770795027,
        "StochRSI_K": 69.70798052419988,
        "StochRSI_D": 23.235993508066628,
        "BB_upper": 106429.40869208028,
        "BB_lower": 105300.2613079197,
        "BB_middle": 105864.83499999999,
        "EMA5": 105538.86365474443,
        "EMA21": 105730.90043710868,
        "EMA55": 105553.23966253827,
        "EMA144": 104978.84648924973,
        "EMA200": 104759.95220789687,
        "VWAP": 105021.97524757902
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109288.0,
        "volume": 169406.2,
        "RSI": 54.98177022990188,
        "MACD_macd": 7.036621830557124,
        "MACD_signal": 45.40169812177422,
        "ATR": 791.6447110641938,
        "ADX": 20.834901713471268,
        "Stoch_K": 75.6216216216215,
        "Stoch_D": 75.50887828454357,
        "StochRSI_K": 91.0702705520457,
        "StochRSI_D": 90.85506579748368,
        "BB_upper": 110347.82701341304,
        "BB_lower": 108248.26298658695,
        "BB_middle": 109298.045,
        "EMA5": 109121.35561684525,
        "EMA21": 109120.39495935963,
        "EMA55": 108616.45580273359,
        "EMA144": 107074.073401234,
        "EMA200": 106482.0218276739,
        "VWAP": 107401.38888783619
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:33:19+08:00",
    "factors": {
      "funding_rate": "0.0093%",
      "FGI": "50/100",
      "open_interest": "$290789603.00000125 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103948.1",
        "lastSz": "4.98",
        "askPx": "103948.2",
        "askSz": "13.46",
        "bidPx": "103948.1",
        "bidSz": "598.45",
        "open24h": "105619.9",
        "high24h": "106277.2",
        "low24h": "103502",
        "volCcy24h": "98778.7793",
        "vol24h": "9877877.93",
        "ts": "1748655203318",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-474.1125 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T01:33:24+00:00Z"
}
[_client.py][09:33:32] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][09:33:58] [INFO] 截图模块运行中...
[截图模块][09:33:59] [INFO]  __main__ 入口被执行
[截图模块][09:33:59] [INFO]  启动时主动清理内存...
[截图模块][09:34:00] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:34:00] [INFO]  已执行 pkill chrome
[截图模块][09:34:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][09:34:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:34:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[截图模块][09:34:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[截图模块][09:34:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[截图模块][09:34:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:34:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:34:05] [INFO]  启动浏览器 (有头模式)
[截图模块][09:34:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:34:34] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:34:34] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:34:34] [INFO]  打开目标图表页...
[截图模块][09:34:40] [INFO]  等待5秒加载页面...
[截图模块][09:34:45] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:34:46] [INFO]  快捷键已发送
[截图模块][09:34:47] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250531_093447.png
[截图模块][09:34:47] [INFO]  关闭浏览器...
[数据收集总模块][09:34:48] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250531_093447.png
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:33:59] [INFO]  __main__ 入口被执行
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:33:59] [INFO]  启动时主动清理内存...
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:00] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:00] [INFO]  已执行 pkill chrome
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:03] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/ShaderCache
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/code/chrome_profile/GrShaderCache
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/code/chrome_profile
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:05] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:34] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:34] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:34] [INFO]  打开目标图表页...
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:40] [INFO]  等待5秒加载页面...
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:45] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:46] [INFO]  快捷键已发送
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:47] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250531_093447.png
[数据收集总模块][09:34:48] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:34:47] [INFO]  关闭浏览器...
[数据收集总模块][09:34:48] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250531_093447.png
[数据收集总模块][09:34:48] [INFO] 技术指标模块运行中...
[技术指标模块][09:34:49] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:34:49] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:34:49] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:34:50] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:34:50] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:34:50] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:34:50] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:34:50] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:34:51] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:34:53] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:34:53] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:34:53] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:34:54] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:34:54] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:34:54] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][09:34:54] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:34:54] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250531_093447.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2629.45,
        "volume": 549552.59,
        "RSI": 58.96157417496891,
        "MACD_macd": -5.317530492371134,
        "MACD_signal": -2.23908993932889,
        "ATR": 31.135975588998818,
        "ADX": 32.451686197031194,
        "Stoch_K": 85.79075992086575,
        "Stoch_D": 47.051658671321356,
        "StochRSI_K": 94.70000594414053,
        "StochRSI_D": 35.46149168949193,
        "BB_upper": 2655.37313179928,
        "BB_lower": 2585.52386820072,
        "BB_middle": 2620.4485,
        "EMA5": 2605.4201046615854,
        "EMA21": 2615.164239278155,
        "EMA55": 2609.732389076389,
        "EMA144": 2578.4543187203512,
        "EMA200": 2565.6225834664033,
        "VWAP": 2584.0268527997478
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2561.41,
        "volume": 677740.0,
        "RSI": 39.155272964952225,
        "MACD_macd": -27.73485688698429,
        "MACD_signal": -24.69072118710781,
        "ATR": 28.344086072289404,
        "ADX": 42.80367508096993,
        "Stoch_K": 38.00669658758991,
        "Stoch_D": 36.702508470493996,
        "StochRSI_K": 100.0,
        "StochRSI_D": 91.7207609615452,
        "BB_upper": 2700.0811483527496,
        "BB_lower": 2500.1658516472507,
        "BB_middle": 2600.1235,
        "EMA5": 2557.4271027227414,
        "EMA21": 2590.5149985129588,
        "EMA55": 2619.3751415688503,
        "EMA144": 2604.834639315571,
        "EMA200": 2591.9036651026577,
        "VWAP": 2635.5200182641997
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:34:51+08:00",
    "factors": {
      "funding_rate": "0.0068%",
      "FGI": "50/100",
      "open_interest": "$578596816.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2484.84",
        "lastSz": "3.78",
        "askPx": "2484.84",
        "askSz": "117.92",
        "bidPx": "2484.83",
        "bidSz": "125.48",
        "open24h": "2596.93",
        "high24h": "2649.38",
        "low24h": "2475.78",
        "volCcy24h": "5319868.303",
        "vol24h": "53198683.03",
        "ts": "1748655293685",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T01:34:54+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][09:34:55] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/code/cache_screenshots/tradingview_clipboard_20250531_093447.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2629.45,
        "volume": 549552.59,
        "RSI": 58.96157417496891,
        "MACD_macd": -5.317530492371134,
        "MACD_signal": -2.23908993932889,
        "ATR": 31.135975588998818,
        "ADX": 32.451686197031194,
        "Stoch_K": 85.79075992086575,
        "Stoch_D": 47.051658671321356,
        "StochRSI_K": 94.70000594414053,
        "StochRSI_D": 35.46149168949193,
        "BB_upper": 2655.37313179928,
        "BB_lower": 2585.52386820072,
        "BB_middle": 2620.4485,
        "EMA5": 2605.4201046615854,
        "EMA21": 2615.164239278155,
        "EMA55": 2609.732389076389,
        "EMA144": 2578.4543187203512,
        "EMA200": 2565.6225834664033,
        "VWAP": 2584.0268527997478
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2561.41,
        "volume": 677740.0,
        "RSI": 39.155272964952225,
        "MACD_macd": -27.73485688698429,
        "MACD_signal": -24.69072118710781,
        "ATR": 28.344086072289404,
        "ADX": 42.80367508096993,
        "Stoch_K": 38.00669658758991,
        "Stoch_D": 36.702508470493996,
        "StochRSI_K": 100.0,
        "StochRSI_D": 91.7207609615452,
        "BB_upper": 2700.0811483527496,
        "BB_lower": 2500.1658516472507,
        "BB_middle": 2600.1235,
        "EMA5": 2557.4271027227414,
        "EMA21": 2590.5149985129588,
        "EMA55": 2619.3751415688503,
        "EMA144": 2604.834639315571,
        "EMA200": 2591.9036651026577,
        "VWAP": 2635.5200182641997
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:34:51+08:00",
    "factors": {
      "funding_rate": "0.0068%",
      "FGI": "50/100",
      "open_interest": "$578596816.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2484.84",
        "lastSz": "3.78",
        "askPx": "2484.84",
        "askSz": "117.92",
        "bidPx": "2484.83",
        "bidSz": "125.48",
        "open24h": "2596.93",
        "high24h": "2649.38",
        "low24h": "2475.78",
        "volCcy24h": "5319868.303",
        "vol24h": "53198683.03",
        "ts": "1748655293685",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T01:34:54+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][09:35:04] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][09:40:11] [INFO] 截图模块运行中...
[截图模块][09:40:11] [INFO]  __main__ 入口被执行
[截图模块][09:40:11] [INFO]  启动时主动清理内存...
[截图模块][09:40:12] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:40:12] [INFO]  已执行 pkill chrome
[截图模块][09:40:14] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:40:14] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:40:14] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:40:14] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:40:14] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:40:14] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:40:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:40:27] [INFO] 截图模块运行中...
[截图模块][09:40:28] [INFO]  __main__ 入口被执行
[截图模块][09:40:28] [INFO]  启动时主动清理内存...
[截图模块][09:40:28] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:40:52] [INFO] 截图模块运行中...
[截图模块][09:40:53] [INFO]  __main__ 入口被执行
[截图模块][09:40:53] [INFO]  启动时主动清理内存...
[截图模块][09:40:53] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:40:53] [INFO]  已执行 pkill chrome
[截图模块][09:40:55] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:40:55] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:40:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:40:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:40:55] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:40:55] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:40:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:40:58] [INFO] 启动浏览器 (有头模式)
[截图模块][09:41:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:41:34] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:41:34] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:41:34] [INFO]  打开目标图表页...
[截图模块][09:41:40] [INFO]  等待5秒加载页面...
[截图模块][09:41:45] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:41:45] [INFO]  快捷键已发送
[截图模块][09:41:46] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_094146.png
[截图模块][09:41:46] [INFO]  关闭浏览器...
[数据收集总模块][09:41:47] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_094146.png
[数据收集总模块][09:41:47] [INFO] 技术指标模块运行中...
[技术指标模块][09:41:48] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:41:48] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:41:48] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:41:48] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:41:48] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:41:49] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:41:49] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:41:49] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:41:51] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:41:51] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:41:52] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:41:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:41:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:41:52] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][09:41:52] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:41:53] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_094146.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105766.8,
        "volume": 66532.06,
        "RSI": 51.778049882342884,
        "MACD_macd": -45.87141492818773,
        "MACD_signal": 38.609840153869335,
        "ATR": 572.8005217353709,
        "ADX": 42.59777908847297,
        "Stoch_K": 76.49962509372703,
        "Stoch_D": 48.55274770795027,
        "StochRSI_K": 69.70798052419988,
        "StochRSI_D": 23.235993508066628,
        "BB_upper": 106429.40869208028,
        "BB_lower": 105300.2613079197,
        "BB_middle": 105864.83499999999,
        "EMA5": 105538.86365474443,
        "EMA21": 105730.90043710868,
        "EMA55": 105553.23966253827,
        "EMA144": 104978.84648924973,
        "EMA200": 104759.95220789687,
        "VWAP": 105021.97524757902
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109288.0,
        "volume": 169406.2,
        "RSI": 54.98177022990188,
        "MACD_macd": 7.036621830557124,
        "MACD_signal": 45.40169812177422,
        "ATR": 791.6447110641938,
        "ADX": 20.834901713471268,
        "Stoch_K": 75.6216216216215,
        "Stoch_D": 75.50887828454357,
        "StochRSI_K": 91.0702705520457,
        "StochRSI_D": 90.85506579748368,
        "BB_upper": 110347.82701341304,
        "BB_lower": 108248.26298658695,
        "BB_middle": 109298.045,
        "EMA5": 109121.35561684525,
        "EMA21": 109120.39495935963,
        "EMA55": 108616.45580273359,
        "EMA144": 107074.073401234,
        "EMA200": 106482.0218276739,
        "VWAP": 107401.38888783619
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:41:50+08:00",
    "factors": {
      "funding_rate": "0.0094%",
      "FGI": "50/100",
      "open_interest": "$290571622.00000125 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103807.1",
        "lastSz": "0.1",
        "askPx": "103807.1",
        "askSz": "487.26",
        "bidPx": "103807",
        "bidSz": "116.7",
        "open24h": "105753.9",
        "high24h": "106277.2",
        "low24h": "103394.3",
        "volCcy24h": "99971.7004",
        "vol24h": "9997170.04",
        "ts": "1748655712706",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-488.0009999999997 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T01:41:53+00:00Z"
}
[数据收集总模块][09:45:11] [INFO] 截图模块运行中...
[截图模块][09:45:12] [INFO]  __main__ 入口被执行
[截图模块][09:45:12] [INFO]  启动时主动清理内存...
[截图模块][09:45:12] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:45:12] [INFO]  已执行 pkill chrome
[截图模块][09:45:14] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:45:14] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:45:14] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][09:45:14] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][09:45:14] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:45:14] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:45:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:45:17] [INFO]  启动浏览器 (有头模式)
[截图模块][09:45:17] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:45:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:45:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:45:51] [INFO]  打开目标图表页...
[截图模块][09:45:56] [INFO]  等待5秒加载页面...
[截图模块][09:46:01] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:46:02] [INFO]  快捷键已发送
[截图模块][09:46:03] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_094603.png
[截图模块][09:46:03] [INFO]  关闭浏览器...
[数据收集总模块][09:46:03] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_094603.png
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:12] [INFO]  __main__ 入口被执行
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:12] [INFO]  启动时主动清理内存...
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:12] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:12] [INFO]  已执行 pkill chrome
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:14] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:14] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:14] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:14] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:14] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:14] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:17] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:17] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:51] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:51] [INFO]  打开目标图表页...
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:45:56] [INFO]  等待5秒加载页面...
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:01] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:02] [INFO]  快捷键已发送
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:03] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_094603.png
[数据收集总模块][09:46:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:03] [INFO]  关闭浏览器...
[数据收集总模块][09:46:03] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_094603.png
[数据收集总模块][09:46:03] [INFO] 技术指标模块运行中...
[技术指标模块][09:46:04] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:46:05] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:46:05] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:46:05] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:46:05] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:46:05] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:46:06] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:46:06] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:46:06] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:46:08] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:46:08] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:46:08] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:46:09] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][09:46:09] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:46:09] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_094603.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2572.72,
        "volume": 4866865.12,
        "RSI": 16.791973899998695,
        "MACD_macd": -7.652758574359723,
        "MACD_signal": -1.4612877888646931,
        "ATR": 26.03229150569458,
        "ADX": 36.538546930931325,
        "Stoch_K": 19.771907366460855,
        "Stoch_D": 29.0919935996601,
        "StochRSI_K": 0.0,
        "StochRSI_D": 13.553786868745329,
        "BB_upper": 2657.6169961691267,
        "BB_lower": 2584.815003830873,
        "BB_middle": 2621.216,
        "EMA5": 2593.405156992378,
        "EMA21": 2613.7347572230074,
        "EMA55": 2608.692105965048,
        "EMA144": 2574.8714264278938,
        "EMA200": 2560.7637412439935,
        "VWAP": 2580.612669596679
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2561.41,
        "volume": 677740.0,
        "RSI": 39.155272964952225,
        "MACD_macd": -27.73485688698429,
        "MACD_signal": -24.69072118710781,
        "ATR": 28.344086072289404,
        "ADX": 42.80367508096993,
        "Stoch_K": 38.00669658758991,
        "Stoch_D": 36.702508470493996,
        "StochRSI_K": 100.0,
        "StochRSI_D": 91.7207609615452,
        "BB_upper": 2700.0811483527496,
        "BB_lower": 2500.1658516472507,
        "BB_middle": 2600.1235,
        "EMA5": 2557.4271027227414,
        "EMA21": 2590.5149985129588,
        "EMA55": 2619.3751415688503,
        "EMA144": 2604.834639315571,
        "EMA200": 2591.9036651026577,
        "VWAP": 2635.5200182641997
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:46:06+08:00",
    "factors": {
      "funding_rate": "0.0071%",
      "FGI": "50/100",
      "open_interest": "$582135201.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2490.87",
        "lastSz": "0.01",
        "askPx": "2490.87",
        "askSz": "398.24",
        "bidPx": "2490.86",
        "bidSz": "1019.99",
        "open24h": "2601",
        "high24h": "2649.38",
        "low24h": "2473.63",
        "volCcy24h": "5385446.402",
        "vol24h": "53854464.02",
        "ts": "1748655969021",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T01:46:09+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[数据收集总模块][09:50:53] [INFO] 截图模块运行中...
[截图模块][09:50:54] [INFO]  __main__ 入口被执行
[截图模块][09:50:54] [INFO]  启动时主动清理内存...
[截图模块][09:50:54] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:50:54] [INFO]  已执行 pkill chrome
[截图模块][09:50:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:50:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:50:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][09:50:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][09:50:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:50:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:50:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:50:59] [INFO]  启动浏览器 (有头模式)
[截图模块][09:50:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:51:32] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:51:32] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:51:32] [INFO]  打开目标图表页...
[截图模块][09:51:38] [INFO]  等待5秒加载页面...
[截图模块][09:51:43] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:51:44] [INFO]  快捷键已发送
[截图模块][09:51:45] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_095145.png
[截图模块][09:51:45] [INFO]  关闭浏览器...
[数据收集总模块][09:51:45] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_095145.png
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:54] [INFO]  __main__ 入口被执行
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:54] [INFO]  启动时主动清理内存...
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:54] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:54] [INFO]  已执行 pkill chrome
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking']
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:59] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:50:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:32] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:32] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:32] [INFO]  打开目标图表页...
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:38] [INFO]  等待5秒加载页面...
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:43] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:44] [INFO]  快捷键已发送
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:45] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_095145.png
[数据收集总模块][09:51:45] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:51:45] [INFO]  关闭浏览器...
[数据收集总模块][09:51:45] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_095145.png
[数据收集总模块][09:51:45] [INFO] 技术指标模块运行中...
[技术指标模块][09:51:47] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:51:47] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:51:47] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:51:47] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:51:47] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:51:48] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:51:48] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:51:48] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:51:49] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:51:51] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:51:51] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:51:51] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:51:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:51:52] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:51:52] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][09:51:52] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:51:52] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshots/tradingview_clipboard_20250531_095145.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2572.72,
        "volume": 4866865.12,
        "RSI": 16.791973899998695,
        "MACD_macd": -7.652758574359723,
        "MACD_signal": -1.4612877888646931,
        "ATR": 26.03229150569458,
        "ADX": 36.538546930931325,
        "Stoch_K": 19.771907366460855,
        "Stoch_D": 29.0919935996601,
        "StochRSI_K": 0.0,
        "StochRSI_D": 13.553786868745329,
        "BB_upper": 2657.6169961691267,
        "BB_lower": 2584.815003830873,
        "BB_middle": 2621.216,
        "EMA5": 2593.405156992378,
        "EMA21": 2613.7347572230074,
        "EMA55": 2608.692105965048,
        "EMA144": 2574.8714264278938,
        "EMA200": 2560.7637412439935,
        "VWAP": 2580.612669596679
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2561.41,
        "volume": 677740.0,
        "RSI": 39.155272964952225,
        "MACD_macd": -27.73485688698429,
        "MACD_signal": -24.69072118710781,
        "ATR": 28.344086072289404,
        "ADX": 42.80367508096993,
        "Stoch_K": 38.00669658758991,
        "Stoch_D": 36.702508470493996,
        "StochRSI_K": 100.0,
        "StochRSI_D": 91.7207609615452,
        "BB_upper": 2700.0811483527496,
        "BB_lower": 2500.1658516472507,
        "BB_middle": 2600.1235,
        "EMA5": 2557.4271027227414,
        "EMA21": 2590.5149985129588,
        "EMA55": 2619.3751415688503,
        "EMA144": 2604.834639315571,
        "EMA200": 2591.9036651026577,
        "VWAP": 2635.5200182641997
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:51:49+08:00",
    "factors": {
      "funding_rate": "0.0069%",
      "FGI": "50/100",
      "open_interest": "$583458882.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2488.68",
        "lastSz": "0.01",
        "askPx": "2488.69",
        "askSz": "94.57",
        "bidPx": "2488.68",
        "bidSz": "1516.77",
        "open24h": "2596.95",
        "high24h": "2649.38",
        "low24h": "2473.63",
        "volCcy24h": "5397424.484",
        "vol24h": "53974244.84",
        "ts": "1748656312014",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T01:51:52+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[数据收集总模块][09:52:13] [INFO] 截图模块运行中...
[截图模块][09:52:14] [INFO]  __main__ 入口被执行
[截图模块][09:52:14] [INFO]  启动时主动清理内存...
[截图模块][09:52:14] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:52:14] [INFO]  已执行 pkill chrome
[截图模块][09:52:16] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:52:16] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:52:16] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:52:16] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:52:16] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:52:16] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][09:52:19] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:52:21] [INFO] 启动浏览器 (有头模式)
[截图模块][09:52:23] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:52:56] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:52:56] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:52:56] [INFO]  打开目标图表页...
[截图模块][09:53:03] [INFO]  等待5秒加载页面...
[截图模块][09:53:08] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:53:08] [INFO]  快捷键已发送
[截图模块][09:53:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_095309.png
[截图模块][09:53:09] [INFO]  关闭浏览器...
[数据收集总模块][09:53:10] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_095309.png
[数据收集总模块][09:53:10] [INFO] 技术指标模块运行中...
[技术指标模块][09:53:11] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:53:11] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:53:11] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:53:12] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:53:12] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:53:12] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:53:12] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:53:12] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:53:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:53:15] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:53:15] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:53:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:53:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:53:16] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][09:53:16] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:53:16] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_095309.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104910.0,
        "volume": 674990.15,
        "RSI": 19.0167301001472,
        "MACD_macd": -58.346709811201436,
        "MACD_signal": 59.75722004400607,
        "ATR": 486.2622266611213,
        "ADX": 41.41495054117567,
        "Stoch_K": 22.963009247688163,
        "Stoch_D": 38.46395346921,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.448266197097957,
        "BB_upper": 106471.78307130751,
        "BB_lower": 105303.34692869247,
        "BB_middle": 105887.56499999999,
        "EMA5": 105424.89548211663,
        "EMA21": 105727.30748748375,
        "EMA55": 105544.3057872869,
        "EMA144": 104958.34488516088,
        "EMA200": 104735.89912365386,
        "VWAP": 104995.0599148959
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109288.0,
        "volume": 169406.2,
        "RSI": 54.98177022990188,
        "MACD_macd": 7.036621830557124,
        "MACD_signal": 45.40169812177422,
        "ATR": 791.6447110641938,
        "ADX": 20.834901713471268,
        "Stoch_K": 75.6216216216215,
        "Stoch_D": 75.50887828454357,
        "StochRSI_K": 91.0702705520457,
        "StochRSI_D": 90.85506579748368,
        "BB_upper": 110347.82701341304,
        "BB_lower": 108248.26298658695,
        "BB_middle": 109298.045,
        "EMA5": 109121.35561684525,
        "EMA21": 109120.39495935963,
        "EMA55": 108616.45580273359,
        "EMA144": 107074.073401234,
        "EMA200": 106482.0218276739,
        "VWAP": 107401.38888783619
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:53:13+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "50/100",
      "open_interest": "$291637278.0000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103543",
        "lastSz": "0.59",
        "askPx": "103543.1",
        "askSz": "8.02",
        "bidPx": "103543",
        "bidSz": "771.62",
        "open24h": "105626",
        "high24h": "106277.2",
        "low24h": "103394.3",
        "volCcy24h": "99832.7413",
        "vol24h": "9983274.13",
        "ts": "1748656396213",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-519.867000000001 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T01:53:16+00:00Z"
}
[gemini_api_caller.py][10:03:08] [WARNING] [gemini_api_caller] 系统提示词文件未找到: /root/codespace/Qwen_quant_v1/config/system_prompt.txt. SYSTEM_PROMPT 将为空。
[gemini_api_caller.py][10:03:09] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_095309.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104910.0,
        "volume": 674990.15,
        "RSI": 19.0167301001472,
        "MACD_macd": -58.346709811201436,
        "MACD_signal": 59.75722004400607,
        "ATR": 486.2622266611213,
        "ADX": 41.41495054117567,
        "Stoch_K": 22.963009247688163,
        "Stoch_D": 38.46395346921,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.448266197097957,
        "BB_upper": 106471.78307130751,
        "BB_lower": 105303.34692869247,
        "BB_middle": 105887.56499999999,
        "EMA5": 105424.89548211663,
        "EMA21": 105727.30748748375,
        "EMA55": 105544.3057872869,
        "EMA144": 104958.34488516088,
        "EMA200": 104735.89912365386,
        "VWAP": 104995.0599148959
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109288.0,
        "volume": 169406.2,
        "RSI": 54.98177022990188,
        "MACD_macd": 7.036621830557124,
        "MACD_signal": 45.40169812177422,
        "ATR": 791.6447110641938,
        "ADX": 20.834901713471268,
        "Stoch_K": 75.6216216216215,
        "Stoch_D": 75.50887828454357,
        "StochRSI_K": 91.0702705520457,
        "StochRSI_D": 90.85506579748368,
        "BB_upper": 110347.82701341304,
        "BB_lower": 108248.26298658695,
        "BB_middle": 109298.045,
        "EMA5": 109121.35561684525,
        "EMA21": 109120.39495935963,
        "EMA55": 108616.45580273359,
        "EMA144": 107074.073401234,
        "EMA200": 106482.0218276739,
        "VWAP": 107401.38888783619
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:53:13+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "50/100",
      "open_interest": "$291637278.0000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103543",
        "lastSz": "0.59",
        "askPx": "103543.1",
        "askSz": "8.02",
        "bidPx": "103543",
        "bidSz": "771.62",
        "open24h": "105626",
        "high24h": "106277.2",
        "low24h": "103394.3",
        "volCcy24h": "99832.7413",
        "vol24h": "9983274.13",
        "ts": "1748656396213",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-519.867000000001 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T01:53:16+00:00Z"
}
[gemini_api_caller.py][10:03:47] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_095309.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104910.0,
        "volume": 674990.15,
        "RSI": 19.0167301001472,
        "MACD_macd": -58.346709811201436,
        "MACD_signal": 59.75722004400607,
        "ATR": 486.2622266611213,
        "ADX": 41.41495054117567,
        "Stoch_K": 22.963009247688163,
        "Stoch_D": 38.46395346921,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.448266197097957,
        "BB_upper": 106471.78307130751,
        "BB_lower": 105303.34692869247,
        "BB_middle": 105887.56499999999,
        "EMA5": 105424.89548211663,
        "EMA21": 105727.30748748375,
        "EMA55": 105544.3057872869,
        "EMA144": 104958.34488516088,
        "EMA200": 104735.89912365386,
        "VWAP": 104995.0599148959
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109288.0,
        "volume": 169406.2,
        "RSI": 54.98177022990188,
        "MACD_macd": 7.036621830557124,
        "MACD_signal": 45.40169812177422,
        "ATR": 791.6447110641938,
        "ADX": 20.834901713471268,
        "Stoch_K": 75.6216216216215,
        "Stoch_D": 75.50887828454357,
        "StochRSI_K": 91.0702705520457,
        "StochRSI_D": 90.85506579748368,
        "BB_upper": 110347.82701341304,
        "BB_lower": 108248.26298658695,
        "BB_middle": 109298.045,
        "EMA5": 109121.35561684525,
        "EMA21": 109120.39495935963,
        "EMA55": 108616.45580273359,
        "EMA144": 107074.073401234,
        "EMA200": 106482.0218276739,
        "VWAP": 107401.38888783619
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T09:53:13+08:00",
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "50/100",
      "open_interest": "$291637278.0000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103543",
        "lastSz": "0.59",
        "askPx": "103543.1",
        "askSz": "8.02",
        "bidPx": "103543",
        "bidSz": "771.62",
        "open24h": "105626",
        "high24h": "106277.2",
        "low24h": "103394.3",
        "volCcy24h": "99832.7413",
        "vol24h": "9983274.13",
        "ts": "1748656396213",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-519.867000000001 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T01:53:16+00:00Z"
}
[_client.py][10:03:56] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[get_positions.py][10:08:42] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:08:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:08:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:08:43] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][10:13:09] [INFO] 截图模块运行中...
[截图模块][10:13:10] [INFO]  __main__ 入口被执行
[截图模块][10:13:10] [INFO]  启动时主动清理内存...
[截图模块][10:13:10] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:13:10] [INFO]  已执行 pkill chrome
[截图模块][10:13:12] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:13:12] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:13:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:13:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:13:12] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:13:12] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking']
[截图模块][10:13:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:13:17] [INFO] 启动浏览器 (有头模式)
[截图模块][10:13:19] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:13:52] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:13:52] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:13:52] [INFO]  打开目标图表页...
[截图模块][10:13:59] [INFO]  等待5秒加载页面...
[截图模块][10:14:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:14:05] [INFO]  快捷键已发送
[截图模块][10:14:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_101406.png
[截图模块][10:14:06] [INFO]  关闭浏览器...
[数据收集总模块][10:14:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_101406.png
[数据收集总模块][10:14:06] [INFO] 技术指标模块运行中...
[技术指标模块][10:14:07] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:14:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:14:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:14:08] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:14:08] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:14:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:14:09] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:14:09] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:14:11] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:14:11] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:14:11] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:14:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:14:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:14:12] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][10:14:12] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:14:12] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_101406.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105469.0,
        "volume": 293909.22,
        "RSI": 30.87886406165424,
        "MACD_macd": 13.968551122452482,
        "MACD_signal": 89.53834579538753,
        "ATR": 366.5948716392959,
        "ADX": 34.955817822889685,
        "Stoch_K": 46.19560878243559,
        "Stoch_D": 46.43478701034911,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.873016990551164,
        "BB_upper": 106306.80910647818,
        "BB_lower": 105581.33089352181,
        "BB_middle": 105944.06999999999,
        "EMA5": 105682.34322317493,
        "EMA21": 105809.0100190535,
        "EMA55": 105558.14348998228,
        "EMA144": 104869.64421588265,
        "EMA200": 104602.79808949513,
        "VWAP": 104960.50538873038
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109145.1,
        "volume": 229206.24,
        "RSI": 51.611745971059314,
        "MACD_macd": -11.43454787498922,
        "MACD_signal": 55.351394794614095,
        "ATR": 830.6978612239229,
        "ADX": 22.041020180031765,
        "Stoch_K": 69.6798336798338,
        "Stoch_D": 67.1061719535316,
        "StochRSI_K": 81.49491664341562,
        "StochRSI_D": 88.40045671220987,
        "BB_upper": 110470.059089313,
        "BB_lower": 108218.130910687,
        "BB_middle": 109344.095,
        "EMA5": 109038.03342526786,
        "EMA21": 109103.59481554767,
        "EMA55": 108578.02021758819,
        "EMA144": 106917.55202492196,
        "EMA200": 106269.2975796086,
        "VWAP": 107345.11402431481
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T10:14:09+08:00",
    "factors": {
      "funding_rate": "-0.0084%",
      "FGI": "50/100",
      "open_interest": "$22953700473.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103642.5",
        "lastSz": "0.16",
        "askPx": "103642.5",
        "askSz": "147.51",
        "bidPx": "103642.4",
        "bidSz": "1401.25",
        "open24h": "105895.9",
        "high24h": "106277.2",
        "low24h": "103224.1",
        "volCcy24h": "101279.1831",
        "vol24h": "10127918.31",
        "ts": "1748657652543",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-508.49300000000073 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T02:14:12+00:00Z"
}
[技术指标模块][10:16:47] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:16:48] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:16:48] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:16:48] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:16:48] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:16:48] [INFO] 成功获取并处理 4h 周期的数据。
[截图模块][10:21:06] [INFO]  __main__ 入口被执行
[截图模块][10:21:06] [INFO]  启动时主动清理内存...
[截图模块][10:21:06] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:21:06] [INFO]  已执行 pkill chrome
[截图模块][10:21:09] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:21:09] [ERROR] [CRITICAL 当前脚本运行的Python解释器不是指定的虚拟环境解释器！
[截图模块][10:21:09] [ERROR] Expected: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python3.10
[截图模块][10:21:09] [ERROR] Actual: /usr/local/bin/python3.10
[截图模块][10:21:09] [ERROR] 请确保通过 `/app/venv/bin/python your_script.py` 或正确配置了PATH环境变量来运行脚本。
[截图模块][10:22:45] [INFO]  __main__ 入口被执行
[截图模块][10:22:45] [INFO]  启动时主动清理内存...
[截图模块][10:22:45] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:22:45] [INFO]  已执行 pkill chrome
[截图模块][10:22:47] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:22:47] [ERROR] [CRITICAL 当前脚本运行的Python解释器不是指定的虚拟环境解释器！
[截图模块][10:22:47] [ERROR] Expected: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python3.10
[截图模块][10:22:47] [ERROR] Actual: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python
[截图模块][10:22:47] [ERROR] 请确保通过 `/app/venv/bin/python your_script.py` 或正确配置了PATH环境变量来运行脚本。
[截图模块][10:23:23] [INFO]  __main__ 入口被执行
[截图模块][10:23:23] [INFO]  启动时主动清理内存...
[截图模块][10:23:23] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:23:23] [INFO]  已执行 pkill chrome
[截图模块][10:23:25] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:23:25] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:23:25] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:23:25] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:23:25] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:23:25] [INFO]  已设置代理: http://127.0.0.1:1080
[截图模块][10:23:25] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:1080']
[截图模块][10:23:26] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:23:28] [INFO] 启动浏览器 (有头模式)
[截图模块][10:23:30] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:26:30] [INFO]  __main__ 入口被执行
[截图模块][10:26:30] [INFO]  启动时主动清理内存...
[截图模块][10:26:30] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:26:30] [INFO]  已执行 pkill chrome
[截图模块][10:26:32] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:26:32] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:26:32] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:26:32] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:26:32] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:26:32] [INFO]  已设置代理: http://127.0.0.1:1080
[截图模块][10:26:32] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:1080']
[截图模块][10:26:34] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:26:35] [INFO] 启动浏览器 (有头模式)
[截图模块][10:26:37] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:27:04] [INFO]  __main__ 入口被执行
[截图模块][10:27:04] [INFO]  启动时主动清理内存...
[截图模块][10:27:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:27:04] [INFO]  已执行 pkill chrome
[截图模块][10:27:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:27:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:27:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:27:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:27:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:27:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:27:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:27:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:27:09] [INFO] 启动浏览器 (有头模式)
[截图模块][10:27:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:27:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:27:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:27:46] [INFO]  打开目标图表页...
[截图模块][10:27:53] [INFO]  等待5秒加载页面...
[截图模块][10:27:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:27:58] [INFO]  快捷键已发送
[截图模块][10:27:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_102759.png
[截图模块][10:27:59] [INFO]  关闭浏览器...
[数据收集总模块][10:28:25] [INFO] 截图模块运行中...
[截图模块][10:28:26] [INFO]  __main__ 入口被执行
[截图模块][10:28:26] [INFO]  启动时主动清理内存...
[截图模块][10:28:26] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:28:26] [INFO]  已执行 pkill chrome
[截图模块][10:28:28] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:28:28] [ERROR] [CRITICAL 当前脚本运行的Python解释器不是指定的虚拟环境解释器！
[截图模块][10:28:28] [ERROR] Expected: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python
[截图模块][10:28:28] [ERROR] Actual: /usr/local/bin/python3.10
[截图模块][10:28:28] [ERROR] 请确保通过 `/app/venv/bin/python your_script.py` 或正确配置了PATH环境变量来运行脚本。
[数据收集总模块][10:28:28] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][10:28:28] [INFO] 技术指标模块运行中...
[技术指标模块][10:28:29] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:28:29] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:28:29] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:28:30] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:28:30] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:28:30] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:28:30] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:28:30] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:28:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:28:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:28:33] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:28:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:28:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:28:34] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][10:28:34] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:28:34] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105689.7,
        "volume": 196115.27,
        "RSI": 39.25793509900307,
        "MACD_macd": 48.81774283703999,
        "MACD_signal": 108.24443520802178,
        "ATR": 300.02479968059987,
        "ADX": 28.487799512166042,
        "Stoch_K": 46.2332423775062,
        "Stoch_D": 36.056237252159406,
        "StochRSI_K": 22.34478793555441,
        "StochRSI_D": 20.873053467334472,
        "BB_upper": 106259.68648543897,
        "BB_lower": 105685.26351456104,
        "BB_middle": 105972.475,
        "EMA5": 105789.01483476239,
        "EMA21": 105843.03163107346,
        "EMA55": 105568.49728718646,
        "EMA144": 104926.54335814278,
        "EMA200": 104690.03285275509,
        "VWAP": 104935.20871645061
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109145.1,
        "volume": 229206.24,
        "RSI": 51.611745971059314,
        "MACD_macd": -11.43454787498922,
        "MACD_signal": 55.351394794614095,
        "ATR": 830.6978612239229,
        "ADX": 22.041020180031765,
        "Stoch_K": 69.6798336798338,
        "Stoch_D": 67.1061719535316,
        "StochRSI_K": 81.49491664341562,
        "StochRSI_D": 88.40045671220987,
        "BB_upper": 110470.059089313,
        "BB_lower": 108218.130910687,
        "BB_middle": 109344.095,
        "EMA5": 109038.03342526786,
        "EMA21": 109103.59481554767,
        "EMA55": 108578.02021758819,
        "EMA144": 106917.55202492196,
        "EMA200": 106269.2975796086,
        "VWAP": 107345.11402431481
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T10:28:31+08:00",
    "factors": {
      "funding_rate": "-0.0076%",
      "FGI": "50/100",
      "open_interest": "$22955833591.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103717.1",
        "lastSz": "1.42",
        "askPx": "103717.2",
        "askSz": "418.17",
        "bidPx": "103717.1",
        "bidSz": "309.73",
        "open24h": "105929.9",
        "high24h": "106277.2",
        "low24h": "103224.1",
        "volCcy24h": "101272.9955",
        "vol24h": "10127299.55",
        "ts": "1748658513814",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-498.89325000000105 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T02:28:34+00:00Z"
}
[gemini_api_caller.py][10:28:41] [INFO] prompt_text: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105689.7,
        "volume": 196115.27,
        "RSI": 39.25793509900307,
        "MACD_macd": 48.81774283703999,
        "MACD_signal": 108.24443520802178,
        "ATR": 300.02479968059987,
        "ADX": 28.487799512166042,
        "Stoch_K": 46.2332423775062,
        "Stoch_D": 36.056237252159406,
        "StochRSI_K": 22.34478793555441,
        "StochRSI_D": 20.873053467334472,
        "BB_upper": 106259.68648543897,
        "BB_lower": 105685.26351456104,
        "BB_middle": 105972.475,
        "EMA5": 105789.01483476239,
        "EMA21": 105843.03163107346,
        "EMA55": 105568.49728718646,
        "EMA144": 104926.54335814278,
        "EMA200": 104690.03285275509,
        "VWAP": 104935.20871645061
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109145.1,
        "volume": 229206.24,
        "RSI": 51.611745971059314,
        "MACD_macd": -11.43454787498922,
        "MACD_signal": 55.351394794614095,
        "ATR": 830.6978612239229,
        "ADX": 22.041020180031765,
        "Stoch_K": 69.6798336798338,
        "Stoch_D": 67.1061719535316,
        "StochRSI_K": 81.49491664341562,
        "StochRSI_D": 88.40045671220987,
        "BB_upper": 110470.059089313,
        "BB_lower": 108218.130910687,
        "BB_middle": 109344.095,
        "EMA5": 109038.03342526786,
        "EMA21": 109103.59481554767,
        "EMA55": 108578.02021758819,
        "EMA144": 106917.55202492196,
        "EMA200": 106269.2975796086,
        "VWAP": 107345.11402431481
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T10:28:31+08:00",
    "factors": {
      "funding_rate": "-0.0076%",
      "FGI": "50/100",
      "open_interest": "$22955833591.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103717.1",
        "lastSz": "1.42",
        "askPx": "103717.2",
        "askSz": "418.17",
        "bidPx": "103717.1",
        "bidSz": "309.73",
        "open24h": "105929.9",
        "high24h": "106277.2",
        "low24h": "103224.1",
        "volCcy24h": "101272.9955",
        "vol24h": "10127299.55",
        "ts": "1748658513814",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-498.89325000000105 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T02:28:34+00:00Z"
}
[_client.py][10:28:48] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[数据收集总模块][10:29:52] [INFO] 截图模块运行中...
[截图模块][10:29:52] [INFO]  __main__ 入口被执行
[截图模块][10:29:52] [INFO]  启动时主动清理内存...
[截图模块][10:29:52] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:29:52] [INFO]  已执行 pkill chrome
[截图模块][10:29:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:29:54] [ERROR] [CRITICAL 当前脚本运行的Python解释器不是指定的虚拟环境解释器！
[截图模块][10:29:54] [ERROR] Expected: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python
[截图模块][10:29:54] [ERROR] Actual: /usr/local/bin/python3.10
[截图模块][10:29:54] [ERROR] 请确保通过 `/app/venv/bin/python your_script.py` 或正确配置了PATH环境变量来运行脚本。
[数据收集总模块][10:29:54] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][10:29:54] [INFO] 技术指标模块运行中...
[技术指标模块][10:29:55] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:29:56] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:29:56] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:29:56] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:29:56] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:29:57] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:29:57] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:29:57] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:29:59] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:29:59] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:30:00] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:30:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:30:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:30:00] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][10:30:01] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:30:01] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105689.7,
        "volume": 196115.27,
        "RSI": 39.25793509900307,
        "MACD_macd": 48.81774283703999,
        "MACD_signal": 108.24443520802178,
        "ATR": 300.02479968059987,
        "ADX": 28.487799512166042,
        "Stoch_K": 46.2332423775062,
        "Stoch_D": 36.056237252159406,
        "StochRSI_K": 22.34478793555441,
        "StochRSI_D": 20.873053467334472,
        "BB_upper": 106259.68648543897,
        "BB_lower": 105685.26351456104,
        "BB_middle": 105972.475,
        "EMA5": 105789.01483476239,
        "EMA21": 105843.03163107346,
        "EMA55": 105568.49728718646,
        "EMA144": 104926.54335814278,
        "EMA200": 104690.03285275509,
        "VWAP": 104935.20871645061
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109145.1,
        "volume": 229206.24,
        "RSI": 51.611745971059314,
        "MACD_macd": -11.43454787498922,
        "MACD_signal": 55.351394794614095,
        "ATR": 830.6978612239229,
        "ADX": 22.041020180031765,
        "Stoch_K": 69.6798336798338,
        "Stoch_D": 67.1061719535316,
        "StochRSI_K": 81.49491664341562,
        "StochRSI_D": 88.40045671220987,
        "BB_upper": 110470.059089313,
        "BB_lower": 108218.130910687,
        "BB_middle": 109344.095,
        "EMA5": 109038.03342526786,
        "EMA21": 109103.59481554767,
        "EMA55": 108578.02021758819,
        "EMA144": 106917.55202492196,
        "EMA200": 106269.2975796086,
        "VWAP": 107345.11402431481
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T10:29:58+08:00",
    "factors": {
      "funding_rate": "-0.0075%",
      "FGI": "50/100",
      "open_interest": "$22956767166.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103645.1",
        "lastSz": "2",
        "askPx": "103645.1",
        "askSz": "492.59",
        "bidPx": "103645",
        "bidSz": "144.17",
        "open24h": "105890.9",
        "high24h": "106277.2",
        "low24h": "103224.1",
        "volCcy24h": "101332.2053",
        "vol24h": "10133220.53",
        "ts": "1748658601115",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-508.4577500000004 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T02:30:01+00:00Z"
}
[截图模块][10:30:02] [INFO]  __main__ 入口被执行
[截图模块][10:30:02] [INFO]  启动时主动清理内存...
[截图模块][10:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:30:03] [INFO]  已执行 pkill chrome
[截图模块][10:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:30:05] [ERROR] [CRITICAL 当前脚本运行的Python解释器不是指定的虚拟环境解释器！
[截图模块][10:30:05] [ERROR] Expected: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python
[截图模块][10:30:05] [ERROR] Actual: /usr/local/bin/python3.10
[截图模块][10:30:05] [ERROR] 请确保通过 `/app/venv/bin/python your_script.py` 或正确配置了PATH环境变量来运行脚本。
[截图模块][10:30:58] [INFO]  __main__ 入口被执行
[截图模块][10:30:58] [INFO]  启动时主动清理内存...
[截图模块][10:30:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:30:58] [INFO]  已执行 pkill chrome
[截图模块][10:31:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:31:00] [ERROR] [CRITICAL 当前脚本运行的Python解释器不是指定的虚拟环境解释器！
[截图模块][10:31:00] [ERROR] Expected: /root/codespace/Qwen_quant_v1/venv_selenium/bin/python
[截图模块][10:31:00] [ERROR] Actual: /usr/local/bin/python3.10
[截图模块][10:31:00] [ERROR] 请确保通过 `/app/venv/bin/python your_script.py` 或正确配置了PATH环境变量来运行脚本。
[截图模块][10:31:08] [INFO]  __main__ 入口被执行
[截图模块][10:31:08] [INFO]  启动时主动清理内存...
[截图模块][10:31:08] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:31:08] [INFO]  已执行 pkill chrome
[截图模块][10:31:10] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:31:10] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:31:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:31:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:31:10] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:31:10] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:31:10] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:31:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:31:13] [INFO] 启动浏览器 (有头模式)
[截图模块][10:31:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:31:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:31:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:31:51] [INFO]  打开目标图表页...
[截图模块][10:32:01] [INFO]  等待5秒加载页面...
[截图模块][10:32:06] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:32:06] [INFO]  快捷键已发送
[截图模块][10:32:07] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103207.png
[截图模块][10:32:07] [INFO]  关闭浏览器...
[数据收集总模块][10:32:12] [INFO] 截图模块运行中...
[截图模块][10:32:12] [INFO]  __main__ 入口被执行
[截图模块][10:32:12] [INFO]  启动时主动清理内存...
[截图模块][10:32:13] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:32:13] [INFO]  已执行 pkill chrome
[截图模块][10:32:15] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:32:15] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:32:15] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:32:15] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:32:15] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:32:15] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:32:15] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:32:16] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:32:18] [INFO] 启动浏览器 (有头模式)
[截图模块][10:32:20] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:32:54] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:32:54] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:32:54] [INFO]  打开目标图表页...
[截图模块][10:33:01] [INFO]  等待5秒加载页面...
[截图模块][10:33:06] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:33:06] [INFO]  快捷键已发送
[截图模块][10:33:07] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[截图模块][10:33:07] [INFO]  关闭浏览器...
[数据收集总模块][10:33:08] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[数据收集总模块][10:33:08] [INFO] 技术指标模块运行中...
[技术指标模块][10:33:09] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:33:09] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:33:09] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:33:10] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:33:10] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:33:10] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:33:10] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:33:10] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:33:13] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:33:13] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:33:14] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:33:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:33:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:33:15] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][10:33:15] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:33:15] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105817.3,
        "volume": 110643.81,
        "RSI": 45.43572187861009,
        "MACD_macd": 70.2892582254135,
        "MACD_signal": 123.13467028909403,
        "ATR": 266.59765643285675,
        "ADX": 23.318544563754724,
        "Stoch_K": 46.8755098711055,
        "Stoch_D": 37.88112718116283,
        "StochRSI_K": 40.27436622817088,
        "StochRSI_D": 13.424788742723626,
        "BB_upper": 106240.35055432643,
        "BB_lower": 105726.44944567356,
        "BB_middle": 105983.4,
        "EMA5": 105838.67225214359,
        "EMA21": 105858.36108244445,
        "EMA55": 105562.73824875026,
        "EMA144": 104904.11305734498,
        "EMA200": 104662.70777316776,
        "VWAP": 104915.15066370762
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109145.1,
        "volume": 229206.24,
        "RSI": 51.611745971059314,
        "MACD_macd": -11.43454787498922,
        "MACD_signal": 55.351394794614095,
        "ATR": 830.6978612239229,
        "ADX": 22.041020180031765,
        "Stoch_K": 69.6798336798338,
        "Stoch_D": 67.1061719535316,
        "StochRSI_K": 81.49491664341562,
        "StochRSI_D": 88.40045671220987,
        "BB_upper": 110470.059089313,
        "BB_lower": 108218.130910687,
        "BB_middle": 109344.095,
        "EMA5": 109038.03342526786,
        "EMA21": 109103.59481554767,
        "EMA55": 108578.02021758819,
        "EMA144": 106917.55202492196,
        "EMA200": 106269.2975796086,
        "VWAP": 107345.11402431481
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103909.7,
        "volume": 1570920.33,
        "RSI": 59.62128647168463,
        "MACD_macd": -402.31170479909633,
        "MACD_signal": -583.4100519172059,
        "ATR": 1346.0856954041888,
        "ADX": 13.646822539266843,
        "Stoch_K": 83.02135174185253,
        "Stoch_D": 70.22309603064242,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.01335054195283,
        "BB_upper": 104495.94655414436,
        "BB_lower": 102147.10344585562,
        "BB_middle": 103321.525,
        "EMA5": 103426.65505621104,
        "EMA21": 103525.3029504342,
        "EMA55": 104759.77563213109,
        "EMA144": 105424.56711055795,
        "EMA200": 105326.8102045381,
        "VWAP": 106881.18206060042
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T10:33:11+08:00",
    "factors": {
      "funding_rate": "-0.0073%",
      "FGI": "50/100",
      "open_interest": "$22958504870.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103450.1",
        "lastSz": "1.24",
        "askPx": "103450.1",
        "askSz": "111.56",
        "bidPx": "103450",
        "bidSz": "686.83",
        "open24h": "105918",
        "high24h": "106277.2",
        "low24h": "103224.1",
        "volCcy24h": "101435.2752",
        "vol24h": "10143527.52",
        "ts": "1748658794612",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-530.7709999999996 USDT",
      "liqPrice": "72298.38496263331 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T02:33:15+00:00Z"
}
[get_positions.py][11:08:57] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:08:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:08:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:08:58] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[宏观因子模块][11:09:24] [INFO] [macro_factor_collector]  开始采集宏观因子...
[技术指标模块][11:10:04] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:10:04] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:10:04] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:10:05] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:10:05] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:10:05] [INFO] 成功获取并处理 4h 周期的数据。
[截图模块][11:11:23] [INFO]  __main__ 入口被执行
[截图模块][11:11:23] [INFO]  启动时主动清理内存...
[截图模块][11:11:23] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:11:23] [INFO]  已执行 pkill chrome
[截图模块][11:11:25] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:11:25] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:11:25] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:11:25] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:11:25] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:11:25] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:11:25] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:11:27] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:11:29] [INFO]  启动浏览器 (有头模式)
[截图模块][11:11:29] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:12:01] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:12:01] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:12:01] [INFO]  打开目标图表页...
[截图模块][11:12:07] [INFO]  等待5秒加载页面...
[截图模块][11:12:12] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:12:13] [INFO]  快捷键已发送
[截图模块][11:12:14] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111214.png
[截图模块][11:12:14] [INFO]  关闭浏览器...
[数据收集总模块][11:12:28] [INFO] 截图模块运行中...
[截图模块][11:12:29] [INFO]  __main__ 入口被执行
[截图模块][11:12:29] [INFO]  启动时主动清理内存...
[截图模块][11:12:29] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:12:29] [INFO]  已执行 pkill chrome
[截图模块][11:12:31] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:12:31] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:12:31] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:12:31] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:12:31] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:12:31] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:12:31] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:12:32] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:12:34] [INFO]  启动浏览器 (有头模式)
[截图模块][11:12:34] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:13:08] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:13:08] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:13:08] [INFO]  打开目标图表页...
[截图模块][11:13:14] [INFO]  等待5秒加载页面...
[截图模块][11:13:19] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:13:20] [INFO]  快捷键已发送
[截图模块][11:13:21] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111321.png
[截图模块][11:13:21] [INFO]  关闭浏览器...
[数据收集总模块][11:13:21] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111321.png
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:29] [INFO]  __main__ 入口被执行
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:29] [INFO]  启动时主动清理内存...
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:29] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:29] [INFO]  已执行 pkill chrome
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:31] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:32] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:34] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:12:34] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:08] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:08] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:08] [INFO]  打开目标图表页...
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:14] [INFO]  等待5秒加载页面...
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:19] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:20] [INFO]  快捷键已发送
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:21] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111321.png
[数据收集总模块][11:13:21] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:21] [INFO]  关闭浏览器...
[数据收集总模块][11:13:21] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111321.png
[数据收集总模块][11:13:21] [INFO] 技术指标模块运行中...
[技术指标模块][11:13:22] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:13:22] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:13:22] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:13:23] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:13:23] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:13:23] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:13:24] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:13:24] [INFO] 宏观因子模块运行中...
[宏观因子模块][11:13:25] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][11:13:27] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:13:27] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:13:28] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:13:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:13:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:13:28] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][11:13:28] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:13:29] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111321.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2613.39,
        "volume": 714566.91,
        "RSI": 30.10624910751993,
        "MACD_macd": 1.7283486755641206,
        "MACD_signal": 4.604934494666158,
        "ATR": 14.59403990333619,
        "ADX": 23.811227479952297,
        "Stoch_K": 37.41421297321245,
        "Stoch_D": 31.821351098342006,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.759051874718338,
        "BB_upper": 2646.719291670912,
        "BB_lower": 2612.605708329088,
        "BB_middle": 2629.6625,
        "EMA5": 2622.4279109108693,
        "EMA21": 2626.1891873659238,
        "EMA55": 2611.4163952619406,
        "EMA144": 2571.6237675547063,
        "EMA200": 2556.302473550858,
        "VWAP": 2575.027364326216
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.87,
        "volume": 594504.9,
        "RSI": 38.74618290567444,
        "MACD_macd": -29.864152558349815,
        "MACD_signal": -22.64118126505658,
        "ATR": 30.985083470196038,
        "ADX": 53.00410461795701,
        "Stoch_K": 37.54366737447761,
        "Stoch_D": 24.375450256659633,
        "StochRSI_K": 90.49922888820187,
        "StochRSI_D": 50.40937954702459,
        "BB_upper": 2721.6122529903882,
        "BB_lower": 2504.040747009612,
        "BB_middle": 2612.8265,
        "EMA5": 2553.898481126168,
        "EMA21": 2596.914470739017,
        "EMA55": 2623.020619232622,
        "EMA144": 2598.5258836165317,
        "EMA200": 2581.4598209025953,
        "VWAP": 2632.0632364808216
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T11:13:25+08:00",
    "factors": {
      "funding_rate": "0.0074%",
      "FGI": "50/100",
      "open_interest": "$583992705.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2494",
        "lastSz": "2.09",
        "askPx": "2494.01",
        "askSz": "166.29",
        "bidPx": "2494",
        "bidSz": "727.52",
        "open24h": "2635.66",
        "high24h": "2649.38",
        "low24h": "2473.63",
        "volCcy24h": "5422037.156",
        "vol24h": "54220371.56",
        "ts": "1748661208214",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T03:13:29+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[数据收集总模块][11:13:32] [INFO] 截图模块运行中...
[截图模块][11:13:33] [INFO]  __main__ 入口被执行
[截图模块][11:13:33] [INFO]  启动时主动清理内存...
[截图模块][11:13:33] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:13:33] [INFO]  已执行 pkill chrome
[截图模块][11:13:35] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:13:35] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:13:35] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:13:35] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:13:35] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:13:35] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:13:35] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:13:38] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:13:40] [INFO]  启动浏览器 (有头模式)
[截图模块][11:13:40] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:14:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:14:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:14:18] [INFO]  打开目标图表页...
[截图模块][11:14:26] [INFO]  等待5秒加载页面...
[截图模块][11:14:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:14:33] [INFO]  快捷键已发送
[截图模块][11:14:34] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[截图模块][11:14:34] [INFO]  关闭浏览器...
[数据收集总模块][11:14:34] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:33] [INFO]  __main__ 入口被执行
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:33] [INFO]  启动时主动清理内存...
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:33] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:33] [INFO]  已执行 pkill chrome
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:35] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:38] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:40] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:13:40] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:18] [INFO]  打开目标图表页...
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:26] [INFO]  等待5秒加载页面...
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:33] [INFO]  快捷键已发送
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:34] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[数据收集总模块][11:14:34] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:14:34] [INFO]  关闭浏览器...
[数据收集总模块][11:14:34] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[数据收集总模块][11:14:34] [INFO] 技术指标模块运行中...
[技术指标模块][11:14:37] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:14:37] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:14:37] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:14:37] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:14:37] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:14:38] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:14:38] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:14:38] [INFO] 宏观因子模块运行中...
[宏观因子模块][11:14:40] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][11:14:41] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:14:41] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:14:42] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:14:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:14:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:14:43] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[数据收集总模块][11:14:43] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:14:43] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2613.39,
        "volume": 714566.91,
        "RSI": 30.10624910751993,
        "MACD_macd": 1.7283486755641206,
        "MACD_signal": 4.604934494666158,
        "ATR": 14.59403990333619,
        "ADX": 23.811227479952297,
        "Stoch_K": 37.41421297321245,
        "Stoch_D": 31.821351098342006,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.759051874718338,
        "BB_upper": 2646.719291670912,
        "BB_lower": 2612.605708329088,
        "BB_middle": 2629.6625,
        "EMA5": 2622.4279109108693,
        "EMA21": 2626.1891873659238,
        "EMA55": 2611.4163952619406,
        "EMA144": 2571.6237675547063,
        "EMA200": 2556.302473550858,
        "VWAP": 2575.027364326216
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.87,
        "volume": 594504.9,
        "RSI": 38.74618290567444,
        "MACD_macd": -29.864152558349815,
        "MACD_signal": -22.64118126505658,
        "ATR": 30.985083470196038,
        "ADX": 53.00410461795701,
        "Stoch_K": 37.54366737447761,
        "Stoch_D": 24.375450256659633,
        "StochRSI_K": 90.49922888820187,
        "StochRSI_D": 50.40937954702459,
        "BB_upper": 2721.6122529903882,
        "BB_lower": 2504.040747009612,
        "BB_middle": 2612.8265,
        "EMA5": 2553.898481126168,
        "EMA21": 2596.914470739017,
        "EMA55": 2623.020619232622,
        "EMA144": 2598.5258836165317,
        "EMA200": 2581.4598209025953,
        "VWAP": 2632.0632364808216
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T11:14:40+08:00",
    "factors": {
      "funding_rate": "0.0074%",
      "FGI": "50/100",
      "open_interest": "$584015365.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2493.72",
        "lastSz": "0.47",
        "askPx": "2493.73",
        "askSz": "986.88",
        "bidPx": "2493.72",
        "bidSz": "15.04",
        "open24h": "2635.92",
        "high24h": "2649.38",
        "low24h": "2473.63",
        "volCcy24h": "5423197.02",
        "vol24h": "54231970.2",
        "ts": "1748661283606",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T03:14:43+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[gemini_api_caller.py][11:16:55] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2613.39,
        "volume": 714566.91,
        "RSI": 30.10624910751993,
        "MACD_macd": 1.7283486755641206,
        "MACD_signal": 4.604934494666158,
        "ATR": 14.59403990333619,
        "ADX": 23.811227479952297,
        "Stoch_K": 37.41421297321245,
        "Stoch_D": 31.821351098342006,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.759051874718338,
        "BB_upper": 2646.719291670912,
        "BB_lower": 2612.605708329088,
        "BB_middle": 2629.6625,
        "EMA5": 2622.4279109108693,
        "EMA21": 2626.1891873659238,
        "EMA55": 2611.4163952619406,
        "EMA144": 2571.6237675547063,
        "EMA200": 2556.302473550858,
        "VWAP": 2575.027364326216
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.87,
        "volume": 594504.9,
        "RSI": 38.74618290567444,
        "MACD_macd": -29.864152558349815,
        "MACD_signal": -22.64118126505658,
        "ATR": 30.985083470196038,
        "ADX": 53.00410461795701,
        "Stoch_K": 37.54366737447761,
        "Stoch_D": 24.375450256659633,
        "StochRSI_K": 90.49922888820187,
        "StochRSI_D": 50.40937954702459,
        "BB_upper": 2721.6122529903882,
        "BB_lower": 2504.040747009612,
        "BB_middle": 2612.8265,
        "EMA5": 2553.898481126168,
        "EMA21": 2596.914470739017,
        "EMA55": 2623.020619232622,
        "EMA144": 2598.5258836165317,
        "EMA200": 2581.4598209025953,
        "VWAP": 2632.0632364808216
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T11:14:40+08:00",
    "factors": {
      "funding_rate": "0.0074%",
      "FGI": "50/100",
      "open_interest": "$584015365.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2493.72",
        "lastSz": "0.47",
        "askPx": "2493.73",
        "askSz": "986.88",
        "bidPx": "2493.72",
        "bidSz": "15.04",
        "open24h": "2635.92",
        "high24h": "2649.38",
        "low24h": "2473.63",
        "volCcy24h": "5423197.02",
        "vol24h": "54231970.2",
        "ts": "1748661283606",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T03:14:43+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][11:17:03] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][11:18:19] [INFO] prompt_text: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2613.39,
        "volume": 714566.91,
        "RSI": 30.10624910751993,
        "MACD_macd": 1.7283486755641206,
        "MACD_signal": 4.604934494666158,
        "ATR": 14.59403990333619,
        "ADX": 23.811227479952297,
        "Stoch_K": 37.41421297321245,
        "Stoch_D": 31.821351098342006,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.759051874718338,
        "BB_upper": 2646.719291670912,
        "BB_lower": 2612.605708329088,
        "BB_middle": 2629.6625,
        "EMA5": 2622.4279109108693,
        "EMA21": 2626.1891873659238,
        "EMA55": 2611.4163952619406,
        "EMA144": 2571.6237675547063,
        "EMA200": 2556.302473550858,
        "VWAP": 2575.027364326216
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.87,
        "volume": 594504.9,
        "RSI": 38.74618290567444,
        "MACD_macd": -29.864152558349815,
        "MACD_signal": -22.64118126505658,
        "ATR": 30.985083470196038,
        "ADX": 53.00410461795701,
        "Stoch_K": 37.54366737447761,
        "Stoch_D": 24.375450256659633,
        "StochRSI_K": 90.49922888820187,
        "StochRSI_D": 50.40937954702459,
        "BB_upper": 2721.6122529903882,
        "BB_lower": 2504.040747009612,
        "BB_middle": 2612.8265,
        "EMA5": 2553.898481126168,
        "EMA21": 2596.914470739017,
        "EMA55": 2623.020619232622,
        "EMA144": 2598.5258836165317,
        "EMA200": 2581.4598209025953,
        "VWAP": 2632.0632364808216
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2624.01,
        "volume": 12289298.98,
        "RSI": 66.222414095259,
        "MACD_macd": 22.24683513375112,
        "MACD_signal": 16.13176135853827,
        "ATR": 73.53034731710345,
        "ADX": 27.21956111534648,
        "Stoch_K": 85.97076023391826,
        "Stoch_D": 76.49122807017545,
        "StochRSI_K": 71.2010912880942,
        "StochRSI_D": 59.75920324927781,
        "BB_upper": 2654.2777691672236,
        "BB_lower": 2464.943230832776,
        "BB_middle": 2559.6105,
        "EMA5": 2599.913446115698,
        "EMA21": 2562.805980225529,
        "EMA55": 2548.740915937772,
        "EMA144": 2549.874308638829,
        "EMA200": 2548.3922189492578,
        "VWAP": 2565.054074820128
      }
    }
  },
  "factors_main": {
    "timestamp": "2025-05-31T11:14:40+08:00",
    "factors": {
      "funding_rate": "0.0074%",
      "FGI": "50/100",
      "open_interest": "$584015365.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2493.72",
        "lastSz": "0.47",
        "askPx": "2493.73",
        "askSz": "986.88",
        "bidPx": "2493.72",
        "bidSz": "15.04",
        "open24h": "2635.92",
        "high24h": "2649.38",
        "low24h": "2473.63",
        "volCcy24h": "5423197.02",
        "vol24h": "54231970.2",
        "ts": "1748661283606",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T03:14:43+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    }
  }
}
[_client.py][11:18:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
[gemini_api_caller.py][12:06:16] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:06:16] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:06:16] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:06:16] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:06:16] [ERROR] [gemini_api_caller] Gemini API调用异常: module 'google.genai.types' has no attribute 'GenerativeModelConfig'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 124, in call_gemini_api_stream
    gemini_config = types.GenerativeModelConfig(
AttributeError: module 'google.genai.types' has no attribute 'GenerativeModelConfig'

[gemini_api_caller.py][12:07:14] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:07:14] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:07:14] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:07:14] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:07:14] [ERROR] [gemini_api_caller] Gemini API调用异常: 2 validation errors for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=24576, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
include_thoughts
  Extra inputs are not permitted [type=extra_forbidden, input_value='True', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    gemini_config = types.GenerateContentConfig(
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=24576, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
include_thoughts
  Extra inputs are not permitted [type=extra_forbidden, input_value='True', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden

[gemini_api_caller.py][12:08:48] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:08:48] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:08:48] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:08:48] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:08:48] [ERROR] [gemini_api_caller] Gemini API调用异常: 2 validation errors for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=24576, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
include_thoughts
  Extra inputs are not permitted [type=extra_forbidden, input_value='True', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    gemini_config = types.GenerateContentConfig(
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=24576, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
include_thoughts
  Extra inputs are not permitted [type=extra_forbidden, input_value='True', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden

[gemini_api_caller.py][12:08:55] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:08:55] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:08:55] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:08:55] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:08:55] [ERROR] [gemini_api_caller] Gemini API调用异常: 2 validation errors for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=24576, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
include_thoughts
  Extra inputs are not permitted [type=extra_forbidden, input_value='True', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    gemini_config = types.GenerateContentConfig(
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=24576, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
include_thoughts
  Extra inputs are not permitted [type=extra_forbidden, input_value='True', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden

[gemini_api_caller.py][12:10:00] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:10:00] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:10:00] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:10:00] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:10:01] [ERROR] [gemini_api_caller] Gemini API调用异常: Models.generate_content_stream() got an unexpected keyword argument 'generation_config'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 146, in call_gemini_api_stream
    response = client.models.generate_content_stream(
TypeError: Models.generate_content_stream() got an unexpected keyword argument 'generation_config'

[gemini_api_caller.py][12:14:54] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:14:54] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:14:54] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:14:54] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:14:54] [ERROR] [gemini_api_caller] Gemini API调用异常: 1 validation error for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=['True', 24576], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    gemini_config = types.GenerateContentConfig(
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for GenerateContentConfig
thinking_config
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=['True', 24576], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type

[gemini_api_caller.py][12:15:18] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:15:18] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:15:18] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:15:18] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:15:19] [ERROR] [gemini_api_caller] Gemini API调用异常: Models.generate_content_stream() got an unexpected keyword argument 'content'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 139, in call_gemini_api_stream
    response = client.models.generate_content_stream(
TypeError: Models.generate_content_stream() got an unexpected keyword argument 'content'

[gemini_api_caller.py][12:15:44] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:15:44] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:15:44] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:15:44] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:15:44] [ERROR] [gemini_api_caller] Gemini API调用异常: Models.generate_content_stream() got an unexpected keyword argument 'content'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 139, in call_gemini_api_stream
    response = client.models.generate_content_stream(
TypeError: Models.generate_content_stream() got an unexpected keyword argument 'content'

[gemini_api_caller.py][12:20:34] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:20:34] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:20:34] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:20:34] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:20:34] [ERROR] [gemini_api_caller] Gemini API调用异常: Models.generate_content_stream() got an unexpected keyword argument 'content'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 165, in call_gemini_api_stream
    response = client.models.generate_content_stream(
TypeError: Models.generate_content_stream() got an unexpected keyword argument 'content'

[gemini_api_caller.py][12:21:17] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:21:17] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:21:17] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:21:17] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][12:21:17] [ERROR] [gemini_api_caller] Gemini API调用异常: Models.generate_content_stream() got an unexpected keyword argument 'content'
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 149, in call_gemini_api_stream
    response = client.models.generate_content_stream(
TypeError: Models.generate_content_stream() got an unexpected keyword argument 'content'

[gemini_api_caller.py][12:22:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:22:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:22:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:22:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:22:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:22:09] [INFO] AFC remote call 1 is done.
[_client.py][12:22:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][12:25:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:25:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][12:25:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][12:25:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:25:40] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:25:40] [INFO] AFC remote call 1 is done.
[_client.py][12:25:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][13:58:46] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:58:46] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][13:58:46] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][13:58:46] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][13:58:46] [ERROR] [gemini_api_caller] Gemini API调用异常: 6 validation errors for GenerateContentConfig
response_schema.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
response_schema.custom-error[is-instance[type]]
  Input should be a type [type=is_type, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
response_schema.Schema
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
response_schema.is-instance[GenericAlias]
  Input should be an instance of GenericAlias [type=is_instance_of, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
response_schema.is-instance[UnionType]
  Input should be an instance of UnionType [type=is_instance_of, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
response_schema.is-instance[_UnionGenericAlias]
  Input should be an instance of _UnionGenericAlias [type=is_instance_of, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 127, in call_gemini_api_stream
    gemini_config = types.GenerateContentConfig(
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 6 validation errors for GenerateContentConfig
response_schema.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
response_schema.custom-error[is-instance[type]]
  Input should be a type [type=is_type, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
response_schema.Schema
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
response_schema.is-instance[GenericAlias]
  Input should be an instance of GenericAlias [type=is_instance_of, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
response_schema.is-instance[UnionType]
  Input should be an instance of UnionType [type=is_instance_of, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
response_schema.is-instance[_UnionGenericAlias]
  Input should be an instance of _UnionGenericAlias [type=is_instance_of, input_value='{\n    "$schema": "http:..._positions"\n    ]\n  }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of

[gemini_api_caller.py][14:06:32] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:06:32] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:06:32] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:06:32] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:06:32] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:06:32] [INFO] AFC remote call 1 is done.
[gemini_api_caller.py][14:06:33] [ERROR] [gemini_api_caller] Gemini API调用异常: 3 validation errors for Schema
properties.detailed_analysis_and_reasoning.properties.quant_features_output.patternProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value={'^X[0-9]+$': {'type': 'o...X2 是 RSI 中性度'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.patternProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value={'^[0-9]+m|h$': {'type': ...时，4h 是4小时'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
$schema
  Extra inputs are not permitted [type=extra_forbidden, input_value='http://json-schema.org/draft-07/schema#', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 157, in call_gemini_api_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 5783, in generate_content_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 4640, in _generate_content_stream
    request_dict = _GenerateContentParameters_to_mldev(
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 812, in _GenerateContentParameters_to_mldev
    _GenerateContentConfig_to_mldev(
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 691, in _GenerateContentConfig_to_mldev
    t.t_schema(api_client, getv(from_object, ['response_schema'])),
  File "/usr/local/lib/python3.10/site-packages/google/genai/_transformers.py", line 816, in t_schema
    return types.Schema.model_validate(origin)
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 3 validation errors for Schema
properties.detailed_analysis_and_reasoning.properties.quant_features_output.patternProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value={'^X[0-9]+$': {'type': 'o...X2 是 RSI 中性度'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.patternProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value={'^[0-9]+m|h$': {'type': ...时，4h 是4小时'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
$schema
  Extra inputs are not permitted [type=extra_forbidden, input_value='http://json-schema.org/draft-07/schema#', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden

[gemini_api_caller.py][14:09:14] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:09:14] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:09:14] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:09:14] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:09:14] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:09:14] [INFO] AFC remote call 1 is done.
[gemini_api_caller.py][14:09:14] [ERROR] [gemini_api_caller] Gemini API调用异常: 5 validation errors for Schema
properties.detailed_analysis_and_reasoning.properties.quant_features_output.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value={'type': 'object', 'prope... 'relevance', 'reason']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.properties.15m.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.properties.1h.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.properties.4h.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 157, in call_gemini_api_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 5783, in generate_content_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 4640, in _generate_content_stream
    request_dict = _GenerateContentParameters_to_mldev(
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 812, in _GenerateContentParameters_to_mldev
    _GenerateContentConfig_to_mldev(
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 691, in _GenerateContentConfig_to_mldev
    t.t_schema(api_client, getv(from_object, ['response_schema'])),
  File "/usr/local/lib/python3.10/site-packages/google/genai/_transformers.py", line 816, in t_schema
    return types.Schema.model_validate(origin)
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 5 validation errors for Schema
properties.detailed_analysis_and_reasoning.properties.quant_features_output.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value={'type': 'object', 'prope... 'relevance', 'reason']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.properties.15m.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.properties.1h.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.properties.4h.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
properties.indicators.additionalProperties
  Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden

[gemini_api_caller.py][14:17:41] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:17:41] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:17:41] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:17:41] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:17:41] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:17:41] [INFO] AFC remote call 1 is done.
[_client.py][14:17:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 400 Bad Request"
[gemini_api_caller.py][14:17:43] [ERROR] [gemini_api_caller] Gemini API调用异常: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': '* GenerateContentRequest.generation_config.response_schema.properties["detailed_analysis_and_reasoning"].properties["quant_features_output"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["1h"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["15m"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["4h"].properties: should be non-empty for OBJECT type\n', 'status': 'INVALID_ARGUMENT'}}
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 157, in call_gemini_api_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 5783, in generate_content_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 4666, in _generate_content_stream
    for response_dict in self._api_client.request_streamed(
  File "/usr/local/lib/python3.10/site-packages/google/genai/_api_client.py", line 774, in request_streamed
    session_response = self._request(http_request, stream=True)
  File "/usr/local/lib/python3.10/site-packages/google/genai/_api_client.py", line 672, in _request
    errors.APIError.raise_for_response(response)
  File "/usr/local/lib/python3.10/site-packages/google/genai/errors.py", line 101, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': '* GenerateContentRequest.generation_config.response_schema.properties["detailed_analysis_and_reasoning"].properties["quant_features_output"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["1h"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["15m"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["4h"].properties: should be non-empty for OBJECT type\n', 'status': 'INVALID_ARGUMENT'}}

[gemini_api_caller.py][14:18:44] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:18:44] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:18:44] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:18:44] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:18:44] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:18:44] [INFO] AFC remote call 1 is done.
[_client.py][14:18:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 400 Bad Request"
[gemini_api_caller.py][14:18:45] [ERROR] [gemini_api_caller] Gemini API调用异常: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': '* GenerateContentRequest.generation_config.response_schema.properties["detailed_analysis_and_reasoning"].properties["quant_features_output"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["15m"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["1h"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["4h"].properties: should be non-empty for OBJECT type\n', 'status': 'INVALID_ARGUMENT'}}
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 157, in call_gemini_api_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 5783, in generate_content_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 4666, in _generate_content_stream
    for response_dict in self._api_client.request_streamed(
  File "/usr/local/lib/python3.10/site-packages/google/genai/_api_client.py", line 774, in request_streamed
    session_response = self._request(http_request, stream=True)
  File "/usr/local/lib/python3.10/site-packages/google/genai/_api_client.py", line 672, in _request
    errors.APIError.raise_for_response(response)
  File "/usr/local/lib/python3.10/site-packages/google/genai/errors.py", line 101, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': '* GenerateContentRequest.generation_config.response_schema.properties["detailed_analysis_and_reasoning"].properties["quant_features_output"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["15m"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["1h"].properties: should be non-empty for OBJECT type\n* GenerateContentRequest.generation_config.response_schema.properties["indicators"].properties["4h"].properties: should be non-empty for OBJECT type\n', 'status': 'INVALID_ARGUMENT'}}

[gemini_api_caller.py][14:19:35] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:19:35] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:19:35] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:19:35] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:19:35] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:19:35] [INFO] AFC remote call 1 is done.
[_client.py][14:19:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][14:29:01] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:29:01] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:29:01] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:29:01] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:29:01] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:29:01] [INFO] AFC remote call 1 is done.
[_client.py][14:29:04] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][14:36:54] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:36:54] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:36:54] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:36:54] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:36:54] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:36:54] [INFO] AFC remote call 1 is done.
[_client.py][14:36:58] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][14:44:28] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:44:28] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:44:28] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:44:28] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:44:28] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:44:28] [INFO] AFC remote call 1 is done.
[_client.py][14:44:31] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][14:45:58] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:45:58] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][14:45:58] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.txt
[gemini_api_caller.py][14:45:58] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:45:58] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:45:58] [INFO] AFC remote call 1 is done.
[_client.py][14:46:01] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][15:30:22] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:30:22] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][15:30:22] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:30:22] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:30:22] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:30:22] [INFO] AFC remote call 1 is done.
[_client.py][15:30:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][15:32:24] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:32:24] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][15:32:24] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:32:24] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:32:24] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:32:24] [INFO] AFC remote call 1 is done.
[_client.py][15:32:28] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][15:36:46] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:36:46] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][15:36:46] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:36:46] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:36:46] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:36:46] [INFO] AFC remote call 1 is done.
[_client.py][15:36:48] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 400 Bad Request"
[gemini_api_caller.py][15:36:48] [ERROR] [gemini_api_caller] Gemini API调用异常: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': "Tool use with a response mime type: 'application/json' is unsupported", 'status': 'INVALID_ARGUMENT'}}
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 132, in call_gemini_api_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 5783, in generate_content_stream
    for chunk in response:
  File "/usr/local/lib/python3.10/site-packages/google/genai/models.py", line 4666, in _generate_content_stream
    for response_dict in self._api_client.request_streamed(
  File "/usr/local/lib/python3.10/site-packages/google/genai/_api_client.py", line 774, in request_streamed
    session_response = self._request(http_request, stream=True)
  File "/usr/local/lib/python3.10/site-packages/google/genai/_api_client.py", line 672, in _request
    errors.APIError.raise_for_response(response)
  File "/usr/local/lib/python3.10/site-packages/google/genai/errors.py", line 101, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': "Tool use with a response mime type: 'application/json' is unsupported", 'status': 'INVALID_ARGUMENT'}}

[gemini_api_caller.py][15:38:35] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:38:35] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][15:38:35] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:38:35] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:38:35] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:38:35] [INFO] AFC remote call 1 is done.
[_client.py][15:38:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][15:42:22] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:42:22] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][15:42:22] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:42:22] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:42:22] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:42:22] [INFO] AFC remote call 1 is done.
[_client.py][15:42:25] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[types.py][15:43:43] [WARNING] Warning: there are non-text parts in the response: ['executable_code'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[types.py][15:43:47] [WARNING] Warning: there are non-text parts in the response: ['code_execution_result'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[gemini_api_caller.py][15:51:32] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:51:32] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][15:51:32] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:51:32] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:51:33] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:51:33] [INFO] AFC remote call 1 is done.
[_client.py][15:51:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[types.py][15:52:57] [WARNING] Warning: there are non-text parts in the response: ['executable_code'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[types.py][15:53:01] [WARNING] Warning: there are non-text parts in the response: ['code_execution_result'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[gemini_api_caller.py][15:56:48] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:56:48] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][15:56:48] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:56:48] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:56:48] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:56:48] [INFO] AFC remote call 1 is done.
[_client.py][15:56:51] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[types.py][15:58:06] [WARNING] Warning: there are non-text parts in the response: ['executable_code'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[types.py][15:58:11] [WARNING] Warning: there are non-text parts in the response: ['code_execution_result'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[gemini_api_caller.py][16:00:22] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:00:22] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][16:00:22] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:00:22] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:00:22] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:00:22] [INFO] AFC remote call 1 is done.
[_client.py][16:00:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[types.py][16:01:44] [WARNING] Warning: there are non-text parts in the response: ['executable_code'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[types.py][16:01:49] [WARNING] Warning: there are non-text parts in the response: ['code_execution_result'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[types.py][16:02:56] [WARNING] Warning: there are non-text parts in the response: ['executable_code'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[types.py][16:02:58] [WARNING] Warning: there are non-text parts in the response: ['code_execution_result'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[gemini_api_caller.py][16:06:01] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:06:01] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][16:06:01] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:06:01] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:06:02] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:06:02] [INFO] AFC remote call 1 is done.
[_client.py][16:06:05] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][16:06:56] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:06:56] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][16:06:56] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:06:56] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:06:56] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:06:56] [INFO] AFC remote call 1 is done.
[_client.py][16:06:59] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][16:09:57] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:09:57] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][16:09:57] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:09:57] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:09:57] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:09:57] [INFO] AFC remote call 1 is done.
[_client.py][16:10:00] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][16:11:52] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:11:52] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][16:11:52] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:11:52] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:11:52] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:11:52] [INFO] AFC remote call 1 is done.
[_client.py][16:11:55] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][16:14:28] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:14:28] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][16:14:28] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:14:28] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:14:28] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:14:28] [INFO] AFC remote call 1 is done.
[_client.py][16:14:32] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][16:30:34] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:30:34] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][16:30:34] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:30:34] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:30:34] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:30:34] [INFO] AFC remote call 1 is done.
[_client.py][16:30:37] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][16:31:47] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:31:47] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][16:31:47] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:31:47] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:31:48] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:31:48] [INFO] AFC remote call 1 is done.
[_client.py][16:31:50] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][16:40:03] [INFO] 截图模块运行中...
[截图模块][16:40:05] [INFO]  __main__ 入口被执行
[截图模块][16:40:05] [INFO]  启动时主动清理内存...
[截图模块][16:40:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:40:05] [INFO]  已执行 pkill chrome
[截图模块][16:40:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:40:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:40:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][16:40:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][16:40:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:40:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:40:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:40:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:40:12] [INFO] 启动浏览器 (有头模式)
[截图模块][16:40:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:40:50] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:40:50] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:40:50] [INFO]  打开目标图表页...
[截图模块][16:40:56] [INFO]  关闭浏览器...
[gemini_api_caller.py][17:16:58] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:16:58] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_103307.png
[gemini_api_caller.py][17:16:58] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:16:58] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][17:16:58] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[数据收集总模块][17:17:47] [INFO] 截图模块运行中...
[截图模块][17:17:50] [INFO]  __main__ 入口被执行
[截图模块][17:17:50] [INFO]  启动时主动清理内存...
[截图模块][17:17:50] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][17:17:50] [INFO]  已执行 pkill chrome
[截图模块][17:17:53] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][17:17:53] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][17:17:53] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][17:17:53] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][17:17:53] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][17:17:53] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][17:17:53] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][17:17:54] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][17:17:56] [INFO] 启动浏览器 (有头模式)
[截图模块][17:17:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][17:18:35] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][17:18:35] [INFO]  旧截图已清理，开始截图流程...
[截图模块][17:18:35] [INFO]  打开目标图表页...
[截图模块][17:18:44] [INFO]  等待5秒加载页面...
[截图模块][17:18:49] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][17:18:49] [INFO]  快捷键已发送
[截图模块][17:18:50] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_171850.png
[截图模块][17:18:50] [INFO]  关闭浏览器...
[数据收集总模块][17:18:50] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_171850.png
[数据收集总模块][17:18:50] [INFO] 技术指标模块运行中...
[技术指标模块][17:18:52] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][17:18:52] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][17:18:52] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][17:18:52] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][17:18:52] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][17:18:53] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][17:18:54] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:18:54] [INFO] 宏观因子模块运行中...
[数据收集总模块][17:18:58] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:18:58] [INFO] OKX 持仓模块运行中...
[get_positions.py][17:18:59] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][17:18:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][17:19:00] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][17:19:00] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[数据收集总模块][17:19:00] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:19:00] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_171850.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105188.7,
        "volume": 101034.52,
        "RSI": 43.35496824130077,
        "MACD_macd": -9.346423692972166,
        "MACD_signal": 78.54659524101233,
        "ATR": 399.2532876092156,
        "ADX": 43.99409477962607,
        "Stoch_K": 45.579178885630284,
        "Stoch_D": 44.98533724340149,
        "StochRSI_K": 31.866261349086596,
        "StochRSI_D": 30.090127868285446,
        "BB_upper": 106073.05965004249,
        "BB_lower": 104921.8703499575,
        "BB_middle": 105497.465,
        "EMA5": 105205.46265026194,
        "EMA21": 105350.23456116416,
        "EMA55": 105054.9379971967,
        "EMA144": 104468.54130509608,
        "EMA200": 104287.47130108501,
        "VWAP": 104572.00260021357
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108859.2,
        "volume": 496151.67,
        "RSI": 33.85197754630104,
        "MACD_macd": 160.0912504242442,
        "MACD_signal": 320.1001321883936,
        "ATR": 636.9038572504934,
        "ADX": 26.42224179930799,
        "Stoch_K": 17.934710780210246,
        "Stoch_D": 22.303124447456707,
        "StochRSI_K": 6.748088728186468,
        "StochRSI_D": 2.4914688637640756,
        "BB_upper": 110406.11401703041,
        "BB_lower": 108596.42598296957,
        "BB_middle": 109501.26999999999,
        "EMA5": 109173.44844578726,
        "EMA21": 109302.65893683503,
        "EMA55": 108499.48510422025,
        "EMA144": 106766.50468357887,
        "EMA200": 106149.56677924328,
        "VWAP": 107112.51610905833
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103279.1,
        "volume": 1192218.67,
        "RSI": 50.96820690297778,
        "MACD_macd": -562.3431814423529,
        "MACD_signal": -661.8442752587601,
        "ATR": 1318.7040197796996,
        "ADX": 15.1843666695878,
        "Stoch_K": 60.762680258577895,
        "Stoch_D": 56.66127962870875,
        "StochRSI_K": 86.4119881880867,
        "StochRSI_D": 80.64039179925216,
        "BB_upper": 104405.64428775795,
        "BB_lower": 102119.02571224203,
        "BB_middle": 103262.33499999999,
        "EMA5": 103039.64887647478,
        "EMA21": 103487.91655406705,
        "EMA55": 104832.65545460963,
        "EMA144": 105407.49782072355,
        "EMA200": 105263.56547263659,
        "VWAP": 106906.57720629276
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0079%",
      "FGI": "50/100",
      "open_interest": "$23056126693.000023 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103647.1",
        "lastSz": "1.59",
        "askPx": "103647.1",
        "askSz": "492.97",
        "bidPx": "103647",
        "bidSz": "350.46",
        "open24h": "105240",
        "high24h": "105950",
        "low24h": "103022.1",
        "volCcy24h": "89266.442",
        "vol24h": "8926644.2",
        "ts": "1748683139508",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "102651.36 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "11.75 piece",
      "avgPrice": "107970.3 USDT",
      "Unrealized Gains": "-507.9642500000007 USDT",
      "liqPrice": "72305.34552032522 USDT",
      "lever": "3 x"
    }
  },
  "timestamp": "2025-05-31T09:19:00+00:00Z"
}
[gemini_api_caller.py][17:20:14] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:20:14] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_171850.png
[gemini_api_caller.py][17:20:14] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:20:14] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:20:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:20:15] [INFO] AFC remote call 1 is done.
[_client.py][17:20:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][17:24:36] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:24:36] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_171850.png
[gemini_api_caller.py][17:24:36] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:24:36] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:24:36] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:24:36] [INFO] AFC remote call 1 is done.
[_client.py][17:24:39] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][17:30:05] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:30:05] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][17:30:05] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:30:05] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:30:05] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:30:05] [INFO] AFC remote call 1 is done.
[_client.py][17:30:07] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][17:49:42] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:49:42] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][17:49:42] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:49:42] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:49:43] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:49:43] [INFO] AFC remote call 1 is done.
[_client.py][17:49:46] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][17:56:33] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:56:33] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][17:56:33] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:56:33] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:56:33] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:56:33] [INFO] AFC remote call 1 is done.
[_client.py][17:56:36] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[gemini_api_caller.py][17:57:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:57:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][17:57:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:57:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:57:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:57:37] [INFO] AFC remote call 1 is done.
[_client.py][17:57:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[trade_api_eth.py][17:57:53] [INFO] 格式检查完成
[get_positions.py][18:20:51] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][18:20:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:20:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:20:51] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[get_positions.py][18:21:42] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][18:21:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:21:43] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:21:43] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[get_positions.py][18:22:29] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][18:22:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:22:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:22:29] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[get_positions.py][18:23:52] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][18:23:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:23:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:23:53] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][18:23:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:25:31] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][18:25:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:25:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:25:31] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][18:25:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:26:56] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][18:26:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:26:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:26:57] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][18:26:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:26:57] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[get_positions.py][18:31:31] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][18:31:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:31:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:31:32] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[get_positions.py][18:31:43] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][18:31:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:31:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:31:44] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][18:31:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:31:44] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[get_positions.py][18:32:18] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][18:32:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:32:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:32:19] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][18:32:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:32:19] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[trade_api_eth.py][18:36:08] [INFO] 格式检查完成
[get_positions.py][18:36:18] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][18:36:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:36:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:36:19] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][18:36:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:36:19] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[get_positions.py][18:37:16] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][18:37:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][18:37:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][18:37:17] [INFO] 未获取到 ETH-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][18:37:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][18:37:17] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[trade_api_eth.py][19:54:24] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[trade_api_eth.py][19:54:24] [ERROR] 设置杠杆异常: AccountAPI.set_leverage() got an unexpected keyword argument 'tdMode'
[trade_api_eth.py][19:55:36] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[trade_api_eth.py][19:55:36] [ERROR] 设置杠杆异常: AccountAPI.set_leverage() missing 1 required positional argument: 'mgnMode'
[gemini_api_caller.py][20:37:25] [INFO] prompt_text导入完成
[gemini_api_caller.py][20:37:25] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][20:37:25] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][20:37:25] [INFO] 开始测试 Gemini API 流式调用...
[models.py][20:37:26] [INFO] AFC is enabled with max remote calls: 10.
[models.py][20:37:26] [INFO] AFC remote call 1 is done.
[_client.py][20:37:29] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[trade_api_eth.py][20:40:11] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[trade_api_eth.py][20:40:11] [ERROR] 设置杠杆异常: AccountAPI.set_leverage() missing 1 required positional argument: 'mgnMode'
[trade_api_eth.py][20:41:19] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][20:41:20] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][20:41:20] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][20:41:20] [INFO] execution: {'operation_comment': '市场处于强劲下跌趋势，但短期超卖。等待价格反弹至2520-2540 USDT区域，并出现做空信号后，限价开空。止损设在2570 USDT，止盈分三级目标。当前无持仓，等待入场机会。', 'type': 'wait', 'price': 2530.0, 'stop_loss': 2570.0, 'take_profit': 2470.0, 'size': 25.66, 'expected_winrate': 0.5668, 'expected_return': 0.0067, 'trade_RR_ratio': 1.5, 'signal_strength': 0.20036, 'risk_management_strategy': '每笔交易风险控制在账户权益的1%，通过等待反弹入场优化风险回报比，并设置严格止损。分级止盈，保留部分仓位作为浮盈。', 'position_action': 'N/A', 'risk_assessment': '当前市场处于强劲下跌趋势，但短期超卖可能引发反弹，因此直接追空风险较高。主要风险是价格在超卖后出现强劲反弹，导致止损。流动性目前尚可，但如果下跌加速，可能出现流动性不足导致滑点。政策风险和宏观经济风险需持续关注。建议严格控制仓位，并设置止损。'}
[trade_api_eth.py][20:41:20] [INFO] 交易API调用完成
[trade_api_eth.py][20:41:49] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][20:41:50] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][20:41:50] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][20:41:50] [INFO] execution: {'operation_comment': '市场处于强劲下跌趋势，但短期超卖。等待价格反弹至2520-2540 USDT区域，并出现做空信号后，限价开空。止损设在2570 USDT，止盈分三级目标。当前无持仓，等待入场机会。', 'type': 'wait', 'price': 2530.0, 'stop_loss': 2570.0, 'take_profit': 2470.0, 'size': 25.66, 'expected_winrate': 0.5668, 'expected_return': 0.0067, 'trade_RR_ratio': 1.5, 'signal_strength': 0.20036, 'risk_management_strategy': '每笔交易风险控制在账户权益的1%，通过等待反弹入场优化风险回报比，并设置严格止损。分级止盈，保留部分仓位作为浮盈。', 'position_action': 'N/A', 'risk_assessment': '当前市场处于强劲下跌趋势，但短期超卖可能引发反弹，因此直接追空风险较高。主要风险是价格在超卖后出现强劲反弹，导致止损。流动性目前尚可，但如果下跌加速，可能出现流动性不足导致滑点。政策风险和宏观经济风险需持续关注。建议严格控制仓位，并设置止损。'}
[trade_api_eth.py][20:41:50] [INFO] 交易API调用完成
[trade_api_eth.py][20:42:29] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][20:42:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][20:42:31] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][20:42:31] [INFO] execution: {
    "operation_comment": "市场处于强劲下跌趋势，但短期超卖。等待价格反弹至2520-2540 USDT区域，并出现做空信号后，限价开空。止损设在2570 USDT，止盈分三级目标。当前无持仓，等待入场机会。",
    "type": "wait",
    "price": 2530.0,
    "stop_loss": 2570.0,
    "take_profit": 2470.0,
    "size": 25.66,
    "expected_winrate": 0.5668,
    "expected_return": 0.0067,
    "trade_RR_ratio": 1.5,
    "signal_strength": 0.20036,
    "risk_management_strategy": "每笔交易风险控制在账户权益的1%，通过等待反弹入场优化风险回报比，并设置严格止损。分级止盈，保留部分仓位作为浮盈。",
    "position_action": "N/A",
    "risk_assessment": "当前市场处于强劲下跌趋势，但短期超卖可能引发反弹，因此直接追空风险较高。主要风险是价格在超卖后出现强劲反弹，导致止损。流动性目前尚可，但如果下跌加速，可能出现流动性不足导致滑点。政策风险和宏观经济风险需持续关注。建议严格控制仓位，并设置止损。"
}
[trade_api_eth.py][20:42:31] [INFO] 交易API调用完成
[_client.py][20:56:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][20:56:13] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][20:56:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][20:56:13] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][20:56:13] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][20:56:13] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][20:56:13] [INFO] execution: {
    "operation_comment": "市场处于强劲下跌趋势，但短期超卖。等待价格反弹至2520-2540 USDT区域，并出现做空信号后，限价开空。止损设在2570 USDT，止盈分三级目标。当前无持仓，等待入场机会。",
    "type": "wait",
    "price": 2530.0,
    "stop_loss": 2570.0,
    "take_profit": 2470.0,
    "size": 25.66,
    "expected_winrate": 0.5668,
    "expected_return": 0.0067,
    "trade_RR_ratio": 1.5,
    "signal_strength": 0.20036,
    "risk_management_strategy": "每笔交易风险控制在账户权益的1%，通过等待反弹入场优化风险回报比，并设置严格止损。分级止盈，保留部分仓位作为浮盈。",
    "position_action": "N/A",
    "risk_assessment": "当前市场处于强劲下跌趋势，但短期超卖可能引发反弹，因此直接追空风险较高。主要风险是价格在超卖后出现强劲反弹，导致止损。流动性目前尚可，但如果下跌加速，可能出现流动性不足导致滑点。政策风险和宏观经济风险需持续关注。建议严格控制仓位，并设置止损。"
}
[trade_api_eth.py][20:56:13] [INFO] 交易API调用完成
[gemini_api_caller.py][21:02:20] [INFO] prompt_text导入完成
[gemini_api_caller.py][21:02:20] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][21:02:20] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][21:02:20] [INFO] 开始测试 Gemini API 流式调用...
[models.py][21:02:20] [INFO] AFC is enabled with max remote calls: 10.
[models.py][21:02:20] [INFO] AFC remote call 1 is done.
[_client.py][21:02:24] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][21:04:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:04:25] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:04:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:04:25] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:06:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:06:37] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:06:37] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:06:37] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:06:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[_client.py][21:07:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:07:49] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:07:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:07:49] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:07:50] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:07:50] [INFO] 主订单下单成功,
[trade_api_eth.py][21:07:50] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:07:50] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "buy",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:07:50] [INFO] 交易API调用完成
[_client.py][21:08:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:08:51] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:08:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:08:51] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:08:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:08:51] [INFO] 主订单下单成功,
[trade_api_eth.py][21:08:51] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:08:51] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "buy",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:08:51] [INFO] 交易API调用完成
[_client.py][21:09:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:09:26] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:09:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:09:26] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:09:26] [INFO] 类型为 close，需要实现平仓逻辑。
[trade_api_eth.py][21:09:26] [ERROR] 获取当前持仓失败: 'AccountAPI' object has no attribute 'get_position'
[trade_api_eth.py][21:09:26] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:09:26] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:09:26] [INFO] 交易API调用完成
[_client.py][21:10:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:10:42] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:10:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:10:42] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:10:42] [INFO] 类型为 close，需要实现平仓逻辑。
[trade_api_eth.py][21:10:42] [ERROR] 获取当前持仓失败: 'AccountAPI' object has no attribute 'get_position'
[trade_api_eth.py][21:10:42] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:10:42] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:10:42] [INFO] 交易API调用完成
[_client.py][21:11:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:11:03] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:11:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:11:03] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:11:03] [INFO] 类型为 close，需要实现平仓逻辑。
[trade_api_eth.py][21:11:03] [ERROR] 获取当前持仓失败: AccountAPI.get_positions() got an unexpected keyword argument 'tdMode'
[trade_api_eth.py][21:11:03] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:11:03] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:11:03] [INFO] 交易API调用完成
[_client.py][21:11:12] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:11:12] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:11:12] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:11:12] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:11:12] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:11:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:11:12] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:11:12] [INFO] 当前持仓为空
[trade_api_eth.py][21:11:12] [ERROR] 平仓失败: local variable 'result' referenced before assignment
[trade_api_eth.py][21:11:12] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:11:12] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:11:12] [INFO] 交易API调用完成
[_client.py][21:12:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:12:38] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:12:38] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:12:38] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:12:38] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:12:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:12:38] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:12:38] [INFO] 当前持仓为空
[trade_api_eth.py][21:12:38] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:12:38] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:12:38] [INFO] 交易API调用完成
[_client.py][21:18:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:18:13] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:18:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:18:13] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:18:13] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:18:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:18:13] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:18:13] [INFO] 当前持仓为空,查看挂单信息
[trade_api_eth.py][21:18:13] [INFO] 当前持仓为空,查看挂单信息
[_client.py][21:18:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=limit&state=live "HTTP/2 200 OK"
[trade_api_eth.py][21:18:13] [ERROR] 获取挂单信息失败: TradeAPI.amend_order() got an unexpected keyword argument 'sz'
[trade_api_eth.py][21:18:13] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:18:13] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:18:13] [INFO] 交易API调用完成
[_client.py][21:20:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:20:03] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:20:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:20:03] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:20:03] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:20:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:20:03] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:20:03] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:20:03] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:20:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[trade_api_eth.py][21:20:04] [ERROR] 获取挂单信息失败: TradeAPI.amend_order() got an unexpected keyword argument 'sz'
[trade_api_eth.py][21:20:04] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:20:04] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:20:04] [INFO] 交易API调用完成
[_client.py][21:20:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:20:49] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:20:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:20:49] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:20:49] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:20:49] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:20:49] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:20:49] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:20:49] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:20:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[_client.py][21:20:50] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/amend-order "HTTP/2 200 OK"
[trade_api_eth.py][21:20:50] [INFO] 部分平仓
[trade_api_eth.py][21:20:50] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:20:50] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:20:50] [INFO] 交易API调用完成
[_client.py][21:21:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:21:17] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:21:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:21:17] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:21:17] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:21:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:21:17] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:21:17] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:21:17] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:21:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[_client.py][21:21:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/amend-order "HTTP/2 200 OK"
[trade_api_eth.py][21:21:18] [INFO] 部分平仓
[trade_api_eth.py][21:21:18] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:21:18] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:21:18] [INFO] 交易API调用完成
[_client.py][21:22:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:22:18] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:22:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:22:18] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:22:18] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:22:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:22:18] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:22:18] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:22:18] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:22:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[trade_api_eth.py][21:22:19] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'NoneType' and 'float'
[trade_api_eth.py][21:22:19] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:22:19] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:22:19] [INFO] 交易API调用完成
[_client.py][21:22:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:22:55] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:22:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:22:56] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:22:56] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:22:56] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:22:56] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:22:56] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:22:56] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:22:56] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[trade_api_eth.py][21:22:56] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'NoneType' and 'float'
[trade_api_eth.py][21:22:56] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:22:56] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:22:56] [INFO] 交易API调用完成
[_client.py][21:23:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:23:23] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:23:23] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:23:23] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:23:23] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:23:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:23:24] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:23:24] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:23:24] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:23:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[trade_api_eth.py][21:23:24] [INFO] 挂单信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:23:24] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'NoneType' and 'float'
[trade_api_eth.py][21:23:24] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:23:24] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:23:24] [INFO] 交易API调用完成
[_client.py][21:24:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:24:47] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:24:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:24:47] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:24:47] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:24:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:24:48] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:24:48] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:24:48] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:24:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:24:48] [INFO] 挂单信息: {'code': '0', 'data': [{'accFillSz': '0', 'algoClOrdId': '', 'algoId': '', 'attachAlgoClOrdId': '', 'attachAlgoOrds': [{'amendPxOnTriggerType': '0', 'attachAlgoClOrdId': '', 'attachAlgoId': '2556664238273232896', 'failCode': '', 'failReason': '', 'percent': '', 'slOrdPx': '2465', 'slTriggerPx': '2465', 'slTriggerPxType': 'last', 'sz': '', 'tpOrdKind': 'condition', 'tpOrdPx': '2520', 'tpTriggerPx': '2520', 'tpTriggerPxType': 'last'}], 'avgPx': '', 'cTime': '1748696931866', 'cancelSource': '', 'cancelSourceReason': '', 'category': 'normal', 'ccy': '', 'clOrdId': '', 'fee': '0', 'feeCcy': 'USDT', 'fillPx': '', 'fillSz': '0', 'fillTime': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'isTpLimit': 'false', 'lever': '100', 'linkedAlgoOrd': {'algoId': ''}, 'ordId': '2556664238295617536', 'ordType': 'limit', 'pnl': '0', 'posSide': 'net', 'px': '2485', 'pxType': '', 'pxUsd': '', 'pxVol': '', 'quickMgnType': '', 'rebate': '0', 'rebateCcy': 'USDT', 'reduceOnly': 'false', 'side': 'buy', 'slOrdPx': '', 'slTriggerPx': '', 'slTriggerPxType': '', 'source': '', 'state': 'live', 'stpId': '', 'stpMode': 'cancel_maker', 'sz': '51.33', 'tag': '', 'tdMode': 'cross', 'tgtCcy': '', 'tpOrdPx': '', 'tpTriggerPx': '', 'tpTriggerPxType': '', 'tradeId': '', 'uTime': '1748696931866'}], 'msg': ''}
[trade_api_eth.py][21:24:48] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'NoneType' and 'float'
[trade_api_eth.py][21:24:48] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:24:48] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:24:48] [INFO] 交易API调用完成
[_client.py][21:25:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:25:17] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:25:18] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:25:18] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:25:18] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:25:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:25:18] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:25:18] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:25:18] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:25:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:25:18] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:25:18] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'NoneType' and 'float'
[trade_api_eth.py][21:25:18] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:25:18] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:25:18] [INFO] 交易API调用完成
[_client.py][21:26:34] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:26:34] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:26:34] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:26:34] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:26:34] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:26:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:26:34] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:26:34] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:26:34] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:26:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:26:35] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:26:35] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'str' and 'float'
[trade_api_eth.py][21:26:35] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:26:35] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:26:35] [INFO] 交易API调用完成
[_client.py][21:27:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:27:39] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:27:39] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:27:39] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:27:39] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:27:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:27:39] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:27:39] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:27:39] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:27:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:27:40] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:27:40] [INFO] 挂单数量: 51.33
[trade_api_eth.py][21:27:40] [ERROR] 获取挂单信息失败: unsupported operand type(s) for -: 'str' and 'float'
[trade_api_eth.py][21:27:40] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:27:40] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:27:40] [INFO] 交易API调用完成
[_client.py][21:27:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:27:54] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:27:54] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:27:54] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:27:54] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:27:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:27:55] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:27:55] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:27:55] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:27:55] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:27:55] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:27:55] [INFO] 挂单数量: 51.33
[_client.py][21:27:55] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/amend-order "HTTP/2 200 OK"
[trade_api_eth.py][21:27:55] [INFO] 部分平仓
[trade_api_eth.py][21:27:55] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:27:55] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:27:55] [INFO] 交易API调用完成
[_client.py][21:28:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:28:29] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:28:30] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:28:30] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:28:30] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:28:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:28:30] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:28:30] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:28:30] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:28:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:28:30] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:28:30] [INFO] 挂单数量: 51.33
[_client.py][21:28:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/amend-order "HTTP/2 200 OK"
[trade_api_eth.py][21:28:31] [INFO] 修改挂单数量: 0.0
[trade_api_eth.py][21:28:31] [INFO] 部分平仓
[trade_api_eth.py][21:28:31] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:28:31] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:28:31] [INFO] 交易API调用完成
[_client.py][21:29:27] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:29:27] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:29:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:29:28] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:29:28] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:29:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:29:28] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:29:28] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:29:28] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:29:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:29:28] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:29:28] [INFO] 挂单数量: 51.33
[_client.py][21:29:29] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/amend-order "HTTP/2 200 OK"
[trade_api_eth.py][21:29:29] [INFO] 修改挂单数量: 0.0
[trade_api_eth.py][21:29:29] [INFO] 部分平仓
[trade_api_eth.py][21:29:29] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:29:29] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:29:29] [INFO] 交易API调用完成
[_client.py][21:29:49] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:29:49] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:29:50] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:29:50] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:29:50] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:29:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:29:50] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:29:50] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:29:50] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:29:50] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:29:50] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[_client.py][21:29:50] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[trade_api_eth.py][21:29:50] [INFO] 全部平仓
[trade_api_eth.py][21:29:50] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:29:50] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:29:50] [INFO] 交易API调用完成
[_client.py][21:30:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:30:53] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:30:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:30:53] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:30:53] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:30:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:30:53] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:30:53] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:30:53] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:30:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:30:53] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556664238273232896",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748696931866",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556664238295617536",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748696931866"
        }
    ],
    "msg": ""
}
[_client.py][21:30:53] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[trade_api_eth.py][21:30:53] [INFO] 全部平仓
[trade_api_eth.py][21:30:53] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:30:53] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:30:53] [INFO] 交易API调用完成
[_client.py][21:32:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:32:21] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:32:21] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:32:21] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:32:21] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:32:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:32:22] [INFO] 当前持仓信息: {
    "code": "0",
    "data": [],
    "msg": ""
}
[trade_api_eth.py][21:32:22] [INFO] 当前持仓信息: {'code': '0', 'data': [], 'msg': ''}
[trade_api_eth.py][21:32:22] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:32:22] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:32:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:32:22] [INFO] 挂单信息: {
    "code": "0",
    "data": [],
    "msg": ""
}
[trade_api_eth.py][21:32:22] [ERROR] 获取挂单信息失败: list index out of range
[trade_api_eth.py][21:32:22] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:32:22] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:32:22] [INFO] 交易API调用完成
[_client.py][21:33:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:33:10] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:33:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:33:10] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:33:10] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:33:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:33:10] [INFO] 当前持仓信息: {
    "code": "0",
    "data": [
        {
            "adl": "1",
            "availPos": "",
            "avgPx": "2534.71",
            "baseBal": "",
            "baseBorrowed": "",
            "baseInterest": "",
            "bePx": "2536.485184592296",
            "bizRefId": "",
            "bizRefType": "",
            "cTime": "1748698383452",
            "ccy": "USDT",
            "clSpotInUseAmt": "",
            "closeOrderAlgo": [],
            "deltaBS": "",
            "deltaPA": "",
            "fee": "-9.292753802",
            "fundingFee": "0",
            "gammaBS": "",
            "gammaPA": "",
            "idxPx": "2536.2952",
            "imr": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "interest": "",
            "last": "2534.97",
            "lever": "3",
            "liab": "",
            "liabCcy": "",
            "liqPenalty": "0",
            "liqPx": "1697.455169931358",
            "margin": "15487.9230033333333334",
            "markPx": "2534.73",
            "maxSpotInUseAmt": "",
            "mgnMode": "isolated",
            "mgnRatio": "74.07524302025885",
            "mmr": "185.85654252",
            "nonSettleAvgPx": "",
            "notionalUsd": "46483.6505669646",
            "optVal": "",
            "pendingCloseOrdLiabVal": "",
            "pnl": "0",
            "pos": "183.31",
            "posCcy": "",
            "posId": "2556712945439346688",
            "posSide": "net",
            "quoteBal": "",
            "quoteBorrowed": "",
            "quoteInterest": "",
            "realizedPnl": "-9.292753802",
            "settledPnl": "",
            "spotInUseAmt": "",
            "spotInUseCcy": "",
            "thetaBS": "",
            "thetaPA": "",
            "tradeId": "1036576765",
            "uTime": "1748698383841",
            "upl": "0.3666199999996666",
            "uplLastPx": "4.766059999995665",
            "uplRatio": "0.0000236713470179",
            "uplRatioLastPx": "0.0003077275112335",
            "usdPx": "1.00042",
            "vegaBS": "",
            "vegaPA": ""
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:33:10] [INFO] 当前持仓信息: {'code': '0', 'data': [{'adl': '1', 'availPos': '', 'avgPx': '2534.71', 'baseBal': '', 'baseBorrowed': '', 'baseInterest': '', 'bePx': '2536.485184592296', 'bizRefId': '', 'bizRefType': '', 'cTime': '1748698383452', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'closeOrderAlgo': [], 'deltaBS': '', 'deltaPA': '', 'fee': '-9.292753802', 'fundingFee': '0', 'gammaBS': '', 'gammaPA': '', 'idxPx': '2536.2952', 'imr': '', 'instId': 'ETH-USDT-SWAP', 'instType': 'SWAP', 'interest': '', 'last': '2534.97', 'lever': '3', 'liab': '', 'liabCcy': '', 'liqPenalty': '0', 'liqPx': '1697.455169931358', 'margin': '15487.9230033333333334', 'markPx': '2534.73', 'maxSpotInUseAmt': '', 'mgnMode': 'isolated', 'mgnRatio': '74.07524302025885', 'mmr': '185.85654252', 'nonSettleAvgPx': '', 'notionalUsd': '46483.6505669646', 'optVal': '', 'pendingCloseOrdLiabVal': '', 'pnl': '0', 'pos': '183.31', 'posCcy': '', 'posId': '2556712945439346688', 'posSide': 'net', 'quoteBal': '', 'quoteBorrowed': '', 'quoteInterest': '', 'realizedPnl': '-9.292753802', 'settledPnl': '', 'spotInUseAmt': '', 'spotInUseCcy': '', 'thetaBS': '', 'thetaPA': '', 'tradeId': '1036576765', 'uTime': '1748698383841', 'upl': '0.3666199999996666', 'uplLastPx': '4.766059999995665', 'uplRatio': '0.0000236713470179', 'uplRatioLastPx': '0.0003077275112335', 'usdPx': '1.00042', 'vegaBS': '', 'vegaPA': ''}], 'msg': ''}
[trade_api_eth.py][21:33:10] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:33:10] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:33:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:33:11] [INFO] 挂单信息: {
    "code": "0",
    "data": [],
    "msg": ""
}
[trade_api_eth.py][21:33:11] [ERROR] 获取挂单信息失败: list index out of range
[trade_api_eth.py][21:33:11] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:33:11] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:33:11] [INFO] 交易API调用完成
[_client.py][21:37:32] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:37:32] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:37:32] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:37:32] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:37:32] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:37:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:37:32] [INFO] 当前持仓信息: {
    "code": "0",
    "data": [
        {
            "adl": "1",
            "availPos": "",
            "avgPx": "2534.71",
            "baseBal": "",
            "baseBorrowed": "",
            "baseInterest": "",
            "bePx": "2536.485184592296",
            "bizRefId": "",
            "bizRefType": "",
            "cTime": "1748698383452",
            "ccy": "USDT",
            "clSpotInUseAmt": "",
            "closeOrderAlgo": [],
            "deltaBS": "",
            "deltaPA": "",
            "fee": "-9.292753802",
            "fundingFee": "0",
            "gammaBS": "",
            "gammaPA": "",
            "idxPx": "2536.2599",
            "imr": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "interest": "",
            "last": "2534.68",
            "lever": "3",
            "liab": "",
            "liabCcy": "",
            "liqPenalty": "0",
            "liqPx": "1697.455169931358",
            "margin": "15487.9230033333333334",
            "markPx": "2534.69",
            "maxSpotInUseAmt": "",
            "mgnMode": "isolated",
            "mgnRatio": "74.0729051094421",
            "mmr": "185.85360956",
            "nonSettleAvgPx": "",
            "notionalUsd": "46482.917019003806",
            "optVal": "",
            "pendingCloseOrdLiabVal": "",
            "pnl": "0",
            "pos": "183.31",
            "posCcy": "",
            "posId": "2556712945439346688",
            "posSide": "net",
            "quoteBal": "",
            "quoteBorrowed": "",
            "quoteInterest": "",
            "realizedPnl": "-9.292753802",
            "settledPnl": "",
            "spotInUseAmt": "",
            "spotInUseCcy": "",
            "thetaBS": "",
            "thetaPA": "",
            "tradeId": "1036576765",
            "uTime": "1748698383841",
            "upl": "-0.3666199999996666",
            "uplLastPx": "-0.5499300000036679",
            "uplRatio": "-0.0000236713470179",
            "uplRatioLastPx": "-0.0000355070205271",
            "usdPx": "1.00042",
            "vegaBS": "",
            "vegaPA": ""
        }
    ],
    "msg": ""
}
[trade_api_eth.py][21:37:32] [ERROR] 获取当前持仓失败: '>' not supported between instances of 'str' and 'int'
[trade_api_eth.py][21:37:32] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:37:32] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:37:32] [INFO] 交易API调用完成
[_client.py][21:37:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:37:56] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:37:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:37:56] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:37:56] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:37:56] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:37:56] [INFO] 当前持仓信息: {
    "code": "0",
    "data": [
        {
            "adl": "1",
            "availPos": "",
            "avgPx": "2534.71",
            "baseBal": "",
            "baseBorrowed": "",
            "baseInterest": "",
            "bePx": "2536.485184592296",
            "bizRefId": "",
            "bizRefType": "",
            "cTime": "1748698383452",
            "ccy": "USDT",
            "clSpotInUseAmt": "",
            "closeOrderAlgo": [],
            "deltaBS": "",
            "deltaPA": "",
            "fee": "-9.292753802",
            "fundingFee": "0",
            "gammaBS": "",
            "gammaPA": "",
            "idxPx": "2536.1599",
            "imr": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "interest": "",
            "last": "2534.5",
            "lever": "3",
            "liab": "",
            "liabCcy": "",
            "liqPenalty": "0",
            "liqPx": "1697.455169931358",
            "margin": "15487.9230033333333334",
            "markPx": "2534.49",
            "maxSpotInUseAmt": "",
            "mgnMode": "isolated",
            "mgnRatio": "74.06121444843237",
            "mmr": "185.83894475999998",
            "nonSettleAvgPx": "",
            "notionalUsd": "46478.7846818379",
            "optVal": "",
            "pendingCloseOrdLiabVal": "",
            "pnl": "0",
            "pos": "183.31",
            "posCcy": "",
            "posId": "2556712945439346688",
            "posSide": "net",
            "quoteBal": "",
            "quoteBorrowed": "",
            "quoteInterest": "",
            "realizedPnl": "-9.292753802",
            "settledPnl": "",
            "spotInUseAmt": "",
            "spotInUseCcy": "",
            "thetaBS": "",
            "thetaPA": "",
            "tradeId": "1036576765",
            "uTime": "1748698383841",
            "upl": "-4.032820000004668",
            "uplLastPx": "-3.8495100000006675",
            "uplRatio": "-0.0002603848171985",
            "uplRatioLastPx": "-0.0002485491436892",
            "usdPx": "1.00041",
            "vegaBS": "",
            "vegaPA": ""
        }
    ],
    "msg": ""
}
[_client.py][21:37:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:37:57] [INFO] 平仓结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2556722806382268416', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1748698677331'}], 'inTime': '1748698677330642', 'msg': '', 'outTime': '1748698677333399'}
[_client.py][21:37:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:37:57] [INFO] 平仓结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2556722812388511744', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1748698677510'}], 'inTime': '1748698677509569', 'msg': '', 'outTime': '1748698677512203'}
[_client.py][21:37:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:37:57] [INFO] 挂单信息: {
    "code": "0",
    "data": [],
    "msg": ""
}
[trade_api_eth.py][21:37:57] [ERROR] 获取挂单信息失败: list index out of range
[trade_api_eth.py][21:37:57] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:37:57] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:37:57] [INFO] 交易API调用完成
[_client.py][21:38:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:38:28] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:38:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:38:28] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:38:28] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:38:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:38:28] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:38:28] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:38:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:38:28] [INFO] 挂单信息: {
    "code": "0",
    "data": [],
    "msg": ""
}
[trade_api_eth.py][21:38:28] [ERROR] 获取挂单信息失败: list index out of range
[trade_api_eth.py][21:38:28] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:38:28] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:38:28] [INFO] 交易API调用完成
[_client.py][21:38:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:38:52] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:38:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:38:52] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:38:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:38:52] [INFO] 主订单下单成功,
[trade_api_eth.py][21:38:52] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:38:52] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "buy",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:38:52] [INFO] 交易API调用完成
[_client.py][21:39:06] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:39:06] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:39:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:39:07] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:39:07] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:39:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:39:07] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:39:07] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:39:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:39:07] [INFO] 挂单信息: {
    "code": "0",
    "data": [
        {
            "accFillSz": "0",
            "algoClOrdId": "",
            "algoId": "",
            "attachAlgoClOrdId": "",
            "attachAlgoOrds": [
                {
                    "amendPxOnTriggerType": "0",
                    "attachAlgoClOrdId": "",
                    "attachAlgoId": "2556724658765856768",
                    "failCode": "",
                    "failReason": "",
                    "percent": "",
                    "slOrdPx": "2465",
                    "slTriggerPx": "2465",
                    "slTriggerPxType": "last",
                    "sz": "",
                    "tpOrdKind": "condition",
                    "tpOrdPx": "2520",
                    "tpTriggerPx": "2520",
                    "tpTriggerPxType": "last"
                }
            ],
            "avgPx": "",
            "cTime": "1748698732537",
            "cancelSource": "",
            "cancelSourceReason": "",
            "category": "normal",
            "ccy": "",
            "clOrdId": "",
            "fee": "0",
            "feeCcy": "USDT",
            "fillPx": "",
            "fillSz": "0",
            "fillTime": "",
            "instId": "ETH-USDT-SWAP",
            "instType": "SWAP",
            "isTpLimit": "false",
            "lever": "100",
            "linkedAlgoOrd": {
                "algoId": ""
            },
            "ordId": "2556724658788241408",
            "ordType": "limit",
            "pnl": "0",
            "posSide": "net",
            "px": "2485",
            "pxType": "",
            "pxUsd": "",
            "pxVol": "",
            "quickMgnType": "",
            "rebate": "0",
            "rebateCcy": "USDT",
            "reduceOnly": "false",
            "side": "buy",
            "slOrdPx": "",
            "slTriggerPx": "",
            "slTriggerPxType": "",
            "source": "",
            "state": "live",
            "stpId": "",
            "stpMode": "cancel_maker",
            "sz": "51.33",
            "tag": "",
            "tdMode": "cross",
            "tgtCcy": "",
            "tpOrdPx": "",
            "tpTriggerPx": "",
            "tpTriggerPxType": "",
            "tradeId": "",
            "uTime": "1748698732537"
        }
    ],
    "msg": ""
}
[_client.py][21:39:07] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[trade_api_eth.py][21:39:07] [INFO] 全部平仓
[trade_api_eth.py][21:39:07] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:39:07] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:39:07] [INFO] 交易API调用完成
[_client.py][21:39:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:39:24] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:39:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:39:24] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:39:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:39:26] [ERROR] 主订单下单失败: {'code': '1', 'data': [{'clOrdId': '', 'ordId': '', 'sCode': '51048', 'sMsg': 'Your TP price should be lower than the order price.', 'tag': '', 'ts': '1748698765599'}], 'inTime': '1748698765598894', 'msg': 'All operations failed', 'outTime': '1748698765599074'}
[trade_api_eth.py][21:39:26] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:39:26] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "sell",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:39:26] [INFO] 交易API调用完成
[_client.py][21:40:12] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:40:12] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:40:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:40:13] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:40:13] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:40:13] [INFO] 主订单下单成功,
[trade_api_eth.py][21:40:13] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:40:13] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "buy",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:40:13] [INFO] 交易API调用完成
[_client.py][21:41:04] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:41:04] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:41:04] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:41:04] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:41:04] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:41:04] [INFO] 主订单下单成功,
[trade_api_eth.py][21:41:04] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:41:04] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "buy",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:41:04] [INFO] 交易API调用完成
[_client.py][21:42:25] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:42:25] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:42:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:42:26] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:42:26] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:42:26] [INFO] 主订单下单成功,
[trade_api_eth.py][21:42:26] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:42:26] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "buy",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:42:26] [INFO] 交易API调用完成
[_client.py][21:42:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:42:47] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:42:47] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:42:47] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][21:42:47] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][21:42:47] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][21:42:47] [INFO] 当前多单持仓为空,查看挂单信息
[trade_api_eth.py][21:42:47] [INFO] 当前空单持仓为空,查看挂单信息
[_client.py][21:42:48] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[_client.py][21:42:48] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/cancel-order "HTTP/2 200 OK"
[trade_api_eth.py][21:42:48] [INFO] 全部平仓
[trade_api_eth.py][21:42:48] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][21:42:48] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "close",
    "price": 2485.0,
    "stop_loss": 2465.0,
    "take_profit": 2520.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,result = trade_client.place_order(
        instId=instId,
        tdMode=tdMode,
        side=side,
        ordType=ordType,
        sz=sz,
        px=px,
        attachAlgoOrds=[{
            "amendPxOnTriggerType":1,
            "slTriggerPx":stop_loss,
            "slOrdPx":stop_loss,
            "tpTriggerPx":take_profit,
            "tpOrdPx":take_profit+0.01,
            "sz":sz*0.9,
            }]
    )
    "stop_loss": 2765.0,
    "take_profit": 2120.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:43:35] [INFO] 交易API调用完成
[_client.py][21:43:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:43:42] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:43:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:43:42] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:43:42] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:43:42] [INFO] 主订单下单成功,
[trade_api_eth.py][21:43:42] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:43:42] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "sell",
    "price": 2485.0,
    "stop_loss": 2765.0,
    "take_profit": 2120.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:43:42] [INFO] 交易API调用完成
[_client.py][21:44:30] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][21:44:30] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][21:44:30] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][21:44:31] [INFO] 杠杆设置为 100 倍成功。
[_client.py][21:44:31] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][21:44:31] [INFO] 主订单下单成功,
[trade_api_eth.py][21:44:31] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][21:44:31] [INFO] execution: {
    "operation_comment": "ETHUSDT短期超卖严重，且4小时级别仍为看涨趋势，当前K线出现长下影线，预示短期反弹机会。无持仓，建议在2485-2495区间挂限价单做多，严格止损，分批止盈。",
    "type": "sell",
    "price": 2485.0,
    "stop_loss": 2765.0,
    "take_profit": 2120.0,
    "size": 51.33,
    "expected_winrate": 0.6,
    "expected_return": 0.008,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "基于可用保证金的1%风险进行仓位计算，并设置严格止损。TP1平仓90%，剩余10%作为福根，TP1达成后止损上移至入场价。",
    "position_action": "开多",
    "risk_assessment": "当前市场短期波动率较高，但长期趋势支撑，风险中等。建议避免过度杠杆，并密切关注价格行为和成交量变化。"
}
[trade_api_eth.py][21:44:31] [INFO] 交易API调用完成
[gemini_api_caller.py][21:54:31] [INFO] prompt_text导入完成
[gemini_api_caller.py][21:54:31] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_111434.png
[gemini_api_caller.py][21:54:31] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][21:54:31] [INFO] 开始测试 Gemini API 流式调用...
[models.py][21:54:32] [INFO] AFC is enabled with max remote calls: 10.
[models.py][21:54:32] [INFO] AFC remote call 1 is done.
[_client.py][21:54:35] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][21:56:47] [INFO] 截图模块运行中...
[截图模块][21:56:49] [INFO]  __main__ 入口被执行
[截图模块][21:56:49] [INFO]  启动时主动清理内存...
[截图模块][21:56:49] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][21:56:49] [INFO]  已执行 pkill chrome
[截图模块][21:56:51] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][21:56:51] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][21:56:51] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][21:56:51] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][21:56:51] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][21:56:51] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][21:56:51] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][21:57:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][21:57:03] [INFO] 启动浏览器 (有头模式)
[截图模块][21:57:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][21:57:42] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][21:57:42] [INFO]  旧截图已清理，开始截图流程...
[截图模块][21:57:42] [INFO]  打开目标图表页...
[截图模块][21:57:49] [INFO]  等待5秒加载页面...
[截图模块][21:57:54] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][21:57:54] [INFO]  快捷键已发送
[截图模块][21:57:55] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_215755.png
[截图模块][21:57:55] [INFO]  关闭浏览器...
[数据收集总模块][21:57:56] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_215755.png
[数据收集总模块][21:57:56] [INFO] 技术指标模块运行中...
[技术指标模块][21:57:57] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][21:57:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][21:57:58] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][21:57:58] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][21:57:58] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][21:57:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][21:57:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][21:57:59] [INFO] 宏观因子模块运行中...
[数据收集总模块][21:58:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][21:58:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][21:58:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][21:58:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][21:58:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][21:58:05] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][21:58:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][21:58:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][21:58:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][21:58:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_215755.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105630.0,
        "volume": 90050.85,
        "RSI": 61.26761524130197,
        "MACD_macd": 316.8108016019687,
        "MACD_signal": 300.1688456116133,
        "ATR": 468.3228493585471,
        "ADX": 33.91718504460823,
        "Stoch_K": 66.83937823834198,
        "Stoch_D": 73.94200848397308,
        "StochRSI_K": 27.58247778342553,
        "StochRSI_D": 25.006277530206518,
        "BB_upper": 106438.83781723415,
        "BB_lower": 103770.48218276583,
        "BB_middle": 105104.65999999999,
        "EMA5": 105585.84757465454,
        "EMA21": 105213.64709913442,
        "EMA55": 104704.83600627806,
        "EMA144": 104289.48689692825,
        "EMA200": 104209.80606393718,
        "VWAP": 104279.52238880031
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109774.4,
        "volume": 262319.07,
        "RSI": 57.61180532746171,
        "MACD_macd": 373.900755154682,
        "MACD_signal": 429.7030876260782,
        "ATR": 659.4375445478026,
        "ADX": 17.268324954645674,
        "Stoch_K": 56.2592319054649,
        "Stoch_D": 50.73239783357939,
        "StochRSI_K": 31.874669825255612,
        "StochRSI_D": 21.832484526217367,
        "BB_upper": 110449.27058059181,
        "BB_lower": 108377.18941940821,
        "BB_middle": 109413.23000000001,
        "EMA5": 109688.22025679791,
        "EMA21": 109371.88844002243,
        "EMA55": 108403.7962979979,
        "EMA144": 106725.9008448297,
        "EMA200": 106169.70529485871,
        "VWAP": 106980.94801824534
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22973323238.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104041.8",
        "lastSz": "0.01",
        "askPx": "104041.9",
        "askSz": "405.61",
        "bidPx": "104041.8",
        "bidSz": "666.66",
        "open24h": "105476.9",
        "high24h": "105793.4",
        "low24h": "103022.1",
        "volCcy24h": "74899.1868",
        "vol24h": "7489918.68",
        "ts": "1748699885512",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110365.18 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T13:58:06+00:00Z"
}
[gemini_api_caller.py][21:58:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][21:58:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_215755.png
[gemini_api_caller.py][21:58:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][21:58:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][21:58:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][21:58:07] [INFO] AFC remote call 1 is done.
[_client.py][21:58:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][21:58:48] [INFO] 截图模块运行中...
[截图模块][21:58:48] [INFO]  __main__ 入口被执行
[截图模块][21:58:48] [INFO]  启动时主动清理内存...
[截图模块][21:58:49] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][21:58:49] [INFO]  已执行 pkill chrome
[截图模块][21:58:51] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][21:58:51] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][21:58:51] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][21:58:51] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][21:58:51] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][21:58:51] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][21:58:51] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][21:59:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][21:59:03] [INFO]  启动浏览器 (有头模式)
[截图模块][21:59:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][21:59:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][21:59:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][21:59:45] [INFO]  打开目标图表页...
[截图模块][21:59:51] [INFO]  等待5秒加载页面...
[截图模块][21:59:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][21:59:56] [INFO]  快捷键已发送
[截图模块][21:59:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_215958.png
[截图模块][21:59:58] [INFO]  关闭浏览器...
[数据收集总模块][21:59:58] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_215958.png
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:48] [INFO]  __main__ 入口被执行
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:48] [INFO]  启动时主动清理内存...
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:49] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:49] [INFO]  已执行 pkill chrome
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:58:51] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:45] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:45] [INFO]  打开目标图表页...
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:51] [INFO]  等待5秒加载页面...
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:56] [INFO]  快捷键已发送
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_215958.png
[数据收集总模块][21:59:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][21:59:58] [INFO]  关闭浏览器...
[数据收集总模块][21:59:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_215958.png
[数据收集总模块][21:59:58] [INFO] 技术指标模块运行中...
[技术指标模块][21:59:59] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][21:59:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][21:59:59] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:00:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:00:00] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:00:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:00:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:00:01] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:00:01] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:00:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:00:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:00:05] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:00:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:00:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:00:06] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:00:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:00:06] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:00:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:00:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_215958.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2609.14,
        "volume": 509435.52,
        "RSI": 68.31290018285142,
        "MACD_macd": 10.429122317055317,
        "MACD_signal": 9.808150713502007,
        "ATR": 20.261203952147472,
        "ADX": 42.13575071801778,
        "Stoch_K": 75.94104760007961,
        "Stoch_D": 73.83905440677863,
        "StochRSI_K": 69.29081668137385,
        "StochRSI_D": 56.28410024703709,
        "BB_upper": 2629.1093926638364,
        "BB_lower": 2535.799607336164,
        "BB_middle": 2582.4545000000003,
        "EMA5": 2599.1088987613734,
        "EMA21": 2585.5316658280362,
        "EMA55": 2565.5002433620953,
        "EMA144": 2545.8569751584773,
        "EMA200": 2541.521202004681,
        "VWAP": 2542.6534308664473
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.04,
        "volume": 2337671.44,
        "RSI": 33.629579874970034,
        "MACD_macd": -2.384147162606041,
        "MACD_signal": 0.883067829466401,
        "ATR": 28.172884681512,
        "ADX": 21.83667478731541,
        "Stoch_K": 17.877586966094054,
        "Stoch_D": 20.33668704435024,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196877632115718,
        "BB_upper": 2691.0988631551268,
        "BB_lower": 2623.7911368448727,
        "BB_middle": 2657.4449999999997,
        "EMA5": 2645.4371504092596,
        "EMA21": 2655.3278802341247,
        "EMA55": 2650.647191285864,
        "EMA144": 2616.279507148999,
        "EMA200": 2601.5014805485694,
        "VWAP": 2632.5661580426527
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0031%",
      "FGI": "50/100",
      "open_interest": "$588672061.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2531.03",
        "lastSz": "2.07",
        "askPx": "2531.04",
        "askSz": "1668.97",
        "bidPx": "2531.03",
        "bidSz": "1031.42",
        "open24h": "2582.26",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4312832.854",
        "vol24h": "43128328.54",
        "ts": "1748700007109",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:00:07+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110335.32 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "13.191809999998508 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:00:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:00:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_215958.png
[gemini_api_caller.py][22:00:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:00:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:00:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:00:09] [INFO] AFC remote call 1 is done.
[_client.py][22:00:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:08:45] [INFO] 截图模块运行中...
[截图模块][22:08:47] [INFO]  __main__ 入口被执行
[截图模块][22:08:47] [INFO]  启动时主动清理内存...
[截图模块][22:08:47] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:08:47] [INFO]  已执行 pkill chrome
[截图模块][22:08:50] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:08:50] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:08:50] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][22:08:50] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][22:08:50] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:08:50] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:08:50] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:09:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:09:03] [INFO] 启动浏览器 (有头模式)
[截图模块][22:09:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:09:40] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:09:40] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:09:40] [INFO]  打开目标图表页...
[截图模块][22:09:47] [INFO]  等待5秒加载页面...
[截图模块][22:09:52] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:09:53] [INFO]  快捷键已发送
[截图模块][22:09:54] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_220954.png
[截图模块][22:09:54] [INFO]  关闭浏览器...
[数据收集总模块][22:09:54] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_220954.png
[数据收集总模块][22:09:54] [INFO] 技术指标模块运行中...
[技术指标模块][22:09:55] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:09:56] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:09:56] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:09:56] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:09:56] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:09:57] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:09:57] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:09:57] [INFO] 宏观因子模块运行中...
[数据收集总模块][22:10:00] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:10:00] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:10:01] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:10:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:10:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:10:02] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:10:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:10:03] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:10:03] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:10:03] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_220954.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105589.9,
        "volume": 74520.18,
        "RSI": 60.02661455791109,
        "MACD_macd": 321.6288712755486,
        "MACD_signal": 295.9864150130654,
        "ATR": 484.9725026584858,
        "ADX": 32.39918292219374,
        "Stoch_K": 73.69446317524489,
        "Stoch_D": 82.86009347313298,
        "StochRSI_K": 22.896953270282733,
        "StochRSI_D": 41.74748781451925,
        "BB_upper": 106405.88901887565,
        "BB_lower": 103655.21098112436,
        "BB_middle": 105030.55,
        "EMA5": 105563.7713619818,
        "EMA21": 105172.01423564539,
        "EMA55": 104671.4009848291,
        "EMA144": 104278.42461573686,
        "EMA200": 104206.8285962617,
        "VWAP": 104262.05614746515
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$23006116848.999977 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104337.9",
        "lastSz": "0.2",
        "askPx": "104338",
        "askSz": "224.94",
        "bidPx": "104337.9",
        "bidSz": "1000.87",
        "open24h": "105553.8",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "74825.2956",
        "vol24h": "7482529.56",
        "ts": "1748700602716",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110162.99 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:10:03+00:00Z"
}
[gemini_api_caller.py][22:10:05] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:10:05] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_220954.png
[gemini_api_caller.py][22:10:05] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:10:05] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:10:05] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:10:05] [INFO] AFC remote call 1 is done.
[_client.py][22:10:08] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:10:54] [INFO] 截图模块运行中...
[截图模块][22:10:55] [INFO]  __main__ 入口被执行
[截图模块][22:10:55] [INFO]  启动时主动清理内存...
[截图模块][22:10:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:10:55] [INFO]  已执行 pkill chrome
[截图模块][22:10:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:10:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:10:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][22:10:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][22:10:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:10:57] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:10:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:11:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:11:02] [INFO]  启动浏览器 (有头模式)
[截图模块][22:11:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:11:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:11:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:11:15] [INFO]  打开目标图表页...
[截图模块][22:11:22] [INFO]  等待5秒加载页面...
[截图模块][22:11:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:11:27] [INFO]  快捷键已发送
[截图模块][22:11:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_221128.png
[截图模块][22:11:28] [INFO]  关闭浏览器...
[数据收集总模块][22:11:28] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_221128.png
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:55] [INFO]  __main__ 入口被执行
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:55] [INFO]  启动时主动清理内存...
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:55] [INFO]  已执行 pkill chrome
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:10:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:02] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:15] [INFO]  打开目标图表页...
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:22] [INFO]  等待5秒加载页面...
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:27] [INFO]  快捷键已发送
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_221128.png
[数据收集总模块][22:11:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:11:28] [INFO]  关闭浏览器...
[数据收集总模块][22:11:28] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_221128.png
[数据收集总模块][22:11:28] [INFO] 技术指标模块运行中...
[技术指标模块][22:11:29] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:11:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:11:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:11:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:11:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:11:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:11:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:11:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:11:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:11:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:11:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:11:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:11:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:11:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:11:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:11:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:11:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:11:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:11:37] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_221128.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2604.01,
        "volume": 475503.73,
        "RSI": 65.22464268604726,
        "MACD_macd": 9.557988858926365,
        "MACD_signal": 9.651933432307251,
        "ATR": 20.730619515558573,
        "ADX": 39.168509627800056,
        "Stoch_K": 72.95380875202618,
        "Stoch_D": 73.24068354266457,
        "StochRSI_K": 61.120071531333195,
        "StochRSI_D": 52.42868049475275,
        "BB_upper": 2626.680939009502,
        "BB_lower": 2532.1330609904985,
        "BB_middle": 2579.407,
        "EMA5": 2594.0933481420598,
        "EMA21": 2583.1709401709286,
        "EMA55": 2563.9208284716433,
        "EMA144": 2545.313223797585,
        "EMA200": 2541.34324048958,
        "VWAP": 2541.8145159046303
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.39,
        "volume": 898239.11,
        "RSI": 33.82679793195051,
        "MACD_macd": -0.9134123528006057,
        "MACD_signal": 1.7031555999983345,
        "ATR": 28.256405338416084,
        "ADX": 20.73470069614189,
        "Stoch_K": 13.793103448275515,
        "Stoch_D": 21.31530020110522,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196872637195827,
        "BB_upper": 2691.0174847874446,
        "BB_lower": 2623.981515212555,
        "BB_middle": 2657.4995,
        "EMA5": 2649.635725613889,
        "EMA21": 2657.1563050661293,
        "EMA55": 2651.0268877145436,
        "EMA144": 2614.8387558732134,
        "EMA200": 2599.453649502865,
        "VWAP": 2631.7314211991156
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "50/100",
      "open_interest": "$590012460.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2538.95",
        "lastSz": "10",
        "askPx": "2538.96",
        "askSz": "407.59",
        "bidPx": "2538.95",
        "bidSz": "1119.9",
        "open24h": "2578.9",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4290973.026",
        "vol24h": "42909730.26",
        "ts": "1748700697212",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:11:37+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110209.96 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-111.23211000000039 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:11:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:11:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_221128.png
[gemini_api_caller.py][22:11:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:11:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:11:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:11:39] [INFO] AFC remote call 1 is done.
[_client.py][22:11:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:27:55] [INFO] 截图模块运行中...
[截图模块][22:27:56] [INFO]  __main__ 入口被执行
[截图模块][22:27:56] [INFO]  启动时主动清理内存...
[截图模块][22:27:56] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:27:56] [INFO]  已执行 pkill chrome
[截图模块][22:27:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:27:58] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:27:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][22:27:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][22:27:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:27:58] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:27:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:28:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:28:13] [INFO] 启动浏览器 (有头模式)
[截图模块][22:28:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:28:55] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:28:55] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:28:55] [INFO]  打开目标图表页...
[截图模块][22:29:02] [INFO]  等待5秒加载页面...
[截图模块][22:29:07] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:29:08] [INFO]  快捷键已发送
[截图模块][22:29:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_222909.png
[截图模块][22:29:09] [INFO]  关闭浏览器...
[数据收集总模块][22:29:09] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_222909.png
[数据收集总模块][22:29:09] [INFO] 技术指标模块运行中...
[技术指标模块][22:29:10] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:29:11] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:29:11] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:29:11] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:29:11] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:29:12] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:29:12] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:29:12] [INFO] 宏观因子模块运行中...
[数据收集总模块][22:29:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:29:15] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:29:17] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:29:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:29:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:29:17] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:29:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:29:18] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:29:18] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:29:18] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_222909.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105577.9,
        "volume": 145445.84,
        "RSI": 59.691655490651875,
        "MACD_macd": 327.06549682428886,
        "MACD_signal": 289.3768830123802,
        "ATR": 511.4607340792762,
        "ADX": 31.60071638734458,
        "Stoch_K": 81.29218403833237,
        "Stoch_D": 84.41319880965271,
        "StochRSI_K": 24.539586960773033,
        "StochRSI_D": 54.82273193725323,
        "BB_upper": 106354.35839174163,
        "BB_lower": 103573.20160825837,
        "BB_middle": 104963.78,
        "EMA5": 105550.70704297267,
        "EMA21": 105130.24765823234,
        "EMA55": 104644.90993341903,
        "EMA144": 104329.76335503352,
        "EMA200": 104295.33407233133,
        "VWAP": 104249.34035993941
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22927612703.999977 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104235.6",
        "lastSz": "24.6",
        "askPx": "104235.6",
        "askSz": "419.72",
        "bidPx": "104235.5",
        "bidSz": "170.72",
        "open24h": "105172.9",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "74188.8123",
        "vol24h": "7418881.23",
        "ts": "1748701757611",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110254.13 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:29:18+00:00Z"
}
[数据收集总模块][22:30:02] [INFO] 截图模块运行中...
[数据收集总模块][22:30:03] [INFO] 截图模块运行中...
[截图模块][22:30:05] [INFO]  __main__ 入口被执行
[截图模块][22:30:05] [INFO]  启动时主动清理内存...
[截图模块][22:30:05] [INFO]  __main__ 入口被执行
[截图模块][22:30:05] [INFO]  启动时主动清理内存...
[截图模块][22:30:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:30:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:30:05] [ERROR]  删除文件失败: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_222909.png, [Errno 2] No such file or directory: '/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_222909.png'
[截图模块][22:30:05] [INFO]  已执行 pkill chrome
[截图模块][22:30:05] [INFO]  已执行 pkill chrome
[截图模块][22:30:05] [ERROR]  第1次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 2] No such file or directory: 'data_3'
[截图模块][22:30:06] [ERROR]  第2次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'js'
[截图模块][22:30:07] [ERROR]  第3次删除目录失败: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile, [Errno 39] Directory not empty: 'Cache_Data'
[截图模块][22:30:08] [ERROR]  多次尝试后仍无法删除目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile，请手动清理！
[截图模块][22:30:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:30:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:30:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:30:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:30:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:30:08] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][22:30:08] [INFO] 技术指标模块运行中...
[技术指标模块][22:30:10] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:30:10] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:30:10] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:30:11] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:30:11] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[截图模块][22:30:11] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[技术指标模块][22:30:11] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:30:11] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:11] [INFO] 宏观因子模块运行中...
[截图模块][22:30:13] [INFO] 启动浏览器 (有头模式)
[数据收集总模块][22:30:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:15] [INFO] OKX 持仓模块运行中...
[截图模块][22:30:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[get_positions.py][22:30:16] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:30:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:30:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:30:17] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:30:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:30:18] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:30:18] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:19] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105795.3,
        "volume": 132083.57,
        "RSI": 68.73475029410137,
        "MACD_macd": 330.68236166838324,
        "MACD_signal": 280.0331852181243,
        "ATR": 515.2546242106094,
        "ADX": 33.2812235819521,
        "Stoch_K": 93.5936332058217,
        "Stoch_D": 86.57553360153356,
        "StochRSI_K": 77.80611656712668,
        "StochRSI_D": 69.79618313013174,
        "BB_upper": 106283.82077500575,
        "BB_lower": 103554.67922499425,
        "BB_middle": 104919.25,
        "EMA5": 105537.110564459,
        "EMA21": 105085.47374737293,
        "EMA55": 104607.38583535481,
        "EMA144": 104284.82384188625,
        "EMA200": 104242.0539094157,
        "VWAP": 104227.25434727913
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22921376287.99996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104279.9",
        "lastSz": "0.02",
        "askPx": "104280",
        "askSz": "438.61",
        "bidPx": "104279.9",
        "bidSz": "653.84",
        "open24h": "105295.3",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "74118.1744",
        "vol24h": "7411817.44",
        "ts": "1748701818571",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110212.45 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:30:19+00:00Z"
}
[gemini_api_caller.py][22:30:20] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:30:20] [INFO] screenshot_path导入完成,path:
[gemini_api_caller.py][22:30:20] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:30:20] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][22:30:21] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[数据收集总模块][22:30:28] [INFO] 截图模块运行中...
[截图模块][22:30:30] [INFO]  __main__ 入口被执行
[截图模块][22:30:30] [INFO]  启动时主动清理内存...
[截图模块][22:30:30] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:30:30] [INFO]  已执行 pkill chrome
[数据收集总模块][22:30:30] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][22:30:30] [INFO] 技术指标模块运行中...
[技术指标模块][22:30:32] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:30:33] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:30:33] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[截图模块][22:30:34] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:30:34] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:30:34] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][22:30:34] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][22:30:34] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:30:34] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:30:34] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[技术指标模块][22:30:34] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:30:34] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:30:35] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:30:35] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:35] [INFO] 宏观因子模块运行中...
[截图模块][22:30:36] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:30:37] [INFO]  启动浏览器 (有头模式)
[截图模块][22:30:37] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:30:39] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:39] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:30:40] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:30:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:30:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:30:41] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:30:42] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:30:42] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:30:42] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:42] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105795.3,
        "volume": 132083.57,
        "RSI": 68.73475029410137,
        "MACD_macd": 330.68236166838324,
        "MACD_signal": 280.0331852181243,
        "ATR": 515.2546242106094,
        "ADX": 33.2812235819521,
        "Stoch_K": 93.5936332058217,
        "Stoch_D": 86.57553360153356,
        "StochRSI_K": 77.80611656712668,
        "StochRSI_D": 69.79618313013174,
        "BB_upper": 106283.82077500575,
        "BB_lower": 103554.67922499425,
        "BB_middle": 104919.25,
        "EMA5": 105537.110564459,
        "EMA21": 105085.47374737293,
        "EMA55": 104607.38583535481,
        "EMA144": 104284.82384188625,
        "EMA200": 104242.0539094157,
        "VWAP": 104227.25434727913
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22920748316.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104284",
        "lastSz": "0.02",
        "askPx": "104284.1",
        "askSz": "181.91",
        "bidPx": "104284",
        "bidSz": "716.86",
        "open24h": "105295.3",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "74133.1953",
        "vol24h": "7413319.53",
        "ts": "1748701841859",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110215.56 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:30:42+00:00Z"
}
[gemini_api_caller.py][22:30:44] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:30:44] [INFO] screenshot_path导入完成,path:
[gemini_api_caller.py][22:30:44] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:30:44] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][22:30:44] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[数据收集总模块][22:30:51] [INFO] 截图模块运行中...
[截图模块][22:30:52] [INFO]  __main__ 入口被执行
[截图模块][22:30:52] [INFO]  启动时主动清理内存...
[截图模块][22:30:52] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:30:53] [INFO]  已执行 pkill chrome
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:30] [INFO]  __main__ 入口被执行
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:30] [INFO]  启动时主动清理内存...
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:30] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:30] [INFO]  已执行 pkill chrome
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:34] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:36] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:37] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:37] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] Traceback (most recent call last):
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/ETH_code/tradingview_auto_screenshot.py", line 288, in <module>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     result = main()
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/ETH_code/tradingview_auto_screenshot.py", line 278, in main
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     driver = create_driver(headless=True, user_data_dir=DEFAULT_USER_DATA_DIR) # 将headless设置为False
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/ETH_code/tradingview_auto_screenshot.py", line 137, in create_driver
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     driver.get(TRADINGVIEW_URL)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/__init__.py", line 629, in get_wrapped
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     return orig_get(*args, **kwargs)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/__init__.py", line 665, in get
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     return super().get(url)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/selenium/webdriver/remote/webdriver.py", line 472, in get
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.execute(Command.GET, {"url": url})
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/selenium/webdriver/remote/webdriver.py", line 447, in execute
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.error_handler.check_response(response)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/selenium/webdriver/remote/errorhandler.py", line 232, in check_response
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]     raise exception_class(message, screen, stacktrace)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] selenium.common.exceptions.InvalidSessionIdException: Message: invalid session id: session deleted as the browser has closed the connection
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] from disconnected: Unable to receive message from renderer
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr]   (Session info: chrome=136.0.7103.113)
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] Stacktrace:
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #0 0x55b4eda5471a <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #1 0x55b4ed4f70a0 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #2 0x55b4ed4deea0 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #3 0x55b4ed4deba2 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #4 0x55b4ed4dc9ef <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #5 0x55b4ed4dd1aa <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #6 0x55b4ed4fa5d9 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #7 0x55b4ed594eb5 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #8 0x55b4ed56e3a2 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #9 0x55b4ed5942a0 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #10 0x55b4ed56e173 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #11 0x55b4ed53ad4b <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #12 0x55b4ed53b9b1 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #13 0x55b4eda198cb <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #14 0x55b4eda1d7ca <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #15 0x55b4eda01622 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #16 0x55b4eda1e354 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #17 0x55b4ed9e645f <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #18 0x55b4eda424f8 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #19 0x55b4eda426d6 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #20 0x55b4eda53586 <unknown>
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] #21 0x7fe492e753fb start_thread
[数据收集总模块][22:30:53] [ERROR] [tradingview_auto_screenshot.py][stderr] 
[数据收集总模块][22:30:53] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][22:30:53] [INFO] 技术指标模块运行中...
[技术指标模块][22:30:55] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:30:56] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:30:56] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[截图模块][22:30:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:30:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:30:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][22:30:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][22:30:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:30:56] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:30:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[技术指标模块][22:30:56] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:30:56] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:30:57] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:30:57] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:30:57] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:30:58] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:31:01] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:31:01] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:31:02] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:31:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:31:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:31:02] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:31:03] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:31:03] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:31:04] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2593.28,
        "volume": 921211.78,
        "RSI": 57.972804432483024,
        "MACD_macd": 8.99252886285467,
        "MACD_signal": 9.882132762897085,
        "ATR": 19.984317727549904,
        "ADX": 34.6232938412908,
        "Stoch_K": 74.14593500773748,
        "Stoch_D": 63.163115502122984,
        "StochRSI_K": 57.724570830857544,
        "StochRSI_D": 41.50394473941882,
        "BB_upper": 2622.442804290764,
        "BB_lower": 2529.5541957092364,
        "BB_middle": 2575.9985,
        "EMA5": 2587.7025333196334,
        "EMA21": 2579.99625916565,
        "EMA55": 2561.5050311311475,
        "EMA144": 2545.296316888082,
        "EMA200": 2542.343753169317,
        "VWAP": 2540.2045024623794
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.39,
        "volume": 898239.11,
        "RSI": 33.82679793195051,
        "MACD_macd": -0.9134123528006057,
        "MACD_signal": 1.7031555999983345,
        "ATR": 28.256405338416084,
        "ADX": 20.73470069614189,
        "Stoch_K": 13.793103448275515,
        "Stoch_D": 21.31530020110522,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196872637195827,
        "BB_upper": 2691.0174847874446,
        "BB_lower": 2623.981515212555,
        "BB_middle": 2657.4995,
        "EMA5": 2649.635725613889,
        "EMA21": 2657.1563050661293,
        "EMA55": 2651.0268877145436,
        "EMA144": 2614.8387558732134,
        "EMA200": 2599.453649502865,
        "VWAP": 2631.7314211991156
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0023%",
      "FGI": "50/100",
      "open_interest": "$588140304.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2538.65",
        "lastSz": "0.01",
        "askPx": "2538.65",
        "askSz": "16.11",
        "bidPx": "2538.64",
        "bidSz": "2053.87",
        "open24h": "2594.29",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4245609.056",
        "vol24h": "42456090.56",
        "ts": "1748701864074",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:31:04+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110215.09 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-106.30442999999788 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:31:05] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:31:05] [INFO] screenshot_path导入完成,path:
[gemini_api_caller.py][22:31:05] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:31:05] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][22:31:06] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/ETH_code/gemini_api_caller.py", line 107, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[截图模块][22:31:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:31:07] [INFO]  启动浏览器 (有头模式)
[截图模块][22:31:07] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:31:18] [INFO] 截图模块运行中...
[截图模块][22:31:19] [INFO]  __main__ 入口被执行
[截图模块][22:31:19] [INFO]  启动时主动清理内存...
[截图模块][22:31:19] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:31:19] [INFO]  已执行 pkill chrome
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:52] [INFO]  __main__ 入口被执行
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:52] [INFO]  启动时主动清理内存...
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:52] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:53] [INFO]  已执行 pkill chrome
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:30:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:31:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:31:07] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:31:07] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] Traceback (most recent call last):
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/ETH_code/tradingview_auto_screenshot.py", line 288, in <module>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     result = main()
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/ETH_code/tradingview_auto_screenshot.py", line 278, in main
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     driver = create_driver(headless=True, user_data_dir=DEFAULT_USER_DATA_DIR) # 将headless设置为False
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/ETH_code/tradingview_auto_screenshot.py", line 137, in create_driver
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     driver.get(TRADINGVIEW_URL)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/__init__.py", line 629, in get_wrapped
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     return orig_get(*args, **kwargs)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/undetected_chromedriver/__init__.py", line 665, in get
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     return super().get(url)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/selenium/webdriver/remote/webdriver.py", line 472, in get
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.execute(Command.GET, {"url": url})
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/selenium/webdriver/remote/webdriver.py", line 447, in execute
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     self.error_handler.check_response(response)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   File "/root/codespace/Qwen_quant_v1/venv_selenium/lib/python3.10/site-packages/selenium/webdriver/remote/errorhandler.py", line 232, in check_response
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]     raise exception_class(message, screen, stacktrace)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] selenium.common.exceptions.InvalidSessionIdException: Message: invalid session id: session deleted as the browser has closed the connection
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] from disconnected: Unable to receive message from renderer
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr]   (Session info: chrome=136.0.7103.113)
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] Stacktrace:
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #0 0x56041f25471a <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #1 0x56041ecf70a0 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #2 0x56041ecdeea0 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #3 0x56041ecdeba2 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #4 0x56041ecdc9ef <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #5 0x56041ecdd1aa <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #6 0x56041ecfa5d9 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #7 0x56041ed94eb5 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #8 0x56041ed6e3a2 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #9 0x56041ed942a0 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #10 0x56041ed6e173 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #11 0x56041ed3ad4b <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #12 0x56041ed3b9b1 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #13 0x56041f2198cb <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #14 0x56041f21d7ca <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #15 0x56041f201622 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #16 0x56041f21e354 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #17 0x56041f1e645f <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #18 0x56041f2424f8 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #19 0x56041f2426d6 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #20 0x56041f253586 <unknown>
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] #21 0x7fa65946a3fb start_thread
[数据收集总模块][22:31:20] [ERROR] [tradingview_auto_screenshot.py][stderr] 
[数据收集总模块][22:31:20] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][22:31:20] [INFO] 技术指标模块运行中...
[技术指标模块][22:31:23] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:31:23] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:31:23] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[截图模块][22:31:24] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:31:24] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:31:24] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][22:31:24] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][22:31:24] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:31:24] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:31:24] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[技术指标模块][22:31:24] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:31:24] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:31:25] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:31:25] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:31:25] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:31:26] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:31:27] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:31:27] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:31:29] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:31:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:31:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:31:29] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:31:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:31:30] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:31:30] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:31:31] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2593.28,
        "volume": 921211.78,
        "RSI": 57.972804432483024,
        "MACD_macd": 8.99252886285467,
        "MACD_signal": 9.882132762897085,
        "ATR": 19.984317727549904,
        "ADX": 34.6232938412908,
        "Stoch_K": 74.14593500773748,
        "Stoch_D": 63.163115502122984,
        "StochRSI_K": 57.724570830857544,
        "StochRSI_D": 41.50394473941882,
        "BB_upper": 2622.442804290764,
        "BB_lower": 2529.5541957092364,
        "BB_middle": 2575.9985,
        "EMA5": 2587.7025333196334,
        "EMA21": 2579.99625916565,
        "EMA55": 2561.5050311311475,
        "EMA144": 2545.296316888082,
        "EMA200": 2542.343753169317,
        "VWAP": 2540.2045024623794
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.39,
        "volume": 898239.11,
        "RSI": 33.82679793195051,
        "MACD_macd": -0.9134123528006057,
        "MACD_signal": 1.7031555999983345,
        "ATR": 28.256405338416084,
        "ADX": 20.73470069614189,
        "Stoch_K": 13.793103448275515,
        "Stoch_D": 21.31530020110522,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196872637195827,
        "BB_upper": 2691.0174847874446,
        "BB_lower": 2623.981515212555,
        "BB_middle": 2657.4995,
        "EMA5": 2649.635725613889,
        "EMA21": 2657.1563050661293,
        "EMA55": 2651.0268877145436,
        "EMA144": 2614.8387558732134,
        "EMA200": 2599.453649502865,
        "VWAP": 2631.7314211991156
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0023%",
      "FGI": "50/100",
      "open_interest": "$588270435.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2539.23",
        "lastSz": "0.03",
        "askPx": "2539.29",
        "askSz": "2807.41",
        "bidPx": "2539.2",
        "bidSz": "2.86",
        "open24h": "2594.29",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4245985.29",
        "vol24h": "42459852.9",
        "ts": "1748701890214",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:31:31+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110196.58 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-124.32125999999899 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:31:32] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:31:32] [INFO] screenshot_path导入完成,path:
[gemini_api_caller.py][22:31:32] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:31:32] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][22:31:32] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/ETH_code/gemini_api_caller.py", line 107, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[截图模块][22:31:40] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:31:41] [INFO] 启动浏览器 (有头模式)
[截图模块][22:31:43] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:32:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:32:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:32:18] [INFO]  打开目标图表页...
[截图模块][22:32:26] [INFO]  等待5秒加载页面...
[截图模块][22:32:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:32:32] [INFO]  快捷键已发送
[截图模块][22:32:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223233.png
[截图模块][22:32:33] [INFO]  关闭浏览器...
[数据收集总模块][22:32:33] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223233.png
[数据收集总模块][22:32:33] [INFO] 技术指标模块运行中...
[技术指标模块][22:32:34] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:32:34] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:32:34] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:32:35] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:32:35] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:32:35] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:32:36] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:32:36] [INFO] 宏观因子模块运行中...
[数据收集总模块][22:32:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:32:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:32:39] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:32:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:32:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:32:40] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:32:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:32:40] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:32:41] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:32:41] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223233.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105795.3,
        "volume": 132083.57,
        "RSI": 68.73475029410137,
        "MACD_macd": 330.68236166838324,
        "MACD_signal": 280.0331852181243,
        "ATR": 515.2546242106094,
        "ADX": 33.2812235819521,
        "Stoch_K": 93.5936332058217,
        "Stoch_D": 86.57553360153356,
        "StochRSI_K": 77.80611656712668,
        "StochRSI_D": 69.79618313013174,
        "BB_upper": 106283.82077500575,
        "BB_lower": 103554.67922499425,
        "BB_middle": 104919.25,
        "EMA5": 105537.110564459,
        "EMA21": 105085.47374737293,
        "EMA55": 104607.38583535481,
        "EMA144": 104284.82384188625,
        "EMA200": 104242.0539094157,
        "VWAP": 104227.25434727913
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22920619143.99996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104286.7",
        "lastSz": "0.02",
        "askPx": "104286.8",
        "askSz": "1341.34",
        "bidPx": "104286.7",
        "bidSz": "61.38",
        "open24h": "105400",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "73894.3514",
        "vol24h": "7389435.14",
        "ts": "1748701961111",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110241.84 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:32:41+00:00Z"
}
[gemini_api_caller.py][22:32:42] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:32:42] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223233.png
[gemini_api_caller.py][22:32:42] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:32:42] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:32:43] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:32:43] [INFO] AFC remote call 1 is done.
[_client.py][22:32:46] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:33:30] [INFO] 截图模块运行中...
[截图模块][22:33:31] [INFO]  __main__ 入口被执行
[截图模块][22:33:31] [INFO]  启动时主动清理内存...
[截图模块][22:33:31] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:33:31] [INFO]  已执行 pkill chrome
[截图模块][22:33:33] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:33:33] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:33:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][22:33:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][22:33:33] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:33:33] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:33:33] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:33:35] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:33:37] [INFO]  启动浏览器 (有头模式)
[截图模块][22:33:37] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:34:10] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:34:10] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:34:10] [INFO]  打开目标图表页...
[截图模块][22:34:16] [INFO]  等待5秒加载页面...
[截图模块][22:34:21] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:34:22] [INFO]  快捷键已发送
[截图模块][22:34:23] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_223423.png
[截图模块][22:34:23] [INFO]  关闭浏览器...
[数据收集总模块][22:34:23] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_223423.png
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:31] [INFO]  __main__ 入口被执行
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:31] [INFO]  启动时主动清理内存...
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:31] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:31] [INFO]  已执行 pkill chrome
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:33] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:35] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:37] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:33:37] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:10] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:10] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:10] [INFO]  打开目标图表页...
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:16] [INFO]  等待5秒加载页面...
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:21] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:22] [INFO]  快捷键已发送
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:23] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_223423.png
[数据收集总模块][22:34:23] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:34:23] [INFO]  关闭浏览器...
[数据收集总模块][22:34:23] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_223423.png
[数据收集总模块][22:34:23] [INFO] 技术指标模块运行中...
[技术指标模块][22:34:25] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:34:25] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:34:25] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:34:25] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:34:25] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:34:26] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:34:26] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:34:26] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:34:27] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:34:29] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:34:29] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:34:30] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:34:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:34:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:34:30] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:34:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:34:31] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:34:31] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:34:32] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_223423.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2593.28,
        "volume": 921211.78,
        "RSI": 57.972804432483024,
        "MACD_macd": 8.99252886285467,
        "MACD_signal": 9.882132762897085,
        "ATR": 19.984317727549904,
        "ADX": 34.6232938412908,
        "Stoch_K": 74.14593500773748,
        "Stoch_D": 63.163115502122984,
        "StochRSI_K": 57.724570830857544,
        "StochRSI_D": 41.50394473941882,
        "BB_upper": 2622.442804290764,
        "BB_lower": 2529.5541957092364,
        "BB_middle": 2575.9985,
        "EMA5": 2587.7025333196334,
        "EMA21": 2579.99625916565,
        "EMA55": 2561.5050311311475,
        "EMA144": 2545.296316888082,
        "EMA200": 2542.343753169317,
        "VWAP": 2540.2045024623794
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.39,
        "volume": 898239.11,
        "RSI": 33.82679793195051,
        "MACD_macd": -0.9134123528006057,
        "MACD_signal": 1.7031555999983345,
        "ATR": 28.256405338416084,
        "ADX": 20.73470069614189,
        "Stoch_K": 13.793103448275515,
        "Stoch_D": 21.31530020110522,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196872637195827,
        "BB_upper": 2691.0174847874446,
        "BB_lower": 2623.981515212555,
        "BB_middle": 2657.4995,
        "EMA5": 2649.635725613889,
        "EMA21": 2657.1563050661293,
        "EMA55": 2651.0268877145436,
        "EMA144": 2614.8387558732134,
        "EMA200": 2599.453649502865,
        "VWAP": 2631.7314211991156
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0022%",
      "FGI": "50/100",
      "open_interest": "$588441213.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2537.74",
        "lastSz": "4.13",
        "askPx": "2537.75",
        "askSz": "4036.67",
        "bidPx": "2537.74",
        "bidSz": "279.7",
        "open24h": "2593.36",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4226129.838",
        "vol24h": "42261298.38",
        "ts": "1748702071708",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:34:32+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110229.24 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-92.13734999999674 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:34:33] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:34:33] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_223423.png
[gemini_api_caller.py][22:34:33] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:34:33] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:34:34] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:34:34] [INFO] AFC remote call 1 is done.
[_client.py][22:34:37] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:37:39] [INFO] 截图模块运行中...
[截图模块][22:37:41] [INFO]  __main__ 入口被执行
[截图模块][22:37:41] [INFO]  启动时主动清理内存...
[截图模块][22:37:41] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:37:41] [INFO]  已执行 pkill chrome
[截图模块][22:37:44] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:37:44] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:37:44] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][22:37:44] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][22:37:44] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:37:44] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:37:44] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:37:46] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:37:48] [INFO] 启动浏览器 (有头模式)
[截图模块][22:37:50] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:38:24] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:38:24] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:38:24] [INFO]  打开目标图表页...
[截图模块][22:38:32] [INFO]  等待5秒加载页面...
[截图模块][22:38:37] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:38:37] [INFO]  快捷键已发送
[截图模块][22:38:38] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223838.png
[截图模块][22:38:38] [INFO]  关闭浏览器...
[数据收集总模块][22:38:39] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223838.png
[数据收集总模块][22:38:39] [INFO] 技术指标模块运行中...
[技术指标模块][22:38:40] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:38:40] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:38:40] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:38:41] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:38:41] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:38:41] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:38:42] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:38:42] [INFO] 宏观因子模块运行中...
[数据收集总模块][22:38:44] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:38:44] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:38:45] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:38:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:38:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:38:46] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:38:47] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:38:47] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:38:47] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:38:47] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223838.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105795.3,
        "volume": 132083.57,
        "RSI": 68.73475029410137,
        "MACD_macd": 330.68236166838324,
        "MACD_signal": 280.0331852181243,
        "ATR": 515.2546242106094,
        "ADX": 33.2812235819521,
        "Stoch_K": 93.5936332058217,
        "Stoch_D": 86.57553360153356,
        "StochRSI_K": 77.80611656712668,
        "StochRSI_D": 69.79618313013174,
        "BB_upper": 106283.82077500575,
        "BB_lower": 103554.67922499425,
        "BB_middle": 104919.25,
        "EMA5": 105537.110564459,
        "EMA21": 105085.47374737293,
        "EMA55": 104607.38583535481,
        "EMA144": 104284.82384188625,
        "EMA200": 104242.0539094157,
        "VWAP": 104227.25434727913
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22923447067.999973 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104319.9",
        "lastSz": "0.02",
        "askPx": "104320",
        "askSz": "464.99",
        "bidPx": "104319.9",
        "bidSz": "1199.9",
        "open24h": "105574.8",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "73416.4945",
        "vol24h": "7341649.45",
        "ts": "1748702327265",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110222.87 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:38:47+00:00Z"
}
[gemini_api_caller.py][22:38:49] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:38:49] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_223838.png
[gemini_api_caller.py][22:38:49] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:38:49] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:38:49] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:38:49] [INFO] AFC remote call 1 is done.
[_client.py][22:38:52] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:40:15] [INFO] 截图模块运行中...
[截图模块][22:40:16] [INFO]  __main__ 入口被执行
[截图模块][22:40:16] [INFO]  启动时主动清理内存...
[截图模块][22:40:16] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:40:16] [INFO]  已执行 pkill chrome
[截图模块][22:40:19] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:40:19] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:40:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][22:40:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][22:40:19] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:40:19] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:40:19] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:40:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:40:25] [INFO]  启动浏览器 (有头模式)
[截图模块][22:40:25] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:40:58] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:40:58] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:40:58] [INFO]  打开目标图表页...
[截图模块][22:41:05] [INFO]  等待5秒加载页面...
[截图模块][22:41:10] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:41:10] [INFO]  快捷键已发送
[截图模块][22:41:11] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224111.png
[截图模块][22:41:11] [INFO]  关闭浏览器...
[数据收集总模块][22:41:12] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224111.png
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:16] [INFO]  __main__ 入口被执行
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:16] [INFO]  启动时主动清理内存...
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:16] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:16] [INFO]  已执行 pkill chrome
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:19] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:25] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:25] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:58] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:58] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:40:58] [INFO]  打开目标图表页...
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:41:05] [INFO]  等待5秒加载页面...
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:41:10] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:41:10] [INFO]  快捷键已发送
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:41:11] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224111.png
[数据收集总模块][22:41:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:41:11] [INFO]  关闭浏览器...
[数据收集总模块][22:41:12] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224111.png
[数据收集总模块][22:41:12] [INFO] 技术指标模块运行中...
[技术指标模块][22:41:13] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:41:13] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:41:13] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:41:14] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:41:14] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:41:14] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:41:14] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:41:14] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:41:15] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:41:17] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:41:17] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:41:18] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:41:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:41:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:41:19] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:41:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:41:19] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:41:19] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:41:19] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224111.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2593.28,
        "volume": 921211.78,
        "RSI": 57.972804432483024,
        "MACD_macd": 8.99252886285467,
        "MACD_signal": 9.882132762897085,
        "ATR": 19.984317727549904,
        "ADX": 34.6232938412908,
        "Stoch_K": 74.14593500773748,
        "Stoch_D": 63.163115502122984,
        "StochRSI_K": 57.724570830857544,
        "StochRSI_D": 41.50394473941882,
        "BB_upper": 2622.442804290764,
        "BB_lower": 2529.5541957092364,
        "BB_middle": 2575.9985,
        "EMA5": 2587.7025333196334,
        "EMA21": 2579.99625916565,
        "EMA55": 2561.5050311311475,
        "EMA144": 2545.296316888082,
        "EMA200": 2542.343753169317,
        "VWAP": 2540.2045024623794
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.39,
        "volume": 898239.11,
        "RSI": 33.82679793195051,
        "MACD_macd": -0.9134123528006057,
        "MACD_signal": 1.7031555999983345,
        "ATR": 28.256405338416084,
        "ADX": 20.73470069614189,
        "Stoch_K": 13.793103448275515,
        "Stoch_D": 21.31530020110522,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196872637195827,
        "BB_upper": 2691.0174847874446,
        "BB_lower": 2623.981515212555,
        "BB_middle": 2657.4995,
        "EMA5": 2649.635725613889,
        "EMA21": 2657.1563050661293,
        "EMA55": 2651.0268877145436,
        "EMA144": 2614.8387558732134,
        "EMA200": 2599.453649502865,
        "VWAP": 2631.7314211991156
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0019%",
      "FGI": "50/100",
      "open_interest": "$588517878.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2539.35",
        "lastSz": "0.02",
        "askPx": "2539.36",
        "askSz": "3180.75",
        "bidPx": "2539.35",
        "bidSz": "0.02",
        "open24h": "2596.55",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4207148.576",
        "vol24h": "42071485.76",
        "ts": "1748702479533",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:41:19+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110197.98 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-123.24332999999648 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:41:21] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:41:21] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224111.png
[gemini_api_caller.py][22:41:21] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:41:21] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:41:21] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:41:21] [INFO] AFC remote call 1 is done.
[_client.py][22:41:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:45:02] [INFO] 截图模块运行中...
[截图模块][22:45:03] [INFO]  __main__ 入口被执行
[截图模块][22:45:03] [INFO]  启动时主动清理内存...
[截图模块][22:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:45:03] [INFO]  已执行 pkill chrome
[截图模块][22:45:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:45:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][22:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][22:45:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][22:45:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:45:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:45:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:45:11] [INFO] 启动浏览器 (有头模式)
[截图模块][22:45:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:45:48] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][22:45:48] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:45:48] [INFO]  打开目标图表页...
[截图模块][22:45:55] [INFO]  等待5秒加载页面...
[截图模块][22:46:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:46:01] [INFO]  快捷键已发送
[截图模块][22:46:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_224602.png
[截图模块][22:46:02] [INFO]  关闭浏览器...
[数据收集总模块][22:46:02] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_224602.png
[数据收集总模块][22:46:02] [INFO] 技术指标模块运行中...
[技术指标模块][22:46:03] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:46:04] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:46:04] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:46:04] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:46:04] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:46:05] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:46:05] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:46:05] [INFO] 宏观因子模块运行中...
[数据收集总模块][22:46:07] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:46:07] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:46:08] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][22:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:46:09] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][22:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:46:09] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:46:09] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:46:10] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_224602.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105448.7,
        "volume": 152612.47,
        "RSI": 60.457435006254485,
        "MACD_macd": 308.2205334783357,
        "MACD_signal": 267.26796767471717,
        "ATR": 527.4629884605054,
        "ADX": 33.62430385285542,
        "Stoch_K": 78.35377918480401,
        "Stoch_D": 79.01878534154649,
        "StochRSI_K": 62.12246637683224,
        "StochRSI_D": 60.74834885094099,
        "BB_upper": 106166.44074609102,
        "BB_lower": 103556.68925390896,
        "BB_middle": 104861.56499999999,
        "EMA5": 105408.0158466885,
        "EMA21": 105014.50250476843,
        "EMA55": 104567.28383159843,
        "EMA144": 104299.75243062916,
        "EMA200": 104279.42979493612,
        "VWAP": 104203.85255475502
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109643.3,
        "volume": 124688.2,
        "RSI": 53.931752904764835,
        "MACD_macd": 386.39300273255503,
        "MACD_signal": 443.592032167503,
        "ATR": 688.3815661767861,
        "ADX": 18.059388249165156,
        "Stoch_K": 50.207717872968985,
        "Stoch_D": 47.30274495322496,
        "StochRSI_K": 20.871538366947203,
        "StochRSI_D": 15.598209442217552,
        "BB_upper": 110414.02737122097,
        "BB_lower": 108327.61262877901,
        "BB_middle": 109370.81999999999,
        "EMA5": 109645.13038519686,
        "EMA21": 109331.64410084803,
        "EMA55": 108355.36571815624,
        "EMA144": 106704.8565172175,
        "EMA200": 106165.20959498588,
        "VWAP": 106945.17742557015
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22925786034.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104362.9",
        "lastSz": "1.13",
        "askPx": "104362.9",
        "askSz": "455.92",
        "bidPx": "104362.8",
        "bidSz": "545.37",
        "open24h": "105312",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "73110.5102",
        "vol24h": "7311051.02",
        "ts": "1748702769805",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110211.51 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T14:46:10+00:00Z"
}
[gemini_api_caller.py][22:46:11] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:46:11] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_224602.png
[gemini_api_caller.py][22:46:11] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:46:11] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:46:11] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:46:11] [INFO] AFC remote call 1 is done.
[_client.py][22:46:15] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][22:47:06] [INFO] 截图模块运行中...
[截图模块][22:47:08] [INFO]  __main__ 入口被执行
[截图模块][22:47:08] [INFO]  启动时主动清理内存...
[截图模块][22:47:08] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][22:47:08] [INFO]  已执行 pkill chrome
[截图模块][22:47:10] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:47:10] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][22:47:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][22:47:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][22:47:10] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][22:47:10] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][22:47:10] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][22:47:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][22:47:14] [INFO]  启动浏览器 (有头模式)
[截图模块][22:47:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:47:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][22:47:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][22:47:51] [INFO]  打开目标图表页...
[截图模块][22:47:58] [INFO]  等待5秒加载页面...
[截图模块][22:48:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][22:48:04] [INFO]  快捷键已发送
[截图模块][22:48:05] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224805.png
[截图模块][22:48:05] [INFO]  关闭浏览器...
[数据收集总模块][22:48:05] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224805.png
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:08] [INFO]  __main__ 入口被执行
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:08] [INFO]  启动时主动清理内存...
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:08] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:08] [INFO]  已执行 pkill chrome
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:10] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:14] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:51] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:51] [INFO]  打开目标图表页...
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:47:58] [INFO]  等待5秒加载页面...
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:48:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:48:04] [INFO]  快捷键已发送
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:48:05] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224805.png
[数据收集总模块][22:48:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][22:48:05] [INFO]  关闭浏览器...
[数据收集总模块][22:48:05] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224805.png
[数据收集总模块][22:48:05] [INFO] 技术指标模块运行中...
[技术指标模块][22:48:06] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][22:48:07] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][22:48:07] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][22:48:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][22:48:07] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][22:48:07] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][22:48:08] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:48:08] [INFO] 宏观因子模块运行中...
[宏观因子模块][22:48:08] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][22:48:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:48:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][22:48:11] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][22:48:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][22:48:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][22:48:12] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][22:48:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][22:48:13] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][22:48:13] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][22:48:14] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224805.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2575.92,
        "volume": 1202137.73,
        "RSI": 42.12340358574608,
        "MACD_macd": 8.941299572848493,
        "MACD_signal": 10.1030685586314,
        "ATR": 19.54959582287377,
        "ADX": 34.6762840700778,
        "Stoch_K": 53.48172836567097,
        "Stoch_D": 60.43328175217255,
        "StochRSI_K": 27.19473777101899,
        "StochRSI_D": 37.61701642344959,
        "BB_upper": 2620.5906002497622,
        "BB_lower": 2528.973399750238,
        "BB_middle": 2574.782,
        "EMA5": 2584.9137999794493,
        "EMA21": 2578.6680471214586,
        "EMA55": 2560.3836255853676,
        "EMA144": 2545.1384694594403,
        "EMA200": 2542.5861255503446,
        "VWAP": 2539.160923094554
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.39,
        "volume": 898239.11,
        "RSI": 33.82679793195051,
        "MACD_macd": -0.9134123528006057,
        "MACD_signal": 1.7031555999983345,
        "ATR": 28.256405338416084,
        "ADX": 20.73470069614189,
        "Stoch_K": 13.793103448275515,
        "Stoch_D": 21.31530020110522,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.3196872637195827,
        "BB_upper": 2691.0174847874446,
        "BB_lower": 2623.981515212555,
        "BB_middle": 2657.4995,
        "EMA5": 2649.635725613889,
        "EMA21": 2657.1563050661293,
        "EMA55": 2651.0268877145436,
        "EMA144": 2614.8387558732134,
        "EMA200": 2599.453649502865,
        "VWAP": 2631.7314211991156
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0015%",
      "FGI": "50/100",
      "open_interest": "$591348449.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2537.24",
        "lastSz": "8.51",
        "askPx": "2537.24",
        "askSz": "1084.92",
        "bidPx": "2537.23",
        "bidSz": "1029.9",
        "open24h": "2589.26",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4194256.631",
        "vol24h": "41942566.31",
        "ts": "1748702893104",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T14:48:13+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110235.0 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-86.43971999999842 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][22:48:15] [INFO] prompt_text导入完成
[gemini_api_caller.py][22:48:15] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_224805.png
[gemini_api_caller.py][22:48:15] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][22:48:15] [INFO] 开始测试 Gemini API 流式调用...
[models.py][22:48:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][22:48:15] [INFO] AFC remote call 1 is done.
[_client.py][22:48:20] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:00:02] [INFO] 截图模块运行中...
[截图模块][23:00:03] [INFO]  __main__ 入口被执行
[截图模块][23:00:03] [INFO]  启动时主动清理内存...
[截图模块][23:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:00:03] [INFO]  已执行 pkill chrome
[截图模块][23:00:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:00:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][23:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][23:00:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:00:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:00:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:00:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:00:16] [INFO] 启动浏览器 (有头模式)
[截图模块][23:00:18] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:00:52] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:00:52] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:00:52] [INFO]  打开目标图表页...
[截图模块][23:00:58] [INFO]  等待5秒加载页面...
[截图模块][23:01:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:01:04] [INFO]  快捷键已发送
[截图模块][23:01:05] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_230105.png
[截图模块][23:01:05] [INFO]  关闭浏览器...
[数据收集总模块][23:01:05] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_230105.png
[数据收集总模块][23:01:05] [INFO] 技术指标模块运行中...
[技术指标模块][23:01:06] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:01:07] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:01:07] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:01:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:01:07] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:01:08] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:01:08] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:01:08] [INFO] 宏观因子模块运行中...
[数据收集总模块][23:01:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:01:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:01:12] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][23:01:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:01:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:01:12] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][23:01:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:01:13] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:01:13] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:01:13] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_230105.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105533.5,
        "volume": 134800.24,
        "RSI": 64.0531629541734,
        "MACD_macd": 310.37789339649316,
        "MACD_signal": 256.93736835916656,
        "ATR": 526.2573691593557,
        "ADX": 33.465233681167085,
        "Stoch_K": 87.77918841397496,
        "Stoch_D": 80.26661996119333,
        "StochRSI_K": 69.46002467165705,
        "StochRSI_D": 63.315501757201766,
        "BB_upper": 106107.08646983374,
        "BB_lower": 103556.47353016626,
        "BB_middle": 104831.78,
        "EMA5": 105387.67377003274,
        "EMA21": 104971.09298048032,
        "EMA55": 104538.13756867308,
        "EMA144": 104316.07127016735,
        "EMA200": 104315.27691701284,
        "VWAP": 104180.06237874231
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109546.3,
        "volume": 179039.65,
        "RSI": 51.215877148011025,
        "MACD_macd": 409.90048410219606,
        "MACD_signal": 457.57594595443834,
        "ATR": 755.25585302574,
        "ADX": 20.80740258083946,
        "Stoch_K": 45.73024372230427,
        "Stoch_D": 50.81118927805455,
        "StochRSI_K": 12.751272571353706,
        "StochRSI_D": 19.46139337667263,
        "BB_upper": 110401.53898623207,
        "BB_lower": 108243.38101376791,
        "BB_middle": 109322.45999999999,
        "EMA5": 109646.04557779527,
        "EMA21": 109300.51344116587,
        "EMA55": 108319.61656618374,
        "EMA144": 106774.39956708753,
        "EMA200": 106292.85453103393,
        "VWAP": 106911.46650950269
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22933543330.999966 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104513.6",
        "lastSz": "0.42",
        "askPx": "104513.6",
        "askSz": "320.99",
        "bidPx": "104513.5",
        "bidSz": "735.72",
        "open24h": "105354.6",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "73603.9751",
        "vol24h": "7360397.51",
        "ts": "1748703673209",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110203.27 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T15:01:13+00:00Z"
}
[gemini_api_caller.py][23:01:15] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:01:15] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_230105.png
[gemini_api_caller.py][23:01:15] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:01:15] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:01:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:01:15] [INFO] AFC remote call 1 is done.
[_client.py][23:01:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:02:00] [INFO] 截图模块运行中...
[截图模块][23:02:02] [INFO]  __main__ 入口被执行
[截图模块][23:02:02] [INFO]  启动时主动清理内存...
[截图模块][23:02:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:02:02] [INFO]  已执行 pkill chrome
[截图模块][23:02:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:02:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:02:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][23:02:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][23:02:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:02:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:02:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:02:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:02:09] [INFO]  启动浏览器 (有头模式)
[截图模块][23:02:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:02:24] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:02:24] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:02:24] [INFO]  打开目标图表页...
[截图模块][23:02:31] [INFO]  等待5秒加载页面...
[截图模块][23:02:36] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:02:36] [INFO]  快捷键已发送
[截图模块][23:02:37] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_230237.png
[截图模块][23:02:37] [INFO]  关闭浏览器...
[数据收集总模块][23:02:37] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_230237.png
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:02] [INFO]  __main__ 入口被执行
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:02] [INFO]  启动时主动清理内存...
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:02] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:02] [INFO]  已执行 pkill chrome
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:09] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:24] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:24] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:24] [INFO]  打开目标图表页...
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:31] [INFO]  等待5秒加载页面...
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:36] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:36] [INFO]  快捷键已发送
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:37] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_230237.png
[数据收集总模块][23:02:37] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:02:37] [INFO]  关闭浏览器...
[数据收集总模块][23:02:37] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_230237.png
[数据收集总模块][23:02:37] [INFO] 技术指标模块运行中...
[技术指标模块][23:02:38] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:02:39] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:02:39] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:02:40] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:02:40] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:02:40] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:02:40] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:02:40] [INFO] 宏观因子模块运行中...
[宏观因子模块][23:02:41] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][23:02:43] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:02:43] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:02:44] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][23:02:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:02:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:02:44] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][23:02:45] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:02:45] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:02:45] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:02:45] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_230237.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2582.96,
        "volume": 883178.76,
        "RSI": 48.55965395957671,
        "MACD_macd": 10.513763934804047,
        "MACD_signal": 10.392283807654763,
        "ATR": 18.73107158910949,
        "ADX": 35.48324724670628,
        "Stoch_K": 61.8616831329605,
        "Stoch_D": 67.40864182835391,
        "StochRSI_K": 39.59254614261586,
        "StochRSI_D": 48.61476359060881,
        "BB_upper": 2620.6414836556655,
        "BB_lower": 2529.0115163443347,
        "BB_middle": 2574.8265,
        "EMA5": 2589.4106999691735,
        "EMA21": 2578.942987531494,
        "EMA55": 2559.854636212336,
        "EMA144": 2545.1377763549003,
        "EMA200": 2542.882786900097,
        "VWAP": 2538.034285210109
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2650.78,
        "volume": 1721004.58,
        "RSI": 41.99156654171881,
        "MACD_macd": 0.9341657488703277,
        "MACD_signal": 2.3504985789507638,
        "ATR": 29.337384582967783,
        "ADX": 21.14460355337135,
        "Stoch_K": 29.339370718681163,
        "Stoch_D": 29.81547288756127,
        "StochRSI_K": 9.959067126465387,
        "StochRSI_D": 3.319689042155129,
        "BB_upper": 2692.145339722765,
        "BB_lower": 2621.775660277235,
        "BB_middle": 2656.9605,
        "EMA5": 2655.758588420834,
        "EMA21": 2659.1336874986905,
        "EMA55": 2651.7892449904384,
        "EMA144": 2616.905050204562,
        "EMA200": 2602.5726032006532,
        "VWAP": 2631.192470943667
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0012%",
      "FGI": "50/100",
      "open_interest": "$591735970.0000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2540.1",
        "lastSz": "3.08",
        "askPx": "2540.11",
        "askSz": "1063.45",
        "bidPx": "2540.1",
        "bidSz": "838.07",
        "open24h": "2596.35",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4180798.087",
        "vol24h": "41807980.87",
        "ts": "1748703765013",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T15:02:45+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110190.67 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-130.4808600000004 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][23:02:47] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:02:47] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_230237.png
[gemini_api_caller.py][23:02:47] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:02:47] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:02:47] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:02:47] [INFO] AFC remote call 1 is done.
[_client.py][23:02:50] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:15:02] [INFO] 截图模块运行中...
[截图模块][23:15:04] [INFO]  __main__ 入口被执行
[截图模块][23:15:04] [INFO]  启动时主动清理内存...
[截图模块][23:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:15:04] [INFO]  已执行 pkill chrome
[截图模块][23:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][23:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][23:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:15:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:15:10] [INFO] 启动浏览器 (有头模式)
[截图模块][23:15:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:15:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:15:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:15:47] [INFO]  打开目标图表页...
[截图模块][23:15:59] [INFO]  等待5秒加载页面...
[截图模块][23:16:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:16:05] [INFO]  快捷键已发送
[截图模块][23:16:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_231606.png
[截图模块][23:16:06] [INFO]  关闭浏览器...
[数据收集总模块][23:16:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_231606.png
[数据收集总模块][23:16:06] [INFO] 技术指标模块运行中...
[技术指标模块][23:16:07] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:16:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:16:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:16:08] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:16:08] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:16:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:16:10] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:16:10] [INFO] 宏观因子模块运行中...
[数据收集总模块][23:16:12] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:16:12] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:16:15] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][23:16:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:16:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:16:15] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][23:16:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:16:16] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:16:17] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:16:18] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_231606.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105172.9,
        "volume": 196713.58,
        "RSI": 53.962155507748804,
        "MACD_macd": 300.05107809012407,
        "MACD_signal": 243.56850376524397,
        "ATR": 511.75846593450865,
        "ADX": 34.87703489276955,
        "Stoch_K": 70.9233884258605,
        "Stoch_D": 76.76696331873619,
        "StochRSI_K": 50.662591661405685,
        "StochRSI_D": 61.734531720869334,
        "BB_upper": 106024.65682814142,
        "BB_lower": 103560.80317185857,
        "BB_middle": 104792.73,
        "EMA5": 105314.7606550491,
        "EMA21": 104914.85324437803,
        "EMA55": 104501.6027793265,
        "EMA144": 104302.10358641115,
        "EMA200": 104307.52950981093,
        "VWAP": 104158.8324105721
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109546.3,
        "volume": 179039.65,
        "RSI": 51.215877148011025,
        "MACD_macd": 409.90048410219606,
        "MACD_signal": 457.57594595443834,
        "ATR": 755.25585302574,
        "ADX": 20.80740258083946,
        "Stoch_K": 45.73024372230427,
        "Stoch_D": 50.81118927805455,
        "StochRSI_K": 12.751272571353706,
        "StochRSI_D": 19.46139337667263,
        "BB_upper": 110401.53898623207,
        "BB_lower": 108243.38101376791,
        "BB_middle": 109322.45999999999,
        "EMA5": 109646.04557779527,
        "EMA21": 109300.51344116587,
        "EMA55": 108319.61656618374,
        "EMA144": 106774.39956708753,
        "EMA200": 106292.85453103393,
        "VWAP": 106911.46650950269
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22942896993.99998 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104557.3",
        "lastSz": "0.01",
        "askPx": "104557.4",
        "askSz": "100.22",
        "bidPx": "104557.3",
        "bidSz": "1024.27",
        "open24h": "105489.9",
        "high24h": "105790.4",
        "low24h": "103022.1",
        "volCcy24h": "73306.9062",
        "vol24h": "7330690.62",
        "ts": "1748704576712",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110231.11 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T15:16:18+00:00Z"
}
[gemini_api_caller.py][23:16:23] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:16:23] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_231606.png
[gemini_api_caller.py][23:16:23] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:16:23] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:16:24] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:16:24] [INFO] AFC remote call 1 is done.
[_client.py][23:16:29] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:17:14] [INFO] 截图模块运行中...
[截图模块][23:17:16] [INFO]  __main__ 入口被执行
[截图模块][23:17:16] [INFO]  启动时主动清理内存...
[截图模块][23:17:16] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:17:16] [INFO]  已执行 pkill chrome
[截图模块][23:17:17] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:17:17] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:17:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][23:17:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][23:17:17] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:17:17] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:17:17] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:17:21] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:17:22] [INFO]  启动浏览器 (有头模式)
[截图模块][23:17:22] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:17:56] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:17:56] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:17:56] [INFO]  打开目标图表页...
[截图模块][23:18:01] [INFO]  等待5秒加载页面...
[截图模块][23:18:06] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:18:07] [INFO]  快捷键已发送
[截图模块][23:18:08] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][23:18:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_231809.png
[截图模块][23:18:09] [INFO]  关闭浏览器...
[数据收集总模块][23:18:09] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_231809.png
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:16] [INFO]  __main__ 入口被执行
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:16] [INFO]  启动时主动清理内存...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:16] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:16] [INFO]  已执行 pkill chrome
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:17] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:21] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:22] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:22] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:56] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:56] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:17:56] [INFO]  打开目标图表页...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:18:01] [INFO]  等待5秒加载页面...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:18:06] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:18:07] [INFO]  快捷键已发送
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:18:08] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:18:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_231809.png
[数据收集总模块][23:18:09] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:18:09] [INFO]  关闭浏览器...
[数据收集总模块][23:18:09] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_231809.png
[数据收集总模块][23:18:09] [INFO] 技术指标模块运行中...
[技术指标模块][23:18:10] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:18:11] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:18:11] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:18:11] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:18:11] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:18:12] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:18:12] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:18:12] [INFO] 宏观因子模块运行中...
[宏观因子模块][23:18:13] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][23:18:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:18:15] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:18:16] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][23:18:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:18:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:18:16] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][23:18:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:18:17] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:18:17] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:18:17] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_231809.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2586.4,
        "volume": 532844.59,
        "RSI": 51.91915959540683,
        "MACD_macd": 11.653816468021432,
        "MACD_signal": 10.364497688086738,
        "ATR": 19.531240072774537,
        "ADX": 38.362208481995296,
        "Stoch_K": 65.95643375788617,
        "Stoch_D": 71.82081498234346,
        "StochRSI_K": 46.063757625113304,
        "StochRSI_D": 55.864129310439004,
        "BB_upper": 2620.206051063705,
        "BB_lower": 2528.8639489362945,
        "BB_middle": 2574.535,
        "EMA5": 2592.63604995376,
        "EMA21": 2578.5410005208537,
        "EMA55": 2558.90110187582,
        "EMA144": 2543.703648460513,
        "EMA200": 2541.14976725957,
        "VWAP": 2537.1364048981454
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2650.78,
        "volume": 1721004.58,
        "RSI": 41.99156654171881,
        "MACD_macd": 0.9341657488703277,
        "MACD_signal": 2.3504985789507638,
        "ATR": 29.337384582967783,
        "ADX": 21.14460355337135,
        "Stoch_K": 29.339370718681163,
        "Stoch_D": 29.81547288756127,
        "StochRSI_K": 9.959067126465387,
        "StochRSI_D": 3.319689042155129,
        "BB_upper": 2692.145339722765,
        "BB_lower": 2621.775660277235,
        "BB_middle": 2656.9605,
        "EMA5": 2655.758588420834,
        "EMA21": 2659.1336874986905,
        "EMA55": 2651.7892449904384,
        "EMA144": 2616.905050204562,
        "EMA200": 2602.5726032006532,
        "VWAP": 2631.192470943667
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0014%",
      "FGI": "50/100",
      "open_interest": "$592255014.0000002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2540.89",
        "lastSz": "0.11",
        "askPx": "2540.9",
        "askSz": "1490.13",
        "bidPx": "2540.89",
        "bidSz": "387.68",
        "open24h": "2601.7",
        "high24h": "2615",
        "low24h": "2473.63",
        "volCcy24h": "4173782.567",
        "vol24h": "41737825.67",
        "ts": "1748704696914",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T15:18:17+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110187.87 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-133.0986900000015 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][23:18:19] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:18:19] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_231809.png
[gemini_api_caller.py][23:18:19] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:18:19] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:18:19] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:18:19] [INFO] AFC remote call 1 is done.
[_client.py][23:18:22] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:30:03] [INFO] 截图模块运行中...
[截图模块][23:30:04] [INFO]  __main__ 入口被执行
[截图模块][23:30:04] [INFO]  启动时主动清理内存...
[截图模块][23:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:30:04] [INFO]  已执行 pkill chrome
[截图模块][23:30:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:30:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][23:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][23:30:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:30:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:30:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:30:11] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:30:14] [INFO] 启动浏览器 (有头模式)
[截图模块][23:30:16] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:30:53] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:30:53] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:30:53] [INFO]  打开目标图表页...
[截图模块][23:31:02] [INFO]  等待5秒加载页面...
[截图模块][23:31:07] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:31:08] [INFO]  快捷键已发送
[截图模块][23:31:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_233109.png
[截图模块][23:31:09] [INFO]  关闭浏览器...
[数据收集总模块][23:31:09] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_233109.png
[数据收集总模块][23:31:09] [INFO] 技术指标模块运行中...
[技术指标模块][23:31:10] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:31:11] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:31:11] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:31:12] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:31:12] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:31:13] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:31:13] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:31:13] [INFO] 宏观因子模块运行中...
[数据收集总模块][23:31:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:31:15] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:31:17] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][23:31:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:31:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:31:17] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][23:31:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:31:18] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:31:18] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:31:19] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_233109.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105410.2,
        "volume": 132369.34,
        "RSI": 64.24848937196249,
        "MACD_macd": 319.13737489945197,
        "MACD_signal": 229.31375658338288,
        "ATR": 484.5521028927893,
        "ADX": 37.96996186582806,
        "Stoch_K": 82.09728304374451,
        "Stoch_D": 82.3735304735448,
        "StochRSI_K": 69.82390501740856,
        "StochRSI_D": 72.86225308828313,
        "BB_upper": 105991.24680776201,
        "BB_lower": 103553.52319223798,
        "BB_middle": 104772.385,
        "EMA5": 105385.69098257364,
        "EMA21": 104889.06339979685,
        "EMA55": 104481.81465301586,
        "EMA144": 104336.90117411531,
        "EMA200": 104367.87069856908,
        "VWAP": 104136.25413565683
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109546.3,
        "volume": 179039.65,
        "RSI": 51.215877148011025,
        "MACD_macd": 409.90048410219606,
        "MACD_signal": 457.57594595443834,
        "ATR": 755.25585302574,
        "ADX": 20.80740258083946,
        "Stoch_K": 45.73024372230427,
        "Stoch_D": 50.81118927805455,
        "StochRSI_K": 12.751272571353706,
        "StochRSI_D": 19.46139337667263,
        "BB_upper": 110401.53898623207,
        "BB_lower": 108243.38101376791,
        "BB_middle": 109322.45999999999,
        "EMA5": 109646.04557779527,
        "EMA21": 109300.51344116587,
        "EMA55": 108319.61656618374,
        "EMA144": 106774.39956708753,
        "EMA200": 106292.85453103393,
        "VWAP": 106911.46650950269
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22951458036.999992 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104760.9",
        "lastSz": "1",
        "askPx": "104761",
        "askSz": "542.04",
        "bidPx": "104760.9",
        "bidSz": "235.18",
        "open24h": "105750.6",
        "high24h": "105750.7",
        "low24h": "103022.1",
        "volCcy24h": "73643.7945",
        "vol24h": "7364379.45",
        "ts": "1748705478326",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110104.04 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T15:31:19+00:00Z"
}
[gemini_api_caller.py][23:31:20] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:31:20] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_233109.png
[gemini_api_caller.py][23:31:20] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:31:20] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:31:21] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:31:21] [INFO] AFC remote call 1 is done.
[_client.py][23:31:24] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:32:19] [INFO] 截图模块运行中...
[截图模块][23:32:20] [INFO]  __main__ 入口被执行
[截图模块][23:32:20] [INFO]  启动时主动清理内存...
[截图模块][23:32:20] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:32:20] [INFO]  已执行 pkill chrome
[截图模块][23:32:23] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:32:23] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][23:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][23:32:23] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:32:23] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:32:23] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:32:27] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:32:29] [INFO]  启动浏览器 (有头模式)
[截图模块][23:32:29] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:33:05] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:33:05] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:33:05] [INFO]  打开目标图表页...
[截图模块][23:33:13] [INFO]  等待5秒加载页面...
[截图模块][23:33:18] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:33:18] [INFO]  快捷键已发送
[截图模块][23:33:19] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_233319.png
[截图模块][23:33:19] [INFO]  关闭浏览器...
[数据收集总模块][23:33:20] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_233319.png
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:20] [INFO]  __main__ 入口被执行
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:20] [INFO]  启动时主动清理内存...
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:20] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:20] [INFO]  已执行 pkill chrome
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:23] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:27] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:29] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:32:29] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:05] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:05] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:05] [INFO]  打开目标图表页...
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:13] [INFO]  等待5秒加载页面...
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:18] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:18] [INFO]  快捷键已发送
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:19] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_233319.png
[数据收集总模块][23:33:20] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:33:19] [INFO]  关闭浏览器...
[数据收集总模块][23:33:20] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_233319.png
[数据收集总模块][23:33:20] [INFO] 技术指标模块运行中...
[技术指标模块][23:33:21] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:33:21] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:33:21] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:33:22] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:33:22] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:33:23] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:33:24] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:33:24] [INFO] 宏观因子模块运行中...
[宏观因子模块][23:33:25] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][23:33:27] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:33:27] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:33:28] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][23:33:28] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:33:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:33:29] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][23:33:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:33:29] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:33:29] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:33:30] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_233319.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2593.5,
        "volume": 745284.93,
        "RSI": 59.251650500232174,
        "MACD_macd": 12.582845333344267,
        "MACD_signal": 10.035917523880768,
        "ATR": 19.971433386885792,
        "ADX": 42.086697273925004,
        "Stoch_K": 74.40780859421504,
        "Stoch_D": 79.2008887830814,
        "StochRSI_K": 60.187970581870246,
        "StochRSI_D": 68.53911139149388,
        "BB_upper": 2619.5908286847534,
        "BB_lower": 2528.794171315247,
        "BB_middle": 2574.1925,
        "EMA5": 2595.75407493064,
        "EMA21": 2577.755791833949,
        "EMA55": 2558.119153736762,
        "EMA144": 2545.2960391924244,
        "EMA200": 2543.9128186477883,
        "VWAP": 2536.6400726896527
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2650.78,
        "volume": 1721004.58,
        "RSI": 41.99156654171881,
        "MACD_macd": 0.9341657488703277,
        "MACD_signal": 2.3504985789507638,
        "ATR": 29.337384582967783,
        "ADX": 21.14460355337135,
        "Stoch_K": 29.339370718681163,
        "Stoch_D": 29.81547288756127,
        "StochRSI_K": 9.959067126465387,
        "StochRSI_D": 3.319689042155129,
        "BB_upper": 2692.145339722765,
        "BB_lower": 2621.775660277235,
        "BB_middle": 2656.9605,
        "EMA5": 2655.758588420834,
        "EMA21": 2659.1336874986905,
        "EMA55": 2651.7892449904384,
        "EMA144": 2616.905050204562,
        "EMA200": 2602.5726032006532,
        "VWAP": 2631.192470943667
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0013%",
      "FGI": "50/100",
      "open_interest": "$594658091.0000002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2544.59",
        "lastSz": "13.75",
        "askPx": "2544.6",
        "askSz": "1095.79",
        "bidPx": "2544.59",
        "bidSz": "150.64",
        "open24h": "2607.61",
        "high24h": "2607.61",
        "low24h": "2473.63",
        "volCcy24h": "4167662.528",
        "vol24h": "41676625.28",
        "ts": "1748705608919",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T15:33:30+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110119.44 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-200.85429000000292 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][23:33:31] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:33:31] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_233319.png
[gemini_api_caller.py][23:33:31] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:33:31] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:33:31] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:33:31] [INFO] AFC remote call 1 is done.
[_client.py][23:33:35] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:45:03] [INFO] 截图模块运行中...
[截图模块][23:45:04] [INFO]  __main__ 入口被执行
[截图模块][23:45:04] [INFO]  启动时主动清理内存...
[截图模块][23:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:45:04] [INFO]  已执行 pkill chrome
[截图模块][23:45:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:45:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][23:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][23:45:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][23:45:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:45:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:45:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:45:12] [INFO] 启动浏览器 (有头模式)
[截图模块][23:45:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:45:55] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][23:45:55] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:45:55] [INFO]  打开目标图表页...
[截图模块][23:46:03] [INFO]  等待5秒加载页面...
[截图模块][23:46:08] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:46:08] [INFO]  快捷键已发送
[截图模块][23:46:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_234609.png
[截图模块][23:46:09] [INFO]  关闭浏览器...
[数据收集总模块][23:46:10] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_234609.png
[数据收集总模块][23:46:10] [INFO] 技术指标模块运行中...
[技术指标模块][23:46:11] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:46:12] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:46:12] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:46:13] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:46:13] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:46:14] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:46:14] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:46:14] [INFO] 宏观因子模块运行中...
[数据收集总模块][23:46:17] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:46:17] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:46:18] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][23:46:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:46:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:46:20] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][23:46:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:46:21] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:46:21] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:46:21] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_234609.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105307.9,
        "volume": 70167.32,
        "RSI": 61.50702680360768,
        "MACD_macd": 314.9164622742974,
        "MACD_signal": 207.02501235911097,
        "ATR": 481.68333000495244,
        "ADX": 39.101878953721716,
        "Stoch_K": 77.28021848660353,
        "Stoch_D": 86.79505893801714,
        "StochRSI_K": 64.71709404530594,
        "StochRSI_D": 82.92093609945843,
        "BB_upper": 105914.55699697751,
        "BB_lower": 103548.22300302249,
        "BB_middle": 104731.39,
        "EMA5": 105373.43647386046,
        "EMA21": 104836.9312529348,
        "EMA55": 104441.10434676621,
        "EMA144": 104263.33364567545,
        "EMA200": 104271.33857553657,
        "VWAP": 104121.79340657697
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109546.3,
        "volume": 179039.65,
        "RSI": 51.215877148011025,
        "MACD_macd": 409.90048410219606,
        "MACD_signal": 457.57594595443834,
        "ATR": 755.25585302574,
        "ADX": 20.80740258083946,
        "Stoch_K": 45.73024372230427,
        "Stoch_D": 50.81118927805455,
        "StochRSI_K": 12.751272571353706,
        "StochRSI_D": 19.46139337667263,
        "BB_upper": 110401.53898623207,
        "BB_lower": 108243.38101376791,
        "BB_middle": 109322.45999999999,
        "EMA5": 109646.04557779527,
        "EMA21": 109300.51344116587,
        "EMA55": 108319.61656618374,
        "EMA144": 106774.39956708753,
        "EMA200": 106292.85453103393,
        "VWAP": 106911.46650950269
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.2,
        "volume": 361845.84,
        "RSI": 53.40182520953645,
        "MACD_macd": -619.8076212446904,
        "MACD_signal": -686.54466549199,
        "ATR": 1346.6739447597763,
        "ADX": 16.034366276393612,
        "Stoch_K": 66.080308304326,
        "Stoch_D": 40.78091331012755,
        "StochRSI_K": 94.42476592847656,
        "StochRSI_D": 51.836380125894415,
        "BB_upper": 104403.95458712766,
        "BB_lower": 102117.34541287232,
        "BB_middle": 103260.65,
        "EMA5": 102919.92331471216,
        "EMA21": 103508.77886853347,
        "EMA55": 104883.57663390116,
        "EMA144": 105376.00394248596,
        "EMA200": 105193.4775597919,
        "VWAP": 106924.15110482588
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22951450096.999973 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104471.8",
        "lastSz": "1.01",
        "askPx": "104471.9",
        "askSz": "38.28",
        "bidPx": "104471",
        "bidSz": "836.04",
        "open24h": "105673.3",
        "high24h": "105723",
        "low24h": "103022.1",
        "volCcy24h": "74037.9043",
        "vol24h": "7403790.43",
        "ts": "1748706381359",
        "sodUtc0": "103959",
        "sodUtc8": "105499.9"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110290.52 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T15:46:21+00:00Z"
}
[gemini_api_caller.py][23:46:22] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:46:22] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250531_234609.png
[gemini_api_caller.py][23:46:22] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:46:22] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:46:23] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:46:23] [INFO] AFC remote call 1 is done.
[_client.py][23:46:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][23:47:08] [INFO] 截图模块运行中...
[截图模块][23:47:10] [INFO]  __main__ 入口被执行
[截图模块][23:47:10] [INFO]  启动时主动清理内存...
[截图模块][23:47:10] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][23:47:10] [INFO]  已执行 pkill chrome
[截图模块][23:47:12] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:47:12] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][23:47:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][23:47:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][23:47:12] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][23:47:12] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][23:47:12] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][23:47:17] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][23:47:19] [INFO]  启动浏览器 (有头模式)
[截图模块][23:47:19] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:47:55] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][23:47:55] [INFO]  旧截图已清理，开始截图流程...
[截图模块][23:47:55] [INFO]  打开目标图表页...
[截图模块][23:47:58] [INFO]  等待5秒加载页面...
[截图模块][23:48:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][23:48:03] [INFO]  快捷键已发送
[截图模块][23:48:04] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_234804.png
[截图模块][23:48:04] [INFO]  关闭浏览器...
[数据收集总模块][23:48:04] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_234804.png
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:10] [INFO]  __main__ 入口被执行
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:10] [INFO]  启动时主动清理内存...
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:10] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:10] [INFO]  已执行 pkill chrome
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:12] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:17] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:19] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:19] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:55] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:55] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:55] [INFO]  打开目标图表页...
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:47:58] [INFO]  等待5秒加载页面...
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:48:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:48:03] [INFO]  快捷键已发送
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:48:04] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_234804.png
[数据收集总模块][23:48:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][23:48:04] [INFO]  关闭浏览器...
[数据收集总模块][23:48:04] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_234804.png
[数据收集总模块][23:48:04] [INFO] 技术指标模块运行中...
[技术指标模块][23:48:06] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][23:48:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][23:48:06] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][23:48:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][23:48:07] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][23:48:07] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][23:48:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:48:07] [INFO] 宏观因子模块运行中...
[宏观因子模块][23:48:08] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][23:48:11] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:48:11] [INFO] OKX 持仓模块运行中...
[get_positions.py][23:48:12] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][23:48:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][23:48:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][23:48:13] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][23:48:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][23:48:15] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][23:48:15] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][23:48:15] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_234804.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2594.08,
        "volume": 387824.2,
        "RSI": 59.850081830250744,
        "MACD_macd": 12.87269355310309,
        "MACD_signal": 9.406504250258388,
        "ATR": 20.145499371130953,
        "ADX": 43.198539762740246,
        "Stoch_K": 75.09820259492915,
        "Stoch_D": 86.38257350315435,
        "StochRSI_K": 61.34066095785818,
        "StochRSI_D": 81.8097756578385,
        "BB_upper": 2617.8139794835365,
        "BB_lower": 2528.8200205164635,
        "BB_middle": 2573.317,
        "EMA5": 2596.8811123959595,
        "EMA21": 2576.1805616193483,
        "EMA55": 2556.5317993868016,
        "EMA144": 2542.0581210901505,
        "EMA200": 2539.6466984537306,
        "VWAP": 2535.6859603931985
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2650.78,
        "volume": 1721004.58,
        "RSI": 41.99156654171881,
        "MACD_macd": 0.9341657488703277,
        "MACD_signal": 2.3504985789507638,
        "ATR": 29.337384582967783,
        "ADX": 21.14460355337135,
        "Stoch_K": 29.339370718681163,
        "Stoch_D": 29.81547288756127,
        "StochRSI_K": 9.959067126465387,
        "StochRSI_D": 3.319689042155129,
        "BB_upper": 2692.145339722765,
        "BB_lower": 2621.775660277235,
        "BB_middle": 2656.9605,
        "EMA5": 2655.758588420834,
        "EMA21": 2659.1336874986905,
        "EMA55": 2651.7892449904384,
        "EMA144": 2616.905050204562,
        "EMA200": 2602.5726032006532,
        "VWAP": 2631.192470943667
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2608.88,
        "volume": 2904052.41,
        "RSI": 64.40094840244817,
        "MACD_macd": 16.305134733172054,
        "MACD_signal": 12.101888849343046,
        "ATR": 74.33526807006545,
        "ADX": 29.172255610135103,
        "Stoch_K": 80.14213197969549,
        "Stoch_D": 60.79357021996615,
        "StochRSI_K": 65.05821163662046,
        "StochRSI_D": 35.25666842643219,
        "BB_upper": 2641.4165224008475,
        "BB_lower": 2437.474477599153,
        "BB_middle": 2539.4455000000003,
        "EMA5": 2574.0141306404803,
        "EMA21": 2547.6899163793046,
        "EMA55": 2541.5668580400957,
        "EMA144": 2544.4513721558624,
        "EMA200": 2542.2796464453345,
        "VWAP": 2562.5084712657854
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0012%",
      "FGI": "50/100",
      "open_interest": "$589930010.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2533.1",
        "lastSz": "100",
        "askPx": "2533.1",
        "askSz": "752.41",
        "bidPx": "2533.09",
        "bidSz": "1382.64",
        "open24h": "2603.12",
        "high24h": "2604.61",
        "low24h": "2473.63",
        "volCcy24h": "4177112.764",
        "vol24h": "41771127.64",
        "ts": "1748706495517",
        "sodUtc0": "2529.79",
        "sodUtc8": "2597.01"
      }
    ]
  },
  "timestamp": "2025-05-31T15:48:15+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110302.34 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-19.762049999999533 USDT",
      "liqPrice": "9677.75523024809 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][23:48:17] [INFO] prompt_text导入完成
[gemini_api_caller.py][23:48:17] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250531_234804.png
[gemini_api_caller.py][23:48:17] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][23:48:17] [INFO] 开始测试 Gemini API 流式调用...
[models.py][23:48:17] [INFO] AFC is enabled with max remote calls: 10.
[models.py][23:48:17] [INFO] AFC remote call 1 is done.
[_client.py][23:48:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:00:02] [INFO] 截图模块运行中...
[截图模块][00:00:04] [INFO]  __main__ 入口被执行
[截图模块][00:00:04] [INFO]  启动时主动清理内存...
[截图模块][00:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:00:04] [INFO]  已执行 pkill chrome
[截图模块][00:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][00:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][00:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:00:11] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:00:12] [INFO] 启动浏览器 (有头模式)
[截图模块][00:00:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:00:52] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:00:52] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:00:52] [INFO]  打开目标图表页...
[截图模块][00:00:59] [INFO]  等待5秒加载页面...
[截图模块][00:01:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:01:05] [INFO]  快捷键已发送
[截图模块][00:01:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_000106.png
[截图模块][00:01:06] [INFO]  关闭浏览器...
[数据收集总模块][00:01:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_000106.png
[数据收集总模块][00:01:06] [INFO] 技术指标模块运行中...
[技术指标模块][00:01:08] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:01:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:01:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:01:09] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:01:09] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:01:11] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:01:11] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:01:11] [INFO] 宏观因子模块运行中...
[数据收集总模块][00:01:14] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:01:14] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:01:16] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][00:01:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:01:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:01:17] [INFO] 成功获取到 BTC-USDT-SWAP 的持仓信息。
[_client.py][00:01:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:01:17] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:01:18] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:01:18] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_000106.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105530.1,
        "volume": 83637.7,
        "RSI": 71.88318042657573,
        "MACD_macd": 315.22281009507424,
        "MACD_signal": 180.04146778507894,
        "ATR": 498.8498877269599,
        "ADX": 41.7896236621246,
        "Stoch_K": 87.74308989028636,
        "Stoch_D": 92.17560546844366,
        "StochRSI_K": 84.04571464619438,
        "StochRSI_D": 94.68190488206479,
        "BB_upper": 105848.57377610398,
        "BB_lower": 103543.63622389601,
        "BB_middle": 104696.105,
        "EMA5": 105406.20471079068,
        "EMA21": 104789.8355595981,
        "EMA55": 104409.40503472646,
        "EMA144": 104252.46626934,
        "EMA200": 104266.42016243527,
        "VWAP": 104115.63614232655
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109551.5,
        "volume": 255237.47,
        "RSI": 51.356542497418125,
        "MACD_macd": 444.08190806892526,
        "MACD_signal": 469.50845274178914,
        "ATR": 820.5259525258147,
        "ADX": 23.252550192598964,
        "Stoch_K": 45.97027326440163,
        "Stoch_D": 50.945110876179285,
        "StochRSI_K": 13.171852675802723,
        "StochRSI_D": 15.210968896122615,
        "BB_upper": 110384.7883309214,
        "BB_lower": 108181.81166907861,
        "BB_middle": 109283.3,
        "EMA5": 109695.9183666929,
        "EMA21": 109275.93327664121,
        "EMA55": 108273.6676329187,
        "EMA144": 106730.85316613033,
        "EMA200": 106253.13384510063,
        "VWAP": 106878.15276663023
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22957099745.99998 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104496.4",
        "lastSz": "3.96",
        "askPx": "104496.4",
        "askSz": "329.49",
        "bidPx": "104496.3",
        "bidSz": "460.03",
        "open24h": "105448.8",
        "high24h": "105536.6",
        "low24h": "103022.1",
        "volCcy24h": "74547.8071",
        "vol24h": "7454780.71",
        "ts": "1748707278315",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110288.32 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "isolated",
      "Position direction": "long",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T16:01:18+00:00Z"
}
[gemini_api_caller.py][00:01:20] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:01:20] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_000106.png
[gemini_api_caller.py][00:01:20] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:01:20] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:01:21] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:01:21] [INFO] AFC remote call 1 is done.
[_client.py][00:01:24] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:02:13] [INFO] 截图模块运行中...
[截图模块][00:02:15] [INFO]  __main__ 入口被执行
[截图模块][00:02:15] [INFO]  启动时主动清理内存...
[截图模块][00:02:15] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:02:15] [INFO]  已执行 pkill chrome
[截图模块][00:02:17] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:02:17] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:02:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][00:02:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][00:02:17] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:02:17] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:02:17] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:02:20] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:02:22] [INFO]  启动浏览器 (有头模式)
[截图模块][00:02:22] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:02:58] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:02:58] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:02:58] [INFO]  打开目标图表页...
[截图模块][00:03:04] [INFO]  等待5秒加载页面...
[截图模块][00:03:09] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:03:10] [INFO]  快捷键已发送
[截图模块][00:03:11] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_000311.png
[截图模块][00:03:11] [INFO]  关闭浏览器...
[数据收集总模块][00:03:11] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_000311.png
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:15] [INFO]  __main__ 入口被执行
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:15] [INFO]  启动时主动清理内存...
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:15] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:15] [INFO]  已执行 pkill chrome
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:17] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:20] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:22] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:22] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:58] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:58] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:02:58] [INFO]  打开目标图表页...
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:03:04] [INFO]  等待5秒加载页面...
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:03:09] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:03:10] [INFO]  快捷键已发送
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:03:11] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_000311.png
[数据收集总模块][00:03:11] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:03:11] [INFO]  关闭浏览器...
[数据收集总模块][00:03:11] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_000311.png
[数据收集总模块][00:03:11] [INFO] 技术指标模块运行中...
[技术指标模块][00:03:12] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:03:13] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:03:13] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:03:13] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:03:13] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:03:14] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:03:14] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:03:14] [INFO] 宏观因子模块运行中...
[宏观因子模块][00:03:15] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][00:03:17] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:03:17] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:03:18] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][00:03:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:03:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:03:19] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][00:03:20] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:03:20] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:03:20] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:03:20] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_000311.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2605.0,
        "volume": 371818.65,
        "RSI": 71.65957205425187,
        "MACD_macd": 12.990778026218322,
        "MACD_signal": 8.540411635356454,
        "ATR": 20.310957374696955,
        "ADX": 45.465378664558045,
        "Stoch_K": 88.09665516010003,
        "Stoch_D": 90.2812704311301,
        "StochRSI_K": 84.08866545561429,
        "StochRSI_D": 94.69622181853809,
        "BB_upper": 2615.69252374319,
        "BB_lower": 2528.86647625681,
        "BB_middle": 2572.2795,
        "EMA5": 2598.2816685939392,
        "EMA21": 2574.3905674932416,
        "EMA55": 2555.1239181735464,
        "EMA144": 2541.1712569396523,
        "EMA200": 2538.8655387124295,
        "VWAP": 2535.167910733777
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2647.0,
        "volume": 1673514.5,
        "RSI": 38.35097214940159,
        "MACD_macd": 1.9236722172095142,
        "MACD_signal": 2.7086886190201547,
        "ATR": 29.460062659484482,
        "ADX": 21.61753666927784,
        "Stoch_K": 20.813426436359002,
        "Stoch_D": 35.18240554380125,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.4584373530545762,
        "BB_upper": 2692.6247463502846,
        "BB_lower": 2619.7182536497153,
        "BB_middle": 2656.1715,
        "EMA5": 2658.2478826312504,
        "EMA21": 2659.968602059744,
        "EMA55": 2651.6712141286384,
        "EMA144": 2614.992649182412,
        "EMA200": 2599.9738528214234,
        "VWAP": 2630.4000073923403
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0014%",
      "FGI": "50/100",
      "open_interest": "$591474260.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2532.87",
        "lastSz": "1.99",
        "askPx": "2532.87",
        "askSz": "753.32",
        "bidPx": "2532.86",
        "bidSz": "1167.5",
        "open24h": "2595.21",
        "high24h": "2603.2",
        "low24h": "2473.63",
        "volCcy24h": "4160694.074",
        "vol24h": "41606940.74",
        "ts": "1748707400026",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T16:03:20+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110301.7 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-19.300079999996452 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][00:03:22] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:03:22] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_000311.png
[gemini_api_caller.py][00:03:22] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:03:22] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:03:22] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:03:22] [INFO] AFC remote call 1 is done.
[_client.py][00:03:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:15:03] [INFO] 截图模块运行中...
[截图模块][00:15:04] [INFO]  __main__ 入口被执行
[截图模块][00:15:04] [INFO]  启动时主动清理内存...
[截图模块][00:15:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:15:05] [INFO]  已执行 pkill chrome
[截图模块][00:15:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:15:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][00:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][00:15:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:15:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:15:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:15:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:15:12] [INFO] 启动浏览器 (有头模式)
[截图模块][00:15:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:15:52] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:15:52] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:15:52] [INFO]  打开目标图表页...
[截图模块][00:15:59] [INFO]  等待5秒加载页面...
[截图模块][00:16:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:16:05] [INFO]  快捷键已发送
[截图模块][00:16:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_001606.png
[截图模块][00:16:06] [INFO]  关闭浏览器...
[数据收集总模块][00:16:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_001606.png
[数据收集总模块][00:16:06] [INFO] 技术指标模块运行中...
[技术指标模块][00:16:07] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:16:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:16:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:16:08] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:16:08] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:16:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:16:10] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:16:10] [INFO] 宏观因子模块运行中...
[数据收集总模块][00:16:13] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:16:13] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:16:15] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][00:16:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:16:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:16:15] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][00:16:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:16:16] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:16:16] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:16:17] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_001606.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105691.9,
        "volume": 63705.74,
        "RSI": 80.44789281640564,
        "MACD_macd": 288.38094940490555,
        "MACD_signal": 146.1984958370896,
        "ATR": 508.7191558267234,
        "ADX": 43.14711531628301,
        "Stoch_K": 95.36186843716156,
        "Stoch_D": 92.64471410346833,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 105729.06551002158,
        "BB_lower": 103551.64448997841,
        "BB_middle": 104640.355,
        "EMA5": 105344.25706618601,
        "EMA21": 104715.8143838289,
        "EMA55": 104369.7004640872,
        "EMA144": 104251.28431058415,
        "EMA200": 104278.24372184195,
        "VWAP": 104104.8576555179
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109551.5,
        "volume": 255237.47,
        "RSI": 51.356542497418125,
        "MACD_macd": 444.08190806892526,
        "MACD_signal": 469.50845274178914,
        "ATR": 820.5259525258147,
        "ADX": 23.252550192598964,
        "Stoch_K": 45.97027326440163,
        "Stoch_D": 50.945110876179285,
        "StochRSI_K": 13.171852675802723,
        "StochRSI_D": 15.210968896122615,
        "BB_upper": 110384.7883309214,
        "BB_lower": 108181.81166907861,
        "BB_middle": 109283.3,
        "EMA5": 109695.9183666929,
        "EMA21": 109275.93327664121,
        "EMA55": 108273.6676329187,
        "EMA144": 106730.85316613033,
        "EMA200": 106253.13384510063,
        "VWAP": 106878.15276663023
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22962530064.99998 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104581",
        "lastSz": "9.56",
        "askPx": "104581",
        "askSz": "2088.17",
        "bidPx": "104580.9",
        "bidSz": "894.28",
        "open24h": "105201",
        "high24h": "105282.7",
        "low24h": "103022.1",
        "volCcy24h": "74522.3167",
        "vol24h": "7452231.67",
        "ts": "1748708176616",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110196.4 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T16:16:17+00:00Z"
}
[gemini_api_caller.py][00:16:18] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:16:18] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_001606.png
[gemini_api_caller.py][00:16:18] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:16:18] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:16:19] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:16:19] [INFO] AFC remote call 1 is done.
[_client.py][00:16:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:17:09] [INFO] 截图模块运行中...
[截图模块][00:17:10] [INFO]  __main__ 入口被执行
[截图模块][00:17:10] [INFO]  启动时主动清理内存...
[截图模块][00:17:10] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:17:10] [INFO]  已执行 pkill chrome
[截图模块][00:17:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:17:13] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:17:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][00:17:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][00:17:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:17:13] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:17:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:17:32] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:17:34] [INFO]  启动浏览器 (有头模式)
[截图模块][00:17:34] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:18:07] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:18:07] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:18:07] [INFO]  打开目标图表页...
[截图模块][00:18:17] [INFO]  等待5秒加载页面...
[截图模块][00:18:22] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:18:22] [INFO]  快捷键已发送
[截图模块][00:18:23] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_001823.png
[截图模块][00:18:23] [INFO]  关闭浏览器...
[数据收集总模块][00:18:24] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_001823.png
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:10] [INFO]  __main__ 入口被执行
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:10] [INFO]  启动时主动清理内存...
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:10] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:10] [INFO]  已执行 pkill chrome
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:32] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:34] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:17:34] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:07] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:07] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:07] [INFO]  打开目标图表页...
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:17] [INFO]  等待5秒加载页面...
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:22] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:22] [INFO]  快捷键已发送
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:23] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_001823.png
[数据收集总模块][00:18:24] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:18:23] [INFO]  关闭浏览器...
[数据收集总模块][00:18:24] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_001823.png
[数据收集总模块][00:18:24] [INFO] 技术指标模块运行中...
[技术指标模块][00:18:25] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:18:26] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:18:26] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:18:26] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:18:26] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:18:27] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:18:27] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:18:27] [INFO] 宏观因子模块运行中...
[宏观因子模块][00:18:28] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][00:18:30] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:18:30] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:18:32] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][00:18:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:18:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:18:32] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][00:18:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:18:33] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:18:33] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:18:33] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_001823.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2611.6,
        "volume": 564842.46,
        "RSI": 79.91984363910254,
        "MACD_macd": 11.839470686609275,
        "MACD_signal": 7.426571387323256,
        "ATR": 20.6449511054549,
        "ADX": 44.58186429354524,
        "Stoch_K": 95.9528627544339,
        "Stoch_D": 90.77956274239922,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2611.052298982805,
        "BB_lower": 2529.853701017195,
        "BB_middle": 2570.453,
        "EMA5": 2594.9225028909086,
        "EMA21": 2571.3297623351236,
        "EMA55": 2553.323907171761,
        "EMA144": 2540.7159500788234,
        "EMA200": 2538.843693131871,
        "VWAP": 2534.601304759289
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2647.0,
        "volume": 1673514.5,
        "RSI": 38.35097214940159,
        "MACD_macd": 1.9236722172095142,
        "MACD_signal": 2.7086886190201547,
        "ATR": 29.460062659484482,
        "ADX": 21.61753666927784,
        "Stoch_K": 20.813426436359002,
        "Stoch_D": 35.18240554380125,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.4584373530545762,
        "BB_upper": 2692.6247463502846,
        "BB_lower": 2619.7182536497153,
        "BB_middle": 2656.1715,
        "EMA5": 2658.2478826312504,
        "EMA21": 2659.968602059744,
        "EMA55": 2651.6712141286384,
        "EMA144": 2614.992649182412,
        "EMA200": 2599.9738528214234,
        "VWAP": 2630.4000073923403
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0019%",
      "FGI": "50/100",
      "open_interest": "$592554653.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2540.67",
        "lastSz": "0.3",
        "askPx": "2540.68",
        "askSz": "6.56",
        "bidPx": "2540.65",
        "bidSz": "246.59",
        "open24h": "2586.7",
        "high24h": "2589.68",
        "low24h": "2473.63",
        "volCcy24h": "4139080.497",
        "vol24h": "41390804.97",
        "ts": "1748708312435",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T16:18:33+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110185.98 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-133.8686399999973 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][00:18:35] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:18:35] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_001823.png
[gemini_api_caller.py][00:18:35] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:18:35] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:18:35] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:18:35] [INFO] AFC remote call 1 is done.
[_client.py][00:18:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:30:03] [INFO] 截图模块运行中...
[截图模块][00:30:05] [INFO]  __main__ 入口被执行
[截图模块][00:30:05] [INFO]  启动时主动清理内存...
[截图模块][00:30:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:30:05] [INFO]  已执行 pkill chrome
[截图模块][00:30:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:30:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][00:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][00:30:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:30:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:30:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:30:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:30:10] [INFO] 启动浏览器 (有头模式)
[截图模块][00:30:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:30:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:30:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:30:46] [INFO]  打开目标图表页...
[截图模块][00:30:53] [INFO]  等待5秒加载页面...
[截图模块][00:30:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:30:59] [INFO]  快捷键已发送
[截图模块][00:31:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_003100.png
[截图模块][00:31:00] [INFO]  关闭浏览器...
[数据收集总模块][00:31:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_003100.png
[数据收集总模块][00:31:00] [INFO] 技术指标模块运行中...
[技术指标模块][00:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:31:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:31:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:31:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:31:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:31:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][00:31:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:31:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:31:07] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][00:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:31:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][00:31:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:31:08] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:31:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:31:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_003100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105650.7,
        "volume": 84048.29,
        "RSI": 79.91990463948275,
        "MACD_macd": 233.45702099664777,
        "MACD_signal": 110.60373037191397,
        "ATR": 525.368146953606,
        "ADX": 42.448231702666966,
        "Stoch_K": 93.42185807788307,
        "Stoch_D": 89.95345471514997,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 105548.96405724551,
        "BB_lower": 103602.68594275448,
        "BB_middle": 104575.825,
        "EMA5": 105170.435599279,
        "EMA21": 104618.21125810957,
        "EMA55": 104322.5901182569,
        "EMA144": 104248.35383528862,
        "EMA200": 104289.34028495173,
        "VWAP": 104095.50515878218
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109551.5,
        "volume": 255237.47,
        "RSI": 51.356542497418125,
        "MACD_macd": 444.08190806892526,
        "MACD_signal": 469.50845274178914,
        "ATR": 820.5259525258147,
        "ADX": 23.252550192598964,
        "Stoch_K": 45.97027326440163,
        "Stoch_D": 50.945110876179285,
        "StochRSI_K": 13.171852675802723,
        "StochRSI_D": 15.210968896122615,
        "BB_upper": 110384.7883309214,
        "BB_lower": 108181.81166907861,
        "BB_middle": 109283.3,
        "EMA5": 109695.9183666929,
        "EMA21": 109275.93327664121,
        "EMA55": 108273.6676329187,
        "EMA144": 106730.85316613033,
        "EMA200": 106253.13384510063,
        "VWAP": 106878.15276663023
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22970053454.999985 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104629.9",
        "lastSz": "10",
        "askPx": "104630",
        "askSz": "680.04",
        "bidPx": "104629.9",
        "bidSz": "553.38",
        "open24h": "104584.7",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "71581.3903",
        "vol24h": "7158139.03",
        "ts": "1748709067821",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110167.94 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T16:31:08+00:00Z"
}
[gemini_api_caller.py][00:31:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:31:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_003100.png
[gemini_api_caller.py][00:31:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:31:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:31:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:31:10] [INFO] AFC remote call 1 is done.
[_client.py][00:31:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:31:56] [INFO] 截图模块运行中...
[截图模块][00:31:58] [INFO]  __main__ 入口被执行
[截图模块][00:31:58] [INFO]  启动时主动清理内存...
[截图模块][00:31:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:31:58] [INFO]  已执行 pkill chrome
[截图模块][00:32:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:32:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][00:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][00:32:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:32:00] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:32:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:32:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:32:06] [INFO]  启动浏览器 (有头模式)
[截图模块][00:32:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:32:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:32:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:32:18] [INFO]  打开目标图表页...
[截图模块][00:32:24] [INFO]  等待5秒加载页面...
[截图模块][00:32:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:32:30] [INFO]  快捷键已发送
[截图模块][00:32:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_003231.png
[截图模块][00:32:31] [INFO]  关闭浏览器...
[数据收集总模块][00:32:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_003231.png
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:31:58] [INFO]  __main__ 入口被执行
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:31:58] [INFO]  启动时主动清理内存...
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:31:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:31:58] [INFO]  已执行 pkill chrome
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:06] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:18] [INFO]  打开目标图表页...
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:24] [INFO]  等待5秒加载页面...
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:30] [INFO]  快捷键已发送
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_003231.png
[数据收集总模块][00:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:32:31] [INFO]  关闭浏览器...
[数据收集总模块][00:32:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_003231.png
[数据收集总模块][00:32:31] [INFO] 技术指标模块运行中...
[技术指标模块][00:32:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:32:34] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:32:34] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:32:36] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:32:36] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:32:38] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:32:38] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:32:38] [INFO] 宏观因子模块运行中...
[宏观因子模块][00:32:39] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][00:32:43] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:32:43] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:32:45] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][00:32:45] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:32:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:32:46] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][00:32:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:32:46] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:32:47] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:32:47] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_003231.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2602.17,
        "volume": 436218.64,
        "RSI": 76.57639758356264,
        "MACD_macd": 9.5240623948348,
        "MACD_signal": 6.319355212061682,
        "ATR": 21.0180218540562,
        "ADX": 41.87389192987355,
        "Stoch_K": 86.79429337885635,
        "Stoch_D": 88.67110029722704,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2604.1740084560734,
        "BB_lower": 2532.7459915439267,
        "BB_middle": 2568.46,
        "EMA5": 2586.5837543363627,
        "EMA21": 2567.303179985886,
        "EMA55": 2551.3165736078727,
        "EMA144": 2541.122736824636,
        "EMA200": 2540.1672761162786,
        "VWAP": 2533.6719024483114
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2647.0,
        "volume": 1673514.5,
        "RSI": 38.35097214940159,
        "MACD_macd": 1.9236722172095142,
        "MACD_signal": 2.7086886190201547,
        "ATR": 29.460062659484482,
        "ADX": 21.61753666927784,
        "Stoch_K": 20.813426436359002,
        "Stoch_D": 35.18240554380125,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.4584373530545762,
        "BB_upper": 2692.6247463502846,
        "BB_lower": 2619.7182536497153,
        "BB_middle": 2656.1715,
        "EMA5": 2658.2478826312504,
        "EMA21": 2659.968602059744,
        "EMA55": 2651.6712141286384,
        "EMA144": 2614.992649182412,
        "EMA200": 2599.9738528214234,
        "VWAP": 2630.4000073923403
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0025%",
      "FGI": "50/100",
      "open_interest": "$593152569.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2544.61",
        "lastSz": "1",
        "askPx": "2544.62",
        "askSz": "3271.95",
        "bidPx": "2544.61",
        "bidSz": "51.83",
        "open24h": "2546.71",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3902741.842",
        "vol24h": "39027418.42",
        "ts": "1748709166969",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T16:32:47+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110125.48 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-193.46277000000265 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][00:32:49] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:32:49] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_003231.png
[gemini_api_caller.py][00:32:49] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:32:49] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:32:49] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:32:49] [INFO] AFC remote call 1 is done.
[_client.py][00:32:53] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:45:02] [INFO] 截图模块运行中...
[截图模块][00:45:03] [INFO]  __main__ 入口被执行
[截图模块][00:45:03] [INFO]  启动时主动清理内存...
[截图模块][00:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:45:04] [INFO]  已执行 pkill chrome
[截图模块][00:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][00:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][00:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][00:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:45:10] [INFO] 启动浏览器 (有头模式)
[截图模块][00:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:45:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][00:45:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:45:46] [INFO]  打开目标图表页...
[截图模块][00:45:53] [INFO]  等待5秒加载页面...
[截图模块][00:45:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:45:58] [INFO]  快捷键已发送
[截图模块][00:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_004559.png
[截图模块][00:45:59] [INFO]  关闭浏览器...
[数据收集总模块][00:46:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_004559.png
[数据收集总模块][00:46:00] [INFO] 技术指标模块运行中...
[技术指标模块][00:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:46:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:46:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:46:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:46:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][00:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:46:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:46:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][00:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][00:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:46:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:46:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:46:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_004559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105499.9,
        "volume": 44167.73,
        "RSI": 78.03867012691097,
        "MACD_macd": 164.30579974305874,
        "MACD_signal": 80.05655760199747,
        "ATR": 551.5018742744425,
        "ADX": 40.53794816071911,
        "Stoch_K": 89.15041579536033,
        "Stoch_D": 78.7845525275729,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.62794216703192,
        "BB_upper": 105361.23108279315,
        "BB_lower": 103692.88891720684,
        "BB_middle": 104527.06,
        "EMA5": 104930.30339891849,
        "EMA21": 104514.94400882996,
        "EMA55": 104267.11343764543,
        "EMA144": 104170.53821377578,
        "EMA200": 104190.12202917955,
        "VWAP": 104082.10281796321
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109551.5,
        "volume": 255237.47,
        "RSI": 51.356542497418125,
        "MACD_macd": 444.08190806892526,
        "MACD_signal": 469.50845274178914,
        "ATR": 820.5259525258147,
        "ADX": 23.252550192598964,
        "Stoch_K": 45.97027326440163,
        "Stoch_D": 50.945110876179285,
        "StochRSI_K": 13.171852675802723,
        "StochRSI_D": 15.210968896122615,
        "BB_upper": 110384.7883309214,
        "BB_lower": 108181.81166907861,
        "BB_middle": 109283.3,
        "EMA5": 109695.9183666929,
        "EMA21": 109275.93327664121,
        "EMA55": 108273.6676329187,
        "EMA144": 106730.85316613033,
        "EMA200": 106253.13384510063,
        "VWAP": 106878.15276663023
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22967704100.999977 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104394.4",
        "lastSz": "0.37",
        "askPx": "104394.4",
        "askSz": "693.6",
        "bidPx": "104394.3",
        "bidSz": "169.23",
        "open24h": "104104",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "65998.9265",
        "vol24h": "6599892.65",
        "ts": "1748709966923",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110229.38 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T16:46:07+00:00Z"
}
[gemini_api_caller.py][00:46:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:46:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_004559.png
[gemini_api_caller.py][00:46:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:46:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:46:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:46:09] [INFO] AFC remote call 1 is done.
[_client.py][00:46:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][00:46:54] [INFO] 截图模块运行中...
[截图模块][00:46:55] [INFO]  __main__ 入口被执行
[截图模块][00:46:55] [INFO]  启动时主动清理内存...
[截图模块][00:46:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][00:46:55] [INFO]  已执行 pkill chrome
[截图模块][00:46:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:46:58] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][00:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][00:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][00:46:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][00:46:58] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][00:46:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][00:47:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][00:47:01] [INFO]  启动浏览器 (有头模式)
[截图模块][00:47:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:47:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][00:47:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][00:47:18] [INFO]  打开目标图表页...
[截图模块][00:47:24] [INFO]  等待5秒加载页面...
[截图模块][00:47:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][00:47:30] [INFO]  快捷键已发送
[截图模块][00:47:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_004731.png
[截图模块][00:47:31] [INFO]  关闭浏览器...
[数据收集总模块][00:47:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_004731.png
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:55] [INFO]  __main__ 入口被执行
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:55] [INFO]  启动时主动清理内存...
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:55] [INFO]  已执行 pkill chrome
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:46:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:01] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:18] [INFO]  打开目标图表页...
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:24] [INFO]  等待5秒加载页面...
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:30] [INFO]  快捷键已发送
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_004731.png
[数据收集总模块][00:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][00:47:31] [INFO]  关闭浏览器...
[数据收集总模块][00:47:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_004731.png
[数据收集总模块][00:47:31] [INFO] 技术指标模块运行中...
[技术指标模块][00:47:33] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][00:47:33] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][00:47:33] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][00:47:34] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][00:47:34] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][00:47:34] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][00:47:34] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:47:34] [INFO] 宏观因子模块运行中...
[宏观因子模块][00:47:35] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][00:47:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:47:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][00:47:38] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][00:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][00:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][00:47:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][00:47:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][00:47:39] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][00:47:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][00:47:40] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_004731.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2597.01,
        "volume": 213339.11,
        "RSI": 74.56826491932355,
        "MACD_macd": 7.395319129970176,
        "MACD_signal": 5.520733458060059,
        "ATR": 21.648488591209006,
        "ADX": 38.97870347000007,
        "Stoch_K": 89.59153209390743,
        "Stoch_D": 80.5627017214155,
        "StochRSI_K": 100.0,
        "StochRSI_D": 94.86306916547552,
        "BB_upper": 2600.255334039492,
        "BB_lower": 2534.705665960508,
        "BB_middle": 2567.4805,
        "EMA5": 2578.790631504544,
        "EMA21": 2563.8162154135775,
        "EMA55": 2549.336425764299,
        "EMA144": 2539.37389656284,
        "EMA200": 2538.2287625284707,
        "VWAP": 2532.9911330078658
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2647.0,
        "volume": 1673514.5,
        "RSI": 38.35097214940159,
        "MACD_macd": 1.9236722172095142,
        "MACD_signal": 2.7086886190201547,
        "ATR": 29.460062659484482,
        "ADX": 21.61753666927784,
        "Stoch_K": 20.813426436359002,
        "Stoch_D": 35.18240554380125,
        "StochRSI_K": 0.0,
        "StochRSI_D": 3.4584373530545762,
        "BB_upper": 2692.6247463502846,
        "BB_lower": 2619.7182536497153,
        "BB_middle": 2656.1715,
        "EMA5": 2658.2478826312504,
        "EMA21": 2659.968602059744,
        "EMA55": 2651.6712141286384,
        "EMA144": 2614.992649182412,
        "EMA200": 2599.9738528214234,
        "VWAP": 2630.4000073923403
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0023%",
      "FGI": "50/100",
      "open_interest": "$592962179.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2539.87",
        "lastSz": "0.05",
        "askPx": "2539.87",
        "askSz": "1348.4",
        "bidPx": "2539.86",
        "bidSz": "20.95",
        "open24h": "2546.79",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3655576.009",
        "vol24h": "36555760.09",
        "ts": "1748710059819",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T16:47:40+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110198.42 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-121.54944000000151 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][00:47:41] [INFO] prompt_text导入完成
[gemini_api_caller.py][00:47:41] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_004731.png
[gemini_api_caller.py][00:47:41] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][00:47:41] [INFO] 开始测试 Gemini API 流式调用...
[models.py][00:47:41] [INFO] AFC is enabled with max remote calls: 10.
[models.py][00:47:41] [INFO] AFC remote call 1 is done.
[_client.py][00:47:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:00:02] [INFO] 截图模块运行中...
[截图模块][01:00:03] [INFO]  __main__ 入口被执行
[截图模块][01:00:03] [INFO]  启动时主动清理内存...
[截图模块][01:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:00:03] [INFO]  已执行 pkill chrome
[截图模块][01:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][01:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][01:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:00:09] [INFO] 启动浏览器 (有头模式)
[截图模块][01:00:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:00:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:00:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:00:45] [INFO]  打开目标图表页...
[截图模块][01:00:51] [INFO]  等待5秒加载页面...
[截图模块][01:00:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:00:57] [INFO]  快捷键已发送
[截图模块][01:00:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_010058.png
[截图模块][01:00:58] [INFO]  关闭浏览器...
[数据收集总模块][01:00:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_010058.png
[数据收集总模块][01:00:58] [INFO] 技术指标模块运行中...
[技术指标模块][01:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:01:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:01:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:01:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:01:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:01:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][01:01:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:01:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:01:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][01:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:01:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][01:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:01:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:01:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:01:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_010058.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 105298.9,
        "volume": 71748.44,
        "RSI": 75.3734835909065,
        "MACD_macd": 88.85478672065074,
        "MACD_signal": 58.96537653915388,
        "ATR": 571.102014013291,
        "ADX": 38.690392443641066,
        "Stoch_K": 87.2880902722065,
        "Stoch_D": 66.73314116878812,
        "StochRSI_K": 100.0,
        "StochRSI_D": 81.56784685310596,
        "BB_upper": 105177.22245917762,
        "BB_lower": 103781.41754082237,
        "BB_middle": 104479.31999999999,
        "EMA5": 104645.50509837772,
        "EMA21": 104416.45160260444,
        "EMA55": 104222.54719140808,
        "EMA144": 104162.05910152622,
        "EMA200": 104191.82137650215,
        "VWAP": 104075.52713772753
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109795.3,
        "volume": 1609668.25,
        "RSI": 57.80790070951879,
        "MACD_macd": 480.7375812361279,
        "MACD_signal": 475.9055798249393,
        "ATR": 884.0991691659108,
        "ADX": 26.074068229037,
        "Stoch_K": 60.73305084745775,
        "Stoch_D": 63.09586041575617,
        "StochRSI_K": 32.461053005716806,
        "StochRSI_D": 37.64475494069974,
        "BB_upper": 110356.5703921494,
        "BB_lower": 108152.84960785061,
        "BB_middle": 109254.71,
        "EMA5": 109768.12755003935,
        "EMA21": 109248.372126275,
        "EMA55": 108224.80825545969,
        "EMA144": 106677.21957226268,
        "EMA200": 106199.13915611918,
        "VWAP": 106848.56742136742
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22967891197.99996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104400.6",
        "lastSz": "0.46",
        "askPx": "104400.6",
        "askSz": "637.96",
        "bidPx": "104400.5",
        "bidSz": "93.91",
        "open24h": "103984.2",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "62356.8911",
        "vol24h": "6235689.11",
        "ts": "1748710866623",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110224.09 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T17:01:07+00:00Z"
}
[gemini_api_caller.py][01:01:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:01:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_010058.png
[gemini_api_caller.py][01:01:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:01:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:01:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:01:08] [INFO] AFC remote call 1 is done.
[_client.py][01:01:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:01:53] [INFO] 截图模块运行中...
[截图模块][01:01:55] [INFO]  __main__ 入口被执行
[截图模块][01:01:55] [INFO]  启动时主动清理内存...
[截图模块][01:01:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:01:55] [INFO]  已执行 pkill chrome
[截图模块][01:01:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:01:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][01:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][01:01:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:01:57] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:01:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:02:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:02:01] [INFO]  启动浏览器 (有头模式)
[截图模块][01:02:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:02:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:02:17] [INFO]  打开目标图表页...
[截图模块][01:02:24] [INFO]  等待5秒加载页面...
[截图模块][01:02:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:02:29] [INFO]  快捷键已发送
[截图模块][01:02:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_010230.png
[截图模块][01:02:30] [INFO]  关闭浏览器...
[数据收集总模块][01:02:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_010230.png
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:55] [INFO]  __main__ 入口被执行
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:55] [INFO]  启动时主动清理内存...
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:55] [INFO]  已执行 pkill chrome
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:01:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:01] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:17] [INFO]  打开目标图表页...
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:24] [INFO]  等待5秒加载页面...
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:29] [INFO]  快捷键已发送
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_010230.png
[数据收集总模块][01:02:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:02:30] [INFO]  关闭浏览器...
[数据收集总模块][01:02:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_010230.png
[数据收集总模块][01:02:31] [INFO] 技术指标模块运行中...
[技术指标模块][01:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:02:33] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:02:33] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:02:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:02:33] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:02:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:02:34] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:02:34] [INFO] 宏观因子模块运行中...
[宏观因子模块][01:02:34] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][01:02:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:02:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:02:37] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][01:02:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:02:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:02:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][01:02:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:02:38] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:02:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:02:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_010230.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2595.71,
        "volume": 423081.88,
        "RSI": 74.0831243043467,
        "MACD_macd": 5.093792788175506,
        "MACD_signal": 5.051740593751434,
        "ATR": 23.599020829365827,
        "ADX": 36.63834706168122,
        "Stoch_K": 89.62747541891736,
        "Stoch_D": 63.60387527944847,
        "StochRSI_K": 100.0,
        "StochRSI_D": 75.86886115083665,
        "BB_upper": 2596.530691614438,
        "BB_lower": 2536.3963083855624,
        "BB_middle": 2566.4635000000003,
        "EMA5": 2569.680947256815,
        "EMA21": 2560.4968752696323,
        "EMA55": 2547.583848013619,
        "EMA144": 2538.6891575374857,
        "EMA200": 2537.816351662956,
        "VWAP": 2532.676034126995
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2654.06,
        "volume": 5543541.2,
        "RSI": 42.68755570814962,
        "MACD_macd": 3.5381714706441016,
        "MACD_signal": 2.9019113140746637,
        "ATR": 30.753916180459044,
        "ADX": 23.549418186904308,
        "Stoch_K": 39.293621507643664,
        "Stoch_D": 45.98488842031278,
        "StochRSI_K": 0.0,
        "StochRSI_D": 12.130208471090429,
        "BB_upper": 2692.7205405492623,
        "BB_lower": 2619.0774594507375,
        "BB_middle": 2655.899,
        "EMA5": 2663.8718239468753,
        "EMA21": 2661.265797519326,
        "EMA55": 2651.958936169126,
        "EMA144": 2615.6068967561446,
        "EMA200": 2601.061837453684,
        "VWAP": 2629.9246313011004
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0023%",
      "FGI": "50/100",
      "open_interest": "$593679627.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2536.69",
        "lastSz": "0.28",
        "askPx": "2536.7",
        "askSz": "2191.78",
        "bidPx": "2536.69",
        "bidSz": "290.07",
        "open24h": "2548.21",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3577216.236",
        "vol24h": "35772162.36",
        "ts": "1748710958712",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T17:02:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110242.28 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-78.12425999999897 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][01:02:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:02:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_010230.png
[gemini_api_caller.py][01:02:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:02:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:02:40] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:02:40] [INFO] AFC remote call 1 is done.
[_client.py][01:02:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:15:03] [INFO] 截图模块运行中...
[截图模块][01:15:05] [INFO]  __main__ 入口被执行
[截图模块][01:15:05] [INFO]  启动时主动清理内存...
[截图模块][01:15:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:15:05] [INFO]  已执行 pkill chrome
[截图模块][01:15:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:15:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:15:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][01:15:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][01:15:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:15:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:15:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:15:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:15:11] [INFO] 启动浏览器 (有头模式)
[截图模块][01:15:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:15:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:15:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:15:47] [INFO]  打开目标图表页...
[截图模块][01:15:53] [INFO]  等待5秒加载页面...
[截图模块][01:15:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:15:59] [INFO]  快捷键已发送
[截图模块][01:16:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_011600.png
[截图模块][01:16:00] [INFO]  关闭浏览器...
[数据收集总模块][01:16:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_011600.png
[数据收集总模块][01:16:00] [INFO] 技术指标模块运行中...
[技术指标模块][01:16:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:16:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:16:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:16:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:16:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:16:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:16:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:16:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][01:16:06] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:16:06] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:16:07] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][01:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:16:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][01:16:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:16:08] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:16:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:16:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_011600.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104655.3,
        "volume": 219914.87,
        "RSI": 62.86848914940117,
        "MACD_macd": 11.716373022878543,
        "MACD_signal": 51.44639809171808,
        "ATR": 523.379249190095,
        "ADX": 37.59062377776364,
        "Stoch_K": 59.91515151515186,
        "Stoch_D": 43.21907424592734,
        "StochRSI_K": 83.88387983703161,
        "StochRSI_D": 48.936408412596826,
        "BB_upper": 105046.25288911903,
        "BB_lower": 103854.92711088096,
        "BB_middle": 104450.59,
        "EMA5": 104318.80764756657,
        "EMA21": 104328.21191938466,
        "EMA55": 104184.44668483158,
        "EMA144": 104162.49230568047,
        "EMA200": 104204.69861438157,
        "VWAP": 104065.14269724542
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109795.3,
        "volume": 1609668.25,
        "RSI": 57.80790070951879,
        "MACD_macd": 480.7375812361279,
        "MACD_signal": 475.9055798249393,
        "ATR": 884.0991691659108,
        "ADX": 26.074068229037,
        "Stoch_K": 60.73305084745775,
        "Stoch_D": 63.09586041575617,
        "StochRSI_K": 32.461053005716806,
        "StochRSI_D": 37.64475494069974,
        "BB_upper": 110356.5703921494,
        "BB_lower": 108152.84960785061,
        "BB_middle": 109254.71,
        "EMA5": 109768.12755003935,
        "EMA21": 109248.372126275,
        "EMA55": 108224.80825545969,
        "EMA144": 106677.21957226268,
        "EMA200": 106199.13915611918,
        "VWAP": 106848.56742136742
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22975871814.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104514.4",
        "lastSz": "1.14",
        "askPx": "104514.4",
        "askSz": "738.59",
        "bidPx": "104514.3",
        "bidSz": "201.2",
        "open24h": "103986.9",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "61281.1529",
        "vol24h": "6128115.29",
        "ts": "1748711768351",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110239.48 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T17:16:08+00:00Z"
}
[gemini_api_caller.py][01:16:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:16:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_011600.png
[gemini_api_caller.py][01:16:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:16:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:16:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:16:10] [INFO] AFC remote call 1 is done.
[_client.py][01:16:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:16:58] [INFO] 截图模块运行中...
[截图模块][01:17:00] [INFO]  __main__ 入口被执行
[截图模块][01:17:00] [INFO]  启动时主动清理内存...
[截图模块][01:17:00] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:17:00] [INFO]  已执行 pkill chrome
[截图模块][01:17:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:17:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][01:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][01:17:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:17:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:17:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:17:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:17:10] [INFO]  启动浏览器 (有头模式)
[截图模块][01:17:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:17:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:17:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:17:15] [INFO]  打开目标图表页...
[截图模块][01:17:17] [INFO]  等待5秒加载页面...
[截图模块][01:17:22] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:17:23] [INFO]  快捷键已发送
[截图模块][01:17:24] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][01:17:25] [WARNING]  第2次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][01:17:26] [WARNING]  第3次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][01:17:26] [ERROR]  连续3次未检测到刚刚下载的K线图片（请检查下载权限或快捷键是否生效）
[截图模块][01:17:26] [INFO]  关闭浏览器...
[截图模块][01:17:26] [ERROR] 截图失败
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:00] [INFO]  __main__ 入口被执行
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:00] [INFO]  启动时主动清理内存...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:00] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:00] [INFO]  已执行 pkill chrome
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:15] [INFO]  打开目标图表页...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:17] [INFO]  等待5秒加载页面...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:22] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:23] [INFO]  快捷键已发送
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:24] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:25] [WARNING]  第2次未检测到刚刚下载的K线图片，3秒后重试...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:26] [WARNING]  第3次未检测到刚刚下载的K线图片，3秒后重试...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:26] [ERROR]  连续3次未检测到刚刚下载的K线图片（请检查下载权限或快捷键是否生效）
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:26] [INFO]  关闭浏览器...
[数据收集总模块][01:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:17:26] [ERROR] 截图失败
[数据收集总模块][01:17:27] [INFO] 截图模块完成，截图路径: None
[数据收集总模块][01:17:27] [INFO] 技术指标模块运行中...
[技术指标模块][01:17:28] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:17:28] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:17:28] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:17:28] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:17:28] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:17:29] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:17:29] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:17:29] [INFO] 宏观因子模块运行中...
[宏观因子模块][01:17:30] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][01:17:32] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:17:32] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:17:33] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][01:17:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:17:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:17:34] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][01:17:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:17:34] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:17:34] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:17:34] [INFO] merged: {
  "clipboard_image_path": "",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2571.42,
        "volume": 1097065.58,
        "RSI": 62.49872252066435,
        "MACD_macd": 2.2154902738425335,
        "MACD_signal": 5.04230297229826,
        "ATR": 22.34040932477314,
        "ADX": 34.12284857735946,
        "Stoch_K": 62.46909765142171,
        "Stoch_D": 34.96261804104409,
        "StochRSI_K": 84.58920544109336,
        "StochRSI_D": 42.53552288676857,
        "BB_upper": 2593.374666161312,
        "BB_lower": 2538.061333838688,
        "BB_middle": 2565.718,
        "EMA5": 2556.6664208852226,
        "EMA21": 2556.9754438613872,
        "EMA55": 2545.7607017439555,
        "EMA144": 2537.5149405666975,
        "EMA200": 2536.6808612490586,
        "VWAP": 2532.0515255571436
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2654.06,
        "volume": 5543541.2,
        "RSI": 42.68755570814962,
        "MACD_macd": 3.5381714706441016,
        "MACD_signal": 2.9019113140746637,
        "ATR": 30.753916180459044,
        "ADX": 23.549418186904308,
        "Stoch_K": 39.293621507643664,
        "Stoch_D": 45.98488842031278,
        "StochRSI_K": 0.0,
        "StochRSI_D": 12.130208471090429,
        "BB_upper": 2692.7205405492623,
        "BB_lower": 2619.0774594507375,
        "BB_middle": 2655.899,
        "EMA5": 2663.8718239468753,
        "EMA21": 2661.265797519326,
        "EMA55": 2651.958936169126,
        "EMA144": 2615.6068967561446,
        "EMA200": 2601.061837453684,
        "VWAP": 2629.9246313011004
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.002%",
      "FGI": "50/100",
      "open_interest": "$593134604.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2536.26",
        "lastSz": "22.07",
        "askPx": "2536.26",
        "askSz": "1747.59",
        "bidPx": "2536.25",
        "bidSz": "584.76",
        "open24h": "2553.47",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3534128.046",
        "vol24h": "35341280.46",
        "ts": "1748711854404",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T17:17:34+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110249.28 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-71.04071999999842 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][01:17:36] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:17:36] [INFO] screenshot_path导入完成,path:
[gemini_api_caller.py][01:17:36] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:17:36] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][01:17:36] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/ETH_code/gemini_api_caller.py", line 107, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[数据收集总模块][01:30:02] [INFO] 截图模块运行中...
[截图模块][01:30:04] [INFO]  __main__ 入口被执行
[截图模块][01:30:04] [INFO]  启动时主动清理内存...
[截图模块][01:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:30:04] [INFO]  已执行 pkill chrome
[截图模块][01:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][01:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][01:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:30:16] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:30:18] [INFO] 启动浏览器 (有头模式)
[截图模块][01:30:20] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:30:54] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:30:54] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:30:54] [INFO]  打开目标图表页...
[截图模块][01:31:01] [INFO]  等待5秒加载页面...
[截图模块][01:31:06] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:31:07] [INFO]  快捷键已发送
[截图模块][01:31:08] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_013108.png
[截图模块][01:31:08] [INFO]  关闭浏览器...
[数据收集总模块][01:31:08] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_013108.png
[数据收集总模块][01:31:08] [INFO] 技术指标模块运行中...
[技术指标模块][01:31:09] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:31:10] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:31:10] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:31:10] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:31:10] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:31:11] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:31:11] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:31:11] [INFO] 宏观因子模块运行中...
[数据收集总模块][01:31:13] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:31:13] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:31:15] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][01:31:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:31:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:31:15] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][01:31:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:31:16] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:31:16] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:31:16] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_013108.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104346.8,
        "volume": 712535.26,
        "RSI": 52.94172849145705,
        "MACD_macd": -21.30667773418827,
        "MACD_signal": 61.432387011269995,
        "ATR": 454.6837476581934,
        "ADX": 37.72445787836759,
        "Stoch_K": 52.99618171900602,
        "Stoch_D": 29.63222520315095,
        "StochRSI_K": 60.81970203410813,
        "StochRSI_D": 25.700520553110735,
        "BB_upper": 105061.03296492633,
        "BB_lower": 103850.74703507367,
        "BB_middle": 104455.89,
        "EMA5": 104150.56147134984,
        "EMA21": 104295.49719649162,
        "EMA55": 104164.98378850726,
        "EMA144": 104136.86489044742,
        "EMA200": 104172.63635159156,
        "VWAP": 104043.11814106
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109795.3,
        "volume": 1609668.25,
        "RSI": 57.80790070951879,
        "MACD_macd": 480.7375812361279,
        "MACD_signal": 475.9055798249393,
        "ATR": 884.0991691659108,
        "ADX": 26.074068229037,
        "Stoch_K": 60.73305084745775,
        "Stoch_D": 63.09586041575617,
        "StochRSI_K": 32.461053005716806,
        "StochRSI_D": 37.64475494069974,
        "BB_upper": 110356.5703921494,
        "BB_lower": 108152.84960785061,
        "BB_middle": 109254.71,
        "EMA5": 109768.12755003935,
        "EMA21": 109248.372126275,
        "EMA55": 108224.80825545969,
        "EMA144": 106677.21957226268,
        "EMA200": 106199.13915611918,
        "VWAP": 106848.56742136742
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22978020534.99996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104392.9",
        "lastSz": "0.05",
        "askPx": "104393",
        "askSz": "1241.08",
        "bidPx": "104392.9",
        "bidSz": "26.74",
        "open24h": "103923.8",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "60718.0657",
        "vol24h": "6071806.57",
        "ts": "1748712676514",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110303.41 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T17:31:16+00:00Z"
}
[gemini_api_caller.py][01:31:18] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:31:18] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_013108.png
[gemini_api_caller.py][01:31:18] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:31:18] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:31:18] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:31:18] [INFO] AFC remote call 1 is done.
[_client.py][01:31:22] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:32:18] [INFO] 截图模块运行中...
[截图模块][01:32:20] [INFO]  __main__ 入口被执行
[截图模块][01:32:20] [INFO]  启动时主动清理内存...
[截图模块][01:32:20] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:32:20] [INFO]  已执行 pkill chrome
[截图模块][01:32:22] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:32:22] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:32:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][01:32:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][01:32:22] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:32:22] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:32:22] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:32:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:32:25] [INFO]  启动浏览器 (有头模式)
[截图模块][01:32:25] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:32:59] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:32:59] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:32:59] [INFO]  打开目标图表页...
[截图模块][01:33:05] [INFO]  等待5秒加载页面...
[截图模块][01:33:10] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:33:11] [INFO]  快捷键已发送
[截图模块][01:33:12] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_013312.png
[截图模块][01:33:12] [INFO]  关闭浏览器...
[数据收集总模块][01:33:12] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_013312.png
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:20] [INFO]  __main__ 入口被执行
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:20] [INFO]  启动时主动清理内存...
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:20] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:20] [INFO]  已执行 pkill chrome
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:22] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:25] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:25] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:59] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:59] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:32:59] [INFO]  打开目标图表页...
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:33:05] [INFO]  等待5秒加载页面...
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:33:10] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:33:11] [INFO]  快捷键已发送
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:33:12] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_013312.png
[数据收集总模块][01:33:12] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:33:12] [INFO]  关闭浏览器...
[数据收集总模块][01:33:12] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_013312.png
[数据收集总模块][01:33:12] [INFO] 技术指标模块运行中...
[技术指标模块][01:33:14] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:33:14] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:33:14] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:33:14] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:33:14] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:33:15] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:33:15] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:33:15] [INFO] 宏观因子模块运行中...
[宏观因子模块][01:33:16] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][01:33:17] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:33:17] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:33:18] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][01:33:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:33:19] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:33:19] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][01:33:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:33:21] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:33:21] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:33:21] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_013312.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2551.9,
        "volume": 4068463.66,
        "RSI": 45.54681349760291,
        "MACD_macd": 0.9837670857159537,
        "MACD_signal": 5.751893199671708,
        "ATR": 19.037395550650963,
        "ADX": 32.15832430294508,
        "Stoch_K": 38.715052768006345,
        "Stoch_D": 22.763241404548822,
        "StochRSI_K": 43.01735103869499,
        "StochRSI_D": 21.123890590520052,
        "BB_upper": 2594.4921521142273,
        "BB_lower": 2537.838847885773,
        "BB_middle": 2566.1655,
        "EMA5": 2549.2896313278334,
        "EMA21": 2555.5306689583763,
        "EMA55": 2544.7011058309636,
        "EMA144": 2536.029407902771,
        "EMA200": 2534.845429674262,
        "VWAP": 2530.8325964425403
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2654.06,
        "volume": 5543541.2,
        "RSI": 42.68755570814962,
        "MACD_macd": 3.5381714706441016,
        "MACD_signal": 2.9019113140746637,
        "ATR": 30.753916180459044,
        "ADX": 23.549418186904308,
        "Stoch_K": 39.293621507643664,
        "Stoch_D": 45.98488842031278,
        "StochRSI_K": 0.0,
        "StochRSI_D": 12.130208471090429,
        "BB_upper": 2692.7205405492623,
        "BB_lower": 2619.0774594507375,
        "BB_middle": 2655.899,
        "EMA5": 2663.8718239468753,
        "EMA21": 2661.265797519326,
        "EMA55": 2651.958936169126,
        "EMA144": 2615.6068967561446,
        "EMA200": 2601.061837453684,
        "VWAP": 2629.9246313011004
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0019%",
      "FGI": "50/100",
      "open_interest": "$596014717.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2533.64",
        "lastSz": "0.01",
        "askPx": "2533.64",
        "askSz": "1451.69",
        "bidPx": "2533.63",
        "bidSz": "205.49",
        "open24h": "2549",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3521265.935",
        "vol24h": "35212659.35",
        "ts": "1748712800907",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T17:33:21+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110293.92 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-26.999579999996456 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][01:33:23] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:33:23] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_013312.png
[gemini_api_caller.py][01:33:23] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:33:23] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:33:23] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:33:23] [INFO] AFC remote call 1 is done.
[_client.py][01:33:26] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:45:02] [INFO] 截图模块运行中...
[截图模块][01:45:04] [INFO]  __main__ 入口被执行
[截图模块][01:45:04] [INFO]  启动时主动清理内存...
[截图模块][01:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:45:04] [INFO]  已执行 pkill chrome
[截图模块][01:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][01:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][01:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][01:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:45:10] [INFO] 启动浏览器 (有头模式)
[截图模块][01:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:45:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][01:45:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:45:46] [INFO]  打开目标图表页...
[截图模块][01:45:52] [INFO]  等待5秒加载页面...
[截图模块][01:45:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:45:58] [INFO]  快捷键已发送
[截图模块][01:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_014559.png
[截图模块][01:45:59] [INFO]  关闭浏览器...
[数据收集总模块][01:45:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_014559.png
[数据收集总模块][01:45:59] [INFO] 技术指标模块运行中...
[技术指标模块][01:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:46:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:46:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:46:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][01:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:46:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:46:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][01:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][01:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:46:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:46:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_014559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103881.6,
        "volume": 413348.36,
        "RSI": 27.671328859818132,
        "MACD_macd": -31.77036069917085,
        "MACD_signal": 82.12877358499645,
        "ATR": 400.9889033513499,
        "ADX": 42.14718878850165,
        "Stoch_K": 16.745889503624113,
        "Stoch_D": 14.159524414021107,
        "StochRSI_K": 2.1056268605081927,
        "StochRSI_D": 5.427286130571797,
        "BB_upper": 105074.4198958461,
        "BB_lower": 103862.41010415391,
        "BB_middle": 104468.41500000001,
        "EMA5": 104052.44220702475,
        "EMA21": 104290.36563100197,
        "EMA55": 104157.81011732736,
        "EMA144": 104129.85810755435,
        "EMA200": 104164.90362779511,
        "VWAP": 104012.16551353352
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109795.3,
        "volume": 1609668.25,
        "RSI": 57.80790070951879,
        "MACD_macd": 480.7375812361279,
        "MACD_signal": 475.9055798249393,
        "ATR": 884.0991691659108,
        "ADX": 26.074068229037,
        "Stoch_K": 60.73305084745775,
        "Stoch_D": 63.09586041575617,
        "StochRSI_K": 32.461053005716806,
        "StochRSI_D": 37.64475494069974,
        "BB_upper": 110356.5703921494,
        "BB_lower": 108152.84960785061,
        "BB_middle": 109254.71,
        "EMA5": 109768.12755003935,
        "EMA21": 109248.372126275,
        "EMA55": 108224.80825545969,
        "EMA144": 106677.21957226268,
        "EMA200": 106199.13915611918,
        "VWAP": 106848.56742136742
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22981748741.999966 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104426.3",
        "lastSz": "0.01",
        "askPx": "104426.3",
        "askSz": "1664.89",
        "bidPx": "104426.2",
        "bidSz": "5.06",
        "open24h": "104119.6",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "59990.4431",
        "vol24h": "5999044.31",
        "ts": "1748713566812",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110288.94 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T17:46:07+00:00Z"
}
[gemini_api_caller.py][01:46:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:46:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_014559.png
[gemini_api_caller.py][01:46:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:46:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:46:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:46:08] [INFO] AFC remote call 1 is done.
[_client.py][01:46:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][01:46:57] [INFO] 截图模块运行中...
[截图模块][01:46:58] [INFO]  __main__ 入口被执行
[截图模块][01:46:58] [INFO]  启动时主动清理内存...
[截图模块][01:46:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][01:46:58] [INFO]  已执行 pkill chrome
[截图模块][01:47:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:47:01] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][01:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][01:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][01:47:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][01:47:01] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][01:47:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][01:47:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][01:47:04] [INFO]  启动浏览器 (有头模式)
[截图模块][01:47:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:47:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][01:47:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][01:47:17] [INFO]  打开目标图表页...
[截图模块][01:47:23] [INFO]  等待5秒加载页面...
[截图模块][01:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][01:47:29] [INFO]  快捷键已发送
[截图模块][01:47:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_014730.png
[截图模块][01:47:30] [INFO]  关闭浏览器...
[数据收集总模块][01:47:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_014730.png
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [INFO]  __main__ 入口被执行
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [INFO]  启动时主动清理内存...
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:46:58] [INFO]  已执行 pkill chrome
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:04] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:17] [INFO]  打开目标图表页...
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:23] [INFO]  等待5秒加载页面...
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:29] [INFO]  快捷键已发送
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_014730.png
[数据收集总模块][01:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][01:47:30] [INFO]  关闭浏览器...
[数据收集总模块][01:47:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_014730.png
[数据收集总模块][01:47:31] [INFO] 技术指标模块运行中...
[技术指标模块][01:47:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][01:47:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][01:47:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][01:47:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][01:47:33] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][01:47:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][01:47:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][01:47:34] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][01:47:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][01:47:37] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][01:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][01:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][01:47:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][01:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][01:47:38] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][01:47:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][01:47:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_014730.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2539.76,
        "volume": 1043222.03,
        "RSI": 28.00545765086899,
        "MACD_macd": 1.3823295248967042,
        "MACD_signal": 6.943672111043286,
        "ATR": 15.383148339354545,
        "ADX": 33.900094467030826,
        "Stoch_K": 3.703703703704206,
        "Stoch_D": 15.600159299084497,
        "StochRSI_K": 0.0,
        "StochRSI_D": 7.168184390282504,
        "BB_upper": 2594.5026374611666,
        "BB_lower": 2539.4533625388335,
        "BB_middle": 2566.978,
        "EMA5": 2547.98444699175,
        "EMA21": 2555.8937637920144,
        "EMA55": 2544.4440396301484,
        "EMA144": 2535.8959334822284,
        "EMA200": 2534.80407772634,
        "VWAP": 2528.5206617651206
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2654.06,
        "volume": 5543541.2,
        "RSI": 42.68755570814962,
        "MACD_macd": 3.5381714706441016,
        "MACD_signal": 2.9019113140746637,
        "ATR": 30.753916180459044,
        "ADX": 23.549418186904308,
        "Stoch_K": 39.293621507643664,
        "Stoch_D": 45.98488842031278,
        "StochRSI_K": 0.0,
        "StochRSI_D": 12.130208471090429,
        "BB_upper": 2692.7205405492623,
        "BB_lower": 2619.0774594507375,
        "BB_middle": 2655.899,
        "EMA5": 2663.8718239468753,
        "EMA21": 2661.265797519326,
        "EMA55": 2651.958936169126,
        "EMA144": 2615.6068967561446,
        "EMA200": 2601.061837453684,
        "VWAP": 2629.9246313011004
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0017%",
      "FGI": "50/100",
      "open_interest": "$597211035.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2532.72",
        "lastSz": "19.67",
        "askPx": "2532.73",
        "askSz": "907.68",
        "bidPx": "2532.72",
        "bidSz": "3360.35",
        "open24h": "2540.51",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3494770.195",
        "vol24h": "34947701.95",
        "ts": "1748713658405",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T17:47:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110309.78 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-11.446590000000095 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][01:47:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][01:47:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_014730.png
[gemini_api_caller.py][01:47:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][01:47:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][01:47:41] [INFO] AFC is enabled with max remote calls: 10.
[models.py][01:47:41] [INFO] AFC remote call 1 is done.
[_client.py][01:47:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:00:02] [INFO] 截图模块运行中...
[截图模块][02:00:04] [INFO]  __main__ 入口被执行
[截图模块][02:00:04] [INFO]  启动时主动清理内存...
[截图模块][02:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:00:04] [INFO]  已执行 pkill chrome
[截图模块][02:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][02:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][02:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:00:09] [INFO] 启动浏览器 (有头模式)
[截图模块][02:00:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:00:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:00:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:00:45] [INFO]  打开目标图表页...
[截图模块][02:00:51] [INFO]  等待5秒加载页面...
[截图模块][02:00:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:00:57] [INFO]  快捷键已发送
[截图模块][02:00:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_020058.png
[截图模块][02:00:58] [INFO]  关闭浏览器...
[数据收集总模块][02:00:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_020058.png
[数据收集总模块][02:00:58] [INFO] 技术指标模块运行中...
[技术指标模块][02:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:01:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:01:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:01:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:01:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:01:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:01:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:01:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:01:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:01:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][02:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:01:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:01:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:01:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_020058.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104039.6,
        "volume": 155708.01,
        "RSI": 32.86649469957797,
        "MACD_macd": 2.7429855790396687,
        "MACD_signal": 110.67739353036471,
        "ATR": 358.0334392599579,
        "ADX": 38.79037265480775,
        "Stoch_K": 19.15460438682271,
        "Stoch_D": 14.373433454232321,
        "StochRSI_K": 14.176228575861364,
        "StochRSI_D": 4.725409525287121,
        "BB_upper": 105044.1384638383,
        "BB_lower": 103962.8015361617,
        "BB_middle": 104503.47,
        "EMA5": 104137.86331053711,
        "EMA21": 104331.23402828218,
        "EMA55": 104165.24601371278,
        "EMA144": 104107.46532999,
        "EMA200": 104129.73891854954,
        "VWAP": 104018.28845432354
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109337.0,
        "volume": 1081378.83,
        "RSI": 46.95116306943878,
        "MACD_macd": 495.7379690301459,
        "MACD_signal": 474.7898929840939,
        "ATR": 807.0374752519145,
        "ADX": 29.93020592679907,
        "Stoch_K": 46.132008516678496,
        "Stoch_D": 71.56217963882965,
        "StochRSI_K": 0.0,
        "StochRSI_D": 58.59633916330784,
        "BB_upper": 110295.19417263995,
        "BB_lower": 108110.44582736003,
        "BB_middle": 109202.81999999999,
        "EMA5": 109754.54132505902,
        "EMA21": 109193.66912963192,
        "EMA55": 108163.14857677867,
        "EMA144": 106601.27258627967,
        "EMA200": 106115.47256938115,
        "VWAP": 106711.2002878193
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22976269555.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104321.9",
        "lastSz": "12.5",
        "askPx": "104321.9",
        "askSz": "760.68",
        "bidPx": "104321.8",
        "bidSz": "816.74",
        "open24h": "104180.6",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "59781.5064",
        "vol24h": "5978150.64",
        "ts": "1748714465955",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110426.43 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T18:01:06+00:00Z"
}
[gemini_api_caller.py][02:01:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:01:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_020058.png
[gemini_api_caller.py][02:01:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:01:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:01:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:01:07] [INFO] AFC remote call 1 is done.
[_client.py][02:01:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:02:01] [INFO] 截图模块运行中...
[截图模块][02:02:03] [INFO]  __main__ 入口被执行
[截图模块][02:02:03] [INFO]  启动时主动清理内存...
[截图模块][02:02:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:02:03] [INFO]  已执行 pkill chrome
[截图模块][02:02:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:02:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][02:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][02:02:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:02:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:02:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:02:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:02:08] [INFO]  启动浏览器 (有头模式)
[截图模块][02:02:08] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:02:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:02:17] [INFO]  打开目标图表页...
[截图模块][02:02:23] [INFO]  等待5秒加载页面...
[截图模块][02:02:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:02:28] [INFO]  快捷键已发送
[截图模块][02:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_020229.png
[截图模块][02:02:29] [INFO]  关闭浏览器...
[数据收集总模块][02:02:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_020229.png
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:03] [INFO]  __main__ 入口被执行
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:03] [INFO]  启动时主动清理内存...
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:03] [INFO]  已执行 pkill chrome
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:08] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:08] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:17] [INFO]  打开目标图表页...
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:23] [INFO]  等待5秒加载页面...
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:28] [INFO]  快捷键已发送
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_020229.png
[数据收集总模块][02:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:02:29] [INFO]  关闭浏览器...
[数据收集总模块][02:02:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_020229.png
[数据收集总模块][02:02:30] [INFO] 技术指标模块运行中...
[技术指标模块][02:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:02:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:02:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:02:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:02:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:02:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:02:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:02:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:02:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][02:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:02:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:02:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:02:37] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_020229.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2550.53,
        "volume": 635844.37,
        "RSI": 37.225414535005044,
        "MACD_macd": 3.111161018443454,
        "MACD_signal": 8.339817951257576,
        "ATR": 15.59133034224496,
        "ADX": 33.45312968456958,
        "Stoch_K": 25.870967741935914,
        "Stoch_D": 19.441498988608874,
        "StochRSI_K": 20.35431210321578,
        "StochRSI_D": 7.168181070660462,
        "BB_upper": 2592.7521501759506,
        "BB_lower": 2544.0298498240495,
        "BB_middle": 2568.391,
        "EMA5": 2552.0966704876246,
        "EMA21": 2557.506497601801,
        "EMA55": 2544.397653868971,
        "EMA144": 2533.80657683652,
        "EMA200": 2531.7631017771596,
        "VWAP": 2528.0931738749987
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.89,
        "volume": 3850614.91,
        "RSI": 46.44626806777142,
        "MACD_macd": 4.837470520686111,
        "MACD_signal": 2.7523663314064515,
        "ATR": 28.966828992639876,
        "ADX": 26.6174756320769,
        "Stoch_K": 45.440168687401105,
        "Stoch_D": 51.312598840274084,
        "StochRSI_K": 10.375242488758246,
        "StochRSI_D": 22.156546580681578,
        "BB_upper": 2693.6805678319147,
        "BB_lower": 2615.3064321680854,
        "BB_middle": 2654.4935,
        "EMA5": 2668.777735920313,
        "EMA21": 2661.9853244152864,
        "EMA55": 2651.520862059679,
        "EMA144": 2611.734210562405,
        "EMA200": 2595.6281364838783,
        "VWAP": 2628.600372734139
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0018%",
      "FGI": "50/100",
      "open_interest": "$595010817.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2527.37",
        "lastSz": "2.77",
        "askPx": "2527.37",
        "askSz": "380.7",
        "bidPx": "2527.36",
        "bidSz": "2250.91",
        "open24h": "2548.73",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3507268.537",
        "vol24h": "35072685.37",
        "ts": "1748714556612",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T18:02:37+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110392.06 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "70.16811000000271 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][02:02:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:02:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_020229.png
[gemini_api_caller.py][02:02:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:02:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:02:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:02:39] [INFO] AFC remote call 1 is done.
[_client.py][02:02:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:15:03] [INFO] 截图模块运行中...
[截图模块][02:15:04] [INFO]  __main__ 入口被执行
[截图模块][02:15:04] [INFO]  启动时主动清理内存...
[截图模块][02:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:15:04] [INFO]  已执行 pkill chrome
[截图模块][02:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][02:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][02:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:15:09] [INFO] 启动浏览器 (有头模式)
[截图模块][02:15:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:15:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:15:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:15:46] [INFO]  打开目标图表页...
[截图模块][02:15:51] [INFO]  等待5秒加载页面...
[截图模块][02:15:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:15:57] [INFO]  快捷键已发送
[截图模块][02:15:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_021558.png
[截图模块][02:15:58] [INFO]  关闭浏览器...
[数据收集总模块][02:15:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_021558.png
[数据收集总模块][02:15:58] [INFO] 技术指标模块运行中...
[技术指标模块][02:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:16:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:16:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:16:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:16:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:16:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:16:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:16:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:16:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:16:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][02:16:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:16:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:16:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:16:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_021558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103958.7,
        "volume": 80627.4,
        "RSI": 26.76507513694706,
        "MACD_macd": 30.522972550228587,
        "MACD_signal": 137.53591395738957,
        "ATR": 353.6385803731394,
        "ADX": 36.330226487186145,
        "Stoch_K": 6.578079351616485,
        "Stoch_D": 13.016616558487156,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 105026.52946212569,
        "BB_lower": 104035.6505378743,
        "BB_middle": 104531.09,
        "EMA5": 104186.99496580564,
        "EMA21": 104360.4112643128,
        "EMA55": 104174.63289244952,
        "EMA144": 104152.23062887894,
        "EMA200": 104195.03854662481,
        "VWAP": 104019.3584520672
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109337.0,
        "volume": 1081378.83,
        "RSI": 46.95116306943878,
        "MACD_macd": 495.7379690301459,
        "MACD_signal": 474.7898929840939,
        "ATR": 807.0374752519145,
        "ADX": 29.93020592679907,
        "Stoch_K": 46.132008516678496,
        "Stoch_D": 71.56217963882965,
        "StochRSI_K": 0.0,
        "StochRSI_D": 58.59633916330784,
        "BB_upper": 110295.19417263995,
        "BB_lower": 108110.44582736003,
        "BB_middle": 109202.81999999999,
        "EMA5": 109754.54132505902,
        "EMA21": 109193.66912963192,
        "EMA55": 108163.14857677867,
        "EMA144": 106601.27258627967,
        "EMA200": 106115.47256938115,
        "VWAP": 106711.2002878193
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22981084601.999966 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104507.9",
        "lastSz": "1",
        "askPx": "104507.9",
        "askSz": "1070.75",
        "bidPx": "104507.8",
        "bidSz": "308.42",
        "open24h": "104396.5",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "58850.2773",
        "vol24h": "5885027.73",
        "ts": "1748715365812",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110295.01 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T18:16:06+00:00Z"
}
[gemini_api_caller.py][02:16:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:16:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_021558.png
[gemini_api_caller.py][02:16:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:16:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:16:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:16:08] [INFO] AFC remote call 1 is done.
[_client.py][02:16:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:16:56] [INFO] 截图模块运行中...
[截图模块][02:16:57] [INFO]  __main__ 入口被执行
[截图模块][02:16:57] [INFO]  启动时主动清理内存...
[截图模块][02:16:57] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:16:57] [INFO]  已执行 pkill chrome
[截图模块][02:17:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:17:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][02:17:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:17:00] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:17:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:17:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:17:03] [INFO]  启动浏览器 (有头模式)
[截图模块][02:17:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:17:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:17:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:17:17] [INFO]  打开目标图表页...
[截图模块][02:17:25] [INFO]  等待5秒加载页面...
[截图模块][02:17:30] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:17:30] [INFO]  快捷键已发送
[截图模块][02:17:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_021731.png
[截图模块][02:17:31] [INFO]  关闭浏览器...
[数据收集总模块][02:17:32] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_021731.png
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:57] [INFO]  __main__ 入口被执行
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:57] [INFO]  启动时主动清理内存...
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:57] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:16:57] [INFO]  已执行 pkill chrome
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:17] [INFO]  打开目标图表页...
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:25] [INFO]  等待5秒加载页面...
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:30] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:30] [INFO]  快捷键已发送
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_021731.png
[数据收集总模块][02:17:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:17:31] [INFO]  关闭浏览器...
[数据收集总模块][02:17:32] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_021731.png
[数据收集总模块][02:17:32] [INFO] 技术指标模块运行中...
[技术指标模块][02:17:33] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:17:33] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:17:33] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:17:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:17:33] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:17:34] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:17:34] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:34] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:17:35] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:17:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:17:38] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:17:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:17:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:17:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][02:17:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:17:38] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:17:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:17:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_021731.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2546.51,
        "volume": 330266.11,
        "RSI": 29.743074362652223,
        "MACD_macd": 4.167684879730132,
        "MACD_signal": 9.641706095544553,
        "ATR": 14.894609745005367,
        "ADX": 33.17732001692448,
        "Stoch_K": 17.225806451613373,
        "Stoch_D": 17.213882678590668,
        "StochRSI_K": 1.150232283819604,
        "StochRSI_D": 0.38341076127319895,
        "BB_upper": 2592.0593707484136,
        "BB_lower": 2546.1596292515865,
        "BB_middle": 2569.1095,
        "EMA5": 2552.8800057314365,
        "EMA21": 2558.204730862904,
        "EMA55": 2544.370187115004,
        "EMA144": 2535.4208993983348,
        "EMA200": 2534.290692936986,
        "VWAP": 2527.7317257447817
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.89,
        "volume": 3850614.91,
        "RSI": 46.44626806777142,
        "MACD_macd": 4.837470520686111,
        "MACD_signal": 2.7523663314064515,
        "ATR": 28.966828992639876,
        "ADX": 26.6174756320769,
        "Stoch_K": 45.440168687401105,
        "Stoch_D": 51.312598840274084,
        "StochRSI_K": 10.375242488758246,
        "StochRSI_D": 22.156546580681578,
        "BB_upper": 2693.6805678319147,
        "BB_lower": 2615.3064321680854,
        "BB_middle": 2654.4935,
        "EMA5": 2668.777735920313,
        "EMA21": 2661.9853244152864,
        "EMA55": 2651.520862059679,
        "EMA144": 2611.734210562405,
        "EMA200": 2595.6281364838783,
        "VWAP": 2628.600372734139
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0023%",
      "FGI": "50/100",
      "open_interest": "$593990883.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2535.9",
        "lastSz": "0.24",
        "askPx": "2535.9",
        "askSz": "1873.85",
        "bidPx": "2535.89",
        "bidSz": "1186.27",
        "open24h": "2559.4",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3464674.568",
        "vol24h": "34646745.68",
        "ts": "1748715458385",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T18:17:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110258.46 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-62.10929999999954 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][02:17:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:17:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_021731.png
[gemini_api_caller.py][02:17:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:17:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:17:40] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:17:40] [INFO] AFC remote call 1 is done.
[_client.py][02:17:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:30:03] [INFO] 截图模块运行中...
[截图模块][02:30:05] [INFO]  __main__ 入口被执行
[截图模块][02:30:05] [INFO]  启动时主动清理内存...
[截图模块][02:30:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:30:05] [INFO]  已执行 pkill chrome
[截图模块][02:30:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][02:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][02:30:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:30:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:30:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:30:10] [INFO] 启动浏览器 (有头模式)
[截图模块][02:30:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:30:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:30:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:30:47] [INFO]  打开目标图表页...
[截图模块][02:30:54] [INFO]  等待5秒加载页面...
[截图模块][02:30:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:30:59] [INFO]  快捷键已发送
[截图模块][02:31:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_023100.png
[截图模块][02:31:00] [INFO]  关闭浏览器...
[数据收集总模块][02:31:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_023100.png
[数据收集总模块][02:31:00] [INFO] 技术指标模块运行中...
[技术指标模块][02:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:31:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:31:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:31:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:31:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:31:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:31:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:31:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:31:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:31:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][02:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:31:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:31:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:31:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_023100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104073.4,
        "volume": 84202.12,
        "RSI": 30.129842964937268,
        "MACD_macd": 73.87390122118813,
        "MACD_signal": 164.28900495654253,
        "ATR": 361.7213851331562,
        "ADX": 34.31145691673254,
        "Stoch_K": 17.387616624257753,
        "Stoch_D": 19.415172107236838,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 104974.63810586595,
        "BB_lower": 104133.94189413407,
        "BB_middle": 104554.29000000001,
        "EMA5": 104301.14244870846,
        "EMA21": 104400.58240670853,
        "EMA55": 104182.6358695613,
        "EMA144": 104154.98791776264,
        "EMA200": 104197.48812312503,
        "VWAP": 104020.74557248843
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109337.0,
        "volume": 1081378.83,
        "RSI": 46.95116306943878,
        "MACD_macd": 495.7379690301459,
        "MACD_signal": 474.7898929840939,
        "ATR": 807.0374752519145,
        "ADX": 29.93020592679907,
        "Stoch_K": 46.132008516678496,
        "Stoch_D": 71.56217963882965,
        "StochRSI_K": 0.0,
        "StochRSI_D": 58.59633916330784,
        "BB_upper": 110295.19417263995,
        "BB_lower": 108110.44582736003,
        "BB_middle": 109202.81999999999,
        "EMA5": 109754.54132505902,
        "EMA21": 109193.66912963192,
        "EMA55": 108163.14857677867,
        "EMA144": 106601.27258627967,
        "EMA200": 106115.47256938115,
        "VWAP": 106711.2002878193
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22982501981.999973 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104492.6",
        "lastSz": "0.26",
        "askPx": "104492.6",
        "askSz": "782.03",
        "bidPx": "104492.5",
        "bidSz": "451.48",
        "open24h": "104629.9",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "57542.2031",
        "vol24h": "5754220.31",
        "ts": "1748716267117",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110256.59 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T18:31:08+00:00Z"
}
[gemini_api_caller.py][02:31:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:31:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_023100.png
[gemini_api_caller.py][02:31:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:31:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:31:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:31:09] [INFO] AFC remote call 1 is done.
[_client.py][02:31:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:32:04] [INFO] 截图模块运行中...
[截图模块][02:32:05] [INFO]  __main__ 入口被执行
[截图模块][02:32:05] [INFO]  启动时主动清理内存...
[截图模块][02:32:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:32:05] [INFO]  已执行 pkill chrome
[截图模块][02:32:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:32:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:32:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][02:32:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][02:32:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:32:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:32:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:32:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:32:10] [INFO]  启动浏览器 (有头模式)
[截图模块][02:32:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:32:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:32:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:32:45] [INFO]  打开目标图表页...
[截图模块][02:32:50] [INFO]  等待5秒加载页面...
[截图模块][02:32:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:32:56] [INFO]  快捷键已发送
[截图模块][02:32:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_023257.png
[截图模块][02:32:57] [INFO]  关闭浏览器...
[数据收集总模块][02:32:57] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_023257.png
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  __main__ 入口被执行
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  启动时主动清理内存...
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:05] [INFO]  已执行 pkill chrome
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:45] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:45] [INFO]  打开目标图表页...
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:50] [INFO]  等待5秒加载页面...
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:56] [INFO]  快捷键已发送
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_023257.png
[数据收集总模块][02:32:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:32:57] [INFO]  关闭浏览器...
[数据收集总模块][02:32:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_023257.png
[数据收集总模块][02:32:57] [INFO] 技术指标模块运行中...
[技术指标模块][02:32:58] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:32:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:32:58] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:32:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:32:59] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:32:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:32:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:32:59] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:33:00] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:33:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:33:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:33:03] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:33:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:33:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:33:03] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][02:33:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:33:04] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:33:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:33:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_023257.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2546.19,
        "volume": 254844.31,
        "RSI": 29.160561448064982,
        "MACD_macd": 5.867669632933939,
        "MACD_signal": 11.00807498045602,
        "ATR": 15.246087889101206,
        "ADX": 34.415815928212275,
        "Stoch_K": 15.227722772277335,
        "Stoch_D": 18.516620734238458,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2591.9100248723025,
        "BB_lower": 2546.405975127698,
        "BB_middle": 2569.1580000000004,
        "EMA5": 2556.0650085971547,
        "EMA21": 2559.3744402231637,
        "EMA55": 2544.371780920452,
        "EMA144": 2536.014195743315,
        "EMA200": 2535.267743762248,
        "VWAP": 2527.5768541272173
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.89,
        "volume": 3850614.91,
        "RSI": 46.44626806777142,
        "MACD_macd": 4.837470520686111,
        "MACD_signal": 2.7523663314064515,
        "ATR": 28.966828992639876,
        "ADX": 26.6174756320769,
        "Stoch_K": 45.440168687401105,
        "Stoch_D": 51.312598840274084,
        "StochRSI_K": 10.375242488758246,
        "StochRSI_D": 22.156546580681578,
        "BB_upper": 2693.6805678319147,
        "BB_lower": 2615.3064321680854,
        "BB_middle": 2654.4935,
        "EMA5": 2668.777735920313,
        "EMA21": 2661.9853244152864,
        "EMA55": 2651.520862059679,
        "EMA144": 2611.734210562405,
        "EMA200": 2595.6281364838783,
        "VWAP": 2628.600372734139
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0028%",
      "FGI": "50/100",
      "open_interest": "$592026580.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2538.36",
        "lastSz": "10.05",
        "askPx": "2538.37",
        "askSz": "1304.03",
        "bidPx": "2538.36",
        "bidSz": "284.2",
        "open24h": "2569.91",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3404712.328",
        "vol24h": "34047123.28",
        "ts": "1748716384224",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T18:33:04+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110219.73 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-100.45281000000318 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][02:33:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:33:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_023257.png
[gemini_api_caller.py][02:33:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:33:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:33:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:33:06] [INFO] AFC remote call 1 is done.
[_client.py][02:33:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:45:03] [INFO] 截图模块运行中...
[截图模块][02:45:04] [INFO]  __main__ 入口被执行
[截图模块][02:45:04] [INFO]  启动时主动清理内存...
[截图模块][02:45:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:45:05] [INFO]  已执行 pkill chrome
[截图模块][02:45:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:45:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][02:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][02:45:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][02:45:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:45:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:45:10] [INFO] 启动浏览器 (有头模式)
[截图模块][02:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:45:48] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][02:45:48] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:45:48] [INFO]  打开目标图表页...
[截图模块][02:45:55] [INFO]  等待5秒加载页面...
[截图模块][02:46:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:46:01] [INFO]  快捷键已发送
[截图模块][02:46:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_024602.png
[截图模块][02:46:02] [INFO]  关闭浏览器...
[数据收集总模块][02:46:02] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_024602.png
[数据收集总模块][02:46:02] [INFO] 技术指标模块运行中...
[技术指标模块][02:46:03] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:46:03] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:46:03] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:46:04] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:46:04] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:46:04] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:46:04] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:04] [INFO] 宏观因子模块运行中...
[数据收集总模块][02:46:07] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:07] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:46:08] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][02:46:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:46:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:46:08] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][02:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:46:09] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:46:09] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:46:09] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_024602.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104147.8,
        "volume": 92451.32,
        "RSI": 32.421117683520635,
        "MACD_macd": 116.50599902241083,
        "MACD_signal": 186.9714530780993,
        "ATR": 371.3554574236021,
        "ADX": 31.599777641101326,
        "Stoch_K": 15.084153699587215,
        "Stoch_D": 34.362170735479836,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.715555973434374,
        "BB_upper": 105001.84416751581,
        "BB_lower": 104093.84583248419,
        "BB_middle": 104547.845,
        "EMA5": 104415.01367306268,
        "EMA21": 104433.29194675005,
        "EMA55": 104183.70453822995,
        "EMA144": 104128.57010074507,
        "EMA200": 104158.23371476292,
        "VWAP": 104021.12210695358
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109337.0,
        "volume": 1081378.83,
        "RSI": 46.95116306943878,
        "MACD_macd": 495.7379690301459,
        "MACD_signal": 474.7898929840939,
        "ATR": 807.0374752519145,
        "ADX": 29.93020592679907,
        "Stoch_K": 46.132008516678496,
        "Stoch_D": 71.56217963882965,
        "StochRSI_K": 0.0,
        "StochRSI_D": 58.59633916330784,
        "BB_upper": 110295.19417263995,
        "BB_lower": 108110.44582736003,
        "BB_middle": 109202.81999999999,
        "EMA5": 109754.54132505902,
        "EMA21": 109193.66912963192,
        "EMA55": 108163.14857677867,
        "EMA144": 106601.27258627967,
        "EMA200": 106115.47256938115,
        "VWAP": 106711.2002878193
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22984951017.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104403.4",
        "lastSz": "1.42",
        "askPx": "104403.4",
        "askSz": "126.49",
        "bidPx": "104403.3",
        "bidSz": "1234.92",
        "open24h": "104677.8",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "57177.267",
        "vol24h": "5717726.7",
        "ts": "1748717168448",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110259.86 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T18:46:09+00:00Z"
}
[gemini_api_caller.py][02:46:11] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:46:11] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_024602.png
[gemini_api_caller.py][02:46:11] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:46:11] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:46:11] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:46:11] [INFO] AFC remote call 1 is done.
[_client.py][02:46:14] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][02:47:38] [INFO] 截图模块运行中...
[截图模块][02:47:40] [INFO]  __main__ 入口被执行
[截图模块][02:47:40] [INFO]  启动时主动清理内存...
[截图模块][02:47:40] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][02:47:40] [INFO]  已执行 pkill chrome
[截图模块][02:47:42] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:47:42] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][02:47:42] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][02:47:42] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][02:47:42] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][02:47:42] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][02:47:42] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][02:47:43] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][02:47:45] [INFO]  启动浏览器 (有头模式)
[截图模块][02:47:45] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:48:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][02:48:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][02:48:18] [INFO]  打开目标图表页...
[截图模块][02:48:24] [INFO]  等待5秒加载页面...
[截图模块][02:48:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][02:48:30] [INFO]  快捷键已发送
[截图模块][02:48:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_024831.png
[截图模块][02:48:31] [INFO]  关闭浏览器...
[数据收集总模块][02:48:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_024831.png
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:40] [INFO]  __main__ 入口被执行
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:40] [INFO]  启动时主动清理内存...
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:40] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:40] [INFO]  已执行 pkill chrome
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:42] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:43] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:45] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:47:45] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:18] [INFO]  打开目标图表页...
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:24] [INFO]  等待5秒加载页面...
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:30] [INFO]  快捷键已发送
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_024831.png
[数据收集总模块][02:48:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][02:48:31] [INFO]  关闭浏览器...
[数据收集总模块][02:48:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_024831.png
[数据收集总模块][02:48:31] [INFO] 技术指标模块运行中...
[技术指标模块][02:48:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][02:48:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][02:48:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][02:48:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][02:48:33] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][02:48:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][02:48:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:48:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][02:48:34] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][02:48:35] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:48:35] [INFO] OKX 持仓模块运行中...
[get_positions.py][02:48:37] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][02:48:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][02:48:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][02:48:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][02:48:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][02:48:38] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][02:48:38] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][02:48:38] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_024831.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2548.19,
        "volume": 437683.41,
        "RSI": 30.531757228947995,
        "MACD_macd": 7.986895685973195,
        "MACD_signal": 12.293876427630504,
        "ATR": 15.719329245508,
        "ADX": 34.08582309215152,
        "Stoch_K": 19.188118811881296,
        "Stoch_D": 30.434177195766853,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.869570982987624,
        "BB_upper": 2596.919811614451,
        "BB_lower": 2539.1591883855485,
        "BB_middle": 2568.0395,
        "EMA5": 2561.0025128957313,
        "EMA21": 2560.692806817862,
        "EMA55": 2544.2779459762746,
        "EMA144": 2535.6266278157536,
        "EMA200": 2534.7975459260565,
        "VWAP": 2527.4570574272875
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.89,
        "volume": 3850614.91,
        "RSI": 46.44626806777142,
        "MACD_macd": 4.837470520686111,
        "MACD_signal": 2.7523663314064515,
        "ATR": 28.966828992639876,
        "ADX": 26.6174756320769,
        "Stoch_K": 45.440168687401105,
        "Stoch_D": 51.312598840274084,
        "StochRSI_K": 10.375242488758246,
        "StochRSI_D": 22.156546580681578,
        "BB_upper": 2693.6805678319147,
        "BB_lower": 2615.3064321680854,
        "BB_middle": 2654.4935,
        "EMA5": 2668.777735920313,
        "EMA21": 2661.9853244152864,
        "EMA55": 2651.520862059679,
        "EMA144": 2611.734210562405,
        "EMA200": 2595.6281364838783,
        "VWAP": 2628.600372734139
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0026%",
      "FGI": "50/100",
      "open_interest": "$592313690.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2534.74",
        "lastSz": "26.89",
        "askPx": "2534.75",
        "askSz": "781.83",
        "bidPx": "2534.74",
        "bidSz": "1321.47",
        "open24h": "2571.38",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3386636.926",
        "vol24h": "33866369.26",
        "ts": "1748717317607",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T18:48:38+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110279.14 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-42.09059999999673 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][02:48:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][02:48:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_024831.png
[gemini_api_caller.py][02:48:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][02:48:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][02:48:40] [INFO] AFC is enabled with max remote calls: 10.
[models.py][02:48:40] [INFO] AFC remote call 1 is done.
[_client.py][02:48:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:00:03] [INFO] 截图模块运行中...
[截图模块][03:00:05] [INFO]  __main__ 入口被执行
[截图模块][03:00:05] [INFO]  启动时主动清理内存...
[截图模块][03:00:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:00:05] [INFO]  已执行 pkill chrome
[截图模块][03:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][03:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][03:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:00:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:00:10] [INFO] 启动浏览器 (有头模式)
[截图模块][03:00:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:00:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:00:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:00:47] [INFO]  打开目标图表页...
[截图模块][03:00:53] [INFO]  等待5秒加载页面...
[截图模块][03:00:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:00:59] [INFO]  快捷键已发送
[截图模块][03:01:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_030100.png
[截图模块][03:01:00] [INFO]  关闭浏览器...
[数据收集总模块][03:01:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_030100.png
[数据收集总模块][03:01:00] [INFO] 技术指标模块运行中...
[技术指标模块][03:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:01:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:01:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:01:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:01:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:01:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:01:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:01:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][03:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:01:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:01:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:01:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_030100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104254.5,
        "volume": 111998.78,
        "RSI": 35.805439421258114,
        "MACD_macd": 161.5528966701968,
        "MACD_signal": 204.5377984029435,
        "ATR": 390.0716606738221,
        "ADX": 29.67192897175729,
        "Stoch_K": 25.773745997865525,
        "Stoch_D": 45.762338545205154,
        "StochRSI_K": 0.0,
        "StochRSI_D": 10.562758331606119,
        "BB_upper": 105043.17034197936,
        "BB_lower": 104028.83965802062,
        "BB_middle": 104536.00499999999,
        "EMA5": 104548.62050959401,
        "EMA21": 104461.8466731096,
        "EMA55": 104186.92711875384,
        "EMA144": 104145.8225477988,
        "EMA200": 104184.08862846365,
        "VWAP": 104019.90405669593
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110104.0,
        "volume": 970357.87,
        "RSI": 74.9086171511655,
        "MACD_macd": 554.1965730776865,
        "MACD_signal": 469.4563020577951,
        "ATR": 690.5354850390146,
        "ADX": 30.330484487107917,
        "Stoch_K": 82.42252188313225,
        "Stoch_D": 85.98477892965609,
        "StochRSI_K": 80.47321265440527,
        "StochRSI_D": 91.92967716275162,
        "BB_upper": 110281.11982482075,
        "BB_lower": 108069.36017517923,
        "BB_middle": 109175.23999999999,
        "EMA5": 109963.31198758853,
        "EMA21": 109179.34672281718,
        "EMA55": 108123.32706192438,
        "EMA144": 106596.83985456258,
        "EMA200": 106132.81196036379,
        "VWAP": 106633.11757391327
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22987470372.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104515.1",
        "lastSz": "2",
        "askPx": "104515.1",
        "askSz": "1143.02",
        "bidPx": "104515",
        "bidSz": "685.19",
        "open24h": "104916.5",
        "high24h": "104950",
        "low24h": "103022.1",
        "volCcy24h": "56176.9457",
        "vol24h": "5617694.57",
        "ts": "1748718067419",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110198.74 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T19:01:07+00:00Z"
}
[gemini_api_caller.py][03:01:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:01:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_030100.png
[gemini_api_caller.py][03:01:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:01:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:01:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:01:09] [INFO] AFC remote call 1 is done.
[_client.py][03:01:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:02:04] [INFO] 截图模块运行中...
[截图模块][03:02:06] [INFO]  __main__ 入口被执行
[截图模块][03:02:06] [INFO]  启动时主动清理内存...
[截图模块][03:02:06] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:02:06] [INFO]  已执行 pkill chrome
[截图模块][03:02:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:02:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:02:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][03:02:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][03:02:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:02:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:02:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:02:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:02:11] [INFO]  启动浏览器 (有头模式)
[截图模块][03:02:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:02:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:02:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:02:45] [INFO]  打开目标图表页...
[截图模块][03:02:51] [INFO]  等待5秒加载页面...
[截图模块][03:02:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:02:57] [INFO]  快捷键已发送
[截图模块][03:02:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_030258.png
[截图模块][03:02:58] [INFO]  关闭浏览器...
[数据收集总模块][03:02:58] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_030258.png
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:06] [INFO]  __main__ 入口被执行
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:06] [INFO]  启动时主动清理内存...
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:06] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:06] [INFO]  已执行 pkill chrome
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:11] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:45] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:45] [INFO]  打开目标图表页...
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:51] [INFO]  等待5秒加载页面...
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:57] [INFO]  快捷键已发送
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_030258.png
[数据收集总模块][03:02:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:02:58] [INFO]  关闭浏览器...
[数据收集总模块][03:02:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_030258.png
[数据收集总模块][03:02:58] [INFO] 技术指标模块运行中...
[技术指标模块][03:02:59] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:03:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:03:00] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:03:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:03:00] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:03:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:03:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:03:01] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:03:01] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:03:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:03:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:03:04] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:03:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:03:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:03:05] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][03:03:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:03:05] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:03:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:03:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_030258.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2555.34,
        "volume": 511892.92,
        "RSI": 35.73852026200319,
        "MACD_macd": 10.37004719324068,
        "MACD_signal": 13.368593458481959,
        "ATR": 15.546918803501567,
        "ADX": 31.622089864842373,
        "Stoch_K": 21.13402061855674,
        "Stoch_D": 33.797102906327005,
        "StochRSI_K": 0.0,
        "StochRSI_D": 4.869573307374636,
        "BB_upper": 2600.4437602091953,
        "BB_lower": 2533.379239790804,
        "BB_middle": 2566.9114999999997,
        "EMA5": 2567.4087693435968,
        "EMA21": 2561.9433118002767,
        "EMA55": 2544.2098042885377,
        "EMA144": 2536.1613798766894,
        "EMA200": 2535.7070702852743,
        "VWAP": 2527.2561454326296
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.27,
        "volume": 1579633.8,
        "RSI": 51.41272783881493,
        "MACD_macd": 5.818288339566152,
        "MACD_signal": 2.2223497318586523,
        "ATR": 27.378648316959755,
        "ADX": 28.239817346451115,
        "Stoch_K": 53.220875065893594,
        "Stoch_D": 63.552978386926675,
        "StochRSI_K": 26.01525853643597,
        "StochRSI_D": 50.85980543083642,
        "BB_upper": 2693.132266402645,
        "BB_lower": 2613.7987335973544,
        "BB_middle": 2653.4655,
        "EMA5": 2673.221603880469,
        "EMA21": 2662.195823504717,
        "EMA55": 2651.5416530043926,
        "EMA144": 2614.1225228440926,
        "EMA200": 2599.4820452139174,
        "VWAP": 2627.8534673749477
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0026%",
      "FGI": "50/100",
      "open_interest": "$591597580.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2541.8",
        "lastSz": "0.24",
        "askPx": "2541.8",
        "askSz": "398.48",
        "bidPx": "2541.79",
        "bidSz": "1027.48",
        "open24h": "2581.67",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3341381.055",
        "vol24h": "33413810.55",
        "ts": "1748718185232",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T19:03:06+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110164.36 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-155.27325000000238 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][03:03:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:03:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_030258.png
[gemini_api_caller.py][03:03:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:03:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:03:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:03:07] [INFO] AFC remote call 1 is done.
[_client.py][03:03:10] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:15:03] [INFO] 截图模块运行中...
[截图模块][03:15:04] [INFO]  __main__ 入口被执行
[截图模块][03:15:04] [INFO]  启动时主动清理内存...
[截图模块][03:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:15:04] [INFO]  已执行 pkill chrome
[截图模块][03:15:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:15:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][03:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][03:15:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:15:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:15:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:15:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:15:10] [INFO] 启动浏览器 (有头模式)
[截图模块][03:15:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:15:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:15:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:15:47] [INFO]  打开目标图表页...
[截图模块][03:15:54] [INFO]  等待5秒加载页面...
[截图模块][03:15:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:15:59] [INFO]  快捷键已发送
[截图模块][03:16:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_031600.png
[截图模块][03:16:00] [INFO]  关闭浏览器...
[数据收集总模块][03:16:01] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_031600.png
[数据收集总模块][03:16:01] [INFO] 技术指标模块运行中...
[技术指标模块][03:16:02] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:16:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:16:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:16:03] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:16:03] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:16:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:16:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:16:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:16:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:16:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:16:07] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:16:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][03:16:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:16:08] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:16:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:16:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_031600.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104687.3,
        "volume": 134024.87,
        "RSI": 56.561097483482456,
        "MACD_macd": 205.8020252017741,
        "MACD_signal": 215.17604806294509,
        "ATR": 346.34433575654964,
        "ADX": 27.528273171227113,
        "Stoch_K": 62.22861250898676,
        "Stoch_D": 65.1873152807739,
        "StochRSI_K": 20.146755924848904,
        "StochRSI_D": 32.88922240501727,
        "BB_upper": 105072.81869954156,
        "BB_lower": 103972.75130045845,
        "BB_middle": 104522.785,
        "EMA5": 104695.680764391,
        "EMA21": 104482.59328183476,
        "EMA55": 104188.51042678782,
        "EMA144": 104182.12655089807,
        "EMA200": 104238.96839086036,
        "VWAP": 104018.43836499378
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110104.0,
        "volume": 970357.87,
        "RSI": 74.9086171511655,
        "MACD_macd": 554.1965730776865,
        "MACD_signal": 469.4563020577951,
        "ATR": 690.5354850390146,
        "ADX": 30.330484487107917,
        "Stoch_K": 82.42252188313225,
        "Stoch_D": 85.98477892965609,
        "StochRSI_K": 80.47321265440527,
        "StochRSI_D": 91.92967716275162,
        "BB_upper": 110281.11982482075,
        "BB_lower": 108069.36017517923,
        "BB_middle": 109175.23999999999,
        "EMA5": 109963.31198758853,
        "EMA21": 109179.34672281718,
        "EMA55": 108123.32706192438,
        "EMA144": 106596.83985456258,
        "EMA200": 106132.81196036379,
        "VWAP": 106633.11757391327
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22995211589.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104647.4",
        "lastSz": "0.26",
        "askPx": "104647.4",
        "askSz": "1355.59",
        "bidPx": "104647.3",
        "bidSz": "174.29",
        "open24h": "104786.7",
        "high24h": "104925.6",
        "low24h": "103022.1",
        "volCcy24h": "55502.5763",
        "vol24h": "5550257.63",
        "ts": "1748718967710",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110209.47 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T19:16:08+00:00Z"
}
[gemini_api_caller.py][03:16:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:16:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_031600.png
[gemini_api_caller.py][03:16:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:16:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:16:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:16:10] [INFO] AFC remote call 1 is done.
[_client.py][03:16:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:16:59] [INFO] 截图模块运行中...
[截图模块][03:17:01] [INFO]  __main__ 入口被执行
[截图模块][03:17:01] [INFO]  启动时主动清理内存...
[截图模块][03:17:01] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:17:01] [INFO]  已执行 pkill chrome
[截图模块][03:17:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:17:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][03:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][03:17:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:17:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:17:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:17:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:17:06] [INFO]  启动浏览器 (有头模式)
[截图模块][03:17:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:17:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:17:16] [INFO]  打开目标图表页...
[截图模块][03:17:22] [INFO]  等待5秒加载页面...
[截图模块][03:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:17:28] [INFO]  快捷键已发送
[截图模块][03:17:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_031729.png
[截图模块][03:17:29] [INFO]  关闭浏览器...
[数据收集总模块][03:17:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_031729.png
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:01] [INFO]  __main__ 入口被执行
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:01] [INFO]  启动时主动清理内存...
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:01] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:01] [INFO]  已执行 pkill chrome
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:06] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:16] [INFO]  打开目标图表页...
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:22] [INFO]  等待5秒加载页面...
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:28] [INFO]  快捷键已发送
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_031729.png
[数据收集总模块][03:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:17:29] [INFO]  关闭浏览器...
[数据收集总模块][03:17:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_031729.png
[数据收集总模块][03:17:29] [INFO] 技术指标模块运行中...
[技术指标模块][03:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:17:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:17:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:17:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:17:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:17:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:17:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:17:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:17:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:17:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:17:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][03:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:17:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:17:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:17:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_031729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2572.5,
        "volume": 780738.68,
        "RSI": 55.38408152668506,
        "MACD_macd": 12.535143386411164,
        "MACD_signal": 14.119016746669224,
        "ATR": 13.91106055896745,
        "ADX": 30.488346450499083,
        "Stoch_K": 50.98039215686253,
        "Stoch_D": 46.96553882757644,
        "StochRSI_K": 14.608719198772144,
        "StochRSI_D": 10.664063234083457,
        "BB_upper": 2603.333485795689,
        "BB_lower": 2527.5865142043112,
        "BB_middle": 2565.46,
        "EMA5": 2573.4431540153946,
        "EMA21": 2562.6035559740103,
        "EMA55": 2543.7678037749624,
        "EMA144": 2535.6175583596482,
        "EMA200": 2535.104739156973,
        "VWAP": 2526.8937359811775
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.27,
        "volume": 1579633.8,
        "RSI": 51.41272783881493,
        "MACD_macd": 5.818288339566152,
        "MACD_signal": 2.2223497318586523,
        "ATR": 27.378648316959755,
        "ADX": 28.239817346451115,
        "Stoch_K": 53.220875065893594,
        "Stoch_D": 63.552978386926675,
        "StochRSI_K": 26.01525853643597,
        "StochRSI_D": 50.85980543083642,
        "BB_upper": 2693.132266402645,
        "BB_lower": 2613.7987335973544,
        "BB_middle": 2653.4655,
        "EMA5": 2673.221603880469,
        "EMA21": 2662.195823504717,
        "EMA55": 2651.5416530043926,
        "EMA144": 2614.1225228440926,
        "EMA200": 2599.4820452139174,
        "VWAP": 2627.8534673749477
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "50/100",
      "open_interest": "$592753201.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2538.56",
        "lastSz": "0.3",
        "askPx": "2538.56",
        "askSz": "363.12",
        "bidPx": "2538.55",
        "bidSz": "2957.5",
        "open24h": "2578.74",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3325437.033",
        "vol24h": "33254370.33",
        "ts": "1748719056450",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T19:17:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110226.26 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-93.98523000000206 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][03:17:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:17:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_031729.png
[gemini_api_caller.py][03:17:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:17:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:17:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:17:38] [INFO] AFC remote call 1 is done.
[_client.py][03:17:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:30:02] [INFO] 截图模块运行中...
[截图模块][03:30:04] [INFO]  __main__ 入口被执行
[截图模块][03:30:04] [INFO]  启动时主动清理内存...
[截图模块][03:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:30:04] [INFO]  已执行 pkill chrome
[截图模块][03:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][03:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][03:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:30:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:30:09] [INFO] 启动浏览器 (有头模式)
[截图模块][03:30:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:30:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:30:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:30:46] [INFO]  打开目标图表页...
[截图模块][03:30:53] [INFO]  等待5秒加载页面...
[截图模块][03:30:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:30:59] [INFO]  快捷键已发送
[截图模块][03:31:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_033100.png
[截图模块][03:31:00] [INFO]  关闭浏览器...
[数据收集总模块][03:31:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_033100.png
[数据收集总模块][03:31:00] [INFO] 技术指标模块运行中...
[技术指标模块][03:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:31:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:31:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:31:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:31:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:31:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:31:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:31:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:31:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:31:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][03:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:31:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:31:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:31:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_033100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104641.6,
        "volume": 63482.24,
        "RSI": 54.127661368746885,
        "MACD_macd": 215.28018835757393,
        "MACD_signal": 217.48101162392823,
        "ATR": 319.55106291587606,
        "ADX": 28.03031206053223,
        "Stoch_K": 49.28465712876316,
        "Stoch_D": 66.95170750424886,
        "StochRSI_K": 11.541637310376384,
        "StochRSI_D": 43.677239314717376,
        "BB_upper": 105106.53042249588,
        "BB_lower": 103852.1395775041,
        "BB_middle": 104479.33499999999,
        "EMA5": 104699.87114658649,
        "EMA21": 104462.12687252839,
        "EMA55": 104171.49524685851,
        "EMA144": 104188.56252395404,
        "EMA200": 104254.30457714299,
        "VWAP": 104007.3146642155
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110104.0,
        "volume": 970357.87,
        "RSI": 74.9086171511655,
        "MACD_macd": 554.1965730776865,
        "MACD_signal": 469.4563020577951,
        "ATR": 690.5354850390146,
        "ADX": 30.330484487107917,
        "Stoch_K": 82.42252188313225,
        "Stoch_D": 85.98477892965609,
        "StochRSI_K": 80.47321265440527,
        "StochRSI_D": 91.92967716275162,
        "BB_upper": 110281.11982482075,
        "BB_lower": 108069.36017517923,
        "BB_middle": 109175.23999999999,
        "EMA5": 109963.31198758853,
        "EMA21": 109179.34672281718,
        "EMA55": 108123.32706192438,
        "EMA144": 106596.83985456258,
        "EMA200": 106132.81196036379,
        "VWAP": 106633.11757391327
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22981427108.99997 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104653.6",
        "lastSz": "0.01",
        "askPx": "104653.7",
        "askSz": "863.57",
        "bidPx": "104653.6",
        "bidSz": "175.27",
        "open24h": "104671.6",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "55221.2989",
        "vol24h": "5522129.89",
        "ts": "1748719867102",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110194.85 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T19:31:07+00:00Z"
}
[gemini_api_caller.py][03:31:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:31:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_033100.png
[gemini_api_caller.py][03:31:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:31:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:31:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:31:09] [INFO] AFC remote call 1 is done.
[_client.py][03:31:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:31:55] [INFO] 截图模块运行中...
[截图模块][03:31:56] [INFO]  __main__ 入口被执行
[截图模块][03:31:56] [INFO]  启动时主动清理内存...
[截图模块][03:31:56] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:31:56] [INFO]  已执行 pkill chrome
[截图模块][03:31:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:31:58] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:31:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][03:31:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][03:31:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:31:58] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:31:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:31:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:32:01] [INFO]  启动浏览器 (有头模式)
[截图模块][03:32:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:32:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:32:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:32:16] [INFO]  打开目标图表页...
[截图模块][03:32:22] [INFO]  等待5秒加载页面...
[截图模块][03:32:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:32:28] [INFO]  快捷键已发送
[截图模块][03:32:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_033229.png
[截图模块][03:32:29] [INFO]  关闭浏览器...
[数据收集总模块][03:32:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_033229.png
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:56] [INFO]  __main__ 入口被执行
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:56] [INFO]  启动时主动清理内存...
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:56] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:56] [INFO]  已执行 pkill chrome
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:31:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:01] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:16] [INFO]  打开目标图表页...
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:22] [INFO]  等待5秒加载页面...
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:28] [INFO]  快捷键已发送
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_033229.png
[数据收集总模块][03:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:32:29] [INFO]  关闭浏览器...
[数据收集总模块][03:32:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_033229.png
[数据收集总模块][03:32:29] [INFO] 技术指标模块运行中...
[技术指标模块][03:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:32:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:32:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:32:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:32:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:32:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:32:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:32:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:32:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:32:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:32:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:32:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][03:32:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:32:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:32:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:32:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_033229.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2568.95,
        "volume": 312126.72,
        "RSI": 50.506065193484766,
        "MACD_macd": 13.366944289835828,
        "MACD_signal": 14.512798144268729,
        "ATR": 12.875837910294432,
        "ADX": 31.86725512776098,
        "Stoch_K": 29.276895943561744,
        "Stoch_D": 54.312983866198095,
        "StochRSI_K": 0.0,
        "StochRSI_D": 12.421984495165676,
        "BB_upper": 2605.822636022467,
        "BB_lower": 2519.7193639775323,
        "BB_middle": 2562.7709999999997,
        "EMA5": 2573.914731023092,
        "EMA21": 2561.614153432942,
        "EMA55": 2542.7864063955726,
        "EMA144": 2535.867807056613,
        "EMA200": 2535.8547754749106,
        "VWAP": 2525.9815492600865
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.27,
        "volume": 1579633.8,
        "RSI": 51.41272783881493,
        "MACD_macd": 5.818288339566152,
        "MACD_signal": 2.2223497318586523,
        "ATR": 27.378648316959755,
        "ADX": 28.239817346451115,
        "Stoch_K": 53.220875065893594,
        "Stoch_D": 63.552978386926675,
        "StochRSI_K": 26.01525853643597,
        "StochRSI_D": 50.85980543083642,
        "BB_upper": 2693.132266402645,
        "BB_lower": 2613.7987335973544,
        "BB_middle": 2653.4655,
        "EMA5": 2673.221603880469,
        "EMA21": 2662.195823504717,
        "EMA55": 2651.5416530043926,
        "EMA144": 2614.1225228440926,
        "EMA200": 2599.4820452139174,
        "VWAP": 2627.8534673749477
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.003%",
      "FGI": "50/100",
      "open_interest": "$592060885.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2540.22",
        "lastSz": "20",
        "askPx": "2540.23",
        "askSz": "981.19",
        "bidPx": "2540.22",
        "bidSz": "910.49",
        "open24h": "2576.47",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3313529.657",
        "vol24h": "33135296.57",
        "ts": "1748719955716",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T19:32:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110256.13 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-63.64919999999814 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][03:32:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:32:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_033229.png
[gemini_api_caller.py][03:32:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:32:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:32:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:32:38] [INFO] AFC remote call 1 is done.
[_client.py][03:32:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:45:02] [INFO] 截图模块运行中...
[截图模块][03:45:03] [INFO]  __main__ 入口被执行
[截图模块][03:45:03] [INFO]  启动时主动清理内存...
[截图模块][03:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:45:04] [INFO]  已执行 pkill chrome
[截图模块][03:45:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:45:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][03:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][03:45:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][03:45:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:45:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:45:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:45:09] [INFO] 启动浏览器 (有头模式)
[截图模块][03:45:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:45:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][03:45:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:45:46] [INFO]  打开目标图表页...
[截图模块][03:45:52] [INFO]  等待5秒加载页面...
[截图模块][03:45:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:45:58] [INFO]  快捷键已发送
[截图模块][03:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_034559.png
[截图模块][03:45:59] [INFO]  关闭浏览器...
[数据收集总模块][03:45:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_034559.png
[数据收集总模块][03:45:59] [INFO] 技术指标模块运行中...
[技术指标模块][03:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:46:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:46:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:46:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][03:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:46:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:46:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][03:46:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:46:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:46:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][03:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:46:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:46:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_034559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104853.0,
        "volume": 74446.49,
        "RSI": 69.80479842244104,
        "MACD_macd": 228.91748550235934,
        "MACD_signal": 218.01209071597452,
        "ATR": 322.11272620213674,
        "ADX": 29.411931029211768,
        "Stoch_K": 84.04867620457178,
        "Stoch_D": 78.54850010238401,
        "StochRSI_K": 66.97933064376947,
        "StochRSI_D": 58.57511881223012,
        "BB_upper": 105132.94809040322,
        "BB_lower": 103738.41190959679,
        "BB_middle": 104435.68000000001,
        "EMA5": 104729.00671987973,
        "EMA21": 104444.18167507184,
        "EMA55": 104154.80775111212,
        "EMA144": 104188.92643666659,
        "EMA200": 104260.25886190815,
        "VWAP": 104001.82359463227
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110104.0,
        "volume": 970357.87,
        "RSI": 74.9086171511655,
        "MACD_macd": 554.1965730776865,
        "MACD_signal": 469.4563020577951,
        "ATR": 690.5354850390146,
        "ADX": 30.330484487107917,
        "Stoch_K": 82.42252188313225,
        "Stoch_D": 85.98477892965609,
        "StochRSI_K": 80.47321265440527,
        "StochRSI_D": 91.92967716275162,
        "BB_upper": 110281.11982482075,
        "BB_lower": 108069.36017517923,
        "BB_middle": 109175.23999999999,
        "EMA5": 109963.31198758853,
        "EMA21": 109179.34672281718,
        "EMA55": 108123.32706192438,
        "EMA144": 106596.83985456258,
        "EMA200": 106132.81196036379,
        "VWAP": 106633.11757391327
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102712.1,
        "volume": 924373.51,
        "RSI": 43.27580891807354,
        "MACD_macd": -702.2109854693408,
        "MACD_signal": -703.9810759738407,
        "ATR": 1413.009049721452,
        "ADX": 16.565238813695373,
        "Stoch_K": 43.14085032322238,
        "Stoch_D": 29.117976131277885,
        "StochRSI_K": 61.084454212680505,
        "StochRSI_D": 20.361484737560172,
        "BB_upper": 104457.77014445985,
        "BB_lower": 102107.50985554015,
        "BB_middle": 103282.64,
        "EMA5": 102654.78497206823,
        "EMA21": 103514.71993819262,
        "EMA55": 104965.12741305001,
        "EMA144": 105666.4165821836,
        "EMA200": 105598.21481239104,
        "VWAP": 106910.47566809555
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22976738035.000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104672",
        "lastSz": "6.25",
        "askPx": "104672",
        "askSz": "130.81",
        "bidPx": "104671.9",
        "bidSz": "707.94",
        "open24h": "104500",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "54564.2503",
        "vol24h": "5456425.03",
        "ts": "1748720765714",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110215.38 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T19:46:06+00:00Z"
}
[gemini_api_caller.py][03:46:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:46:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_034559.png
[gemini_api_caller.py][03:46:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:46:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:46:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:46:08] [INFO] AFC remote call 1 is done.
[_client.py][03:46:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][03:46:55] [INFO] 截图模块运行中...
[截图模块][03:46:56] [INFO]  __main__ 入口被执行
[截图模块][03:46:56] [INFO]  启动时主动清理内存...
[截图模块][03:46:56] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][03:46:57] [INFO]  已执行 pkill chrome
[截图模块][03:46:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:46:58] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][03:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][03:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][03:46:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][03:46:58] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][03:46:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][03:47:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][03:47:01] [INFO]  启动浏览器 (有头模式)
[截图模块][03:47:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][03:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][03:47:16] [INFO]  打开目标图表页...
[截图模块][03:47:22] [INFO]  等待5秒加载页面...
[截图模块][03:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][03:47:28] [INFO]  快捷键已发送
[截图模块][03:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_034729.png
[截图模块][03:47:29] [INFO]  关闭浏览器...
[数据收集总模块][03:47:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_034729.png
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:56] [INFO]  __main__ 入口被执行
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:56] [INFO]  启动时主动清理内存...
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:56] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:57] [INFO]  已执行 pkill chrome
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:46:58] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:01] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:01] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:16] [INFO]  打开目标图表页...
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:22] [INFO]  等待5秒加载页面...
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:28] [INFO]  快捷键已发送
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_034729.png
[数据收集总模块][03:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][03:47:29] [INFO]  关闭浏览器...
[数据收集总模块][03:47:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_034729.png
[数据收集总模块][03:47:29] [INFO] 技术指标模块运行中...
[技术指标模块][03:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][03:47:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][03:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][03:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][03:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][03:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][03:47:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:47:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][03:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][03:47:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:47:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][03:47:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][03:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][03:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][03:47:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][03:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][03:47:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][03:47:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][03:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_034729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2576.81,
        "volume": 340064.37,
        "RSI": 63.91530996611244,
        "MACD_macd": 14.59840046849331,
        "MACD_signal": 14.800719569520057,
        "ATR": 13.201351941583784,
        "ADX": 35.03980659107984,
        "Stoch_K": 60.639328382305024,
        "Stoch_D": 73.1858593476975,
        "StochRSI_K": 17.38348027177577,
        "StochRSI_D": 28.065024789155064,
        "BB_upper": 2607.543218694853,
        "BB_lower": 2512.910781305147,
        "BB_middle": 2560.227,
        "EMA5": 2576.3970965346375,
        "EMA21": 2560.8804075352155,
        "EMA55": 2541.7622123859865,
        "EMA144": 2534.8943943490285,
        "EMA200": 2534.771581429581,
        "VWAP": 2525.602205957331
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.27,
        "volume": 1579633.8,
        "RSI": 51.41272783881493,
        "MACD_macd": 5.818288339566152,
        "MACD_signal": 2.2223497318586523,
        "ATR": 27.378648316959755,
        "ADX": 28.239817346451115,
        "Stoch_K": 53.220875065893594,
        "Stoch_D": 63.552978386926675,
        "StochRSI_K": 26.01525853643597,
        "StochRSI_D": 50.85980543083642,
        "BB_upper": 2693.132266402645,
        "BB_lower": 2613.7987335973544,
        "BB_middle": 2653.4655,
        "EMA5": 2673.221603880469,
        "EMA21": 2662.195823504717,
        "EMA55": 2651.5416530043926,
        "EMA144": 2614.1225228440926,
        "EMA200": 2599.4820452139174,
        "VWAP": 2627.8534673749477
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.71,
        "volume": 8407175.09,
        "RSI": 57.18182144935495,
        "MACD_macd": 12.645002845153158,
        "MACD_signal": 11.038951756797923,
        "ATR": 79.71146501540616,
        "ADX": 27.000156692881696,
        "Stoch_K": 62.28934010152286,
        "Stoch_D": 51.91784338521501,
        "StochRSI_K": 40.71180978657455,
        "StochRSI_D": 20.849094154263415,
        "BB_upper": 2631.785230572135,
        "BB_lower": 2437.061769427865,
        "BB_middle": 2534.4235,
        "EMA5": 2556.5811959607204,
        "EMA21": 2541.5722490316657,
        "EMA55": 2539.532635147431,
        "EMA144": 2547.7978837854153,
        "EMA200": 2547.8527330664324,
        "VWAP": 2562.1832950341
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0034%",
      "FGI": "50/100",
      "open_interest": "$591708459.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2538.76",
        "lastSz": "0.03",
        "askPx": "2538.76",
        "askSz": "691.38",
        "bidPx": "2538.75",
        "bidSz": "2113.72",
        "open24h": "2572.34",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3296630.367",
        "vol24h": "32966303.67",
        "ts": "1748720856506",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T19:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110211.64 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-108.4602900000029 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][03:47:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][03:47:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_034729.png
[gemini_api_caller.py][03:47:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][03:47:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][03:47:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][03:47:38] [INFO] AFC remote call 1 is done.
[_client.py][03:47:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:00:02] [INFO] 截图模块运行中...
[截图模块][04:00:03] [INFO]  __main__ 入口被执行
[截图模块][04:00:03] [INFO]  启动时主动清理内存...
[截图模块][04:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:00:03] [INFO]  已执行 pkill chrome
[截图模块][04:00:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:00:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][04:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][04:00:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:00:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:00:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:00:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:00:08] [INFO] 启动浏览器 (有头模式)
[截图模块][04:00:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:00:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:00:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:00:44] [INFO]  打开目标图表页...
[截图模块][04:00:51] [INFO]  等待5秒加载页面...
[截图模块][04:00:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:00:57] [INFO]  快捷键已发送
[截图模块][04:00:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_040058.png
[截图模块][04:00:58] [INFO]  关闭浏览器...
[数据收集总模块][04:00:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_040058.png
[数据收集总模块][04:00:58] [INFO] 技术指标模块运行中...
[技术指标模块][04:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:00:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:01:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:01:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:01:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:01:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][04:01:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:01:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:01:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][04:01:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:01:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:01:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][04:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:01:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:01:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:01:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_040058.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104752.5,
        "volume": 125553.72,
        "RSI": 65.7132579262569,
        "MACD_macd": 221.49598250396957,
        "MACD_signal": 215.30198169114013,
        "ATR": 327.86856323446113,
        "ADX": 29.529181614578654,
        "Stoch_K": 67.5217891794116,
        "Stoch_D": 74.84073775328459,
        "StochRSI_K": 52.51076999425665,
        "StochRSI_D": 46.34885226682428,
        "BB_upper": 105090.22384602971,
        "BB_lower": 103691.73615397031,
        "BB_middle": 104390.98000000001,
        "EMA5": 104667.01007981958,
        "EMA21": 104403.29804657756,
        "EMA55": 104128.33423905718,
        "EMA144": 104173.94992936177,
        "EMA200": 104245.94125796705,
        "VWAP": 103993.34882300954
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110182.4,
        "volume": 422083.32,
        "RSI": 79.08010051908587,
        "MACD_macd": 542.6314324342529,
        "MACD_signal": 448.121829322524,
        "ATR": 600.9101725930632,
        "ADX": 32.95771533840538,
        "Stoch_K": 86.13200851667821,
        "Stoch_D": 82.96017476610594,
        "StochRSI_K": 95.31582248577728,
        "StochRSI_D": 98.43860749525909,
        "BB_upper": 110136.12755514309,
        "BB_lower": 108084.95244485693,
        "BB_middle": 109110.54000000001,
        "EMA5": 109892.9679813828,
        "EMA21": 109086.89791831245,
        "EMA55": 108055.62257179855,
        "EMA144": 106600.12530319196,
        "EMA200": 106169.81626325403,
        "VWAP": 106548.40212891245
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22983368226.999992 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104663.1",
        "lastSz": "0.02",
        "askPx": "104663.2",
        "askSz": "1142.97",
        "bidPx": "104663.1",
        "bidSz": "274.06",
        "open24h": "104527.5",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "53824.6051",
        "vol24h": "5382460.51",
        "ts": "1748721664812",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110259.08 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T20:01:05+00:00Z"
}
[gemini_api_caller.py][04:01:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:01:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_040058.png
[gemini_api_caller.py][04:01:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:01:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:01:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:01:07] [INFO] AFC remote call 1 is done.
[_client.py][04:01:10] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:01:56] [INFO] 截图模块运行中...
[截图模块][04:01:57] [INFO]  __main__ 入口被执行
[截图模块][04:01:57] [INFO]  启动时主动清理内存...
[截图模块][04:01:57] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:01:57] [INFO]  已执行 pkill chrome
[截图模块][04:01:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:01:59] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][04:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][04:01:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:01:59] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:01:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:02:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:02:02] [INFO]  启动浏览器 (有头模式)
[截图模块][04:02:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:02:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:02:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:02:15] [INFO]  打开目标图表页...
[截图模块][04:02:21] [INFO]  等待5秒加载页面...
[截图模块][04:02:26] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:02:27] [INFO]  快捷键已发送
[截图模块][04:02:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_040228.png
[截图模块][04:02:28] [INFO]  关闭浏览器...
[数据收集总模块][04:02:28] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_040228.png
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:57] [INFO]  __main__ 入口被执行
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:57] [INFO]  启动时主动清理内存...
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:57] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:57] [INFO]  已执行 pkill chrome
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:01:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:00] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:02] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:15] [INFO]  打开目标图表页...
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:21] [INFO]  等待5秒加载页面...
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:26] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:27] [INFO]  快捷键已发送
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_040228.png
[数据收集总模块][04:02:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:02:28] [INFO]  关闭浏览器...
[数据收集总模块][04:02:28] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_040228.png
[数据收集总模块][04:02:28] [INFO] 技术指标模块运行中...
[技术指标模块][04:02:29] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:02:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:02:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:02:30] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:02:30] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:02:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:02:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:02:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][04:02:31] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][04:02:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:02:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:02:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][04:02:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:02:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:02:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][04:02:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:02:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:02:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:02:35] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_040228.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2577.13,
        "volume": 458503.61,
        "RSI": 64.51972287095717,
        "MACD_macd": 15.15732077005714,
        "MACD_signal": 14.85267791246956,
        "ATR": 13.792329233731042,
        "ADX": 36.9748383414899,
        "Stoch_K": 73.02272727272752,
        "Stoch_D": 79.83344640434198,
        "StochRSI_K": 19.882464023068426,
        "StochRSI_D": 34.552491350953254,
        "BB_upper": 2606.3805579627137,
        "BB_lower": 2509.3714420372858,
        "BB_middle": 2557.8759999999997,
        "EMA5": 2576.190644801956,
        "EMA21": 2559.287295828168,
        "EMA55": 2540.411978570988,
        "EMA144": 2533.8252491485564,
        "EMA200": 2533.639379135864,
        "VWAP": 2525.1327193463667
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2669.22,
        "volume": 2167067.77,
        "RSI": 52.70324741742273,
        "MACD_macd": 6.242123296544378,
        "MACD_signal": 1.324801388679242,
        "ATR": 28.895356230224404,
        "ADX": 30.536380683807725,
        "Stoch_K": 55.27675276752756,
        "Stoch_D": 68.75598036657816,
        "StochRSI_K": 30.07923780864835,
        "StochRSI_D": 67.82558219816357,
        "BB_upper": 2692.059333537739,
        "BB_lower": 2613.743666462261,
        "BB_middle": 2652.9015,
        "EMA5": 2676.197405820703,
        "EMA21": 2661.688247008837,
        "EMA55": 2650.9047689964495,
        "EMA144": 2612.8760618110937,
        "EMA200": 2598.0613277214625,
        "VWAP": 2627.4459573454733
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0039%",
      "FGI": "50/100",
      "open_interest": "$592400217.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2536.77",
        "lastSz": "43.84",
        "askPx": "2536.77",
        "askSz": "1475.42",
        "bidPx": "2536.76",
        "bidSz": "640.05",
        "open24h": "2573.26",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3278258.532",
        "vol24h": "32782585.32",
        "ts": "1748721755206",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T20:02:35+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110243.06 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-77.35431000000318 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][04:02:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:02:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_040228.png
[gemini_api_caller.py][04:02:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:02:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:02:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:02:37] [INFO] AFC remote call 1 is done.
[_client.py][04:02:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:15:02] [INFO] 截图模块运行中...
[截图模块][04:15:04] [INFO]  __main__ 入口被执行
[截图模块][04:15:04] [INFO]  启动时主动清理内存...
[截图模块][04:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:15:04] [INFO]  已执行 pkill chrome
[截图模块][04:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][04:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][04:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:15:09] [INFO] 启动浏览器 (有头模式)
[截图模块][04:15:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:15:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:15:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:15:46] [INFO]  打开目标图表页...
[截图模块][04:15:52] [INFO]  等待5秒加载页面...
[截图模块][04:15:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:15:58] [INFO]  快捷键已发送
[截图模块][04:15:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_041559.png
[截图模块][04:15:59] [INFO]  关闭浏览器...
[数据收集总模块][04:15:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_041559.png
[数据收集总模块][04:15:59] [INFO] 技术指标模块运行中...
[技术指标模块][04:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:16:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:16:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:16:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:16:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:16:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:16:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][04:16:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:16:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:16:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][04:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:16:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][04:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:16:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:16:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:16:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_041559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104766.0,
        "volume": 41451.83,
        "RSI": 66.76650225746417,
        "MACD_macd": 219.09612350210955,
        "MACD_signal": 213.86340602174755,
        "ATR": 327.72534148674674,
        "ADX": 28.801294861511042,
        "Stoch_K": 84.07503492316863,
        "Stoch_D": 78.53095056578947,
        "StochRSI_K": 56.235235097833815,
        "StochRSI_D": 39.86481481264141,
        "BB_upper": 105054.82777258764,
        "BB_lower": 103646.89222741239,
        "BB_middle": 104350.86000000002,
        "EMA5": 104624.26511972936,
        "EMA21": 104368.36569430094,
        "EMA55": 104101.05723652766,
        "EMA144": 104127.35170069724,
        "EMA200": 104184.25955217284,
        "VWAP": 103977.35587602152
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110182.4,
        "volume": 422083.32,
        "RSI": 79.08010051908587,
        "MACD_macd": 542.6314324342529,
        "MACD_signal": 448.121829322524,
        "ATR": 600.9101725930632,
        "ADX": 32.95771533840538,
        "Stoch_K": 86.13200851667821,
        "Stoch_D": 82.96017476610594,
        "StochRSI_K": 95.31582248577728,
        "StochRSI_D": 98.43860749525909,
        "BB_upper": 110136.12755514309,
        "BB_lower": 108084.95244485693,
        "BB_middle": 109110.54000000001,
        "EMA5": 109892.9679813828,
        "EMA21": 109086.89791831245,
        "EMA55": 108055.62257179855,
        "EMA144": 106600.12530319196,
        "EMA200": 106169.81626325403,
        "VWAP": 106548.40212891245
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22978728663.99999 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104523.5",
        "lastSz": "0.14",
        "askPx": "104523.6",
        "askSz": "384.67",
        "bidPx": "104523.5",
        "bidSz": "1249.19",
        "open24h": "104429.9",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "53326.1611",
        "vol24h": "5332616.11",
        "ts": "1748722565414",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110304.96 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T20:16:06+00:00Z"
}
[gemini_api_caller.py][04:16:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:16:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_041559.png
[gemini_api_caller.py][04:16:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:16:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:16:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:16:07] [INFO] AFC remote call 1 is done.
[_client.py][04:16:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:16:54] [INFO] 截图模块运行中...
[截图模块][04:16:55] [INFO]  __main__ 入口被执行
[截图模块][04:16:55] [INFO]  启动时主动清理内存...
[截图模块][04:16:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:16:56] [INFO]  已执行 pkill chrome
[截图模块][04:16:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:16:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:16:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][04:16:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][04:16:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:16:57] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:16:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:16:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:17:00] [INFO]  启动浏览器 (有头模式)
[截图模块][04:17:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:17:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:17:16] [INFO]  打开目标图表页...
[截图模块][04:17:22] [INFO]  等待5秒加载页面...
[截图模块][04:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:17:28] [INFO]  快捷键已发送
[截图模块][04:17:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_041729.png
[截图模块][04:17:29] [INFO]  关闭浏览器...
[数据收集总模块][04:17:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_041729.png
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:55] [INFO]  __main__ 入口被执行
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:55] [INFO]  启动时主动清理内存...
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:56] [INFO]  已执行 pkill chrome
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:16:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:16] [INFO]  打开目标图表页...
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:22] [INFO]  等待5秒加载页面...
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:28] [INFO]  快捷键已发送
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_041729.png
[数据收集总模块][04:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:17:29] [INFO]  关闭浏览器...
[数据收集总模块][04:17:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_041729.png
[数据收集总模块][04:17:29] [INFO] 技术指标模块运行中...
[技术指标模块][04:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:17:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:17:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:17:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:17:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:17:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][04:17:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][04:17:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:17:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:17:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][04:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:17:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][04:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:17:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:17:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:17:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_041729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2579.55,
        "volume": 143282.94,
        "RSI": 68.78282232145895,
        "MACD_macd": 15.618190783542559,
        "MACD_signal": 14.7789351047583,
        "ATR": 14.08807562008763,
        "ADX": 36.118022524231,
        "Stoch_K": 85.89552238805997,
        "Stoch_D": 82.10516383599237,
        "StochRSI_K": 46.92908086195792,
        "StochRSI_D": 37.679662169098215,
        "BB_upper": 2604.928363161847,
        "BB_lower": 2505.7106368381533,
        "BB_middle": 2555.3195,
        "EMA5": 2575.7209672029335,
        "EMA21": 2557.502758006322,
        "EMA55": 2538.9605536923905,
        "EMA144": 2532.3725943736217,
        "EMA200": 2531.9575158235275,
        "VWAP": 2524.4341224247855
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2669.22,
        "volume": 2167067.77,
        "RSI": 52.70324741742273,
        "MACD_macd": 6.242123296544378,
        "MACD_signal": 1.324801388679242,
        "ATR": 28.895356230224404,
        "ADX": 30.536380683807725,
        "Stoch_K": 55.27675276752756,
        "Stoch_D": 68.75598036657816,
        "StochRSI_K": 30.07923780864835,
        "StochRSI_D": 67.82558219816357,
        "BB_upper": 2692.059333537739,
        "BB_lower": 2613.743666462261,
        "BB_middle": 2652.9015,
        "EMA5": 2676.197405820703,
        "EMA21": 2661.688247008837,
        "EMA55": 2650.9047689964495,
        "EMA144": 2612.8760618110937,
        "EMA200": 2598.0613277214625,
        "VWAP": 2627.4459573454733
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0045%",
      "FGI": "50/100",
      "open_interest": "$592776878.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2531.7",
        "lastSz": "3.2",
        "askPx": "2531.71",
        "askSz": "432.97",
        "bidPx": "2531.7",
        "bidSz": "1138.91",
        "open24h": "2569.77",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3268769.271",
        "vol24h": "32687692.71",
        "ts": "1748722656310",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T20:17:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110320.2 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-0.9752700000026144 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][04:17:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:17:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_041729.png
[gemini_api_caller.py][04:17:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:17:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:17:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:17:38] [INFO] AFC remote call 1 is done.
[_client.py][04:17:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:30:02] [INFO] 截图模块运行中...
[截图模块][04:30:03] [INFO]  __main__ 入口被执行
[截图模块][04:30:03] [INFO]  启动时主动清理内存...
[截图模块][04:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:30:03] [INFO]  已执行 pkill chrome
[截图模块][04:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][04:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][04:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:30:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:30:08] [INFO] 启动浏览器 (有头模式)
[截图模块][04:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:30:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:30:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:30:44] [INFO]  打开目标图表页...
[截图模块][04:30:50] [INFO]  等待5秒加载页面...
[截图模块][04:30:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:30:56] [INFO]  快捷键已发送
[截图模块][04:30:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_043057.png
[截图模块][04:30:57] [INFO]  关闭浏览器...
[数据收集总模块][04:30:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_043057.png
[数据收集总模块][04:30:58] [INFO] 技术指标模块运行中...
[技术指标模块][04:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:30:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:30:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:31:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:31:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:31:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][04:31:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:31:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:31:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][04:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:31:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][04:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:31:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:31:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:31:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_043057.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104590.3,
        "volume": 71144.25,
        "RSI": 59.432459948061684,
        "MACD_macd": 211.32186344597721,
        "MACD_signal": 212.46493407661143,
        "ATR": 326.55996198171533,
        "ADX": 26.128204728042785,
        "Stoch_K": 72.92538915727353,
        "Stoch_D": 72.16454746361732,
        "StochRSI_K": 30.30054343481854,
        "StochRSI_D": 21.967968521077406,
        "BB_upper": 105022.14819631213,
        "BB_lower": 103579.91180368786,
        "BB_middle": 104301.03,
        "EMA5": 104553.39767959403,
        "EMA21": 104328.61224949919,
        "EMA55": 104079.84656846835,
        "EMA144": 104150.04909094227,
        "EMA200": 104224.8967750539,
        "VWAP": 103972.17470820074
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110182.4,
        "volume": 422083.32,
        "RSI": 79.08010051908587,
        "MACD_macd": 542.6314324342529,
        "MACD_signal": 448.121829322524,
        "ATR": 600.9101725930632,
        "ADX": 32.95771533840538,
        "Stoch_K": 86.13200851667821,
        "Stoch_D": 82.96017476610594,
        "StochRSI_K": 95.31582248577728,
        "StochRSI_D": 98.43860749525909,
        "BB_upper": 110136.12755514309,
        "BB_lower": 108084.95244485693,
        "BB_middle": 109110.54000000001,
        "EMA5": 109892.9679813828,
        "EMA21": 109086.89791831245,
        "EMA55": 108055.62257179855,
        "EMA144": 106600.12530319196,
        "EMA200": 106169.81626325403,
        "VWAP": 106548.40212891245
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "50/100",
      "open_interest": "$22982832507.99999 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104632.7",
        "lastSz": "0.02",
        "askPx": "104632.7",
        "askSz": "637.98",
        "bidPx": "104632.6",
        "bidSz": "731.87",
        "open24h": "104399.9",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "53060.4193",
        "vol24h": "5306041.93",
        "ts": "1748723464810",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110210.56 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T20:31:05+00:00Z"
}
[gemini_api_caller.py][04:31:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:31:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_043057.png
[gemini_api_caller.py][04:31:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:31:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:31:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:31:06] [INFO] AFC remote call 1 is done.
[_client.py][04:31:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:32:35] [INFO] 截图模块运行中...
[截图模块][04:32:37] [INFO]  __main__ 入口被执行
[截图模块][04:32:37] [INFO]  启动时主动清理内存...
[截图模块][04:32:37] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:32:37] [INFO]  已执行 pkill chrome
[截图模块][04:32:39] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:32:39] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:32:39] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][04:32:39] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][04:32:39] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:32:39] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:32:39] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:32:40] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:32:41] [INFO]  启动浏览器 (有头模式)
[截图模块][04:32:41] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:33:14] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:33:14] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:33:14] [INFO]  打开目标图表页...
[截图模块][04:33:20] [INFO]  等待5秒加载页面...
[截图模块][04:33:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:33:25] [INFO]  快捷键已发送
[截图模块][04:33:26] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_043326.png
[截图模块][04:33:26] [INFO]  关闭浏览器...
[数据收集总模块][04:33:26] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_043326.png
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:37] [INFO]  __main__ 入口被执行
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:37] [INFO]  启动时主动清理内存...
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:37] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:37] [INFO]  已执行 pkill chrome
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:39] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:40] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:41] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:32:41] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:14] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:14] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:14] [INFO]  打开目标图表页...
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:20] [INFO]  等待5秒加载页面...
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:25] [INFO]  快捷键已发送
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:26] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_043326.png
[数据收集总模块][04:33:26] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:33:26] [INFO]  关闭浏览器...
[数据收集总模块][04:33:26] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_043326.png
[数据收集总模块][04:33:26] [INFO] 技术指标模块运行中...
[技术指标模块][04:33:27] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:33:28] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:33:28] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:33:28] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:33:28] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:33:29] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:33:29] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:33:29] [INFO] 宏观因子模块运行中...
[宏观因子模块][04:33:29] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][04:33:31] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:33:31] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:33:32] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][04:33:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:33:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:33:33] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][04:33:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:33:33] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:33:33] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:33:33] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_043326.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2575.99,
        "volume": 225077.11,
        "RSI": 65.91116532512575,
        "MACD_macd": 15.728113187635245,
        "MACD_signal": 14.565007134881155,
        "ATR": 15.484701948984759,
        "ADX": 36.451307393945385,
        "Stoch_K": 80.58208955223847,
        "Stoch_D": 78.5507348709129,
        "StochRSI_K": 36.84593580844947,
        "StochRSI_D": 29.91297708557688,
        "BB_upper": 2603.4537576269,
        "BB_lower": 2500.7092423731006,
        "BB_middle": 2552.0815000000002,
        "EMA5": 2573.8064508044,
        "EMA21": 2555.298488793993,
        "EMA55": 2537.6129243009063,
        "EMA144": 2533.1539243593124,
        "EMA200": 2533.597169064883,
        "VWAP": 2524.227248641751
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2669.22,
        "volume": 2167067.77,
        "RSI": 52.70324741742273,
        "MACD_macd": 6.242123296544378,
        "MACD_signal": 1.324801388679242,
        "ATR": 28.895356230224404,
        "ADX": 30.536380683807725,
        "Stoch_K": 55.27675276752756,
        "Stoch_D": 68.75598036657816,
        "StochRSI_K": 30.07923780864835,
        "StochRSI_D": 67.82558219816357,
        "BB_upper": 2692.059333537739,
        "BB_lower": 2613.743666462261,
        "BB_middle": 2652.9015,
        "EMA5": 2676.197405820703,
        "EMA21": 2661.688247008837,
        "EMA55": 2650.9047689964495,
        "EMA144": 2612.8760618110937,
        "EMA200": 2598.0613277214625,
        "VWAP": 2627.4459573454733
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.005%",
      "FGI": "50/100",
      "open_interest": "$593380040.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2538.16",
        "lastSz": "1.39",
        "askPx": "2538.17",
        "askSz": "1143.17",
        "bidPx": "2538.16",
        "bidSz": "1207.51",
        "open24h": "2569.62",
        "high24h": "2589",
        "low24h": "2473.63",
        "volCcy24h": "3259425.5",
        "vol24h": "32594255",
        "ts": "1748723613307",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T20:33:33+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110220.51 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-99.68286000000037 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][04:33:35] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:33:35] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_043326.png
[gemini_api_caller.py][04:33:35] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:33:35] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:33:35] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:33:35] [INFO] AFC remote call 1 is done.
[_client.py][04:33:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:45:02] [INFO] 截图模块运行中...
[截图模块][04:45:03] [INFO]  __main__ 入口被执行
[截图模块][04:45:03] [INFO]  启动时主动清理内存...
[截图模块][04:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:45:03] [INFO]  已执行 pkill chrome
[截图模块][04:45:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:45:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][04:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][04:45:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][04:45:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:45:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:45:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:45:08] [INFO] 启动浏览器 (有头模式)
[截图模块][04:45:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:45:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][04:45:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:45:44] [INFO]  打开目标图表页...
[截图模块][04:45:51] [INFO]  等待5秒加载页面...
[截图模块][04:45:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:45:56] [INFO]  快捷键已发送
[截图模块][04:45:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_044557.png
[截图模块][04:45:57] [INFO]  关闭浏览器...
[数据收集总模块][04:45:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_044557.png
[数据收集总模块][04:45:57] [INFO] 技术指标模块运行中...
[技术指标模块][04:45:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:45:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:45:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:46:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:46:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:46:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][04:46:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:46:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:46:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][04:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:46:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][04:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:46:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:46:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:46:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_044557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104602.2,
        "volume": 86381.08,
        "RSI": 60.212432639201026,
        "MACD_macd": 216.26839166482387,
        "MACD_signal": 212.72284167513365,
        "ATR": 337.72299163785226,
        "ADX": 25.29746097976274,
        "Stoch_K": 78.59242761692624,
        "Stoch_D": 69.74899248846503,
        "StochRSI_K": 33.05870504355085,
        "StochRSI_D": 14.407449863734206,
        "BB_upper": 104989.63825978566,
        "BB_lower": 103567.20174021437,
        "BB_middle": 104278.42000000001,
        "EMA5": 104534.94651939103,
        "EMA21": 104302.44655558941,
        "EMA55": 104061.9951631138,
        "EMA144": 104153.65112824582,
        "EMA200": 104235.56712277692,
        "VWAP": 103964.86724571956
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110182.4,
        "volume": 422083.32,
        "RSI": 79.08010051908587,
        "MACD_macd": 542.6314324342529,
        "MACD_signal": 448.121829322524,
        "ATR": 600.9101725930632,
        "ADX": 32.95771533840538,
        "Stoch_K": 86.13200851667821,
        "Stoch_D": 82.96017476610594,
        "StochRSI_K": 95.31582248577728,
        "StochRSI_D": 98.43860749525909,
        "BB_upper": 110136.12755514309,
        "BB_lower": 108084.95244485693,
        "BB_middle": 109110.54000000001,
        "EMA5": 109892.9679813828,
        "EMA21": 109086.89791831245,
        "EMA55": 108055.62257179855,
        "EMA144": 106600.12530319196,
        "EMA200": 106169.81626325403,
        "VWAP": 106548.40212891245
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0099%",
      "FGI": "50/100",
      "open_interest": "$22984053086.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104679.1",
        "lastSz": "0.16",
        "askPx": "104679.2",
        "askSz": "1048.37",
        "bidPx": "104679.1",
        "bidSz": "137.26",
        "open24h": "104748.1",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "52682.6514",
        "vol24h": "5268265.14",
        "ts": "1748724363910",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110218.8 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T20:46:04+00:00Z"
}
[gemini_api_caller.py][04:46:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:46:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_044557.png
[gemini_api_caller.py][04:46:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:46:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:46:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:46:06] [INFO] AFC remote call 1 is done.
[_client.py][04:46:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][04:46:53] [INFO] 截图模块运行中...
[截图模块][04:46:55] [INFO]  __main__ 入口被执行
[截图模块][04:46:55] [INFO]  启动时主动清理内存...
[截图模块][04:46:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][04:46:55] [INFO]  已执行 pkill chrome
[截图模块][04:46:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:46:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][04:46:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][04:46:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][04:46:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][04:46:56] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][04:46:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][04:46:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][04:47:00] [INFO]  启动浏览器 (有头模式)
[截图模块][04:47:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][04:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][04:47:16] [INFO]  打开目标图表页...
[截图模块][04:47:22] [INFO]  等待5秒加载页面...
[截图模块][04:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][04:47:28] [INFO]  快捷键已发送
[截图模块][04:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_044729.png
[截图模块][04:47:29] [INFO]  关闭浏览器...
[数据收集总模块][04:47:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_044729.png
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:55] [INFO]  __main__ 入口被执行
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:55] [INFO]  启动时主动清理内存...
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:55] [INFO]  已执行 pkill chrome
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:46:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:16] [INFO]  打开目标图表页...
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:22] [INFO]  等待5秒加载页面...
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:28] [INFO]  快捷键已发送
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_044729.png
[数据收集总模块][04:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][04:47:29] [INFO]  关闭浏览器...
[数据收集总模块][04:47:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_044729.png
[数据收集总模块][04:47:29] [INFO] 技术指标模块运行中...
[技术指标模块][04:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][04:47:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][04:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][04:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][04:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][04:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][04:47:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:47:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][04:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][04:47:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:47:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][04:47:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][04:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][04:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][04:47:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][04:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][04:47:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][04:47:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][04:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_044729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2573.33,
        "volume": 269868.1,
        "RSI": 63.75189590805814,
        "MACD_macd": 16.00561266524528,
        "MACD_signal": 14.274512109336474,
        "ATR": 16.533113636707046,
        "ADX": 36.85220977490979,
        "Stoch_K": 79.8378795676787,
        "Stoch_D": 78.08244596197707,
        "StochRSI_K": 29.264103144437826,
        "StochRSI_D": 30.229252972427915,
        "BB_upper": 2600.7423729941866,
        "BB_lower": 2498.8926270058137,
        "BB_middle": 2549.8175,
        "EMA5": 2572.7146762065995,
        "EMA21": 2553.2293065427,
        "EMA55": 2536.180899102385,
        "EMA144": 2532.4562131435187,
        "EMA200": 2533.026196748585,
        "VWAP": 2523.911280986472
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2669.22,
        "volume": 2167067.77,
        "RSI": 52.70324741742273,
        "MACD_macd": 6.242123296544378,
        "MACD_signal": 1.324801388679242,
        "ATR": 28.895356230224404,
        "ADX": 30.536380683807725,
        "Stoch_K": 55.27675276752756,
        "Stoch_D": 68.75598036657816,
        "StochRSI_K": 30.07923780864835,
        "StochRSI_D": 67.82558219816357,
        "BB_upper": 2692.059333537739,
        "BB_lower": 2613.743666462261,
        "BB_middle": 2652.9015,
        "EMA5": 2676.197405820703,
        "EMA21": 2661.688247008837,
        "EMA55": 2650.9047689964495,
        "EMA144": 2612.8760618110937,
        "EMA200": 2598.0613277214625,
        "VWAP": 2627.4459573454733
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0056%",
      "FGI": "50/100",
      "open_interest": "$596136479.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2539.73",
        "lastSz": "0.01",
        "askPx": "2539.74",
        "askSz": "104.15",
        "bidPx": "2539.73",
        "bidSz": "2733.84",
        "open24h": "2584.78",
        "high24h": "2585.72",
        "low24h": "2473.63",
        "volCcy24h": "3236807.066",
        "vol24h": "32368070.66",
        "ts": "1748724456006",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T20:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110196.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-123.70529999999955 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][04:47:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][04:47:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_044729.png
[gemini_api_caller.py][04:47:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][04:47:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][04:47:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][04:47:37] [INFO] AFC remote call 1 is done.
[_client.py][04:47:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:00:02] [INFO] 截图模块运行中...
[截图模块][05:00:03] [INFO]  __main__ 入口被执行
[截图模块][05:00:03] [INFO]  启动时主动清理内存...
[截图模块][05:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:00:03] [INFO]  已执行 pkill chrome
[截图模块][05:00:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:00:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][05:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][05:00:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:00:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:00:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:00:09] [INFO] 启动浏览器 (有头模式)
[截图模块][05:00:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:00:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:00:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:00:45] [INFO]  打开目标图表页...
[截图模块][05:00:52] [INFO]  等待5秒加载页面...
[截图模块][05:00:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:00:58] [INFO]  快捷键已发送
[截图模块][05:00:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_050059.png
[截图模块][05:00:59] [INFO]  关闭浏览器...
[数据收集总模块][05:00:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_050059.png
[数据收集总模块][05:00:59] [INFO] 技术指标模块运行中...
[技术指标模块][05:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:01:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:01:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:01:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:01:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:01:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][05:01:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:01:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:01:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:01:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][05:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:01:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:01:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:01:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_050059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104415.1,
        "volume": 75493.75,
        "RSI": 51.54782262155075,
        "MACD_macd": 218.21292782791716,
        "MACD_signal": 211.78636381234926,
        "ATR": 339.9880990632264,
        "ADX": 24.79155129971517,
        "Stoch_K": 64.9758256166522,
        "Stoch_D": 72.55190556987064,
        "StochRSI_K": 2.5447392449764594,
        "StochRSI_D": 23.708303978771124,
        "BB_upper": 104955.13528916046,
        "BB_lower": 103534.48471083953,
        "BB_middle": 104244.81,
        "EMA5": 104501.31977908654,
        "EMA21": 104272.47675081511,
        "EMA55": 104043.88309066242,
        "EMA144": 104164.92439754649,
        "EMA200": 104257.6695798504,
        "VWAP": 103957.7495784283
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110209.0,
        "volume": 268390.16,
        "RSI": 80.39657926801344,
        "MACD_macd": 512.075169289441,
        "MACD_signal": 424.43611007887375,
        "ATR": 605.9732968157945,
        "ADX": 29.56066833397326,
        "Stoch_K": 89.39980638915779,
        "Stoch_D": 83.89185319315315,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 109941.42664883897,
        "BB_lower": 108145.75335116105,
        "BB_middle": 109043.59000000001,
        "EMA5": 109748.2519720742,
        "EMA21": 108977.3541597845,
        "EMA55": 107979.05991839012,
        "EMA144": 106570.45254695628,
        "EMA200": 106159.51193745174,
        "VWAP": 106504.48843635434
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0078%",
      "FGI": "50/100",
      "open_interest": "$22988376257.99998 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104747.4",
        "lastSz": "7.6",
        "askPx": "104747.4",
        "askSz": "850.81",
        "bidPx": "104747.3",
        "bidSz": "337.04",
        "open24h": "104578",
        "high24h": "104842.5",
        "low24h": "103022.1",
        "volCcy24h": "52536.4186",
        "vol24h": "5253641.86",
        "ts": "1748725265664",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110128.28 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T21:01:06+00:00Z"
}
[gemini_api_caller.py][05:01:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:01:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_050059.png
[gemini_api_caller.py][05:01:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:01:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:01:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:01:08] [INFO] AFC remote call 1 is done.
[_client.py][05:01:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:01:57] [INFO] 截图模块运行中...
[截图模块][05:01:58] [INFO]  __main__ 入口被执行
[截图模块][05:01:58] [INFO]  启动时主动清理内存...
[截图模块][05:01:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:01:58] [INFO]  已执行 pkill chrome
[截图模块][05:02:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:02:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:02:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][05:02:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][05:02:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:02:00] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:02:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:02:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:02:03] [INFO]  启动浏览器 (有头模式)
[截图模块][05:02:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:02:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:02:17] [INFO]  打开目标图表页...
[截图模块][05:02:23] [INFO]  等待5秒加载页面...
[截图模块][05:02:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:02:29] [INFO]  快捷键已发送
[截图模块][05:02:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_050230.png
[截图模块][05:02:30] [INFO]  关闭浏览器...
[数据收集总模块][05:02:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_050230.png
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:01:58] [INFO]  __main__ 入口被执行
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:01:58] [INFO]  启动时主动清理内存...
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:01:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:01:58] [INFO]  已执行 pkill chrome
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:17] [INFO]  打开目标图表页...
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:23] [INFO]  等待5秒加载页面...
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:29] [INFO]  快捷键已发送
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_050230.png
[数据收集总模块][05:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:02:30] [INFO]  关闭浏览器...
[数据收集总模块][05:02:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_050230.png
[数据收集总模块][05:02:30] [INFO] 技术指标模块运行中...
[技术指标模块][05:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:02:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:02:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:02:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:02:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:02:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][05:02:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][05:02:35] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:02:35] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:02:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:02:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][05:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:02:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:02:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:02:37] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_050230.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2568.47,
        "volume": 206392.6,
        "RSI": 59.71089128091797,
        "MACD_macd": 16.396347402859647,
        "MACD_signal": 13.839889256593372,
        "ATR": 17.381285016851844,
        "ADX": 37.7509551322637,
        "Stoch_K": 75.23223549282153,
        "Stoch_D": 82.22141794345897,
        "StochRSI_K": 23.628910706346655,
        "StochRSI_D": 49.57108221711655,
        "BB_upper": 2598.535341980178,
        "BB_lower": 2495.671658019822,
        "BB_middle": 2547.1035,
        "EMA5": 2572.407014309899,
        "EMA21": 2551.2194415420263,
        "EMA55": 2534.874927457756,
        "EMA144": 2532.5318068471197,
        "EMA200": 2533.5723618805528,
        "VWAP": 2523.5343158057444
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2694.72,
        "volume": 3926797.36,
        "RSI": 73.6572345759259,
        "MACD_macd": 6.490377482172335,
        "MACD_signal": 0.09220854209556384,
        "ATR": 27.562336982692962,
        "ADX": 31.689924972143334,
        "Stoch_K": 82.16130732735888,
        "Stoch_D": 80.7589302105527,
        "StochRSI_K": 96.48491491699937,
        "StochRSI_D": 91.13250648452292,
        "BB_upper": 2691.601558619454,
        "BB_lower": 2613.8464413805464,
        "BB_middle": 2652.724,
        "EMA5": 2679.686108731054,
        "EMA21": 2660.935432506459,
        "EMA55": 2650.349881339875,
        "EMA144": 2613.2308444157566,
        "EMA200": 2599.0256779731744,
        "VWAP": 2626.794346574845
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0058%",
      "FGI": "50/100",
      "open_interest": "$595506325.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2544.17",
        "lastSz": "0.01",
        "askPx": "2544.18",
        "askSz": "447.73",
        "bidPx": "2544.17",
        "bidSz": "1079.71",
        "open24h": "2576.78",
        "high24h": "2585.3",
        "low24h": "2473.63",
        "volCcy24h": "3239010.598",
        "vol24h": "32390105.98",
        "ts": "1748725357109",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T21:02:37+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110144.3 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-175.13796000000178 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][05:02:39] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:02:39] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_050230.png
[gemini_api_caller.py][05:02:39] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:02:39] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:02:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:02:39] [INFO] AFC remote call 1 is done.
[_client.py][05:02:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:15:02] [INFO] 截图模块运行中...
[截图模块][05:15:03] [INFO]  __main__ 入口被执行
[截图模块][05:15:03] [INFO]  启动时主动清理内存...
[截图模块][05:15:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:15:03] [INFO]  已执行 pkill chrome
[截图模块][05:15:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:15:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:15:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][05:15:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][05:15:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:15:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:15:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:15:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:15:08] [INFO] 启动浏览器 (有头模式)
[截图模块][05:15:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:15:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:15:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:15:44] [INFO]  打开目标图表页...
[截图模块][05:15:51] [INFO]  等待5秒加载页面...
[截图模块][05:15:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:15:57] [INFO]  快捷键已发送
[截图模块][05:15:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_051558.png
[截图模块][05:15:58] [INFO]  关闭浏览器...
[数据收集总模块][05:15:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_051558.png
[数据收集总模块][05:15:58] [INFO] 技术指标模块运行中...
[技术指标模块][05:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:16:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:16:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:16:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:16:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:16:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][05:16:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:16:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:16:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:16:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][05:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:16:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:16:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:16:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_051558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104401.3,
        "volume": 37635.16,
        "RSI": 50.863820070635235,
        "MACD_macd": 236.66721472093195,
        "MACD_signal": 210.26193163577153,
        "ATR": 349.43254544886923,
        "ADX": 26.255140118707907,
        "Stoch_K": 65.67872423181664,
        "Stoch_D": 76.51497471800865,
        "StochRSI_K": 7.618932160094197,
        "StochRSI_D": 37.73522711580873,
        "BB_upper": 104937.41499397499,
        "BB_lower": 103512.675006025,
        "BB_middle": 104225.045,
        "EMA5": 104544.42966862977,
        "EMA21": 104258.20533413808,
        "EMA55": 104027.02337883634,
        "EMA144": 104132.62764466017,
        "EMA200": 104213.76512863017,
        "VWAP": 103959.83532559706
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110209.0,
        "volume": 268390.16,
        "RSI": 80.39657926801344,
        "MACD_macd": 512.075169289441,
        "MACD_signal": 424.43611007887375,
        "ATR": 605.9732968157945,
        "ADX": 29.56066833397326,
        "Stoch_K": 89.39980638915779,
        "Stoch_D": 83.89185319315315,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 109941.42664883897,
        "BB_lower": 108145.75335116105,
        "BB_middle": 109043.59000000001,
        "EMA5": 109748.2519720742,
        "EMA21": 108977.3541597845,
        "EMA55": 107979.05991839012,
        "EMA144": 106570.45254695628,
        "EMA200": 106159.51193745174,
        "VWAP": 106504.48843635434
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0067%",
      "FGI": "50/100",
      "open_interest": "$22988809308.999992 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104589.5",
        "lastSz": "4.77",
        "askPx": "104589.5",
        "askSz": "514.06",
        "bidPx": "104589.4",
        "bidSz": "657.4",
        "open24h": "104807.6",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "52871.7229",
        "vol24h": "5287172.29",
        "ts": "1748726164815",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110211.18 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T21:16:05+00:00Z"
}
[gemini_api_caller.py][05:16:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:16:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_051558.png
[gemini_api_caller.py][05:16:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:16:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:16:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:16:07] [INFO] AFC remote call 1 is done.
[_client.py][05:16:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:17:01] [INFO] 截图模块运行中...
[截图模块][05:17:02] [INFO]  __main__ 入口被执行
[截图模块][05:17:02] [INFO]  启动时主动清理内存...
[截图模块][05:17:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:17:02] [INFO]  已执行 pkill chrome
[截图模块][05:17:04] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:17:04] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:17:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][05:17:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][05:17:04] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:17:04] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:17:04] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:17:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:17:07] [INFO]  启动浏览器 (有头模式)
[截图模块][05:17:07] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:17:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:17:16] [INFO]  打开目标图表页...
[截图模块][05:17:21] [INFO]  等待5秒加载页面...
[截图模块][05:17:26] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:17:27] [INFO]  快捷键已发送
[截图模块][05:17:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_051728.png
[截图模块][05:17:28] [INFO]  关闭浏览器...
[数据收集总模块][05:17:28] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_051728.png
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:02] [INFO]  __main__ 入口被执行
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:02] [INFO]  启动时主动清理内存...
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:02] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:02] [INFO]  已执行 pkill chrome
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:04] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:07] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:07] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:16] [INFO]  打开目标图表页...
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:21] [INFO]  等待5秒加载页面...
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:26] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:27] [INFO]  快捷键已发送
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_051728.png
[数据收集总模块][05:17:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:17:28] [INFO]  关闭浏览器...
[数据收集总模块][05:17:28] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_051728.png
[数据收集总模块][05:17:28] [INFO] 技术指标模块运行中...
[技术指标模块][05:17:29] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:17:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:17:30] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:17:30] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:17:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:17:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][05:17:31] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][05:17:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:17:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:17:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:17:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][05:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:17:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:17:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:17:35] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_051728.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2571.74,
        "volume": 134640.5,
        "RSI": 63.86246832985781,
        "MACD_macd": 17.15342642233145,
        "MACD_signal": 13.201554224272098,
        "ATR": 18.398410805705947,
        "ADX": 40.193300426416236,
        "Stoch_K": 79.177222825431,
        "Stoch_D": 85.51896087183809,
        "StochRSI_K": 37.79478485439404,
        "StochRSI_D": 67.99627419884958,
        "BB_upper": 2596.4309896253744,
        "BB_lower": 2492.946010374626,
        "BB_middle": 2544.6885,
        "EMA5": 2574.375521464848,
        "EMA21": 2549.494299488159,
        "EMA55": 2533.6011675977984,
        "EMA144": 2531.756114047357,
        "EMA200": 2532.8203323336834,
        "VWAP": 2523.4889329059747
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2694.72,
        "volume": 3926797.36,
        "RSI": 73.6572345759259,
        "MACD_macd": 6.490377482172335,
        "MACD_signal": 0.09220854209556384,
        "ATR": 27.562336982692962,
        "ADX": 31.689924972143334,
        "Stoch_K": 82.16130732735888,
        "Stoch_D": 80.7589302105527,
        "StochRSI_K": 96.48491491699937,
        "StochRSI_D": 91.13250648452292,
        "BB_upper": 2691.601558619454,
        "BB_lower": 2613.8464413805464,
        "BB_middle": 2652.724,
        "EMA5": 2679.686108731054,
        "EMA21": 2660.935432506459,
        "EMA55": 2650.349881339875,
        "EMA144": 2613.2308444157566,
        "EMA200": 2599.0256779731744,
        "VWAP": 2626.794346574845
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0057%",
      "FGI": "50/100",
      "open_interest": "$594712776.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2539.73",
        "lastSz": "37.43",
        "askPx": "2539.74",
        "askSz": "1087.4",
        "bidPx": "2539.73",
        "bidSz": "373.81",
        "open24h": "2580.93",
        "high24h": "2585.3",
        "low24h": "2473.63",
        "volCcy24h": "3256917.642",
        "vol24h": "32569176.42",
        "ts": "1748726254911",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T21:17:35+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110196.4 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-123.55131000000318 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][05:17:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:17:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_051728.png
[gemini_api_caller.py][05:17:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:17:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:17:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:17:37] [INFO] AFC remote call 1 is done.
[_client.py][05:17:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:30:03] [INFO] 截图模块运行中...
[截图模块][05:30:04] [INFO]  __main__ 入口被执行
[截图模块][05:30:04] [INFO]  启动时主动清理内存...
[截图模块][05:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:30:04] [INFO]  已执行 pkill chrome
[截图模块][05:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][05:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][05:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:30:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:30:09] [INFO] 启动浏览器 (有头模式)
[截图模块][05:30:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:30:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:30:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:30:45] [INFO]  打开目标图表页...
[截图模块][05:30:52] [INFO]  等待5秒加载页面...
[截图模块][05:30:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:30:58] [INFO]  快捷键已发送
[截图模块][05:30:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_053059.png
[截图模块][05:30:59] [INFO]  关闭浏览器...
[数据收集总模块][05:30:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_053059.png
[数据收集总模块][05:30:59] [INFO] 技术指标模块运行中...
[技术指标模块][05:31:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:31:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:31:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:31:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:31:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:31:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][05:31:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:31:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:31:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:31:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:31:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:31:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][05:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:31:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:31:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:31:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_053059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104675.4,
        "volume": 34106.71,
        "RSI": 67.19243004228156,
        "MACD_macd": 258.06540282994683,
        "MACD_signal": 203.58302132161185,
        "ATR": 353.88362923738595,
        "ADX": 28.512880640393515,
        "Stoch_K": 87.00116686114308,
        "Stoch_D": 85.0161981836931,
        "StochRSI_K": 60.96117666901652,
        "StochRSI_D": 65.10534206888262,
        "BB_upper": 104925.04872446742,
        "BB_lower": 103467.35127553258,
        "BB_middle": 104196.2,
        "EMA5": 104615.99450294464,
        "EMA21": 104243.90444844779,
        "EMA55": 104016.09741670931,
        "EMA144": 104156.04964510654,
        "EMA200": 104251.8245207928,
        "VWAP": 103958.25087790692
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110209.0,
        "volume": 268390.16,
        "RSI": 80.39657926801344,
        "MACD_macd": 512.075169289441,
        "MACD_signal": 424.43611007887375,
        "ATR": 605.9732968157945,
        "ADX": 29.56066833397326,
        "Stoch_K": 89.39980638915779,
        "Stoch_D": 83.89185319315315,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 109941.42664883897,
        "BB_lower": 108145.75335116105,
        "BB_middle": 109043.59000000001,
        "EMA5": 109748.2519720742,
        "EMA21": 108977.3541597845,
        "EMA55": 107979.05991839012,
        "EMA144": 106570.45254695628,
        "EMA200": 106159.51193745174,
        "VWAP": 106504.48843635434
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0061%",
      "FGI": "50/100",
      "open_interest": "$22993905888.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104764.2",
        "lastSz": "0.01",
        "askPx": "104764.3",
        "askSz": "226.01",
        "bidPx": "104764.2",
        "bidSz": "588.03",
        "open24h": "104822.8",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "52836.8557",
        "vol24h": "5283685.57",
        "ts": "1748727066107",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110139.79 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T21:31:06+00:00Z"
}
[gemini_api_caller.py][05:31:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:31:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_053059.png
[gemini_api_caller.py][05:31:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:31:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:31:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:31:08] [INFO] AFC remote call 1 is done.
[_client.py][05:31:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:31:56] [INFO] 截图模块运行中...
[截图模块][05:31:58] [INFO]  __main__ 入口被执行
[截图模块][05:31:58] [INFO]  启动时主动清理内存...
[截图模块][05:31:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:31:58] [INFO]  已执行 pkill chrome
[截图模块][05:32:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:32:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][05:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][05:32:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:32:00] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:32:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:32:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:32:03] [INFO]  启动浏览器 (有头模式)
[截图模块][05:32:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:32:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:32:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:32:16] [INFO]  打开目标图表页...
[截图模块][05:32:23] [INFO]  等待5秒加载页面...
[截图模块][05:32:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:32:29] [INFO]  快捷键已发送
[截图模块][05:32:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_053230.png
[截图模块][05:32:30] [INFO]  关闭浏览器...
[数据收集总模块][05:32:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_053230.png
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:31:58] [INFO]  __main__ 入口被执行
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:31:58] [INFO]  启动时主动清理内存...
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:31:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:31:58] [INFO]  已执行 pkill chrome
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:16] [INFO]  打开目标图表页...
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:23] [INFO]  等待5秒加载页面...
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:29] [INFO]  快捷键已发送
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_053230.png
[数据收集总模块][05:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:32:30] [INFO]  关闭浏览器...
[数据收集总模块][05:32:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_053230.png
[数据收集总模块][05:32:30] [INFO] 技术指标模块运行中...
[技术指标模块][05:32:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:32:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:32:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:32:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:32:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:32:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:32:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:32:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][05:32:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][05:32:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:32:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:32:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:32:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:32:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:32:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][05:32:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:32:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:32:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:32:37] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_053230.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2582.58,
        "volume": 213552.73,
        "RSI": 79.80343276706859,
        "MACD_macd": 17.53520508968859,
        "MACD_signal": 12.21144975571525,
        "ATR": 18.987393691909684,
        "ADX": 40.995447673205405,
        "Stoch_K": 92.2547955121244,
        "Stoch_D": 90.68031606638239,
        "StochRSI_K": 87.28954877350964,
        "StochRSI_D": 88.73134978632284,
        "BB_upper": 2594.0444688698763,
        "BB_lower": 2488.993531130124,
        "BB_middle": 2541.5190000000002,
        "EMA5": 2575.6932821972723,
        "EMA21": 2547.269965710945,
        "EMA55": 2532.269464384092,
        "EMA144": 2531.9452875202965,
        "EMA200": 2533.5290378262503,
        "VWAP": 2523.3462298080613
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2694.72,
        "volume": 3926797.36,
        "RSI": 73.6572345759259,
        "MACD_macd": 6.490377482172335,
        "MACD_signal": 0.09220854209556384,
        "ATR": 27.562336982692962,
        "ADX": 31.689924972143334,
        "Stoch_K": 82.16130732735888,
        "Stoch_D": 80.7589302105527,
        "StochRSI_K": 96.48491491699937,
        "StochRSI_D": 91.13250648452292,
        "BB_upper": 2691.601558619454,
        "BB_lower": 2613.8464413805464,
        "BB_middle": 2652.724,
        "EMA5": 2679.686108731054,
        "EMA21": 2660.935432506459,
        "EMA55": 2650.349881339875,
        "EMA144": 2613.2308444157566,
        "EMA200": 2599.0256779731744,
        "VWAP": 2626.794346574845
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0062%",
      "FGI": "50/100",
      "open_interest": "$596397461.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2544.41",
        "lastSz": "6.81",
        "askPx": "2544.41",
        "askSz": "173.67",
        "bidPx": "2544.4",
        "bidSz": "656.64",
        "open24h": "2581.41",
        "high24h": "2582.25",
        "low24h": "2473.63",
        "volCcy24h": "3257908.947",
        "vol24h": "32579089.47",
        "ts": "1748727155907",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T21:32:37+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110124.08 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-195.1566599999976 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][05:32:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:32:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_053230.png
[gemini_api_caller.py][05:32:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:32:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:32:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:32:38] [INFO] AFC remote call 1 is done.
[_client.py][05:32:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:45:02] [INFO] 截图模块运行中...
[截图模块][05:45:04] [INFO]  __main__ 入口被执行
[截图模块][05:45:04] [INFO]  启动时主动清理内存...
[截图模块][05:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:45:04] [INFO]  已执行 pkill chrome
[截图模块][05:45:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:45:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][05:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][05:45:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][05:45:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:45:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:45:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:45:08] [INFO] 启动浏览器 (有头模式)
[截图模块][05:45:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:45:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][05:45:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:45:44] [INFO]  打开目标图表页...
[截图模块][05:45:52] [INFO]  等待5秒加载页面...
[截图模块][05:45:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:45:58] [INFO]  快捷键已发送
[截图模块][05:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_054559.png
[截图模块][05:45:59] [INFO]  关闭浏览器...
[数据收集总模块][05:45:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_054559.png
[数据收集总模块][05:45:59] [INFO] 技术指标模块运行中...
[技术指标模块][05:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:46:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:46:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:46:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][05:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:46:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:46:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][05:46:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:46:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:46:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][05:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:46:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:46:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_054559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104545.1,
        "volume": 49801.38,
        "RSI": 62.191942268234165,
        "MACD_macd": 253.75624269875698,
        "MACD_signal": 189.9310292457659,
        "ATR": 357.4657182272016,
        "ADX": 31.119787741195367,
        "Stoch_K": 76.86503306106619,
        "Stoch_D": 87.32999547889091,
        "StochRSI_K": 44.6256370507212,
        "StochRSI_D": 78.11828721388478,
        "BB_upper": 104865.80278030867,
        "BB_lower": 103437.74721969131,
        "BB_middle": 104151.775,
        "EMA5": 104586.29175441693,
        "EMA21": 104200.7583655621,
        "EMA55": 103992.86691293625,
        "EMA144": 104159.78428308925,
        "EMA200": 104263.73093350924,
        "VWAP": 103957.4280337741
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 110209.0,
        "volume": 268390.16,
        "RSI": 80.39657926801344,
        "MACD_macd": 512.075169289441,
        "MACD_signal": 424.43611007887375,
        "ATR": 605.9732968157945,
        "ADX": 29.56066833397326,
        "Stoch_K": 89.39980638915779,
        "Stoch_D": 83.89185319315315,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 109941.42664883897,
        "BB_lower": 108145.75335116105,
        "BB_middle": 109043.59000000001,
        "EMA5": 109748.2519720742,
        "EMA21": 108977.3541597845,
        "EMA55": 107979.05991839012,
        "EMA144": 106570.45254695628,
        "EMA200": 106159.51193745174,
        "VWAP": 106504.48843635434
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0056%",
      "FGI": "50/100",
      "open_interest": "$22995975429.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104785.7",
        "lastSz": "0.49",
        "askPx": "104785.8",
        "askSz": "143.79",
        "bidPx": "104785.7",
        "bidSz": "16.25",
        "open24h": "104625",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "52700.5925",
        "vol24h": "5270059.25",
        "ts": "1748727965406",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110145.39 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T21:46:06+00:00Z"
}
[gemini_api_caller.py][05:46:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:46:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_054559.png
[gemini_api_caller.py][05:46:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:46:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:46:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:46:08] [INFO] AFC remote call 1 is done.
[_client.py][05:46:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][05:46:57] [INFO] 截图模块运行中...
[截图模块][05:46:58] [INFO]  __main__ 入口被执行
[截图模块][05:46:58] [INFO]  启动时主动清理内存...
[截图模块][05:46:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][05:46:58] [INFO]  已执行 pkill chrome
[截图模块][05:47:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:47:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][05:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][05:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][05:47:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][05:47:00] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][05:47:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][05:47:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][05:47:03] [INFO]  启动浏览器 (有头模式)
[截图模块][05:47:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][05:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][05:47:16] [INFO]  打开目标图表页...
[截图模块][05:47:23] [INFO]  等待5秒加载页面...
[截图模块][05:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][05:47:28] [INFO]  快捷键已发送
[截图模块][05:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_054729.png
[截图模块][05:47:29] [INFO]  关闭浏览器...
[数据收集总模块][05:47:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_054729.png
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:46:58] [INFO]  __main__ 入口被执行
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:46:58] [INFO]  启动时主动清理内存...
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:46:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:46:58] [INFO]  已执行 pkill chrome
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:16] [INFO]  打开目标图表页...
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:23] [INFO]  等待5秒加载页面...
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:28] [INFO]  快捷键已发送
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_054729.png
[数据收集总模块][05:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][05:47:29] [INFO]  关闭浏览器...
[数据收集总模块][05:47:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_054729.png
[数据收集总模块][05:47:30] [INFO] 技术指标模块运行中...
[技术指标模块][05:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][05:47:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][05:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][05:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][05:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][05:47:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][05:47:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:47:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][05:47:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][05:47:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:47:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][05:47:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][05:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][05:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][05:47:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][05:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][05:47:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][05:47:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][05:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_054729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2576.67,
        "volume": 319082.69,
        "RSI": 77.10282719532347,
        "MACD_macd": 16.665360691567003,
        "MACD_signal": 10.880388222480164,
        "ATR": 19.50391627683991,
        "ADX": 41.74147925360339,
        "Stoch_K": 85.1248642779588,
        "Stoch_D": 91.31243251468787,
        "StochRSI_K": 78.90450088151498,
        "StochRSI_D": 92.968166960505,
        "BB_upper": 2589.6244733927133,
        "BB_lower": 2484.8555266072863,
        "BB_middle": 2537.24,
        "EMA5": 2572.2499232959085,
        "EMA21": 2543.738975851829,
        "EMA55": 2530.4107544032913,
        "EMA144": 2531.2800915045864,
        "EMA200": 2533.099230848373,
        "VWAP": 2523.0266511460413
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2694.72,
        "volume": 3926797.36,
        "RSI": 73.6572345759259,
        "MACD_macd": 6.490377482172335,
        "MACD_signal": 0.09220854209556384,
        "ATR": 27.562336982692962,
        "ADX": 31.689924972143334,
        "Stoch_K": 82.16130732735888,
        "Stoch_D": 80.7589302105527,
        "StochRSI_K": 96.48491491699937,
        "StochRSI_D": 91.13250648452292,
        "BB_upper": 2691.601558619454,
        "BB_lower": 2613.8464413805464,
        "BB_middle": 2652.724,
        "EMA5": 2679.686108731054,
        "EMA21": 2660.935432506459,
        "EMA55": 2650.349881339875,
        "EMA144": 2613.2308444157566,
        "EMA200": 2599.0256779731744,
        "VWAP": 2626.794346574845
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0063%",
      "FGI": "50/100",
      "open_interest": "$597137807.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2541.49",
        "lastSz": "0.23",
        "askPx": "2541.5",
        "askSz": "144.15",
        "bidPx": "2541.49",
        "bidSz": "50.07",
        "open24h": "2571.75",
        "high24h": "2572.65",
        "low24h": "2473.63",
        "volCcy24h": "3234168.181",
        "vol24h": "32341681.81",
        "ts": "1748728056207",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T21:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110169.81 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-149.88359999999676 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][05:47:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][05:47:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_054729.png
[gemini_api_caller.py][05:47:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][05:47:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][05:47:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][05:47:38] [INFO] AFC remote call 1 is done.
[_client.py][05:47:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:00:03] [INFO] 截图模块运行中...
[截图模块][06:00:04] [INFO]  __main__ 入口被执行
[截图模块][06:00:04] [INFO]  启动时主动清理内存...
[截图模块][06:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:00:04] [INFO]  已执行 pkill chrome
[截图模块][06:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][06:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][06:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:00:09] [INFO] 启动浏览器 (有头模式)
[截图模块][06:00:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:00:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:00:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:00:45] [INFO]  打开目标图表页...
[截图模块][06:00:52] [INFO]  等待5秒加载页面...
[截图模块][06:00:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:00:58] [INFO]  快捷键已发送
[截图模块][06:00:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_060059.png
[截图模块][06:00:59] [INFO]  关闭浏览器...
[数据收集总模块][06:00:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_060059.png
[数据收集总模块][06:00:59] [INFO] 技术指标模块运行中...
[技术指标模块][06:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:01:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:01:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:01:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:01:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:01:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][06:01:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:01:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:01:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][06:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:01:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:01:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:01:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:01:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_060059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104724.3,
        "volume": 29640.84,
        "RSI": 75.99862861119244,
        "MACD_macd": 257.83519400392834,
        "MACD_signal": 173.94217436267633,
        "ATR": 361.73738245445696,
        "ADX": 31.174597729697133,
        "Stoch_K": 91.18239462887004,
        "Stoch_D": 89.34856307917316,
        "StochRSI_K": 89.72922635445968,
        "StochRSI_D": 96.26765857096233,
        "BB_upper": 104853.09278566485,
        "BB_lower": 103339.28721433513,
        "BB_middle": 104096.18999999999,
        "EMA5": 104606.88763162537,
        "EMA21": 104166.32780210348,
        "EMA55": 103973.64564667373,
        "EMA144": 104165.79806580482,
        "EMA200": 104277.66107420444,
        "VWAP": 103955.87832663828
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109856.7,
        "volume": 237264.38,
        "RSI": 75.76572751799443,
        "MACD_macd": 462.92406141667743,
        "MACD_signal": 402.4670163420294,
        "ATR": 611.307653933896,
        "ADX": 25.888156109929113,
        "Stoch_K": 73.34870939248184,
        "Stoch_D": 79.72779457079668,
        "StochRSI_K": 100.0,
        "StochRSI_D": 97.51035307469135,
        "BB_upper": 109763.31035802483,
        "BB_lower": 108105.8996419752,
        "BB_middle": 108934.60500000001,
        "EMA5": 109517.87795811129,
        "EMA21": 108854.19613715497,
        "EMA55": 107898.71466400317,
        "EMA144": 106540.3467267748,
        "EMA200": 106149.35691697836,
        "VWAP": 106471.67876635125
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0052%",
      "FGI": "50/100",
      "open_interest": "$23000052091.000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104811.2",
        "lastSz": "0.01",
        "askPx": "104811.3",
        "askSz": "60",
        "bidPx": "104811.1",
        "bidSz": "40.2",
        "open24h": "104630",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "52840.2019",
        "vol24h": "5284020.19",
        "ts": "1748728866366",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110152.54 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T22:01:06+00:00Z"
}
[gemini_api_caller.py][06:01:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:01:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_060059.png
[gemini_api_caller.py][06:01:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:01:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:01:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:01:08] [INFO] AFC remote call 1 is done.
[_client.py][06:01:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:02:03] [INFO] 截图模块运行中...
[截图模块][06:02:04] [INFO]  __main__ 入口被执行
[截图模块][06:02:04] [INFO]  启动时主动清理内存...
[截图模块][06:02:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:02:05] [INFO]  已执行 pkill chrome
[截图模块][06:02:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:02:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:02:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][06:02:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][06:02:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:02:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:02:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:02:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:02:10] [INFO]  启动浏览器 (有头模式)
[截图模块][06:02:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:02:42] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:02:42] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:02:42] [INFO]  打开目标图表页...
[截图模块][06:02:48] [INFO]  等待5秒加载页面...
[截图模块][06:02:53] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:02:53] [INFO]  快捷键已发送
[截图模块][06:02:54] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_060254.png
[截图模块][06:02:54] [INFO]  关闭浏览器...
[数据收集总模块][06:02:55] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_060254.png
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:04] [INFO]  __main__ 入口被执行
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:04] [INFO]  启动时主动清理内存...
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:05] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:05] [INFO]  已执行 pkill chrome
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:42] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:42] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:42] [INFO]  打开目标图表页...
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:48] [INFO]  等待5秒加载页面...
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:53] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:53] [INFO]  快捷键已发送
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:54] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_060254.png
[数据收集总模块][06:02:55] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:02:54] [INFO]  关闭浏览器...
[数据收集总模块][06:02:55] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_060254.png
[数据收集总模块][06:02:55] [INFO] 技术指标模块运行中...
[技术指标模块][06:02:56] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:02:56] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:02:56] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:02:57] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:02:57] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:02:57] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:02:57] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:02:57] [INFO] 宏观因子模块运行中...
[宏观因子模块][06:02:58] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][06:02:59] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:02:59] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:03:00] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:03:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:03:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:03:01] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][06:03:01] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:03:01] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:03:01] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:03:02] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_060254.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2580.8,
        "volume": 102493.0,
        "RSI": 83.89713757672041,
        "MACD_macd": 15.914905395052756,
        "MACD_signal": 9.434650339441731,
        "ATR": 20.23528782175262,
        "ADX": 39.66129166413272,
        "Stoch_K": 94.66128840906394,
        "Stoch_D": 89.84621888798829,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2585.6756453393805,
        "BB_lower": 2480.32235466062,
        "BB_middle": 2532.9990000000003,
        "EMA5": 2570.0398849438625,
        "EMA21": 2540.4458175614104,
        "EMA55": 2528.67832999252,
        "EMA144": 2530.4682838045605,
        "EMA200": 2532.401232133133,
        "VWAP": 2522.5317751166367
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2679.26,
        "volume": 1672425.14,
        "RSI": 66.70084247279524,
        "MACD_macd": 4.118430570801593,
        "MACD_signal": -1.5083080732299465,
        "ATR": 25.22731268307723,
        "ADX": 29.162807003063023,
        "Stoch_K": 68.82988100484808,
        "Stoch_D": 75.36904055444249,
        "StochRSI_K": 76.91260601386885,
        "StochRSI_D": 92.30420200462295,
        "BB_upper": 2684.355185302911,
        "BB_lower": 2617.2228146970883,
        "BB_middle": 2650.7889999999998,
        "EMA5": 2672.1691630965806,
        "EMA21": 2657.5570835171943,
        "EMA55": 2648.7434160041576,
        "EMA144": 2612.4324618556643,
        "EMA200": 2598.5655503874054,
        "VWAP": 2625.1193029872748
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0063%",
      "FGI": "50/100",
      "open_interest": "$599385875.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2540.57",
        "lastSz": "0.01",
        "askPx": "2540.6",
        "askSz": "1653.48",
        "bidPx": "2540.5",
        "bidSz": "87.07",
        "open24h": "2568.5",
        "high24h": "2570.87",
        "low24h": "2473.63",
        "volCcy24h": "3217531.808",
        "vol24h": "32175318.08",
        "ts": "1748728982083",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T22:03:02+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110179.14 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-140.7981900000015 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][06:03:03] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:03:03] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_060254.png
[gemini_api_caller.py][06:03:03] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:03:03] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:03:03] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:03:03] [INFO] AFC remote call 1 is done.
[_client.py][06:03:06] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:15:02] [INFO] 截图模块运行中...
[截图模块][06:15:04] [INFO]  __main__ 入口被执行
[截图模块][06:15:04] [INFO]  启动时主动清理内存...
[截图模块][06:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:15:04] [INFO]  已执行 pkill chrome
[截图模块][06:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][06:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][06:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:15:09] [INFO] 启动浏览器 (有头模式)
[截图模块][06:15:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:15:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:15:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:15:45] [INFO]  打开目标图表页...
[截图模块][06:15:51] [INFO]  等待5秒加载页面...
[截图模块][06:15:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:15:57] [INFO]  快捷键已发送
[截图模块][06:15:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_061558.png
[截图模块][06:15:58] [INFO]  关闭浏览器...
[数据收集总模块][06:15:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_061558.png
[数据收集总模块][06:15:58] [INFO] 技术指标模块运行中...
[技术指标模块][06:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:15:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:16:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:16:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:16:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:16:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][06:16:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:16:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:16:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][06:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:16:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:16:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:16:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:16:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_061558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104761.3,
        "volume": 17618.51,
        "RSI": 79.14262274251686,
        "MACD_macd": 241.0851319601352,
        "MACD_signal": 152.98905664533828,
        "ATR": 383.3277215435264,
        "ADX": 32.22445453296035,
        "Stoch_K": 93.94255874673651,
        "Stoch_D": 87.44488814277564,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.9282423894543,
        "BB_upper": 104760.85119123595,
        "BB_lower": 103328.25880876406,
        "BB_middle": 104044.55500000001,
        "EMA5": 104548.18144743804,
        "EMA21": 104110.52835527199,
        "EMA55": 103945.08160414395,
        "EMA144": 104150.93278114314,
        "EMA200": 104262.80533662844,
        "VWAP": 103955.76190117707
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109856.7,
        "volume": 237264.38,
        "RSI": 75.76572751799443,
        "MACD_macd": 462.92406141667743,
        "MACD_signal": 402.4670163420294,
        "ATR": 611.307653933896,
        "ADX": 25.888156109929113,
        "Stoch_K": 73.34870939248184,
        "Stoch_D": 79.72779457079668,
        "StochRSI_K": 100.0,
        "StochRSI_D": 97.51035307469135,
        "BB_upper": 109763.31035802483,
        "BB_lower": 108105.8996419752,
        "BB_middle": 108934.60500000001,
        "EMA5": 109517.87795811129,
        "EMA21": 108854.19613715497,
        "EMA55": 107898.71466400317,
        "EMA144": 106540.3467267748,
        "EMA200": 106149.35691697836,
        "VWAP": 106471.67876635125
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0047%",
      "FGI": "50/100",
      "open_interest": "$23002629251.000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104772",
        "lastSz": "0.01",
        "askPx": "104772.1",
        "askSz": "573.59",
        "bidPx": "104772",
        "bidSz": "84.49",
        "open24h": "104638",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "52500.6035",
        "vol24h": "5250060.35",
        "ts": "1748729764209",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110227.66 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T22:16:05+00:00Z"
}
[gemini_api_caller.py][06:16:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:16:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_061558.png
[gemini_api_caller.py][06:16:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:16:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:16:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:16:06] [INFO] AFC remote call 1 is done.
[_client.py][06:16:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:17:08] [INFO] 截图模块运行中...
[截图模块][06:17:09] [INFO]  __main__ 入口被执行
[截图模块][06:17:09] [INFO]  启动时主动清理内存...
[截图模块][06:17:09] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:17:09] [INFO]  已执行 pkill chrome
[截图模块][06:17:11] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:17:11] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:17:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][06:17:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][06:17:11] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:17:11] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:17:11] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:17:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:17:14] [INFO]  启动浏览器 (有头模式)
[截图模块][06:17:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:17:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:17:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:17:47] [INFO]  打开目标图表页...
[截图模块][06:17:54] [INFO]  等待5秒加载页面...
[截图模块][06:17:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:18:00] [INFO]  快捷键已发送
[截图模块][06:18:01] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_061801.png
[截图模块][06:18:01] [INFO]  关闭浏览器...
[数据收集总模块][06:18:01] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_061801.png
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:09] [INFO]  __main__ 入口被执行
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:09] [INFO]  启动时主动清理内存...
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:09] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:09] [INFO]  已执行 pkill chrome
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:11] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:14] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:47] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:47] [INFO]  打开目标图表页...
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:54] [INFO]  等待5秒加载页面...
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:17:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:18:00] [INFO]  快捷键已发送
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:18:01] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_061801.png
[数据收集总模块][06:18:01] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:18:01] [INFO]  关闭浏览器...
[数据收集总模块][06:18:01] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_061801.png
[数据收集总模块][06:18:01] [INFO] 技术指标模块运行中...
[技术指标模块][06:18:02] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:18:03] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:18:03] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:18:03] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:18:03] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:18:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:18:04] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:18:04] [INFO] 宏观因子模块运行中...
[宏观因子模块][06:18:04] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][06:18:06] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:18:06] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:18:07] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:18:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:18:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:18:07] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][06:18:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:18:08] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:18:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:18:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_061801.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2580.37,
        "volume": 82898.45,
        "RSI": 83.76807091697823,
        "MACD_macd": 14.305770963220311,
        "MACD_signal": 7.816239413242708,
        "ATR": 22.239180514587705,
        "ADX": 38.32892627092506,
        "Stoch_K": 94.15114485704082,
        "Stoch_D": 89.47149944993993,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2577.9781101202684,
        "BB_lower": 2480.889889879732,
        "BB_middle": 2529.434,
        "EMA5": 2564.659827415793,
        "EMA21": 2536.4102165245135,
        "EMA55": 2526.685351267299,
        "EMA144": 2529.1853538415958,
        "EMA200": 2531.063908753224,
        "VWAP": 2522.4107736795204
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2679.26,
        "volume": 1672425.14,
        "RSI": 66.70084247279524,
        "MACD_macd": 4.118430570801593,
        "MACD_signal": -1.5083080732299465,
        "ATR": 25.22731268307723,
        "ADX": 29.162807003063023,
        "Stoch_K": 68.82988100484808,
        "Stoch_D": 75.36904055444249,
        "StochRSI_K": 76.91260601386885,
        "StochRSI_D": 92.30420200462295,
        "BB_upper": 2684.355185302911,
        "BB_lower": 2617.2228146970883,
        "BB_middle": 2650.7889999999998,
        "EMA5": 2672.1691630965806,
        "EMA21": 2657.5570835171943,
        "EMA55": 2648.7434160041576,
        "EMA144": 2612.4324618556643,
        "EMA200": 2598.5655503874054,
        "VWAP": 2625.1193029872748
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0064%",
      "FGI": "50/100",
      "open_interest": "$600649400.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2537.8",
        "lastSz": "0.86",
        "askPx": "2537.81",
        "askSz": "851.39",
        "bidPx": "2537.8",
        "bidSz": "1125.4",
        "open24h": "2557.01",
        "high24h": "2560.61",
        "low24h": "2473.63",
        "volCcy24h": "3199079.669",
        "vol24h": "31990796.69",
        "ts": "1748729887934",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T22:18:08+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110230.0 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-91.21340999999758 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][06:18:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:18:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_061801.png
[gemini_api_caller.py][06:18:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:18:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:18:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:18:10] [INFO] AFC remote call 1 is done.
[_client.py][06:18:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:30:01] [INFO] 截图模块运行中...
[截图模块][06:30:03] [INFO]  __main__ 入口被执行
[截图模块][06:30:03] [INFO]  启动时主动清理内存...
[截图模块][06:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:30:03] [INFO]  已执行 pkill chrome
[截图模块][06:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][06:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][06:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:30:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:30:08] [INFO] 启动浏览器 (有头模式)
[截图模块][06:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:30:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:30:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:30:44] [INFO]  打开目标图表页...
[截图模块][06:30:50] [INFO]  等待5秒加载页面...
[截图模块][06:30:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:30:56] [INFO]  快捷键已发送
[截图模块][06:30:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_063057.png
[截图模块][06:30:57] [INFO]  关闭浏览器...
[数据收集总模块][06:30:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_063057.png
[数据收集总模块][06:30:57] [INFO] 技术指标模块运行中...
[技术指标模块][06:30:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:30:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:30:58] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:30:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:30:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:30:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:30:59] [INFO] 宏观因子模块运行中...
[数据收集总模块][06:31:01] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:31:01] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:31:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][06:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:31:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:31:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:31:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:31:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_063057.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104597.3,
        "volume": 33180.2,
        "RSI": 75.20176571974092,
        "MACD_macd": 212.46735406745574,
        "MACD_signal": 131.04082295156894,
        "ATR": 404.5781389651339,
        "ADX": 29.019495685327584,
        "Stoch_K": 82.92073586191292,
        "Stoch_D": 84.86633407777164,
        "StochRSI_K": 99.07374881923145,
        "StochRSI_D": 98.92824203931922,
        "BB_upper": 104640.97629405693,
        "BB_lower": 103336.51370594309,
        "BB_middle": 103988.74500000001,
        "EMA5": 104441.62217115704,
        "EMA21": 104045.44280945903,
        "EMA55": 103911.98344044137,
        "EMA144": 104115.84860593568,
        "EMA200": 104218.7801093361,
        "VWAP": 103955.18578509284
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109856.7,
        "volume": 237264.38,
        "RSI": 75.76572751799443,
        "MACD_macd": 462.92406141667743,
        "MACD_signal": 402.4670163420294,
        "ATR": 611.307653933896,
        "ADX": 25.888156109929113,
        "Stoch_K": 73.34870939248184,
        "Stoch_D": 79.72779457079668,
        "StochRSI_K": 100.0,
        "StochRSI_D": 97.51035307469135,
        "BB_upper": 109763.31035802483,
        "BB_lower": 108105.8996419752,
        "BB_middle": 108934.60500000001,
        "EMA5": 109517.87795811129,
        "EMA21": 108854.19613715497,
        "EMA55": 107898.71466400317,
        "EMA144": 106540.3467267748,
        "EMA200": 106149.35691697836,
        "VWAP": 106471.67876635125
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0043%",
      "FGI": "50/100",
      "open_interest": "$23002420046.00002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104712.1",
        "lastSz": "0.96",
        "askPx": "104712.2",
        "askSz": "1238.54",
        "bidPx": "104712.1",
        "bidSz": "287.1",
        "open24h": "104420.8",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "51922.0925",
        "vol24h": "5192209.25",
        "ts": "1748730663811",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110249.9 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T22:31:04+00:00Z"
}
[gemini_api_caller.py][06:31:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:31:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_063057.png
[gemini_api_caller.py][06:31:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:31:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:31:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:31:06] [INFO] AFC remote call 1 is done.
[_client.py][06:31:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:31:54] [INFO] 截图模块运行中...
[截图模块][06:31:55] [INFO]  __main__ 入口被执行
[截图模块][06:31:55] [INFO]  启动时主动清理内存...
[截图模块][06:31:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:31:55] [INFO]  已执行 pkill chrome
[截图模块][06:31:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:31:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][06:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][06:31:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:31:57] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:31:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:31:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:32:00] [INFO]  启动浏览器 (有头模式)
[截图模块][06:32:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:32:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:32:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:32:15] [INFO]  打开目标图表页...
[截图模块][06:32:21] [INFO]  等待5秒加载页面...
[截图模块][06:32:26] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:32:27] [INFO]  快捷键已发送
[截图模块][06:32:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_063228.png
[截图模块][06:32:28] [INFO]  关闭浏览器...
[数据收集总模块][06:32:28] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_063228.png
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:55] [INFO]  __main__ 入口被执行
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:55] [INFO]  启动时主动清理内存...
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:55] [INFO]  已执行 pkill chrome
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:31:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:15] [INFO]  打开目标图表页...
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:21] [INFO]  等待5秒加载页面...
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:26] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:27] [INFO]  快捷键已发送
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_063228.png
[数据收集总模块][06:32:28] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:32:28] [INFO]  关闭浏览器...
[数据收集总模块][06:32:28] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_063228.png
[数据收集总模块][06:32:28] [INFO] 技术指标模块运行中...
[技术指标模块][06:32:29] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:32:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:32:30] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:32:30] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:32:30] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:32:30] [INFO] 宏观因子模块运行中...
[宏观因子模块][06:32:31] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][06:32:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:32:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:32:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:32:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:32:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:32:34] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][06:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:32:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:32:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:32:35] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_063228.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2568.15,
        "volume": 245876.85,
        "RSI": 79.7755858615143,
        "MACD_macd": 12.088454641498629,
        "MACD_signal": 6.197025066151172,
        "ATR": 23.02212852727278,
        "ADX": 34.50290319525674,
        "Stoch_K": 80.72622339786002,
        "Stoch_D": 88.08731494789117,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2569.0285385731067,
        "BB_lower": 2482.211461426893,
        "BB_middle": 2525.62,
        "EMA5": 2556.8047411236894,
        "EMA21": 2532.0138877571226,
        "EMA55": 2524.5771273862456,
        "EMA144": 2527.359543373283,
        "EMA200": 2528.9371619318667,
        "VWAP": 2522.2854537965563
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2679.26,
        "volume": 1672425.14,
        "RSI": 66.70084247279524,
        "MACD_macd": 4.118430570801593,
        "MACD_signal": -1.5083080732299465,
        "ATR": 25.22731268307723,
        "ADX": 29.162807003063023,
        "Stoch_K": 68.82988100484808,
        "Stoch_D": 75.36904055444249,
        "StochRSI_K": 76.91260601386885,
        "StochRSI_D": 92.30420200462295,
        "BB_upper": 2684.355185302911,
        "BB_lower": 2617.2228146970883,
        "BB_middle": 2650.7889999999998,
        "EMA5": 2672.1691630965806,
        "EMA21": 2657.5570835171943,
        "EMA55": 2648.7434160041576,
        "EMA144": 2612.4324618556643,
        "EMA200": 2598.5655503874054,
        "VWAP": 2625.1193029872748
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0063%",
      "FGI": "50/100",
      "open_interest": "$600184377.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2536.43",
        "lastSz": "0.01",
        "askPx": "2536.43",
        "askSz": "1593.98",
        "bidPx": "2536.42",
        "bidSz": "443.29",
        "open24h": "2551.56",
        "high24h": "2551.56",
        "low24h": "2473.63",
        "volCcy24h": "3130441.223",
        "vol24h": "31304412.23",
        "ts": "1748730754412",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T22:32:35+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110248.51 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-72.11865000000094 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][06:32:36] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:32:36] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_063228.png
[gemini_api_caller.py][06:32:36] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:32:36] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:32:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:32:37] [INFO] AFC remote call 1 is done.
[_client.py][06:32:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:45:02] [INFO] 截图模块运行中...
[截图模块][06:45:03] [INFO]  __main__ 入口被执行
[截图模块][06:45:03] [INFO]  启动时主动清理内存...
[截图模块][06:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:45:03] [INFO]  已执行 pkill chrome
[截图模块][06:45:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:45:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][06:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][06:45:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][06:45:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:45:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:45:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:45:08] [INFO] 启动浏览器 (有头模式)
[截图模块][06:45:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:45:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][06:45:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:45:44] [INFO]  打开目标图表页...
[截图模块][06:45:50] [INFO]  等待5秒加载页面...
[截图模块][06:45:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:45:56] [INFO]  快捷键已发送
[截图模块][06:45:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_064557.png
[截图模块][06:45:57] [INFO]  关闭浏览器...
[数据收集总模块][06:45:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_064557.png
[数据收集总模块][06:45:58] [INFO] 技术指标模块运行中...
[技术指标模块][06:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:45:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:45:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:46:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:46:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:46:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][06:46:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:46:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:46:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][06:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:46:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][06:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:46:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:46:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:46:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_064557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104582.7,
        "volume": 18976.32,
        "RSI": 74.83491406262006,
        "MACD_macd": 189.4924521275534,
        "MACD_signal": 110.69147998079194,
        "ATR": 417.32864640778655,
        "ADX": 25.481789299174583,
        "Stoch_K": 85.47136981967748,
        "Stoch_D": 82.2096905687634,
        "StochRSI_K": 97.71097724556151,
        "StochRSI_D": 99.23699241518716,
        "BB_upper": 104554.4071124321,
        "BB_lower": 103313.35288756787,
        "BB_middle": 103933.87999999999,
        "EMA5": 104363.78325673555,
        "EMA21": 103990.2562841998,
        "EMA55": 103886.32548552177,
        "EMA144": 104106.56139653276,
        "EMA200": 104211.22299571209,
        "VWAP": 103955.64760796948
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109856.7,
        "volume": 237264.38,
        "RSI": 75.76572751799443,
        "MACD_macd": 462.92406141667743,
        "MACD_signal": 402.4670163420294,
        "ATR": 611.307653933896,
        "ADX": 25.888156109929113,
        "Stoch_K": 73.34870939248184,
        "Stoch_D": 79.72779457079668,
        "StochRSI_K": 100.0,
        "StochRSI_D": 97.51035307469135,
        "BB_upper": 109763.31035802483,
        "BB_lower": 108105.8996419752,
        "BB_middle": 108934.60500000001,
        "EMA5": 109517.87795811129,
        "EMA21": 108854.19613715497,
        "EMA55": 107898.71466400317,
        "EMA144": 106540.3467267748,
        "EMA200": 106149.35691697836,
        "VWAP": 106471.67876635125
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0042%",
      "FGI": "50/100",
      "open_interest": "$23002492117.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104692.8",
        "lastSz": "1.13",
        "askPx": "104692.9",
        "askSz": "656.57",
        "bidPx": "104692.8",
        "bidSz": "198.33",
        "open24h": "104085.6",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "50898.3743",
        "vol24h": "5089837.43",
        "ts": "1748731563705",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110242.28 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T22:46:04+00:00Z"
}
[gemini_api_caller.py][06:46:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:46:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_064557.png
[gemini_api_caller.py][06:46:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:46:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:46:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:46:06] [INFO] AFC remote call 1 is done.
[_client.py][06:46:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][06:46:54] [INFO] 截图模块运行中...
[截图模块][06:46:55] [INFO]  __main__ 入口被执行
[截图模块][06:46:55] [INFO]  启动时主动清理内存...
[截图模块][06:46:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][06:46:55] [INFO]  已执行 pkill chrome
[截图模块][06:46:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:46:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][06:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][06:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][06:46:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][06:46:57] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][06:46:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][06:46:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][06:47:00] [INFO]  启动浏览器 (有头模式)
[截图模块][06:47:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][06:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][06:47:16] [INFO]  打开目标图表页...
[截图模块][06:47:22] [INFO]  等待5秒加载页面...
[截图模块][06:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][06:47:28] [INFO]  快捷键已发送
[截图模块][06:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_064729.png
[截图模块][06:47:29] [INFO]  关闭浏览器...
[数据收集总模块][06:47:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_064729.png
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:55] [INFO]  __main__ 入口被执行
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:55] [INFO]  启动时主动清理内存...
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:55] [INFO]  已执行 pkill chrome
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:46:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:16] [INFO]  打开目标图表页...
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:22] [INFO]  等待5秒加载页面...
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:28] [INFO]  快捷键已发送
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_064729.png
[数据收集总模块][06:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][06:47:29] [INFO]  关闭浏览器...
[数据收集总模块][06:47:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_064729.png
[数据收集总模块][06:47:29] [INFO] 技术指标模块运行中...
[技术指标模块][06:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][06:47:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][06:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][06:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][06:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][06:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][06:47:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:47:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][06:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][06:47:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:47:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][06:47:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][06:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][06:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][06:47:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][06:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][06:47:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][06:47:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][06:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_064729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2568.02,
        "volume": 291097.99,
        "RSI": 79.72961532568334,
        "MACD_macd": 10.323126696038344,
        "MACD_signal": 4.7226014461923445,
        "ATR": 23.776302125743698,
        "ADX": 30.21685964859818,
        "Stoch_K": 93.53713009491888,
        "Stoch_D": 88.14687647375791,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2562.278289556982,
        "BB_lower": 2481.9307104430186,
        "BB_middle": 2522.1045000000004,
        "EMA5": 2551.1321116855343,
        "EMA21": 2528.4004497471988,
        "EMA55": 2523.022586246167,
        "EMA144": 2527.337697271863,
        "EMA200": 2529.349377824103,
        "VWAP": 2521.9489279050013
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2679.26,
        "volume": 1672425.14,
        "RSI": 66.70084247279524,
        "MACD_macd": 4.118430570801593,
        "MACD_signal": -1.5083080732299465,
        "ATR": 25.22731268307723,
        "ADX": 29.162807003063023,
        "Stoch_K": 68.82988100484808,
        "Stoch_D": 75.36904055444249,
        "StochRSI_K": 76.91260601386885,
        "StochRSI_D": 92.30420200462295,
        "BB_upper": 2684.355185302911,
        "BB_lower": 2617.2228146970883,
        "BB_middle": 2650.7889999999998,
        "EMA5": 2672.1691630965806,
        "EMA21": 2657.5570835171943,
        "EMA55": 2648.7434160041576,
        "EMA144": 2612.4324618556643,
        "EMA200": 2598.5655503874054,
        "VWAP": 2625.1193029872748
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0067%",
      "FGI": "50/100",
      "open_interest": "$602070271.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2534.13",
        "lastSz": "2.66",
        "askPx": "2534.14",
        "askSz": "401.28",
        "bidPx": "2534.13",
        "bidSz": "1950.04",
        "open24h": "2534.22",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "3035670.677",
        "vol24h": "30356706.77",
        "ts": "1748731655713",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T22:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110273.55 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-46.40231999999982 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][06:47:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][06:47:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_064729.png
[gemini_api_caller.py][06:47:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][06:47:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][06:47:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][06:47:37] [INFO] AFC remote call 1 is done.
[_client.py][06:47:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:00:01] [INFO] 截图模块运行中...
[截图模块][07:00:03] [INFO]  __main__ 入口被执行
[截图模块][07:00:03] [INFO]  启动时主动清理内存...
[截图模块][07:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:00:03] [INFO]  已执行 pkill chrome
[截图模块][07:00:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:00:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][07:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][07:00:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:00:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:00:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:00:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:00:08] [INFO] 启动浏览器 (有头模式)
[截图模块][07:00:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:00:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:00:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:00:44] [INFO]  打开目标图表页...
[截图模块][07:00:51] [INFO]  等待5秒加载页面...
[截图模块][07:00:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:00:56] [INFO]  快捷键已发送
[截图模块][07:00:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_070057.png
[截图模块][07:00:57] [INFO]  关闭浏览器...
[数据收集总模块][07:00:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_070057.png
[数据收集总模块][07:00:58] [INFO] 技术指标模块运行中...
[技术指标模块][07:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:00:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:00:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:00:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:01:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:01:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:01:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][07:01:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:01:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:01:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][07:01:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:01:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:01:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][07:01:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:01:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:01:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:01:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_070057.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104592.0,
        "volume": 55413.25,
        "RSI": 75.45111014065418,
        "MACD_macd": 158.94635703539825,
        "MACD_signal": 91.07034218971933,
        "ATR": 464.0715093051451,
        "ADX": 22.68414322620714,
        "Stoch_K": 86.20689655172453,
        "Stoch_D": 73.10504639494995,
        "StochRSI_K": 100.0,
        "StochRSI_D": 81.63649839472238,
        "BB_upper": 104496.13432167804,
        "BB_lower": 103229.36567832196,
        "BB_middle": 103862.75,
        "EMA5": 104254.32488510331,
        "EMA21": 103931.00316409707,
        "EMA55": 103857.54034482938,
        "EMA144": 104072.19150818457,
        "EMA200": 104166.76508913032,
        "VWAP": 103957.00759705249
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109838.1,
        "volume": 280835.48,
        "RSI": 75.50092219819749,
        "MACD_macd": 429.49816863522574,
        "MACD_signal": 387.5350724551041,
        "ATR": 611.8473081020788,
        "ADX": 21.78491754636585,
        "Stoch_K": 88.9270437978198,
        "Stoch_D": 71.09440107735013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 70.4332636403809,
        "BB_upper": 109759.4918893785,
        "BB_lower": 107872.71811062151,
        "BB_middle": 108816.10500000001,
        "EMA5": 109348.46693716693,
        "EMA21": 108753.92558776065,
        "EMA55": 107819.29745427814,
        "EMA144": 106430.09829331347,
        "EMA200": 106018.23768970427,
        "VWAP": 106443.76484057037
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0039%",
      "FGI": "50/100",
      "open_interest": "$23002220644.00001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104518.1",
        "lastSz": "1.04",
        "askPx": "104518.2",
        "askSz": "815.57",
        "bidPx": "104518.1",
        "bidSz": "224.58",
        "open24h": "103854.1",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "50369.7526",
        "vol24h": "5036975.26",
        "ts": "1748732464109",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110380.39 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T23:01:05+00:00Z"
}
[gemini_api_caller.py][07:01:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:01:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_070057.png
[gemini_api_caller.py][07:01:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:01:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:01:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:01:06] [INFO] AFC remote call 1 is done.
[_client.py][07:01:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:01:53] [INFO] 截图模块运行中...
[截图模块][07:01:55] [INFO]  __main__ 入口被执行
[截图模块][07:01:55] [INFO]  启动时主动清理内存...
[截图模块][07:01:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:01:55] [INFO]  已执行 pkill chrome
[截图模块][07:01:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:01:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:01:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][07:01:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][07:01:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:01:56] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:01:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:01:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:02:00] [INFO]  启动浏览器 (有头模式)
[截图模块][07:02:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:02:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:02:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:02:15] [INFO]  打开目标图表页...
[截图模块][07:02:20] [INFO]  等待5秒加载页面...
[截图模块][07:02:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:02:26] [INFO]  快捷键已发送
[截图模块][07:02:27] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_070227.png
[截图模块][07:02:27] [INFO]  关闭浏览器...
[数据收集总模块][07:02:27] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_070227.png
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:55] [INFO]  __main__ 入口被执行
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:55] [INFO]  启动时主动清理内存...
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:55] [INFO]  已执行 pkill chrome
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:01:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:15] [INFO]  打开目标图表页...
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:20] [INFO]  等待5秒加载页面...
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:26] [INFO]  快捷键已发送
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:27] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_070227.png
[数据收集总模块][07:02:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:02:27] [INFO]  关闭浏览器...
[数据收集总模块][07:02:27] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_070227.png
[数据收集总模块][07:02:27] [INFO] 技术指标模块运行中...
[技术指标模块][07:02:28] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:02:28] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:02:28] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:02:29] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:02:29] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:02:29] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:02:29] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:02:29] [INFO] 宏观因子模块运行中...
[宏观因子模块][07:02:30] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][07:02:32] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:02:32] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:02:33] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][07:02:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:02:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:02:34] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][07:02:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:02:34] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:02:34] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:02:34] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_070227.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2564.9,
        "volume": 243965.61,
        "RSI": 78.72374688470134,
        "MACD_macd": 7.93825802510446,
        "MACD_signal": 3.3283380684632373,
        "ATR": 25.58804387668983,
        "ADX": 26.73565925209099,
        "Stoch_K": 89.99859135089459,
        "Stoch_D": 77.92224192642033,
        "StochRSI_K": 100.0,
        "StochRSI_D": 86.21126049934189,
        "BB_upper": 2554.636220060107,
        "BB_lower": 2481.7187799398926,
        "BB_middle": 2518.1775,
        "EMA5": 2542.688167528301,
        "EMA21": 2524.4378457667212,
        "EMA55": 2521.1339616252926,
        "EMA144": 2524.7131735390085,
        "EMA200": 2525.93983477984,
        "VWAP": 2521.603215329702
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2686.66,
        "volume": 1098511.76,
        "RSI": 74.90656854515908,
        "MACD_macd": 2.6121565784242193,
        "MACD_signal": -2.9058696475196335,
        "ATR": 24.025363693161616,
        "ADX": 24.14646374981674,
        "Stoch_K": 91.28560229945116,
        "Stoch_D": 78.8513578622924,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2680.514920399593,
        "BB_lower": 2615.8480796004073,
        "BB_middle": 2648.1815,
        "EMA5": 2668.6237446448704,
        "EMA21": 2655.3857829151993,
        "EMA55": 2647.2679373077403,
        "EMA144": 2608.301989122481,
        "EMA200": 2593.057860267727,
        "VWAP": 2624.3377567588195
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0068%",
      "FGI": "50/100",
      "open_interest": "$600968086.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2527.09",
        "lastSz": "8.43",
        "askPx": "2527.1",
        "askSz": "235.92",
        "bidPx": "2527.09",
        "bidSz": "1413.31",
        "open24h": "2525.34",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2957905.568",
        "vol24h": "29579055.68",
        "ts": "1748732553907",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T23:02:34+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110390.04 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "68.3202299999974 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][07:02:36] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:02:36] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_070227.png
[gemini_api_caller.py][07:02:36] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:02:36] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:02:36] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:02:36] [INFO] AFC remote call 1 is done.
[_client.py][07:02:39] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:15:02] [INFO] 截图模块运行中...
[截图模块][07:15:03] [INFO]  __main__ 入口被执行
[截图模块][07:15:03] [INFO]  启动时主动清理内存...
[截图模块][07:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:15:04] [INFO]  已执行 pkill chrome
[截图模块][07:15:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:15:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:15:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][07:15:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][07:15:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:15:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:15:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:15:08] [INFO] 启动浏览器 (有头模式)
[截图模块][07:15:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:15:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:15:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:15:44] [INFO]  打开目标图表页...
[截图模块][07:15:50] [INFO]  等待5秒加载页面...
[截图模块][07:15:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:15:56] [INFO]  快捷键已发送
[截图模块][07:15:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_071557.png
[截图模块][07:15:57] [INFO]  关闭浏览器...
[数据收集总模块][07:15:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_071557.png
[数据收集总模块][07:15:57] [INFO] 技术指标模块运行中...
[技术指标模块][07:15:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:15:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:15:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:15:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:15:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:15:59] [INFO] 宏观因子模块运行中...
[数据收集总模块][07:16:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:16:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:16:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][07:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:16:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][07:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:16:03] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:16:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:16:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_071557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104422.7,
        "volume": 71572.7,
        "RSI": 71.78582647777583,
        "MACD_macd": 116.56107984927075,
        "MACD_signal": 73.99119741551412,
        "ATR": 498.528806871891,
        "ADX": 19.64545713729396,
        "Stoch_K": 74.95080533488819,
        "Stoch_D": 66.0539171627101,
        "StochRSI_K": 100.0,
        "StochRSI_D": 61.09188519842312,
        "BB_upper": 104390.97025818385,
        "BB_lower": 103197.42974181614,
        "BB_middle": 103794.2,
        "EMA5": 104085.48732765495,
        "EMA21": 103864.91566138786,
        "EMA55": 103834.50608136784,
        "EMA144": 104103.50392883514,
        "EMA200": 104219.19350668149,
        "VWAP": 103962.2517931263
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109838.1,
        "volume": 280835.48,
        "RSI": 75.50092219819749,
        "MACD_macd": 429.49816863522574,
        "MACD_signal": 387.5350724551041,
        "ATR": 611.8473081020788,
        "ADX": 21.78491754636585,
        "Stoch_K": 88.9270437978198,
        "Stoch_D": 71.09440107735013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 70.4332636403809,
        "BB_upper": 109759.4918893785,
        "BB_lower": 107872.71811062151,
        "BB_middle": 108816.10500000001,
        "EMA5": 109348.46693716693,
        "EMA21": 108753.92558776065,
        "EMA55": 107819.29745427814,
        "EMA144": 106430.09829331347,
        "EMA200": 106018.23768970427,
        "VWAP": 106443.76484057037
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0037%",
      "FGI": "50/100",
      "open_interest": "$23002925555.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104785.6",
        "lastSz": "0.01",
        "askPx": "104785.7",
        "askSz": "20.1",
        "bidPx": "104785.6",
        "bidSz": "1424.82",
        "open24h": "104150",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "50481.5041",
        "vol24h": "5048150.41",
        "ts": "1748733363807",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110134.66 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T23:16:04+00:00Z"
}
[gemini_api_caller.py][07:16:05] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:16:05] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_071557.png
[gemini_api_caller.py][07:16:05] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:16:05] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:16:05] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:16:05] [INFO] AFC remote call 1 is done.
[_client.py][07:16:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:16:58] [INFO] 截图模块运行中...
[截图模块][07:16:59] [INFO]  __main__ 入口被执行
[截图模块][07:16:59] [INFO]  启动时主动清理内存...
[截图模块][07:16:59] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:16:59] [INFO]  已执行 pkill chrome
[截图模块][07:17:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:17:01] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:17:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][07:17:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][07:17:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:17:01] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:17:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:17:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:17:04] [INFO]  启动浏览器 (有头模式)
[截图模块][07:17:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:17:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:17:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:17:15] [INFO]  打开目标图表页...
[截图模块][07:17:20] [INFO]  等待5秒加载页面...
[截图模块][07:17:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:17:26] [INFO]  快捷键已发送
[截图模块][07:17:27] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_071727.png
[截图模块][07:17:27] [INFO]  关闭浏览器...
[数据收集总模块][07:17:27] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_071727.png
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:16:59] [INFO]  __main__ 入口被执行
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:16:59] [INFO]  启动时主动清理内存...
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:16:59] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:16:59] [INFO]  已执行 pkill chrome
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:04] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:15] [INFO]  打开目标图表页...
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:20] [INFO]  等待5秒加载页面...
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:26] [INFO]  快捷键已发送
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:27] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_071727.png
[数据收集总模块][07:17:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:17:27] [INFO]  关闭浏览器...
[数据收集总模块][07:17:27] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_071727.png
[数据收集总模块][07:17:27] [INFO] 技术指标模块运行中...
[技术指标模块][07:17:28] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:17:29] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:17:29] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:17:29] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:17:29] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:17:30] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:17:30] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:17:30] [INFO] 宏观因子模块运行中...
[宏观因子模块][07:17:30] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][07:17:32] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:17:32] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:17:33] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][07:17:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:17:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:17:33] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][07:17:34] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:17:34] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:17:34] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:17:34] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_071727.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2547.48,
        "volume": 658672.91,
        "RSI": 72.00055712632268,
        "MACD_macd": 5.088077674150554,
        "MACD_signal": 2.170401549589406,
        "ATR": 25.752362252665886,
        "ADX": 22.809462138778166,
        "Stoch_K": 80.90490797546025,
        "Stoch_D": 72.6598790704327,
        "StochRSI_K": 100.0,
        "StochRSI_D": 74.68086078752582,
        "BB_upper": 2545.206971801361,
        "BB_lower": 2484.150028198639,
        "BB_middle": 2514.6785,
        "EMA5": 2531.582251292451,
        "EMA21": 2520.392233799887,
        "EMA55": 2519.719482638676,
        "EMA144": 2526.0625451159285,
        "EMA200": 2528.357371939026,
        "VWAP": 2521.413821191935
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2686.66,
        "volume": 1098511.76,
        "RSI": 74.90656854515908,
        "MACD_macd": 2.6121565784242193,
        "MACD_signal": -2.9058696475196335,
        "ATR": 24.025363693161616,
        "ADX": 24.14646374981674,
        "Stoch_K": 91.28560229945116,
        "Stoch_D": 78.8513578622924,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2680.514920399593,
        "BB_lower": 2615.8480796004073,
        "BB_middle": 2648.1815,
        "EMA5": 2668.6237446448704,
        "EMA21": 2655.3857829151993,
        "EMA55": 2647.2679373077403,
        "EMA144": 2608.301989122481,
        "EMA200": 2593.057860267727,
        "VWAP": 2624.3377567588195
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0067%",
      "FGI": "50/100",
      "open_interest": "$604195480.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2541.25",
        "lastSz": "6.57",
        "askPx": "2541.26",
        "askSz": "941.97",
        "bidPx": "2541.25",
        "bidSz": "332.09",
        "open24h": "2523.16",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2952174.125",
        "vol24h": "29521741.25",
        "ts": "1748733454507",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T23:17:34+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110177.58 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-142.3380900000001 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][07:17:36] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:17:36] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_071727.png
[gemini_api_caller.py][07:17:36] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:17:36] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:17:36] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:17:36] [INFO] AFC remote call 1 is done.
[_client.py][07:17:39] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:30:02] [INFO] 截图模块运行中...
[截图模块][07:30:03] [INFO]  __main__ 入口被执行
[截图模块][07:30:03] [INFO]  启动时主动清理内存...
[截图模块][07:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:30:03] [INFO]  已执行 pkill chrome
[截图模块][07:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][07:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][07:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:30:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:30:08] [INFO] 启动浏览器 (有头模式)
[截图模块][07:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:30:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:30:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:30:44] [INFO]  打开目标图表页...
[截图模块][07:30:50] [INFO]  等待5秒加载页面...
[截图模块][07:30:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:30:56] [INFO]  快捷键已发送
[截图模块][07:30:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_073057.png
[截图模块][07:30:57] [INFO]  关闭浏览器...
[数据收集总模块][07:30:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_073057.png
[数据收集总模块][07:30:57] [INFO] 技术指标模块运行中...
[技术指标模块][07:30:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:30:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:30:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:31:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:31:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:31:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][07:31:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:31:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:31:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][07:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:31:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][07:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:31:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:31:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:31:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_073057.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103944.5,
        "volume": 123716.67,
        "RSI": 55.53368137332438,
        "MACD_macd": 78.15325174340978,
        "MACD_signal": 63.43735932679192,
        "ATR": 448.77929649614606,
        "ADX": 15.889447167089049,
        "Stoch_K": 58.1574372982371,
        "Stoch_D": 65.40631741770932,
        "StochRSI_K": 44.90952515180006,
        "StochRSI_D": 46.39340161189252,
        "BB_upper": 104282.18093547967,
        "BB_lower": 103208.94906452033,
        "BB_middle": 103745.565,
        "EMA5": 103916.88099148241,
        "EMA21": 103809.12742534974,
        "EMA55": 103809.36709935113,
        "EMA144": 104067.99163204468,
        "EMA200": 104171.51897408236,
        "VWAP": 103959.59551176037
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109838.1,
        "volume": 280835.48,
        "RSI": 75.50092219819749,
        "MACD_macd": 429.49816863522574,
        "MACD_signal": 387.5350724551041,
        "ATR": 611.8473081020788,
        "ADX": 21.78491754636585,
        "Stoch_K": 88.9270437978198,
        "Stoch_D": 71.09440107735013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 70.4332636403809,
        "BB_upper": 109759.4918893785,
        "BB_lower": 107872.71811062151,
        "BB_middle": 108816.10500000001,
        "EMA5": 109348.46693716693,
        "EMA21": 108753.92558776065,
        "EMA55": 107819.29745427814,
        "EMA144": 106430.09829331347,
        "EMA200": 106018.23768970427,
        "VWAP": 106443.76484057037
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.004%",
      "FGI": "50/100",
      "open_interest": "$23004308285.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104625.3",
        "lastSz": "3.52",
        "askPx": "104625.3",
        "askSz": "416.46",
        "bidPx": "104625.2",
        "bidSz": "459.93",
        "open24h": "103849.3",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "49511.6533",
        "vol24h": "4951165.33",
        "ts": "1748734264512",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110301.23 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T23:31:04+00:00Z"
}
[gemini_api_caller.py][07:31:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:31:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_073057.png
[gemini_api_caller.py][07:31:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:31:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:31:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:31:06] [INFO] AFC remote call 1 is done.
[_client.py][07:31:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:31:50] [INFO] 截图模块运行中...
[截图模块][07:31:52] [INFO]  __main__ 入口被执行
[截图模块][07:31:52] [INFO]  启动时主动清理内存...
[截图模块][07:31:52] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:31:52] [INFO]  已执行 pkill chrome
[截图模块][07:31:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:31:54] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:31:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][07:31:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][07:31:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:31:54] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:31:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:31:55] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:31:57] [INFO]  启动浏览器 (有头模式)
[截图模块][07:31:57] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:32:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:32:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:32:15] [INFO]  打开目标图表页...
[截图模块][07:32:20] [INFO]  等待5秒加载页面...
[截图模块][07:32:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:32:25] [INFO]  快捷键已发送
[截图模块][07:32:26] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_073226.png
[截图模块][07:32:26] [INFO]  关闭浏览器...
[数据收集总模块][07:32:27] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_073226.png
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:52] [INFO]  __main__ 入口被执行
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:52] [INFO]  启动时主动清理内存...
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:52] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:52] [INFO]  已执行 pkill chrome
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:55] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:57] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:31:57] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:15] [INFO]  打开目标图表页...
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:20] [INFO]  等待5秒加载页面...
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:25] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:25] [INFO]  快捷键已发送
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:26] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_073226.png
[数据收集总模块][07:32:27] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:32:26] [INFO]  关闭浏览器...
[数据收集总模块][07:32:27] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_073226.png
[数据收集总模块][07:32:27] [INFO] 技术指标模块运行中...
[技术指标模块][07:32:28] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:32:28] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:32:28] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:32:28] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:32:28] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:32:29] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:32:29] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:32:29] [INFO] 宏观因子模块运行中...
[宏观因子模块][07:32:29] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][07:32:31] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:32:31] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:32:32] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][07:32:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:32:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:32:33] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][07:32:33] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:32:33] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:32:33] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:32:33] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_073226.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2523.82,
        "volume": 985428.48,
        "RSI": 55.41761057202399,
        "MACD_macd": 3.15627901650123,
        "MACD_signal": 1.4439489651587327,
        "ATR": 23.392725816883168,
        "ADX": 19.26453368456078,
        "Stoch_K": 62.86322645290612,
        "Stoch_D": 72.56227266290227,
        "StochRSI_K": 58.63380825244975,
        "StochRSI_D": 63.92608814500928,
        "BB_upper": 2539.1521845630964,
        "BB_lower": 2485.805815436904,
        "BB_middle": 2512.4790000000003,
        "EMA5": 2523.6333769386765,
        "EMA21": 2517.683129110275,
        "EMA55": 2518.579059378697,
        "EMA144": 2524.7238525230955,
        "EMA200": 2526.638017121606,
        "VWAP": 2520.9790072313367
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2686.66,
        "volume": 1098511.76,
        "RSI": 74.90656854515908,
        "MACD_macd": 2.6121565784242193,
        "MACD_signal": -2.9058696475196335,
        "ATR": 24.025363693161616,
        "ADX": 24.14646374981674,
        "Stoch_K": 91.28560229945116,
        "Stoch_D": 78.8513578622924,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2680.514920399593,
        "BB_lower": 2615.8480796004073,
        "BB_middle": 2648.1815,
        "EMA5": 2668.6237446448704,
        "EMA21": 2655.3857829151993,
        "EMA55": 2647.2679373077403,
        "EMA144": 2608.301989122481,
        "EMA200": 2593.057860267727,
        "VWAP": 2624.3377567588195
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0064%",
      "FGI": "50/100",
      "open_interest": "$603650396.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2533.01",
        "lastSz": "5.16",
        "askPx": "2533.01",
        "askSz": "187.98",
        "bidPx": "2533",
        "bidSz": "952.84",
        "open24h": "2515.42",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2846539.184",
        "vol24h": "28465391.84",
        "ts": "1748734353612",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T23:32:33+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110301.07 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "-19.916040000002898 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][07:32:35] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:32:35] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_073226.png
[gemini_api_caller.py][07:32:35] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:32:35] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:32:35] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:32:35] [INFO] AFC remote call 1 is done.
[_client.py][07:32:39] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:45:03] [INFO] 截图模块运行中...
[截图模块][07:45:04] [INFO]  __main__ 入口被执行
[截图模块][07:45:04] [INFO]  启动时主动清理内存...
[截图模块][07:45:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:45:05] [INFO]  已执行 pkill chrome
[截图模块][07:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][07:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][07:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][07:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:45:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:45:09] [INFO] 启动浏览器 (有头模式)
[截图模块][07:45:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:45:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][07:45:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:45:45] [INFO]  打开目标图表页...
[截图模块][07:45:51] [INFO]  等待5秒加载页面...
[截图模块][07:45:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:45:57] [INFO]  快捷键已发送
[截图模块][07:45:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_074558.png
[截图模块][07:45:58] [INFO]  关闭浏览器...
[数据收集总模块][07:45:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_074558.png
[数据收集总模块][07:45:58] [INFO] 技术指标模块运行中...
[技术指标模块][07:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:46:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:46:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:46:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:46:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:46:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][07:46:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:46:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:46:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][07:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:46:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][07:46:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:46:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:46:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:46:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_074558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103911.0,
        "volume": 67085.72,
        "RSI": 53.92221022061225,
        "MACD_macd": 76.60629522477393,
        "MACD_signal": 59.74950853538611,
        "ATR": 434.8991028415677,
        "ADX": 14.338658234453838,
        "Stoch_K": 65.05350885500502,
        "Stoch_D": 64.89838019147011,
        "StochRSI_K": 38.36598536283957,
        "StochRSI_D": 40.02312846647291,
        "BB_upper": 104261.44831637094,
        "BB_lower": 103187.09168362904,
        "BB_middle": 103724.26999999999,
        "EMA5": 103903.07148722358,
        "EMA21": 103795.59114969886,
        "EMA55": 103804.6981255693,
        "EMA144": 104072.82864602521,
        "EMA200": 104178.37092740522,
        "VWAP": 103958.22825019542
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109838.1,
        "volume": 280835.48,
        "RSI": 75.50092219819749,
        "MACD_macd": 429.49816863522574,
        "MACD_signal": 387.5350724551041,
        "ATR": 611.8473081020788,
        "ADX": 21.78491754636585,
        "Stoch_K": 88.9270437978198,
        "Stoch_D": 71.09440107735013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 70.4332636403809,
        "BB_upper": 109759.4918893785,
        "BB_lower": 107872.71811062151,
        "BB_middle": 108816.10500000001,
        "EMA5": 109348.46693716693,
        "EMA21": 108753.92558776065,
        "EMA55": 107819.29745427814,
        "EMA144": 106430.09829331347,
        "EMA200": 106018.23768970427,
        "VWAP": 106443.76484057037
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 101746.2,
        "volume": 1181348.43,
        "RSI": 24.723514593946305,
        "MACD_macd": -721.494055773408,
        "MACD_signal": -704.5367710681394,
        "ATR": 1311.656011591123,
        "ADX": 17.177834282607307,
        "Stoch_K": 13.121581302834295,
        "Stoch_D": 34.268813194099,
        "StochRSI_K": 0.0,
        "StochRSI_D": 6.633294451173072,
        "BB_upper": 104496.42015534246,
        "BB_lower": 102173.64984465754,
        "BB_middle": 103335.035,
        "EMA5": 102626.12745810232,
        "EMA21": 103594.99444814656,
        "EMA55": 105052.85553289164,
        "EMA144": 105747.38006753812,
        "EMA200": 105685.48373588541,
        "VWAP": 106925.50591894641
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0042%",
      "FGI": "50/100",
      "open_interest": "$23006682060.000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104601.3",
        "lastSz": "0.19",
        "askPx": "104601.3",
        "askSz": "468.91",
        "bidPx": "104601.2",
        "bidSz": "573.02",
        "open24h": "103868",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "48629.7288",
        "vol24h": "4862972.88",
        "ts": "1748735165011",
        "sodUtc0": "103959",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110348.2 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-05-31T23:46:05+00:00Z"
}
[gemini_api_caller.py][07:46:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:46:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_074558.png
[gemini_api_caller.py][07:46:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:46:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:46:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:46:07] [INFO] AFC remote call 1 is done.
[_client.py][07:46:10] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][07:47:00] [INFO] 截图模块运行中...
[截图模块][07:47:01] [INFO]  __main__ 入口被执行
[截图模块][07:47:01] [INFO]  启动时主动清理内存...
[截图模块][07:47:01] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][07:47:01] [INFO]  已执行 pkill chrome
[截图模块][07:47:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:47:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][07:47:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][07:47:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][07:47:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][07:47:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][07:47:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][07:47:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][07:47:06] [INFO]  启动浏览器 (有头模式)
[截图模块][07:47:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][07:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][07:47:16] [INFO]  打开目标图表页...
[截图模块][07:47:22] [INFO]  等待5秒加载页面...
[截图模块][07:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][07:47:28] [INFO]  快捷键已发送
[截图模块][07:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_074729.png
[截图模块][07:47:29] [INFO]  关闭浏览器...
[数据收集总模块][07:47:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_074729.png
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:01] [INFO]  __main__ 入口被执行
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:01] [INFO]  启动时主动清理内存...
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:01] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:01] [INFO]  已执行 pkill chrome
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:04] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:06] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:06] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:16] [INFO]  打开目标图表页...
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:22] [INFO]  等待5秒加载页面...
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:28] [INFO]  快捷键已发送
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_074729.png
[数据收集总模块][07:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][07:47:29] [INFO]  关闭浏览器...
[数据收集总模块][07:47:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_074729.png
[数据收集总模块][07:47:29] [INFO] 技术指标模块运行中...
[技术指标模块][07:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][07:47:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][07:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][07:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][07:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][07:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][07:47:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:47:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][07:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][07:47:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:47:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][07:47:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][07:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][07:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][07:47:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][07:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][07:47:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][07:47:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][07:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_074729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2525.63,
        "volume": 708920.77,
        "RSI": 57.682640238100596,
        "MACD_macd": 3.0531959957575054,
        "MACD_signal": 1.018616370076392,
        "ATR": 22.150063854596954,
        "ADX": 17.095992923052084,
        "Stoch_K": 74.21150278293166,
        "Stoch_D": 74.60709873432569,
        "StochRSI_K": 65.40869242982397,
        "StochRSI_D": 60.74569552070471,
        "BB_upper": 2537.9726823489646,
        "BB_lower": 2485.699317651036,
        "BB_middle": 2511.8360000000002,
        "EMA5": 2523.540065408015,
        "EMA21": 2517.069137898387,
        "EMA55": 2518.280888381482,
        "EMA144": 2523.773196249983,
        "EMA200": 2525.2506433886397,
        "VWAP": 2520.631786292671
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2686.66,
        "volume": 1098511.76,
        "RSI": 74.90656854515908,
        "MACD_macd": 2.6121565784242193,
        "MACD_signal": -2.9058696475196335,
        "ATR": 24.025363693161616,
        "ADX": 24.14646374981674,
        "Stoch_K": 91.28560229945116,
        "Stoch_D": 78.8513578622924,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 2680.514920399593,
        "BB_lower": 2615.8480796004073,
        "BB_middle": 2648.1815,
        "EMA5": 2668.6237446448704,
        "EMA21": 2655.3857829151993,
        "EMA55": 2647.2679373077403,
        "EMA144": 2608.301989122481,
        "EMA200": 2593.057860267727,
        "VWAP": 2624.3377567588195
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.7,
        "volume": 9633486.97,
        "RSI": 45.110088562177985,
        "MACD_macd": 11.379553669030884,
        "MACD_signal": 10.636623392304676,
        "ATR": 74.01629888419201,
        "ADX": 24.494003261846586,
        "Stoch_K": 39.94923857868011,
        "Stoch_D": 50.47423672608869,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.69826283144499,
        "BB_upper": 2627.408988571092,
        "BB_lower": 2434.1100114289084,
        "BB_middle": 2530.7595,
        "EMA5": 2548.0167939410803,
        "EMA21": 2538.358564134018,
        "EMA55": 2538.29767037767,
        "EMA144": 2547.721178993681,
        "EMA200": 2548.012739233746,
        "VWAP": 2561.773637301312
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0062%",
      "FGI": "50/100",
      "open_interest": "$603540871.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2527.15",
        "lastSz": "2.99",
        "askPx": "2527.16",
        "askSz": "1042.99",
        "bidPx": "2527.15",
        "bidSz": "1252.51",
        "open24h": "2522.64",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2800487.814",
        "vol24h": "28004878.14",
        "ts": "1748735256114",
        "sodUtc0": "2529.79",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-05-31T23:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110394.7 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "72.78593999999684 USDT",
      "liqPrice": "9677.683269165427 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][07:47:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][07:47:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_074729.png
[gemini_api_caller.py][07:47:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][07:47:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][07:47:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][07:47:37] [INFO] AFC remote call 1 is done.
[_client.py][07:47:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:00:03] [INFO] 截图模块运行中...
[截图模块][08:00:04] [INFO]  __main__ 入口被执行
[截图模块][08:00:04] [INFO]  启动时主动清理内存...
[截图模块][08:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:00:04] [INFO]  已执行 pkill chrome
[截图模块][08:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][08:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][08:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:00:09] [INFO] 启动浏览器 (有头模式)
[截图模块][08:00:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:00:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:00:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:00:46] [INFO]  打开目标图表页...
[截图模块][08:00:52] [INFO]  等待5秒加载页面...
[截图模块][08:00:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:00:58] [INFO]  快捷键已发送
[截图模块][08:00:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_080059.png
[截图模块][08:00:59] [INFO]  关闭浏览器...
[数据收集总模块][08:00:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_080059.png
[数据收集总模块][08:00:59] [INFO] 技术指标模块运行中...
[技术指标模块][08:01:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:01:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:01:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:01:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:01:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:01:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][08:01:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:01:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:01:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][08:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:01:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][08:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:01:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:01:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:01:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_080059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103990.1,
        "volume": 108800.33,
        "RSI": 58.24145028851472,
        "MACD_macd": 76.9662197711732,
        "MACD_signal": 55.58034988612138,
        "ATR": 445.03743403627504,
        "ADX": 14.57286092480648,
        "Stoch_K": 73.00800609988582,
        "Stoch_D": 63.09878772573518,
        "StochRSI_K": 55.90468320854476,
        "StochRSI_D": 45.92360354655193,
        "BB_upper": 104241.54974437246,
        "BB_lower": 103179.15025562755,
        "BB_middle": 103710.35,
        "EMA5": 103899.10723083536,
        "EMA21": 103784.04528375801,
        "EMA55": 103799.05669519196,
        "EMA144": 104059.31514168739,
        "EMA200": 104157.8718781743,
        "VWAP": 103959.05654712512
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109511.0,
        "volume": 141209.62,
        "RSI": 70.6055477720217,
        "MACD_macd": 382.344564133964,
        "MACD_signal": 377.0589502028307,
        "ATR": 627.3777262851272,
        "ADX": 19.080047412828932,
        "Stoch_K": 76.90763052208835,
        "Stoch_D": 66.06753414590253,
        "StochRSI_K": 92.53098058255715,
        "StochRSI_D": 49.38636342267787,
        "BB_upper": 109788.10644374121,
        "BB_lower": 107566.99355625879,
        "BB_middle": 108677.55,
        "EMA5": 109103.65040575038,
        "EMA21": 108645.5065261443,
        "EMA55": 107743.97253809107,
        "EMA144": 106377.3014034348,
        "EMA200": 105972.30416912411,
        "VWAP": 106410.03489805564
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0046%",
      "FGI": "56/100",
      "open_interest": "$23008732477.00002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104608.1",
        "lastSz": "0.1",
        "askPx": "104608.1",
        "askSz": "461.45",
        "bidPx": "104608",
        "bidSz": "372.63",
        "open24h": "104159.2",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "48032.4449",
        "vol24h": "4803244.49",
        "ts": "1748736065517",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110386.93 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T00:01:06+00:00Z"
}
[gemini_api_caller.py][08:01:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:01:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_080059.png
[gemini_api_caller.py][08:01:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:01:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:01:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:01:08] [INFO] AFC remote call 1 is done.
[_client.py][08:01:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:01:58] [INFO] 截图模块运行中...
[截图模块][08:02:00] [INFO]  __main__ 入口被执行
[截图模块][08:02:00] [INFO]  启动时主动清理内存...
[截图模块][08:02:00] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:02:00] [INFO]  已执行 pkill chrome
[截图模块][08:02:02] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:02:02] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:02:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][08:02:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][08:02:02] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:02:02] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:02:02] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:02:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:02:05] [INFO]  启动浏览器 (有头模式)
[截图模块][08:02:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:02:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:02:17] [INFO]  打开目标图表页...
[截图模块][08:02:22] [INFO]  等待5秒加载页面...
[截图模块][08:02:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:02:28] [INFO]  快捷键已发送
[截图模块][08:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_080229.png
[截图模块][08:02:29] [INFO]  关闭浏览器...
[数据收集总模块][08:02:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_080229.png
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:00] [INFO]  __main__ 入口被执行
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:00] [INFO]  启动时主动清理内存...
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:00] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:00] [INFO]  已执行 pkill chrome
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:02] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:05] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:17] [INFO]  打开目标图表页...
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:22] [INFO]  等待5秒加载页面...
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:28] [INFO]  快捷键已发送
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_080229.png
[数据收集总模块][08:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:02:29] [INFO]  关闭浏览器...
[数据收集总模块][08:02:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_080229.png
[数据收集总模块][08:02:30] [INFO] 技术指标模块运行中...
[技术指标模块][08:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:02:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:02:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:02:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:02:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:02:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][08:02:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][08:02:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:02:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:02:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][08:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:02:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][08:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:02:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:02:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:02:37] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_080229.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2526.31,
        "volume": 1001597.52,
        "RSI": 58.46062696787311,
        "MACD_macd": 2.691802935160922,
        "MACD_signal": 0.5115737779369057,
        "ATR": 22.4993026603387,
        "ADX": 16.708382956959937,
        "Stoch_K": 80.61208875286903,
        "Stoch_D": 72.53761795460332,
        "StochRSI_K": 67.73570956434457,
        "StochRSI_D": 60.170956072160486,
        "BB_upper": 2536.511075183705,
        "BB_lower": 2485.8589248162957,
        "BB_middle": 2511.1850000000004,
        "EMA5": 2522.495098112022,
        "EMA21": 2516.212874482747,
        "EMA55": 2517.948064461385,
        "EMA144": 2523.1859354709504,
        "EMA200": 2524.4219373108126,
        "VWAP": 2520.416952646672
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.3,
        "volume": 1290310.47,
        "RSI": 65.19923625861423,
        "MACD_macd": -0.1079129970721624,
        "MACD_signal": -4.283514054975808,
        "ATR": 24.56619555328924,
        "ADX": 20.65842693842345,
        "Stoch_K": 65.99163835902827,
        "Stoch_D": 76.60068746474701,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969369894944,
        "BB_upper": 2673.385884226535,
        "BB_lower": 2616.935115773466,
        "BB_middle": 2645.1605000000004,
        "EMA5": 2659.6056169673057,
        "EMA21": 2652.2581552652186,
        "EMA55": 2645.738504783967,
        "EMA144": 2606.553761148053,
        "EMA200": 2591.1584752915546,
        "VWAP": 2623.500858734322
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.006%",
      "FGI": "56/100",
      "open_interest": "$605399641.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2524.86",
        "lastSz": "10.42",
        "askPx": "2524.87",
        "askSz": "983.79",
        "bidPx": "2524.86",
        "bidSz": "545.49",
        "open24h": "2533.44",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2763478.252",
        "vol24h": "27634782.52",
        "ts": "1748736156725",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T00:02:37+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110432.03 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "105.89378999999825 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][08:02:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:02:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_080229.png
[gemini_api_caller.py][08:02:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:02:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:02:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:02:39] [INFO] AFC remote call 1 is done.
[_client.py][08:02:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:15:01] [INFO] 截图模块运行中...
[截图模块][08:15:03] [INFO]  __main__ 入口被执行
[截图模块][08:15:03] [INFO]  启动时主动清理内存...
[截图模块][08:15:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:15:03] [INFO]  已执行 pkill chrome
[截图模块][08:15:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:15:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:15:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][08:15:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][08:15:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:15:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:15:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:15:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:15:08] [INFO] 启动浏览器 (有头模式)
[截图模块][08:15:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:15:43] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:15:43] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:15:43] [INFO]  打开目标图表页...
[截图模块][08:15:49] [INFO]  等待5秒加载页面...
[截图模块][08:15:54] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:15:55] [INFO]  快捷键已发送
[截图模块][08:15:56] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_081556.png
[截图模块][08:15:56] [INFO]  关闭浏览器...
[数据收集总模块][08:15:56] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_081556.png
[数据收集总模块][08:15:56] [INFO] 技术指标模块运行中...
[技术指标模块][08:15:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:15:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:15:58] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:15:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:15:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:15:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:15:59] [INFO] 宏观因子模块运行中...
[数据收集总模块][08:16:01] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:16:01] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:16:02] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][08:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:16:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][08:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:16:03] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:16:03] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:16:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_081556.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103818.3,
        "volume": 131187.33,
        "RSI": 50.82728609644667,
        "MACD_macd": 68.27126251166919,
        "MACD_signal": 50.315008597360475,
        "ATR": 435.0740609689241,
        "ADX": 15.480558125302728,
        "Stoch_K": 56.63362561951951,
        "Stoch_D": 63.72282405561116,
        "StochRSI_K": 25.79861112013459,
        "StochRSI_D": 52.30501558631673,
        "BB_upper": 104207.08787073144,
        "BB_lower": 103173.15212926855,
        "BB_middle": 103690.12,
        "EMA5": 103853.61084625302,
        "EMA21": 103763.43084010867,
        "EMA55": 103788.91104915489,
        "EMA144": 104031.8646432263,
        "EMA200": 104117.7931521996,
        "VWAP": 103962.55718657146
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109511.0,
        "volume": 141209.62,
        "RSI": 70.6055477720217,
        "MACD_macd": 382.344564133964,
        "MACD_signal": 377.0589502028307,
        "ATR": 627.3777262851272,
        "ADX": 19.080047412828932,
        "Stoch_K": 76.90763052208835,
        "Stoch_D": 66.06753414590253,
        "StochRSI_K": 92.53098058255715,
        "StochRSI_D": 49.38636342267787,
        "BB_upper": 109788.10644374121,
        "BB_lower": 107566.99355625879,
        "BB_middle": 108677.55,
        "EMA5": 109103.65040575038,
        "EMA21": 108645.5065261443,
        "EMA55": 107743.97253809107,
        "EMA144": 106377.3014034348,
        "EMA200": 105972.30416912411,
        "VWAP": 106410.03489805564
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "56/100",
      "open_interest": "$22998224797.99999 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104385.1",
        "lastSz": "3.06",
        "askPx": "104385.1",
        "askSz": "176.44",
        "bidPx": "104385",
        "bidSz": "738.44",
        "open24h": "103774.6",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "47557.2542",
        "vol24h": "4755725.42",
        "ts": "1748736963014",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110570.46 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T00:16:04+00:00Z"
}
[gemini_api_caller.py][08:16:05] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:16:05] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_081556.png
[gemini_api_caller.py][08:16:05] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:16:05] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:16:05] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:16:05] [INFO] AFC remote call 1 is done.
[_client.py][08:16:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:16:51] [INFO] 截图模块运行中...
[截图模块][08:16:53] [INFO]  __main__ 入口被执行
[截图模块][08:16:53] [INFO]  启动时主动清理内存...
[截图模块][08:16:53] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:16:53] [INFO]  已执行 pkill chrome
[截图模块][08:16:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:16:54] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:16:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][08:16:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][08:16:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:16:54] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:16:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:16:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:16:58] [INFO]  启动浏览器 (有头模式)
[截图模块][08:16:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:17:23] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:17:23] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:17:23] [INFO]  打开目标图表页...
[截图模块][08:17:29] [INFO]  等待5秒加载页面...
[截图模块][08:17:34] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:17:34] [INFO]  快捷键已发送
[截图模块][08:17:35] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_081735.png
[截图模块][08:17:35] [INFO]  关闭浏览器...
[数据收集总模块][08:17:36] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_081735.png
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:53] [INFO]  __main__ 入口被执行
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:53] [INFO]  启动时主动清理内存...
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:53] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:53] [INFO]  已执行 pkill chrome
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:58] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:16:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:23] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:23] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:23] [INFO]  打开目标图表页...
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:29] [INFO]  等待5秒加载页面...
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:34] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:34] [INFO]  快捷键已发送
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:35] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_081735.png
[数据收集总模块][08:17:36] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:17:35] [INFO]  关闭浏览器...
[数据收集总模块][08:17:36] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_081735.png
[数据收集总模块][08:17:36] [INFO] 技术指标模块运行中...
[技术指标模块][08:17:37] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:17:37] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:17:37] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:17:37] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:17:37] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:17:38] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:17:38] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:17:38] [INFO] 宏观因子模块运行中...
[宏观因子模块][08:17:39] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][08:17:40] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:17:40] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:17:41] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][08:17:42] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:17:42] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:17:42] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][08:17:42] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:17:42] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:17:42] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:17:43] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_081735.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2518.72,
        "volume": 1210066.57,
        "RSI": 52.227781182550586,
        "MACD_macd": 2.124690067159918,
        "MACD_signal": -0.027846540857754343,
        "ATR": 22.24227780618832,
        "ADX": 18.456995652834806,
        "Stoch_K": 68.99770466717636,
        "Stoch_D": 74.3126753379239,
        "StochRSI_K": 49.092617225069915,
        "StochRSI_D": 66.4317476152511,
        "BB_upper": 2534.6103816278933,
        "BB_lower": 2485.9686183721064,
        "BB_middle": 2510.2895,
        "EMA5": 2520.587647168033,
        "EMA21": 2515.2025385189563,
        "EMA55": 2517.425049526686,
        "EMA144": 2521.1676086651173,
        "EMA200": 2521.500971791391,
        "VWAP": 2520.295767852095
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.3,
        "volume": 1290310.47,
        "RSI": 65.19923625861423,
        "MACD_macd": -0.1079129970721624,
        "MACD_signal": -4.283514054975808,
        "ATR": 24.56619555328924,
        "ADX": 20.65842693842345,
        "Stoch_K": 65.99163835902827,
        "Stoch_D": 76.60068746474701,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969369894944,
        "BB_upper": 2673.385884226535,
        "BB_lower": 2616.935115773466,
        "BB_middle": 2645.1605000000004,
        "EMA5": 2659.6056169673057,
        "EMA21": 2652.2581552652186,
        "EMA55": 2645.738504783967,
        "EMA144": 2606.553761148053,
        "EMA200": 2591.1584752915546,
        "VWAP": 2623.500858734322
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.006%",
      "FGI": "56/100",
      "open_interest": "$601036685.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2516.75",
        "lastSz": "0.93",
        "askPx": "2516.75",
        "askSz": "654.01",
        "bidPx": "2516.74",
        "bidSz": "1480.55",
        "open24h": "2518.62",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2747024.003",
        "vol24h": "27470240.03",
        "ts": "1748737062218",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T00:17:43+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110560.35 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "232.93553999999827 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][08:17:44] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:17:44] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_081735.png
[gemini_api_caller.py][08:17:44] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:17:44] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:17:44] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:17:44] [INFO] AFC remote call 1 is done.
[_client.py][08:17:47] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:30:02] [INFO] 截图模块运行中...
[截图模块][08:30:03] [INFO]  __main__ 入口被执行
[截图模块][08:30:03] [INFO]  启动时主动清理内存...
[截图模块][08:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:30:03] [INFO]  已执行 pkill chrome
[截图模块][08:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][08:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][08:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:30:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:30:08] [INFO] 启动浏览器 (有头模式)
[截图模块][08:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:30:43] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:30:43] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:30:43] [INFO]  打开目标图表页...
[截图模块][08:30:49] [INFO]  等待5秒加载页面...
[截图模块][08:30:54] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:30:54] [INFO]  快捷键已发送
[截图模块][08:30:55] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_083055.png
[截图模块][08:30:55] [INFO]  关闭浏览器...
[数据收集总模块][08:30:56] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_083055.png
[数据收集总模块][08:30:56] [INFO] 技术指标模块运行中...
[技术指标模块][08:30:57] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:30:57] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:30:57] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:30:57] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:30:57] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:30:58] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:30:58] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:30:58] [INFO] 宏观因子模块运行中...
[数据收集总模块][08:31:01] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:31:01] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:31:02] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][08:31:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:31:02] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:31:02] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][08:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:31:03] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:31:03] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:31:03] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_083055.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103768.5,
        "volume": 102077.04,
        "RSI": 48.53158465835013,
        "MACD_macd": 73.66022404810064,
        "MACD_signal": 45.90353466168475,
        "ATR": 417.4392537027462,
        "ADX": 17.228224484685633,
        "Stoch_K": 59.65473145780018,
        "Stoch_D": 69.56788150042611,
        "StochRSI_K": 56.067348019919,
        "StochRSI_D": 68.49532771962069,
        "BB_upper": 104199.56252879075,
        "BB_lower": 103171.84747120926,
        "BB_middle": 103685.705,
        "EMA5": 103871.26626937953,
        "EMA21": 103757.93534322364,
        "EMA55": 103784.88643454085,
        "EMA144": 104007.67190554761,
        "EMA200": 104080.8589688895,
        "VWAP": 103968.45003287605
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109511.0,
        "volume": 141209.62,
        "RSI": 70.6055477720217,
        "MACD_macd": 382.344564133964,
        "MACD_signal": 377.0589502028307,
        "ATR": 627.3777262851272,
        "ADX": 19.080047412828932,
        "Stoch_K": 76.90763052208835,
        "Stoch_D": 66.06753414590253,
        "StochRSI_K": 92.53098058255715,
        "StochRSI_D": 49.38636342267787,
        "BB_upper": 109788.10644374121,
        "BB_lower": 107566.99355625879,
        "BB_middle": 108677.55,
        "EMA5": 109103.65040575038,
        "EMA21": 108645.5065261443,
        "EMA55": 107743.97253809107,
        "EMA144": 106377.3014034348,
        "EMA200": 105972.30416912411,
        "VWAP": 106410.03489805564
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0031%",
      "FGI": "56/100",
      "open_interest": "$23001731507.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104320.2",
        "lastSz": "0.06",
        "askPx": "104321.7",
        "askSz": "406.57",
        "bidPx": "104321.6",
        "bidSz": "590.86",
        "open24h": "103826",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "46901.4276",
        "vol24h": "4690142.76",
        "ts": "1748737862315",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110563.46 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T00:31:03+00:00Z"
}
[gemini_api_caller.py][08:31:04] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:31:04] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_083055.png
[gemini_api_caller.py][08:31:04] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:31:04] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:31:05] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:31:05] [INFO] AFC remote call 1 is done.
[_client.py][08:31:08] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:31:53] [INFO] 截图模块运行中...
[截图模块][08:31:54] [INFO]  __main__ 入口被执行
[截图模块][08:31:54] [INFO]  启动时主动清理内存...
[截图模块][08:31:54] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:31:54] [INFO]  已执行 pkill chrome
[截图模块][08:31:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:31:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:31:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][08:31:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][08:31:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:31:56] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:31:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:31:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:31:59] [INFO]  启动浏览器 (有头模式)
[截图模块][08:31:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:32:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:32:15] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:32:15] [INFO]  打开目标图表页...
[截图模块][08:32:22] [INFO]  等待5秒加载页面...
[截图模块][08:32:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:32:27] [INFO]  快捷键已发送
[截图模块][08:32:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_083229.png
[截图模块][08:32:29] [INFO]  关闭浏览器...
[数据收集总模块][08:32:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_083229.png
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:54] [INFO]  __main__ 入口被执行
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:54] [INFO]  启动时主动清理内存...
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:54] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:54] [INFO]  已执行 pkill chrome
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:59] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:31:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:15] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:15] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:15] [INFO]  打开目标图表页...
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:22] [INFO]  等待5秒加载页面...
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:27] [INFO]  快捷键已发送
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_083229.png
[数据收集总模块][08:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:32:29] [INFO]  关闭浏览器...
[数据收集总模块][08:32:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_083229.png
[数据收集总模块][08:32:29] [INFO] 技术指标模块运行中...
[技术指标模块][08:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:32:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:32:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:32:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:32:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:32:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:32:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][08:32:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][08:32:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:32:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:32:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][08:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:32:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][08:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:32:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:32:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:32:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_083229.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2518.07,
        "volume": 677075.83,
        "RSI": 51.68977365961763,
        "MACD_macd": 2.1394198191624128,
        "MACD_signal": -0.5642051554149252,
        "ATR": 21.47031807578738,
        "ADX": 21.06218157832859,
        "Stoch_K": 68.00306044376453,
        "Stoch_D": 78.02601377199694,
        "StochRSI_K": 63.68440758202841,
        "StochRSI_D": 77.270908659985,
        "BB_upper": 2534.535677738516,
        "BB_lower": 2485.981322261484,
        "BB_middle": 2510.2585,
        "EMA5": 2521.5214707520495,
        "EMA21": 2514.8505960080247,
        "EMA55": 2517.309898705164,
        "EMA144": 2520.5798692966155,
        "EMA200": 2520.6148501379503,
        "VWAP": 2520.3022456119875
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.3,
        "volume": 1290310.47,
        "RSI": 65.19923625861423,
        "MACD_macd": -0.1079129970721624,
        "MACD_signal": -4.283514054975808,
        "ATR": 24.56619555328924,
        "ADX": 20.65842693842345,
        "Stoch_K": 65.99163835902827,
        "Stoch_D": 76.60068746474701,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969369894944,
        "BB_upper": 2673.385884226535,
        "BB_lower": 2616.935115773466,
        "BB_middle": 2645.1605000000004,
        "EMA5": 2659.6056169673057,
        "EMA21": 2652.2581552652186,
        "EMA55": 2645.738504783967,
        "EMA144": 2606.553761148053,
        "EMA200": 2591.1584752915546,
        "VWAP": 2623.500858734322
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0062%",
      "FGI": "56/100",
      "open_interest": "$602739173.0000011 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2520.05",
        "lastSz": "2.39",
        "askPx": "2520.05",
        "askSz": "888.28",
        "bidPx": "2520.04",
        "bidSz": "618.14",
        "open24h": "2524",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2693637.554",
        "vol24h": "26936375.54",
        "ts": "1748737955912",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T00:32:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110507.0 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "180.11697000000075 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][08:32:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:32:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_083229.png
[gemini_api_caller.py][08:32:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:32:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:32:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:32:37] [INFO] AFC remote call 1 is done.
[_client.py][08:32:40] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:45:02] [INFO] 截图模块运行中...
[截图模块][08:45:04] [INFO]  __main__ 入口被执行
[截图模块][08:45:04] [INFO]  启动时主动清理内存...
[截图模块][08:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:45:04] [INFO]  已执行 pkill chrome
[截图模块][08:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][08:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][08:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][08:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:45:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:45:09] [INFO] 启动浏览器 (有头模式)
[截图模块][08:45:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:45:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][08:45:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:45:45] [INFO]  打开目标图表页...
[截图模块][08:45:50] [INFO]  等待5秒加载页面...
[截图模块][08:45:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:45:56] [INFO]  快捷键已发送
[截图模块][08:45:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_084557.png
[截图模块][08:45:57] [INFO]  关闭浏览器...
[数据收集总模块][08:45:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_084557.png
[数据收集总模块][08:45:57] [INFO] 技术指标模块运行中...
[技术指标模块][08:45:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:45:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:45:58] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:45:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:45:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:45:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:45:59] [INFO] 宏观因子模块运行中...
[数据收集总模块][08:46:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:46:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:46:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][08:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:46:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][08:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:46:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:46:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:46:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_084557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103959.0,
        "volume": 67966.21,
        "RSI": 57.41874871698666,
        "MACD_macd": 84.43092772322416,
        "MACD_signal": 38.89918709905788,
        "ATR": 419.8145353245033,
        "ADX": 16.693118818325008,
        "Stoch_K": 74.88011508951378,
        "Stoch_D": 69.59185848252314,
        "StochRSI_K": 75.04901313550498,
        "StochRSI_D": 69.9739911985469,
        "BB_upper": 104194.28481213305,
        "BB_lower": 103169.48518786694,
        "BB_middle": 103681.885,
        "EMA5": 103922.64940406928,
        "EMA21": 103756.88608549858,
        "EMA55": 103787.95969288447,
        "EMA144": 104033.84787800696,
        "EMA200": 104117.55135338986,
        "VWAP": 103977.53672486139
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109511.0,
        "volume": 141209.62,
        "RSI": 70.6055477720217,
        "MACD_macd": 382.344564133964,
        "MACD_signal": 377.0589502028307,
        "ATR": 627.3777262851272,
        "ADX": 19.080047412828932,
        "Stoch_K": 76.90763052208835,
        "Stoch_D": 66.06753414590253,
        "StochRSI_K": 92.53098058255715,
        "StochRSI_D": 49.38636342267787,
        "BB_upper": 109788.10644374121,
        "BB_lower": 107566.99355625879,
        "BB_middle": 108677.55,
        "EMA5": 109103.65040575038,
        "EMA21": 108645.5065261443,
        "EMA55": 107743.97253809107,
        "EMA144": 106377.3014034348,
        "EMA200": 105972.30416912411,
        "VWAP": 106410.03489805564
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.003%",
      "FGI": "56/100",
      "open_interest": "$23001903444.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104433",
        "lastSz": "2.18",
        "askPx": "104433",
        "askSz": "704.94",
        "bidPx": "104432.9",
        "bidSz": "697.07",
        "open24h": "104186",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "46387.0292",
        "vol24h": "4638702.92",
        "ts": "1748738764607",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110466.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T00:46:04+00:00Z"
}
[gemini_api_caller.py][08:46:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:46:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_084557.png
[gemini_api_caller.py][08:46:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:46:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:46:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:46:06] [INFO] AFC remote call 1 is done.
[_client.py][08:46:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][08:46:57] [INFO] 截图模块运行中...
[截图模块][08:46:58] [INFO]  __main__ 入口被执行
[截图模块][08:46:58] [INFO]  启动时主动清理内存...
[截图模块][08:46:59] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][08:46:59] [INFO]  已执行 pkill chrome
[截图模块][08:47:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:47:01] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][08:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][08:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][08:47:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][08:47:01] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][08:47:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][08:47:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][08:47:04] [INFO]  启动浏览器 (有头模式)
[截图模块][08:47:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][08:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][08:47:16] [INFO]  打开目标图表页...
[截图模块][08:47:22] [INFO]  等待5秒加载页面...
[截图模块][08:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][08:47:27] [INFO]  快捷键已发送
[截图模块][08:47:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_084728.png
[截图模块][08:47:28] [INFO]  关闭浏览器...
[数据收集总模块][08:47:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_084728.png
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:46:58] [INFO]  __main__ 入口被执行
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:46:58] [INFO]  启动时主动清理内存...
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:46:59] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:46:59] [INFO]  已执行 pkill chrome
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:04] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:16] [INFO]  打开目标图表页...
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:22] [INFO]  等待5秒加载页面...
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:27] [INFO]  快捷键已发送
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_084728.png
[数据收集总模块][08:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][08:47:28] [INFO]  关闭浏览器...
[数据收集总模块][08:47:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_084728.png
[数据收集总模块][08:47:29] [INFO] 技术指标模块运行中...
[技术指标模块][08:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][08:47:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][08:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][08:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][08:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][08:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][08:47:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:47:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][08:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][08:47:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:47:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][08:47:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][08:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][08:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][08:47:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][08:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][08:47:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][08:47:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][08:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_084728.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.79,
        "volume": 395086.3,
        "RSI": 62.72931040447504,
        "MACD_macd": 2.189892549718479,
        "MACD_signal": -1.2429984518188015,
        "ATR": 21.184211517827013,
        "ADX": 22.465633353408005,
        "Stoch_K": 85.9372609028308,
        "Stoch_D": 78.0848467520087,
        "StochRSI_K": 86.5181972333591,
        "StochRSI_D": 77.91533393619228,
        "BB_upper": 2534.3776964581402,
        "BB_lower": 2485.99830354186,
        "BB_middle": 2510.188,
        "EMA5": 2523.2472061280737,
        "EMA21": 2514.5289748979776,
        "EMA55": 2517.3909983384947,
        "EMA144": 2521.6263083921963,
        "EMA200": 2522.1267210231676,
        "VWAP": 2520.3697519916695
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2667.3,
        "volume": 1290310.47,
        "RSI": 65.19923625861423,
        "MACD_macd": -0.1079129970721624,
        "MACD_signal": -4.283514054975808,
        "ATR": 24.56619555328924,
        "ADX": 20.65842693842345,
        "Stoch_K": 65.99163835902827,
        "Stoch_D": 76.60068746474701,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969369894944,
        "BB_upper": 2673.385884226535,
        "BB_lower": 2616.935115773466,
        "BB_middle": 2645.1605000000004,
        "EMA5": 2659.6056169673057,
        "EMA21": 2652.2581552652186,
        "EMA55": 2645.738504783967,
        "EMA144": 2606.553761148053,
        "EMA200": 2591.1584752915546,
        "VWAP": 2623.500858734322
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0063%",
      "FGI": "56/100",
      "open_interest": "$605407407.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2521.68",
        "lastSz": "0.07",
        "askPx": "2521.68",
        "askSz": "1286.94",
        "bidPx": "2521.67",
        "bidSz": "1363.68",
        "open24h": "2527.78",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2673479.019",
        "vol24h": "26734790.19",
        "ts": "1748738855225",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T00:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110473.72 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "147.31709999999907 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][08:47:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][08:47:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_084728.png
[gemini_api_caller.py][08:47:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][08:47:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][08:47:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][08:47:37] [INFO] AFC remote call 1 is done.
[_client.py][08:47:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:00:03] [INFO] 截图模块运行中...
[截图模块][09:00:04] [INFO]  __main__ 入口被执行
[截图模块][09:00:04] [INFO]  启动时主动清理内存...
[截图模块][09:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:00:04] [INFO]  已执行 pkill chrome
[截图模块][09:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:00:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:00:10] [INFO] 启动浏览器 (有头模式)
[截图模块][09:00:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:00:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:00:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:00:46] [INFO]  打开目标图表页...
[截图模块][09:00:53] [INFO]  等待5秒加载页面...
[截图模块][09:00:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:00:58] [INFO]  快捷键已发送
[截图模块][09:00:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_090059.png
[截图模块][09:00:59] [INFO]  关闭浏览器...
[数据收集总模块][09:00:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_090059.png
[数据收集总模块][09:00:59] [INFO] 技术指标模块运行中...
[技术指标模块][09:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:01:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:01:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:01:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:01:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:01:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:01:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:01:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:01:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:01:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][09:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:01:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:01:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:01:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_090059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103950.1,
        "volume": 88666.2,
        "RSI": 57.10066881176501,
        "MACD_macd": 77.61017684286344,
        "MACD_signal": 27.522098224822592,
        "ATR": 431.00135109706025,
        "ADX": 18.61847714507148,
        "Stoch_K": 74.16879795396437,
        "Stoch_D": 74.36327791986345,
        "StochRSI_K": 74.36964008428782,
        "StochRSI_D": 78.29098536155064,
        "BB_upper": 104170.0199831687,
        "BB_lower": 103174.79001683129,
        "BB_middle": 103672.405,
        "EMA5": 103904.47410610391,
        "EMA21": 103736.6740474879,
        "EMA55": 103781.40363234037,
        "EMA144": 104032.8467460179,
        "EMA200": 104116.13508796212,
        "VWAP": 103979.16158731024
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108884.2,
        "volume": 336572.26,
        "RSI": 56.006467222219555,
        "MACD_macd": 349.9585890992312,
        "MACD_signal": 375.836933511259,
        "ATR": 574.3896425190145,
        "ADX": 17.06290997651368,
        "Stoch_K": 47.44852891214224,
        "Stoch_D": 62.66014460276623,
        "StochRSI_K": 18.76878196474649,
        "StochRSI_D": 27.37856162743041,
        "BB_upper": 109750.32280430518,
        "BB_lower": 107392.44719569484,
        "BB_middle": 108571.38500000001,
        "EMA5": 108899.97560862557,
        "EMA21": 108558.94618722968,
        "EMA55": 107674.76609251059,
        "EMA144": 106298.65820825426,
        "EMA200": 105885.57369867551,
        "VWAP": 106389.47698780579
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0033%",
      "FGI": "56/100",
      "open_interest": "$23003056036.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104392.5",
        "lastSz": "0.01",
        "askPx": "104392.6",
        "askSz": "4367.07",
        "bidPx": "104392.5",
        "bidSz": "641.65",
        "open24h": "103938.7",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "46001.3102",
        "vol24h": "4600131.02",
        "ts": "1748739667214",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110440.12 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T01:01:07+00:00Z"
}
[gemini_api_caller.py][09:01:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:01:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_090059.png
[gemini_api_caller.py][09:01:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:01:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:01:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:01:09] [INFO] AFC remote call 1 is done.
[_client.py][09:01:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:01:51] [INFO] 截图模块运行中...
[截图模块][09:01:52] [INFO]  __main__ 入口被执行
[截图模块][09:01:52] [INFO]  启动时主动清理内存...
[截图模块][09:01:52] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:01:52] [INFO]  已执行 pkill chrome
[截图模块][09:01:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:01:54] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:01:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][09:01:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][09:01:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:01:54] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:01:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:01:55] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:01:57] [INFO]  启动浏览器 (有头模式)
[截图模块][09:01:57] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:02:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:02:17] [INFO]  打开目标图表页...
[截图模块][09:02:22] [INFO]  等待5秒加载页面...
[截图模块][09:02:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:02:28] [INFO]  快捷键已发送
[截图模块][09:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_090229.png
[截图模块][09:02:29] [INFO]  关闭浏览器...
[数据收集总模块][09:02:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_090229.png
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:52] [INFO]  __main__ 入口被执行
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:52] [INFO]  启动时主动清理内存...
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:52] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:52] [INFO]  已执行 pkill chrome
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:55] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:57] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:01:57] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:17] [INFO]  打开目标图表页...
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:22] [INFO]  等待5秒加载页面...
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:28] [INFO]  快捷键已发送
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_090229.png
[数据收集总模块][09:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:02:29] [INFO]  关闭浏览器...
[数据收集总模块][09:02:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_090229.png
[数据收集总模块][09:02:30] [INFO] 技术指标模块运行中...
[技术指标模块][09:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:02:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:02:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:02:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:02:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:02:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:02:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:02:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:02:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:02:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:02:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][09:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:02:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:02:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:02:37] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_090229.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2526.0,
        "volume": 575212.3,
        "RSI": 60.356386791374476,
        "MACD_macd": 1.0294207152974195,
        "MACD_signal": -2.1042381723361525,
        "ATR": 22.12639780180247,
        "ADX": 24.531600667168078,
        "Stoch_K": 80.1377199693955,
        "Stoch_D": 80.95585088925186,
        "StochRSI_K": 81.61014126631262,
        "StochRSI_D": 82.40927273593253,
        "BB_upper": 2532.752354340342,
        "BB_lower": 2486.7606456596577,
        "BB_middle": 2509.7565,
        "EMA5": 2519.9758091921103,
        "EMA21": 2513.0032060449375,
        "EMA55": 2517.0459439068654,
        "EMA144": 2522.5689770369713,
        "EMA200": 2523.6028808985134,
        "VWAP": 2520.315768040564
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2662.0,
        "volume": 1044306.99,
        "RSI": 61.68232400395252,
        "MACD_macd": -1.6074120798216427,
        "MACD_signal": -5.325905834384982,
        "ATR": 23.52560316099447,
        "ADX": 16.633730875349315,
        "Stoch_K": 79.27683292839782,
        "Stoch_D": 78.46335865877013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969367762419,
        "BB_upper": 2670.0809342094176,
        "BB_lower": 2617.4770657905815,
        "BB_middle": 2643.7789999999995,
        "EMA5": 2655.7584254509584,
        "EMA21": 2650.7538039631595,
        "EMA55": 2644.882846961012,
        "EMA144": 2605.175740326982,
        "EMA200": 2589.6166449599446,
        "VWAP": 2622.4219362682197
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0067%",
      "FGI": "56/100",
      "open_interest": "$602774294.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2523",
        "lastSz": "0.71",
        "askPx": "2523",
        "askSz": "824.45",
        "bidPx": "2522.99",
        "bidSz": "714.96",
        "open24h": "2518.9",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2661580.148",
        "vol24h": "26615801.48",
        "ts": "1748739756607",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T01:02:37+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110461.27 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "134.84390999999994 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][09:02:39] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:02:39] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_090229.png
[gemini_api_caller.py][09:02:39] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:02:39] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:02:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:02:39] [INFO] AFC remote call 1 is done.
[_client.py][09:02:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:15:03] [INFO] 截图模块运行中...
[截图模块][09:15:04] [INFO]  __main__ 入口被执行
[截图模块][09:15:04] [INFO]  启动时主动清理内存...
[截图模块][09:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:15:04] [INFO]  已执行 pkill chrome
[截图模块][09:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:15:09] [INFO] 启动浏览器 (有头模式)
[截图模块][09:15:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:15:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:15:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:15:45] [INFO]  打开目标图表页...
[截图模块][09:15:52] [INFO]  等待5秒加载页面...
[截图模块][09:15:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:15:57] [INFO]  快捷键已发送
[截图模块][09:15:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_091558.png
[截图模块][09:15:58] [INFO]  关闭浏览器...
[数据收集总模块][09:15:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_091558.png
[数据收集总模块][09:15:59] [INFO] 技术指标模块运行中...
[技术指标模块][09:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:16:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:16:00] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:16:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:16:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:16:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:16:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:16:01] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:16:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:16:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:16:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:16:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:16:05] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][09:16:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:16:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:16:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:16:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_091558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103769.4,
        "volume": 136982.77,
        "RSI": 50.60848659558372,
        "MACD_macd": 68.66686412964191,
        "MACD_signal": 14.985138072318888,
        "ATR": 437.0169725639458,
        "ADX": 20.451980984295588,
        "Stoch_K": 59.72666240409128,
        "Stoch_D": 73.82779198635946,
        "StochRSI_K": 60.503317988746005,
        "StochRSI_D": 82.79625366259239,
        "BB_upper": 104139.19327121013,
        "BB_lower": 103178.69672878986,
        "BB_middle": 103658.94499999999,
        "EMA5": 103881.66115915586,
        "EMA21": 103715.33310455809,
        "EMA55": 103775.72099540732,
        "EMA144": 104039.23770711245,
        "EMA200": 104125.49535636097,
        "VWAP": 103980.80695839124
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108884.2,
        "volume": 336572.26,
        "RSI": 56.006467222219555,
        "MACD_macd": 349.9585890992312,
        "MACD_signal": 375.836933511259,
        "ATR": 574.3896425190145,
        "ADX": 17.06290997651368,
        "Stoch_K": 47.44852891214224,
        "Stoch_D": 62.66014460276623,
        "StochRSI_K": 18.76878196474649,
        "StochRSI_D": 27.37856162743041,
        "BB_upper": 109750.32280430518,
        "BB_lower": 107392.44719569484,
        "BB_middle": 108571.38500000001,
        "EMA5": 108899.97560862557,
        "EMA21": 108558.94618722968,
        "EMA55": 107674.76609251059,
        "EMA144": 106298.65820825426,
        "EMA200": 105885.57369867551,
        "VWAP": 106389.47698780579
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0034%",
      "FGI": "56/100",
      "open_interest": "$23004085457.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104440.1",
        "lastSz": "0.02",
        "askPx": "104440.1",
        "askSz": "15.35",
        "bidPx": "104440",
        "bidSz": "2081.42",
        "open24h": "104159",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "45238.4521",
        "vol24h": "4523845.21",
        "ts": "1748740565906",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110371.69 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T01:16:06+00:00Z"
}
[gemini_api_caller.py][09:16:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:16:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_091558.png
[gemini_api_caller.py][09:16:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:16:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:16:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:16:08] [INFO] AFC remote call 1 is done.
[_client.py][09:16:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:16:52] [INFO] 截图模块运行中...
[截图模块][09:16:54] [INFO]  __main__ 入口被执行
[截图模块][09:16:54] [INFO]  启动时主动清理内存...
[截图模块][09:16:54] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:16:54] [INFO]  已执行 pkill chrome
[截图模块][09:16:55] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:16:55] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:16:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][09:16:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][09:16:55] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:16:55] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:16:55] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:16:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:16:59] [INFO]  启动浏览器 (有头模式)
[截图模块][09:16:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:17:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:17:16] [INFO]  打开目标图表页...
[截图模块][09:17:22] [INFO]  等待5秒加载页面...
[截图模块][09:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:17:28] [INFO]  快捷键已发送
[截图模块][09:17:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_091729.png
[截图模块][09:17:29] [INFO]  关闭浏览器...
[数据收集总模块][09:17:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_091729.png
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:54] [INFO]  __main__ 入口被执行
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:54] [INFO]  启动时主动清理内存...
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:54] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:54] [INFO]  已执行 pkill chrome
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:55] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:59] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:16:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:16] [INFO]  打开目标图表页...
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:22] [INFO]  等待5秒加载页面...
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:28] [INFO]  快捷键已发送
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_091729.png
[数据收集总模块][09:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:17:29] [INFO]  关闭浏览器...
[数据收集总模块][09:17:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_091729.png
[数据收集总模块][09:17:29] [INFO] 技术指标模块运行中...
[技术指标模块][09:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:17:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:17:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:17:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:17:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:17:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:17:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:17:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:17:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:17:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:17:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][09:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:17:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:17:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:17:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_091729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2514.79,
        "volume": 945155.51,
        "RSI": 52.62444366214615,
        "MACD_macd": -0.07954982311503045,
        "MACD_signal": -2.8893129495812078,
        "ATR": 21.808924645532247,
        "ADX": 25.530041900700876,
        "Stoch_K": 68.17955938379978,
        "Stoch_D": 79.32195903042357,
        "StochRSI_K": 65.61768041721693,
        "StochRSI_D": 87.49655563751719,
        "BB_upper": 2531.3102611692307,
        "BB_lower": 2487.3157388307686,
        "BB_middle": 2509.3129999999996,
        "EMA5": 2516.9637137881655,
        "EMA21": 2511.703710240692,
        "EMA55": 2516.7771318312657,
        "EMA144": 2523.102508918208,
        "EMA200": 2524.433408587859,
        "VWAP": 2520.1630542760677
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2662.0,
        "volume": 1044306.99,
        "RSI": 61.68232400395252,
        "MACD_macd": -1.6074120798216427,
        "MACD_signal": -5.325905834384982,
        "ATR": 23.52560316099447,
        "ADX": 16.633730875349315,
        "Stoch_K": 79.27683292839782,
        "Stoch_D": 78.46335865877013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969367762419,
        "BB_upper": 2670.0809342094176,
        "BB_lower": 2617.4770657905815,
        "BB_middle": 2643.7789999999995,
        "EMA5": 2655.7584254509584,
        "EMA21": 2650.7538039631595,
        "EMA55": 2644.882846961012,
        "EMA144": 2605.175740326982,
        "EMA200": 2589.6166449599446,
        "VWAP": 2622.4219362682197
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.007%",
      "FGI": "56/100",
      "open_interest": "$604696763.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2526.61",
        "lastSz": "9.67",
        "askPx": "2526.61",
        "askSz": "581.67",
        "bidPx": "2526.6",
        "bidSz": "1571.56",
        "open24h": "2525.1",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2629438.213",
        "vol24h": "26294382.13",
        "ts": "1748740656609",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T01:17:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110406.22 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "80.17745999999711 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][09:17:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:17:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_091729.png
[gemini_api_caller.py][09:17:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:17:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:17:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:17:38] [INFO] AFC remote call 1 is done.
[_client.py][09:17:42] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:30:03] [INFO] 截图模块运行中...
[截图模块][09:30:04] [INFO]  __main__ 入口被执行
[截图模块][09:30:04] [INFO]  启动时主动清理内存...
[截图模块][09:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:30:05] [INFO]  已执行 pkill chrome
[截图模块][09:30:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:30:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:30:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:30:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:30:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:30:10] [INFO] 启动浏览器 (有头模式)
[截图模块][09:30:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:30:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:30:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:30:46] [INFO]  打开目标图表页...
[截图模块][09:30:53] [INFO]  等待5秒加载页面...
[截图模块][09:30:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:30:58] [INFO]  快捷键已发送
[截图模块][09:30:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_093059.png
[截图模块][09:30:59] [INFO]  关闭浏览器...
[数据收集总模块][09:31:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_093059.png
[数据收集总模块][09:31:00] [INFO] 技术指标模块运行中...
[技术指标模块][09:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:31:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:31:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:31:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:31:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:31:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:31:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:31:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:31:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:31:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:31:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][09:31:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:31:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:31:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:31:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_093059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104138.1,
        "volume": 90661.99,
        "RSI": 69.10074615902889,
        "MACD_macd": 74.70720239980437,
        "MACD_signal": 1.6286547766090163,
        "ATR": 406.3888629784048,
        "ADX": 22.29680027802668,
        "Stoch_K": 89.19437340153473,
        "Stoch_D": 82.89317413556802,
        "StochRSI_K": 100.0,
        "StochRSI_D": 95.96181224270067,
        "BB_upper": 104129.84806289444,
        "BB_lower": 103174.90193710556,
        "BB_middle": 103652.375,
        "EMA5": 103937.79173873377,
        "EMA21": 103709.9193427592,
        "EMA55": 103773.53518488933,
        "EMA144": 104020.61056802688,
        "EMA200": 104096.15278094601,
        "VWAP": 103989.70315185399
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108884.2,
        "volume": 336572.26,
        "RSI": 56.006467222219555,
        "MACD_macd": 349.9585890992312,
        "MACD_signal": 375.836933511259,
        "ATR": 574.3896425190145,
        "ADX": 17.06290997651368,
        "Stoch_K": 47.44852891214224,
        "Stoch_D": 62.66014460276623,
        "StochRSI_K": 18.76878196474649,
        "StochRSI_D": 27.37856162743041,
        "BB_upper": 109750.32280430518,
        "BB_lower": 107392.44719569484,
        "BB_middle": 108571.38500000001,
        "EMA5": 108899.97560862557,
        "EMA21": 108558.94618722968,
        "EMA55": 107674.76609251059,
        "EMA144": 106298.65820825426,
        "EMA200": 105885.57369867551,
        "VWAP": 106389.47698780579
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0037%",
      "FGI": "56/100",
      "open_interest": "$23007314163.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104364.1",
        "lastSz": "0.55",
        "askPx": "104364.1",
        "askSz": "8.09",
        "bidPx": "104364",
        "bidSz": "1132.72",
        "open24h": "103820.3",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "44907.374",
        "vol24h": "4490737.4",
        "ts": "1748741467009",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110451.63 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T01:31:07+00:00Z"
}
[gemini_api_caller.py][09:31:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:31:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_093059.png
[gemini_api_caller.py][09:31:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:31:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:31:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:31:09] [INFO] AFC remote call 1 is done.
[_client.py][09:31:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:31:58] [INFO] 截图模块运行中...
[截图模块][09:31:59] [INFO]  __main__ 入口被执行
[截图模块][09:31:59] [INFO]  启动时主动清理内存...
[截图模块][09:31:59] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:32:00] [INFO]  已执行 pkill chrome
[截图模块][09:32:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:32:01] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:32:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][09:32:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][09:32:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:32:01] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:32:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:32:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:32:05] [INFO]  启动浏览器 (有头模式)
[截图模块][09:32:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:32:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:32:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:32:18] [INFO]  打开目标图表页...
[截图模块][09:32:23] [INFO]  等待5秒加载页面...
[截图模块][09:32:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:32:29] [INFO]  快捷键已发送
[截图模块][09:32:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_093230.png
[截图模块][09:32:30] [INFO]  关闭浏览器...
[数据收集总模块][09:32:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_093230.png
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:31:59] [INFO]  __main__ 入口被执行
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:31:59] [INFO]  启动时主动清理内存...
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:31:59] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:00] [INFO]  已执行 pkill chrome
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:05] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:18] [INFO]  打开目标图表页...
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:23] [INFO]  等待5秒加载页面...
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:29] [INFO]  快捷键已发送
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_093230.png
[数据收集总模块][09:32:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:32:30] [INFO]  关闭浏览器...
[数据收集总模块][09:32:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_093230.png
[数据收集总模块][09:32:30] [INFO] 技术指标模块运行中...
[技术指标模块][09:32:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:32:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:32:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:32:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:32:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:32:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:32:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:32:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:32:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:32:35] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:32:35] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:32:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:32:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:32:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:32:37] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][09:32:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:32:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:32:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:32:38] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_093230.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2530.71,
        "volume": 489480.96,
        "RSI": 69.24740597953729,
        "MACD_macd": -0.34872573902748627,
        "MACD_signal": -3.5882243091991097,
        "ATR": 20.594913932100834,
        "ADX": 29.204148894083087,
        "Stoch_K": 94.55027331456026,
        "Stoch_D": 85.66295531851682,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.95732820213192,
        "BB_upper": 2531.5317375189825,
        "BB_lower": 2487.2932624810173,
        "BB_middle": 2509.4125,
        "EMA5": 2518.0505706822482,
        "EMA21": 2511.3946909337756,
        "EMA55": 2516.7171693072355,
        "EMA144": 2521.982409489362,
        "EMA200": 2522.7133322385325,
        "VWAP": 2520.3770998681766
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2662.0,
        "volume": 1044306.99,
        "RSI": 61.68232400395252,
        "MACD_macd": -1.6074120798216427,
        "MACD_signal": -5.325905834384982,
        "ATR": 23.52560316099447,
        "ADX": 16.633730875349315,
        "Stoch_K": 79.27683292839782,
        "Stoch_D": 78.46335865877013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969367762419,
        "BB_upper": 2670.0809342094176,
        "BB_lower": 2617.4770657905815,
        "BB_middle": 2643.7789999999995,
        "EMA5": 2655.7584254509584,
        "EMA21": 2650.7538039631595,
        "EMA55": 2644.882846961012,
        "EMA144": 2605.175740326982,
        "EMA200": 2589.6166449599446,
        "VWAP": 2622.4219362682197
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0075%",
      "FGI": "56/100",
      "open_interest": "$603638670.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2520.65",
        "lastSz": "2.57",
        "askPx": "2520.65",
        "askSz": "71.38",
        "bidPx": "2520.64",
        "bidSz": "612.71",
        "open24h": "2511.71",
        "high24h": "2549.99",
        "low24h": "2473.63",
        "volCcy24h": "2596749.972",
        "vol24h": "25967499.72",
        "ts": "1748741557007",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T01:32:38+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110494.87 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "168.25974000000105 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][09:32:39] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:32:39] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_093230.png
[gemini_api_caller.py][09:32:39] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:32:39] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:32:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:32:39] [INFO] AFC remote call 1 is done.
[_client.py][09:32:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:45:03] [INFO] 截图模块运行中...
[截图模块][09:45:04] [INFO]  __main__ 入口被执行
[截图模块][09:45:04] [INFO]  启动时主动清理内存...
[截图模块][09:45:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:45:05] [INFO]  已执行 pkill chrome
[截图模块][09:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][09:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][09:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][09:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:45:10] [INFO] 启动浏览器 (有头模式)
[截图模块][09:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:45:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][09:45:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:45:46] [INFO]  打开目标图表页...
[截图模块][09:45:52] [INFO]  等待5秒加载页面...
[截图模块][09:45:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:45:58] [INFO]  快捷键已发送
[截图模块][09:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_094559.png
[截图模块][09:45:59] [INFO]  关闭浏览器...
[数据收集总模块][09:45:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_094559.png
[数据收集总模块][09:45:59] [INFO] 技术指标模块运行中...
[技术指标模块][09:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:46:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:46:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:46:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][09:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:46:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:46:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][09:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][09:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:46:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:46:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:46:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_094559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103930.0,
        "volume": 50268.45,
        "RSI": 62.37587914555907,
        "MACD_macd": 43.82367439227528,
        "MACD_signal": -16.515684039458733,
        "ATR": 398.3102788164557,
        "ADX": 22.997006440189956,
        "Stoch_K": 72.56234015345238,
        "Stoch_D": 76.46136203407475,
        "StochRSI_K": 87.88542607931488,
        "StochRSI_D": 95.96180869310496,
        "BB_upper": 104047.66125318779,
        "BB_lower": 103208.91874681223,
        "BB_middle": 103628.29000000001,
        "EMA5": 103837.63760810063,
        "EMA21": 103667.08741988603,
        "EMA55": 103755.29126779146,
        "EMA144": 103975.07537555146,
        "EMA200": 104031.22601947145,
        "VWAP": 103992.26139613702
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108884.2,
        "volume": 336572.26,
        "RSI": 56.006467222219555,
        "MACD_macd": 349.9585890992312,
        "MACD_signal": 375.836933511259,
        "ATR": 574.3896425190145,
        "ADX": 17.06290997651368,
        "Stoch_K": 47.44852891214224,
        "Stoch_D": 62.66014460276623,
        "StochRSI_K": 18.76878196474649,
        "StochRSI_D": 27.37856162743041,
        "BB_upper": 109750.32280430518,
        "BB_lower": 107392.44719569484,
        "BB_middle": 108571.38500000001,
        "EMA5": 108899.97560862557,
        "EMA21": 108558.94618722968,
        "EMA55": 107674.76609251059,
        "EMA144": 106298.65820825426,
        "EMA200": 105885.57369867551,
        "VWAP": 106389.47698780579
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0041%",
      "FGI": "56/100",
      "open_interest": "$23004903714.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104215",
        "lastSz": "0.42",
        "askPx": "104215.1",
        "askSz": "112.4",
        "bidPx": "104215",
        "bidSz": "773.53",
        "open24h": "103639.2",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "43757.4629",
        "vol24h": "4375746.29",
        "ts": "1748742366812",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110545.88 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T01:46:07+00:00Z"
}
[gemini_api_caller.py][09:46:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:46:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_094559.png
[gemini_api_caller.py][09:46:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:46:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:46:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:46:08] [INFO] AFC remote call 1 is done.
[_client.py][09:46:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][09:46:51] [INFO] 截图模块运行中...
[截图模块][09:46:52] [INFO]  __main__ 入口被执行
[截图模块][09:46:52] [INFO]  启动时主动清理内存...
[截图模块][09:46:52] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][09:46:53] [INFO]  已执行 pkill chrome
[截图模块][09:46:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:46:54] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][09:46:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][09:46:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][09:46:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][09:46:54] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][09:46:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][09:46:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][09:46:58] [INFO]  启动浏览器 (有头模式)
[截图模块][09:46:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:47:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][09:47:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][09:47:18] [INFO]  打开目标图表页...
[截图模块][09:47:23] [INFO]  等待5秒加载页面...
[截图模块][09:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][09:47:28] [INFO]  快捷键已发送
[截图模块][09:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_094729.png
[截图模块][09:47:29] [INFO]  关闭浏览器...
[数据收集总模块][09:47:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_094729.png
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:52] [INFO]  __main__ 入口被执行
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:52] [INFO]  启动时主动清理内存...
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:52] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:53] [INFO]  已执行 pkill chrome
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:58] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:46:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:18] [INFO]  打开目标图表页...
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:23] [INFO]  等待5秒加载页面...
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:28] [INFO]  快捷键已发送
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_094729.png
[数据收集总模块][09:47:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][09:47:29] [INFO]  关闭浏览器...
[数据收集总模块][09:47:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_094729.png
[数据收集总模块][09:47:30] [INFO] 技术指标模块运行中...
[技术指标模块][09:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][09:47:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][09:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][09:47:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][09:47:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][09:47:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][09:47:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:47:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][09:47:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][09:47:35] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:47:35] [INFO] OKX 持仓模块运行中...
[get_positions.py][09:47:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][09:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][09:47:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][09:47:37] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][09:47:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][09:47:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][09:47:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][09:47:38] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_094729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2519.05,
        "volume": 368301.32,
        "RSI": 61.534909153609576,
        "MACD_macd": -2.307953670907864,
        "MACD_signal": -4.3936168023341775,
        "ATR": 20.869514494451582,
        "ADX": 28.528315029472687,
        "Stoch_K": 75.23604439291064,
        "Stoch_D": 75.8312890465907,
        "StochRSI_K": 96.87198252740329,
        "StochRSI_D": 98.95732750913443,
        "BB_upper": 2529.3622534326887,
        "BB_lower": 2488.4427465673107,
        "BB_middle": 2508.9024999999997,
        "EMA5": 2511.720856023372,
        "EMA21": 2509.462664330748,
        "EMA55": 2516.0293033134176,
        "EMA144": 2520.290246102176,
        "EMA200": 2520.3254915040798,
        "VWAP": 2520.263325558484
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2662.0,
        "volume": 1044306.99,
        "RSI": 61.68232400395252,
        "MACD_macd": -1.6074120798216427,
        "MACD_signal": -5.325905834384982,
        "ATR": 23.52560316099447,
        "ADX": 16.633730875349315,
        "Stoch_K": 79.27683292839782,
        "Stoch_D": 78.46335865877013,
        "StochRSI_K": 100.0,
        "StochRSI_D": 98.6969367762419,
        "BB_upper": 2670.0809342094176,
        "BB_lower": 2617.4770657905815,
        "BB_middle": 2643.7789999999995,
        "EMA5": 2655.7584254509584,
        "EMA21": 2650.7538039631595,
        "EMA55": 2644.882846961012,
        "EMA144": 2605.175740326982,
        "EMA200": 2589.6166449599446,
        "VWAP": 2622.4219362682197
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0079%",
      "FGI": "56/100",
      "open_interest": "$603326897.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2519.69",
        "lastSz": "0.02",
        "askPx": "2519.7",
        "askSz": "17.3",
        "bidPx": "2519.69",
        "bidSz": "3218.81",
        "open24h": "2490.24",
        "high24h": "2549.99",
        "low24h": "2481.92",
        "volCcy24h": "2392092.976",
        "vol24h": "23920929.76",
        "ts": "1748742457608",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T01:47:38+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110518.04 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "191.05026000000134 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][09:47:39] [INFO] prompt_text导入完成
[gemini_api_caller.py][09:47:39] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_094729.png
[gemini_api_caller.py][09:47:39] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][09:47:39] [INFO] 开始测试 Gemini API 流式调用...
[models.py][09:47:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][09:47:39] [INFO] AFC remote call 1 is done.
[_client.py][09:47:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:00:03] [INFO] 截图模块运行中...
[截图模块][10:00:05] [INFO]  __main__ 入口被执行
[截图模块][10:00:05] [INFO]  启动时主动清理内存...
[截图模块][10:00:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:00:05] [INFO]  已执行 pkill chrome
[截图模块][10:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:00:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:00:10] [INFO] 启动浏览器 (有头模式)
[截图模块][10:00:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:00:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:00:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:00:47] [INFO]  打开目标图表页...
[截图模块][10:00:54] [INFO]  等待5秒加载页面...
[截图模块][10:00:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:00:59] [INFO]  快捷键已发送
[截图模块][10:01:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_100100.png
[截图模块][10:01:00] [INFO]  关闭浏览器...
[数据收集总模块][10:01:01] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_100100.png
[数据收集总模块][10:01:01] [INFO] 技术指标模块运行中...
[技术指标模块][10:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:01:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:01:03] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:01:03] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:01:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:01:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:01:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:01:06] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:01:06] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:01:07] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:01:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:01:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:01:08] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][10:01:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:01:08] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:01:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:01:09] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_100100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 104019.8,
        "volume": 98512.31,
        "RSI": 67.90275678081059,
        "MACD_macd": 24.894939795703976,
        "MACD_signal": -31.542205181672394,
        "ATR": 399.69651751669136,
        "ADX": 21.668570287708764,
        "Stoch_K": 86.92280885171697,
        "Stoch_D": 79.75110149143865,
        "StochRSI_K": 100.0,
        "StochRSI_D": 100.0,
        "BB_upper": 104004.69387749147,
        "BB_lower": 103207.58612250852,
        "BB_middle": 103606.14,
        "EMA5": 103791.45641215093,
        "EMA21": 103640.78971223377,
        "EMA55": 103746.61369303652,
        "EMA144": 103955.27681260872,
        "EMA200": 104002.22021746196,
        "VWAP": 103994.22202085491
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108971.7,
        "volume": 304700.77,
        "RSI": 59.586964820281075,
        "MACD_macd": 367.4299661885598,
        "MACD_signal": 382.53914389034,
        "ATR": 528.9728179491606,
        "ADX": 16.194079689744896,
        "Stoch_K": 73.84644300347699,
        "Stoch_D": 78.05641085792702,
        "StochRSI_K": 36.859245909776,
        "StochRSI_D": 47.86546183957097,
        "BB_upper": 109750.07961245089,
        "BB_lower": 107266.55038754914,
        "BB_middle": 108508.31500000002,
        "EMA5": 108907.86341293836,
        "EMA21": 108526.39507922943,
        "EMA55": 107621.1693018024,
        "EMA144": 106181.0083840975,
        "EMA200": 105735.678571431,
        "VWAP": 106350.17367302871
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0047%",
      "FGI": "56/100",
      "open_interest": "$22996171612.00002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104060",
        "lastSz": "0.18",
        "askPx": "104060.1",
        "askSz": "648.39",
        "bidPx": "104060",
        "bidSz": "14.55",
        "open24h": "103461.1",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "42630.7775",
        "vol24h": "4263077.75",
        "ts": "1748743268608",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110755.54 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T02:01:09+00:00Z"
}
[gemini_api_caller.py][10:01:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:01:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_100100.png
[gemini_api_caller.py][10:01:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:01:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:01:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:01:10] [INFO] AFC remote call 1 is done.
[_client.py][10:01:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:02:02] [INFO] 截图模块运行中...
[截图模块][10:02:03] [INFO]  __main__ 入口被执行
[截图模块][10:02:03] [INFO]  启动时主动清理内存...
[截图模块][10:02:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:02:03] [INFO]  已执行 pkill chrome
[截图模块][10:02:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:02:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][10:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][10:02:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:02:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:02:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:02:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:02:09] [INFO]  启动浏览器 (有头模式)
[截图模块][10:02:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:02:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:02:17] [INFO]  打开目标图表页...
[截图模块][10:02:23] [INFO]  等待5秒加载页面...
[截图模块][10:02:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:02:29] [INFO]  快捷键已发送
[截图模块][10:02:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_100230.png
[截图模块][10:02:30] [INFO]  关闭浏览器...
[数据收集总模块][10:02:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_100230.png
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:03] [INFO]  __main__ 入口被执行
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:03] [INFO]  启动时主动清理内存...
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:03] [INFO]  已执行 pkill chrome
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:09] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:17] [INFO]  打开目标图表页...
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:23] [INFO]  等待5秒加载页面...
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:29] [INFO]  快捷键已发送
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_100230.png
[数据收集总模块][10:02:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:02:30] [INFO]  关闭浏览器...
[数据收集总模块][10:02:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_100230.png
[数据收集总模块][10:02:30] [INFO] 技术指标模块运行中...
[技术指标模块][10:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:02:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:02:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:02:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:02:32] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:02:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:02:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][10:02:33] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][10:02:35] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:02:35] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:02:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][10:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:02:37] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][10:02:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:02:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:02:37] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:02:38] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_100230.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2520.17,
        "volume": 553923.74,
        "RSI": 62.84702219590625,
        "MACD_macd": -3.586677439619052,
        "MACD_signal": -4.907980958826675,
        "ATR": 21.294071089497958,
        "ADX": 27.292001519886703,
        "Stoch_K": 87.20254824807955,
        "Stoch_D": 65.92891773229682,
        "StochRSI_K": 100.0,
        "StochRSI_D": 87.59222331343587,
        "BB_upper": 2528.429821931056,
        "BB_lower": 2488.5711780689435,
        "BB_middle": 2508.5004999999996,
        "EMA5": 2508.0562840350576,
        "EMA21": 2508.5031509000746,
        "EMA55": 2515.6505787886676,
        "EMA144": 2517.837403951907,
        "EMA200": 2516.7080361932194,
        "VWAP": 2519.6320524056714
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.0,
        "volume": 1055842.12,
        "RSI": 59.68361267545599,
        "MACD_macd": -2.950397856217023,
        "MACD_signal": -6.242126130592772,
        "ATR": 23.895715345987938,
        "ADX": 14.723063859590539,
        "Stoch_K": 84.53359110681497,
        "Stoch_D": 72.87773294605394,
        "StochRSI_K": 96.0908054022834,
        "StochRSI_D": 98.69693513409447,
        "BB_upper": 2668.4479487561607,
        "BB_lower": 2618.0840512438394,
        "BB_middle": 2643.266,
        "EMA5": 2652.6376381764376,
        "EMA21": 2649.6277020595962,
        "EMA55": 2643.7416780873405,
        "EMA144": 2599.6858679241614,
        "EMA200": 2581.989051829836,
        "VWAP": 2621.0607633041664
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0081%",
      "FGI": "56/100",
      "open_interest": "$589926124.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2504.69",
        "lastSz": "6.96",
        "askPx": "2504.7",
        "askSz": "0.03",
        "bidPx": "2504.68",
        "bidSz": "24.2",
        "open24h": "2494.06",
        "high24h": "2549.99",
        "low24h": "2484",
        "volCcy24h": "2447488.464",
        "vol24h": "24474884.64",
        "ts": "1748743357901",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T02:02:38+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110756.62 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "427.27092000000357 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][10:02:39] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:02:39] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_100230.png
[gemini_api_caller.py][10:02:39] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:02:39] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:02:39] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:02:39] [INFO] AFC remote call 1 is done.
[_client.py][10:02:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:15:02] [INFO] 截图模块运行中...
[截图模块][10:15:03] [INFO]  __main__ 入口被执行
[截图模块][10:15:03] [INFO]  启动时主动清理内存...
[截图模块][10:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:15:04] [INFO]  已执行 pkill chrome
[截图模块][10:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:15:09] [INFO] 启动浏览器 (有头模式)
[截图模块][10:15:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:15:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:15:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:15:44] [INFO]  打开目标图表页...
[截图模块][10:15:51] [INFO]  等待5秒加载页面...
[截图模块][10:15:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:15:56] [INFO]  快捷键已发送
[截图模块][10:15:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_101557.png
[截图模块][10:15:57] [INFO]  关闭浏览器...
[数据收集总模块][10:15:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_101557.png
[数据收集总模块][10:15:57] [INFO] 技术指标模块运行中...
[技术指标模块][10:15:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:15:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:15:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:15:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:16:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:16:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:16:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:16:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:16:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:16:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][10:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:16:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:16:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:16:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_101557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103824.4,
        "volume": 71011.02,
        "RSI": 61.46350846193564,
        "MACD_macd": -8.717025276564527,
        "MACD_signal": -45.504107382689,
        "ATR": 403.55745268814553,
        "ADX": 22.444258396514595,
        "Stoch_K": 69.89893709705494,
        "Stoch_D": 66.87593943643516,
        "StochRSI_K": 100.0,
        "StochRSI_D": 86.40185931429794,
        "BB_upper": 103932.52044628495,
        "BB_lower": 103236.99955371507,
        "BB_middle": 103584.76000000001,
        "EMA5": 103677.28461822639,
        "EMA21": 103602.87238374604,
        "EMA55": 103730.91839090077,
        "EMA144": 103902.74568615276,
        "EMA200": 103926.16820190717,
        "VWAP": 103994.97125997134
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108971.7,
        "volume": 304700.77,
        "RSI": 59.586964820281075,
        "MACD_macd": 367.4299661885598,
        "MACD_signal": 382.53914389034,
        "ATR": 528.9728179491606,
        "ADX": 16.194079689744896,
        "Stoch_K": 73.84644300347699,
        "Stoch_D": 78.05641085792702,
        "StochRSI_K": 36.859245909776,
        "StochRSI_D": 47.86546183957097,
        "BB_upper": 109750.07961245089,
        "BB_lower": 107266.55038754914,
        "BB_middle": 108508.31500000002,
        "EMA5": 108907.86341293836,
        "EMA21": 108526.39507922943,
        "EMA55": 107621.1693018024,
        "EMA144": 106181.0083840975,
        "EMA200": 105735.678571431,
        "VWAP": 106350.17367302871
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0048%",
      "FGI": "56/100",
      "open_interest": "$22997791493.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "103984.3",
        "lastSz": "1.04",
        "askPx": "103984.3",
        "askSz": "860.36",
        "bidPx": "103984.2",
        "bidSz": "202.38",
        "open24h": "103742.3",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "42144.8339",
        "vol24h": "4214483.39",
        "ts": "1748744164413",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110819.77 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T02:16:04+00:00Z"
}
[gemini_api_caller.py][10:16:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:16:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_101557.png
[gemini_api_caller.py][10:16:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:16:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:16:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:16:06] [INFO] AFC remote call 1 is done.
[_client.py][10:16:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:17:41] [INFO] 截图模块运行中...
[截图模块][10:17:43] [INFO]  __main__ 入口被执行
[截图模块][10:17:43] [INFO]  启动时主动清理内存...
[截图模块][10:17:43] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:17:43] [INFO]  已执行 pkill chrome
[截图模块][10:17:45] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:17:45] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:17:45] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][10:17:45] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][10:17:45] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:17:45] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:17:45] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:17:46] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:17:47] [INFO]  启动浏览器 (有头模式)
[截图模块][10:17:47] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:18:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:18:20] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:18:20] [INFO]  打开目标图表页...
[截图模块][10:18:25] [INFO]  等待5秒加载页面...
[截图模块][10:18:30] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:18:31] [INFO]  快捷键已发送
[截图模块][10:18:32] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_101832.png
[截图模块][10:18:32] [INFO]  关闭浏览器...
[数据收集总模块][10:18:32] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_101832.png
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:43] [INFO]  __main__ 入口被执行
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:43] [INFO]  启动时主动清理内存...
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:43] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:43] [INFO]  已执行 pkill chrome
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:45] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:46] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:47] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:17:47] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:20] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:20] [INFO]  打开目标图表页...
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:25] [INFO]  等待5秒加载页面...
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:30] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:31] [INFO]  快捷键已发送
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:32] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_101832.png
[数据收集总模块][10:18:32] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:18:32] [INFO]  关闭浏览器...
[数据收集总模块][10:18:32] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_101832.png
[数据收集总模块][10:18:32] [INFO] 技术指标模块运行中...
[技术指标模块][10:18:33] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:18:34] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:18:34] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:18:34] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:18:34] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:18:34] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:18:35] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:18:35] [INFO] 宏观因子模块运行中...
[宏观因子模块][10:18:35] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][10:18:37] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:18:37] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:18:38] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][10:18:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:18:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:18:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][10:18:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:18:39] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:18:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:18:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_101832.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2508.35,
        "volume": 625716.44,
        "RSI": 53.845567091492285,
        "MACD_macd": -5.281223280375798,
        "MACD_signal": -5.230800501455765,
        "ATR": 22.05776246344586,
        "ADX": 27.807522142389022,
        "Stoch_K": 65.05527449878184,
        "Stoch_D": 44.544781408192215,
        "StochRSI_K": 100.0,
        "StochRSI_D": 68.91877940601863,
        "BB_upper": 2527.913756464855,
        "BB_lower": 2488.760243535146,
        "BB_middle": 2508.3370000000004,
        "EMA5": 2501.9994260525864,
        "EMA21": 2507.3356358382916,
        "EMA55": 2515.199138831715,
        "EMA144": 2515.1753065568673,
        "EMA200": 2512.808876882119,
        "VWAP": 2519.304799990139
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.0,
        "volume": 1055842.12,
        "RSI": 59.68361267545599,
        "MACD_macd": -2.950397856217023,
        "MACD_signal": -6.242126130592772,
        "ATR": 23.895715345987938,
        "ADX": 14.723063859590539,
        "Stoch_K": 84.53359110681497,
        "Stoch_D": 72.87773294605394,
        "StochRSI_K": 96.0908054022834,
        "StochRSI_D": 98.69693513409447,
        "BB_upper": 2668.4479487561607,
        "BB_lower": 2618.0840512438394,
        "BB_middle": 2643.266,
        "EMA5": 2652.6376381764376,
        "EMA21": 2649.6277020595962,
        "EMA55": 2643.7416780873405,
        "EMA144": 2599.6858679241614,
        "EMA200": 2581.989051829836,
        "VWAP": 2621.0607633041664
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0087%",
      "FGI": "56/100",
      "open_interest": "$594045959.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2502.79",
        "lastSz": "1.14",
        "askPx": "2502.8",
        "askSz": "645.68",
        "bidPx": "2502.79",
        "bidSz": "17.44",
        "open24h": "2514.24",
        "high24h": "2549.99",
        "low24h": "2484",
        "volCcy24h": "2413182.929",
        "vol24h": "24131829.29",
        "ts": "1748744318516",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T02:18:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110775.75 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "446.2116899999969 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][10:18:41] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:18:41] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_101832.png
[gemini_api_caller.py][10:18:41] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:18:41] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:18:41] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:18:41] [INFO] AFC remote call 1 is done.
[_client.py][10:18:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:30:01] [INFO] 截图模块运行中...
[截图模块][10:30:03] [INFO]  __main__ 入口被执行
[截图模块][10:30:03] [INFO]  启动时主动清理内存...
[截图模块][10:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:30:03] [INFO]  已执行 pkill chrome
[截图模块][10:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:30:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:30:08] [INFO] 启动浏览器 (有头模式)
[截图模块][10:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:30:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:30:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:30:44] [INFO]  打开目标图表页...
[截图模块][10:30:50] [INFO]  等待5秒加载页面...
[截图模块][10:30:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:30:56] [INFO]  快捷键已发送
[截图模块][10:30:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_103057.png
[截图模块][10:30:57] [INFO]  关闭浏览器...
[数据收集总模块][10:30:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_103057.png
[数据收集总模块][10:30:57] [INFO] 技术指标模块运行中...
[技术指标模块][10:30:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:30:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:30:58] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:30:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:30:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:30:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:30:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:30:59] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:31:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:31:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:31:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:31:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:31:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][10:31:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:31:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:31:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:31:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_103057.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103786.9,
        "volume": 188818.3,
        "RSI": 60.13323664272289,
        "MACD_macd": -31.828405572858173,
        "MACD_signal": -54.86832696921461,
        "ATR": 399.0124887218177,
        "ADX": 22.65582361458815,
        "Stoch_K": 82.43155852554408,
        "Stoch_D": 69.7818675592427,
        "StochRSI_K": 100.0,
        "StochRSI_D": 85.89174832921337,
        "BB_upper": 103908.57896165882,
        "BB_lower": 103245.21103834116,
        "BB_middle": 103576.89499999999,
        "EMA5": 103603.72692733957,
        "EMA21": 103580.73814089135,
        "EMA55": 103733.79269800436,
        "EMA144": 103962.49891966772,
        "EMA200": 104013.39607901784,
        "VWAP": 103996.77538609986
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108971.7,
        "volume": 304700.77,
        "RSI": 59.586964820281075,
        "MACD_macd": 367.4299661885598,
        "MACD_signal": 382.53914389034,
        "ATR": 528.9728179491606,
        "ADX": 16.194079689744896,
        "Stoch_K": 73.84644300347699,
        "Stoch_D": 78.05641085792702,
        "StochRSI_K": 36.859245909776,
        "StochRSI_D": 47.86546183957097,
        "BB_upper": 109750.07961245089,
        "BB_lower": 107266.55038754914,
        "BB_middle": 108508.31500000002,
        "EMA5": 108907.86341293836,
        "EMA21": 108526.39507922943,
        "EMA55": 107621.1693018024,
        "EMA144": 106181.0083840975,
        "EMA200": 105735.678571431,
        "VWAP": 106350.17367302871
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0049%",
      "FGI": "56/100",
      "open_interest": "$23004093739.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104180",
        "lastSz": "0.15",
        "askPx": "104180",
        "askSz": "850.58",
        "bidPx": "104179.9",
        "bidSz": "419.02",
        "open24h": "103492",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "41941.3679",
        "vol24h": "4194136.79",
        "ts": "1748745064206",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110653.04 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T02:31:04+00:00Z"
}
[gemini_api_caller.py][10:31:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:31:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_103057.png
[gemini_api_caller.py][10:31:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:31:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:31:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:31:06] [INFO] AFC remote call 1 is done.
[_client.py][10:31:10] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:31:56] [INFO] 截图模块运行中...
[截图模块][10:31:57] [INFO]  __main__ 入口被执行
[截图模块][10:31:57] [INFO]  启动时主动清理内存...
[截图模块][10:31:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:31:58] [INFO]  已执行 pkill chrome
[截图模块][10:31:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:31:59] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][10:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][10:31:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:31:59] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:31:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:32:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:32:03] [INFO]  启动浏览器 (有头模式)
[截图模块][10:32:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:32:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:32:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:32:16] [INFO]  打开目标图表页...
[截图模块][10:32:22] [INFO]  等待5秒加载页面...
[截图模块][10:32:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:32:27] [INFO]  快捷键已发送
[截图模块][10:32:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_103228.png
[截图模块][10:32:28] [INFO]  关闭浏览器...
[数据收集总模块][10:32:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_103228.png
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:57] [INFO]  __main__ 入口被执行
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:57] [INFO]  启动时主动清理内存...
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:58] [INFO]  已执行 pkill chrome
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:31:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:16] [INFO]  打开目标图表页...
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:22] [INFO]  等待5秒加载页面...
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:27] [INFO]  快捷键已发送
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_103228.png
[数据收集总模块][10:32:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:32:28] [INFO]  关闭浏览器...
[数据收集总模块][10:32:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_103228.png
[数据收集总模块][10:32:29] [INFO] 技术指标模块运行中...
[技术指标模块][10:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:32:30] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:32:30] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:32:30] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:32:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:32:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:32:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][10:32:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][10:32:33] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:32:33] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:32:34] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][10:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:32:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][10:32:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:32:35] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:32:35] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:32:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_103228.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2497.0,
        "volume": 2082513.12,
        "RSI": 42.18934093196361,
        "MACD_macd": -6.174949502691561,
        "MACD_signal": -5.225758884954113,
        "ATR": 20.835879028304845,
        "ADX": 28.403769742043867,
        "Stoch_K": 45.52893045002907,
        "Stoch_D": 43.591397225671436,
        "StochRSI_K": 62.776657458095166,
        "StochRSI_D": 67.3898018054943,
        "BB_upper": 2528.9284339595565,
        "BB_lower": 2488.751566040444,
        "BB_middle": 2508.84,
        "EMA5": 2498.82413907888,
        "EMA21": 2507.2350359596935,
        "EMA55": 2515.739049657121,
        "EMA144": 2517.920465784488,
        "EMA200": 2516.7477813101455,
        "VWAP": 2519.3121719526685
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.0,
        "volume": 1055842.12,
        "RSI": 59.68361267545599,
        "MACD_macd": -2.950397856217023,
        "MACD_signal": -6.242126130592772,
        "ATR": 23.895715345987938,
        "ADX": 14.723063859590539,
        "Stoch_K": 84.53359110681497,
        "Stoch_D": 72.87773294605394,
        "StochRSI_K": 96.0908054022834,
        "StochRSI_D": 98.69693513409447,
        "BB_upper": 2668.4479487561607,
        "BB_lower": 2618.0840512438394,
        "BB_middle": 2643.266,
        "EMA5": 2652.6376381764376,
        "EMA21": 2649.6277020595962,
        "EMA55": 2643.7416780873405,
        "EMA144": 2599.6858679241614,
        "EMA200": 2581.989051829836,
        "VWAP": 2621.0607633041664
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0091%",
      "FGI": "56/100",
      "open_interest": "$591038187.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2509.64",
        "lastSz": "1.32",
        "askPx": "2509.64",
        "askSz": "1251.27",
        "bidPx": "2509.63",
        "bidSz": "280.05",
        "open24h": "2496.41",
        "high24h": "2549.99",
        "low24h": "2484",
        "volCcy24h": "2394122.849",
        "vol24h": "23941228.49",
        "ts": "1748745155971",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T02:32:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110670.31 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "341.8064700000008 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][10:32:37] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:32:37] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_103228.png
[gemini_api_caller.py][10:32:37] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:32:37] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:32:37] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:32:37] [INFO] AFC remote call 1 is done.
[_client.py][10:32:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:45:02] [INFO] 截图模块运行中...
[截图模块][10:45:03] [INFO]  __main__ 入口被执行
[截图模块][10:45:03] [INFO]  启动时主动清理内存...
[截图模块][10:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:45:03] [INFO]  已执行 pkill chrome
[截图模块][10:45:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:45:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][10:45:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][10:45:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][10:45:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:45:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:45:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:45:09] [INFO] 启动浏览器 (有头模式)
[截图模块][10:45:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:45:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][10:45:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:45:45] [INFO]  打开目标图表页...
[截图模块][10:45:51] [INFO]  等待5秒加载页面...
[截图模块][10:45:56] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:45:57] [INFO]  快捷键已发送
[截图模块][10:45:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_104558.png
[截图模块][10:45:58] [INFO]  关闭浏览器...
[数据收集总模块][10:45:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_104558.png
[数据收集总模块][10:45:58] [INFO] 技术指标模块运行中...
[技术指标模块][10:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:45:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:45:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:46:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:46:00] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:46:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:46:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:46:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][10:46:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:46:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:46:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][10:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:46:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][10:46:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:46:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:46:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:46:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_104558.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103433.4,
        "volume": 206510.9,
        "RSI": 44.47393474788136,
        "MACD_macd": -56.9476185618405,
        "MACD_signal": -60.681862147018734,
        "ATR": 374.9219812892521,
        "ADX": 25.703558448344097,
        "Stoch_K": 48.2973226867065,
        "Stoch_D": 66.69015187098816,
        "StochRSI_K": 59.20579560139166,
        "StochRSI_D": 83.40515245740225,
        "BB_upper": 103923.00278503458,
        "BB_lower": 103237.91721496543,
        "BB_middle": 103580.46,
        "EMA5": 103512.14039100934,
        "EMA21": 103560.1278777942,
        "EMA55": 103733.8523768331,
        "EMA144": 103983.71513194276,
        "EMA200": 104043.24318453124,
        "VWAP": 104009.5324876907
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108971.7,
        "volume": 304700.77,
        "RSI": 59.586964820281075,
        "MACD_macd": 367.4299661885598,
        "MACD_signal": 382.53914389034,
        "ATR": 528.9728179491606,
        "ADX": 16.194079689744896,
        "Stoch_K": 73.84644300347699,
        "Stoch_D": 78.05641085792702,
        "StochRSI_K": 36.859245909776,
        "StochRSI_D": 47.86546183957097,
        "BB_upper": 109750.07961245089,
        "BB_lower": 107266.55038754914,
        "BB_middle": 108508.31500000002,
        "EMA5": 108907.86341293836,
        "EMA21": 108526.39507922943,
        "EMA55": 107621.1693018024,
        "EMA144": 106181.0083840975,
        "EMA200": 105735.678571431,
        "VWAP": 106350.17367302871
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0051%",
      "FGI": "56/100",
      "open_interest": "$23008233275.000023 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104137.9",
        "lastSz": "0.97",
        "askPx": "104138",
        "askSz": "484.15",
        "bidPx": "104137.9",
        "bidSz": "902.76",
        "open24h": "103430",
        "high24h": "104861.4",
        "low24h": "103022.1",
        "volCcy24h": "41664.5188",
        "vol24h": "4166451.88",
        "ts": "1748745964814",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110738.27 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T02:46:05+00:00Z"
}
[gemini_api_caller.py][10:46:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:46:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_104558.png
[gemini_api_caller.py][10:46:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:46:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:46:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:46:07] [INFO] AFC remote call 1 is done.
[_client.py][10:46:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][10:46:57] [INFO] 截图模块运行中...
[截图模块][10:46:58] [INFO]  __main__ 入口被执行
[截图模块][10:46:58] [INFO]  启动时主动清理内存...
[截图模块][10:46:59] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][10:46:59] [INFO]  已执行 pkill chrome
[截图模块][10:47:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:47:00] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][10:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][10:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][10:47:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][10:47:00] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][10:47:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][10:47:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][10:47:04] [INFO]  启动浏览器 (有头模式)
[截图模块][10:47:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][10:47:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][10:47:16] [INFO]  打开目标图表页...
[截图模块][10:47:22] [INFO]  等待5秒加载页面...
[截图模块][10:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][10:47:28] [INFO]  快捷键已发送
[截图模块][10:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_104729.png
[截图模块][10:47:29] [INFO]  关闭浏览器...
[数据收集总模块][10:47:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_104729.png
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:46:58] [INFO]  __main__ 入口被执行
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:46:58] [INFO]  启动时主动清理内存...
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:46:59] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:46:59] [INFO]  已执行 pkill chrome
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:00] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:04] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:16] [INFO]  打开目标图表页...
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:22] [INFO]  等待5秒加载页面...
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:28] [INFO]  快捷键已发送
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_104729.png
[数据收集总模块][10:47:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][10:47:29] [INFO]  关闭浏览器...
[数据收集总模块][10:47:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_104729.png
[数据收集总模块][10:47:29] [INFO] 技术指标模块运行中...
[技术指标模块][10:47:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][10:47:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][10:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][10:47:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][10:47:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][10:47:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][10:47:31] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:47:31] [INFO] 宏观因子模块运行中...
[宏观因子模块][10:47:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][10:47:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:47:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][10:47:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][10:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][10:47:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][10:47:35] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][10:47:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][10:47:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][10:47:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][10:47:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_104729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2491.85,
        "volume": 703378.46,
        "RSI": 35.81490210036809,
        "MACD_macd": -6.065210357868182,
        "MACD_signal": -4.990041891904671,
        "ATR": 17.88600885235348,
        "ADX": 32.21482419979783,
        "Stoch_K": 23.050139275765677,
        "Stoch_D": 44.748420408995194,
        "StochRSI_K": 43.98002424783931,
        "StochRSI_D": 71.44133343676059,
        "BB_upper": 2530.5784366086414,
        "BB_lower": 2489.8135633913594,
        "BB_middle": 2510.1960000000004,
        "EMA5": 2499.7362086183193,
        "EMA21": 2508.2587143664723,
        "EMA55": 2516.492903747703,
        "EMA144": 2518.766766187144,
        "EMA200": 2517.759997713871,
        "VWAP": 2521.179621031988
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2659.0,
        "volume": 1055842.12,
        "RSI": 59.68361267545599,
        "MACD_macd": -2.950397856217023,
        "MACD_signal": -6.242126130592772,
        "ATR": 23.895715345987938,
        "ADX": 14.723063859590539,
        "Stoch_K": 84.53359110681497,
        "Stoch_D": 72.87773294605394,
        "StochRSI_K": 96.0908054022834,
        "StochRSI_D": 98.69693513409447,
        "BB_upper": 2668.4479487561607,
        "BB_lower": 2618.0840512438394,
        "BB_middle": 2643.266,
        "EMA5": 2652.6376381764376,
        "EMA21": 2649.6277020595962,
        "EMA55": 2643.7416780873405,
        "EMA144": 2599.6858679241614,
        "EMA200": 2581.989051829836,
        "VWAP": 2621.0607633041664
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0095%",
      "FGI": "56/100",
      "open_interest": "$593132328.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2506.75",
        "lastSz": "32.86",
        "askPx": "2506.76",
        "askSz": "768.96",
        "bidPx": "2506.75",
        "bidSz": "822.27",
        "open24h": "2495.88",
        "high24h": "2549.99",
        "low24h": "2484",
        "volCcy24h": "2373657.174",
        "vol24h": "23736571.74",
        "ts": "1748746056105",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T02:47:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110712.14 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "383.38376999999804 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][10:47:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][10:47:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_104729.png
[gemini_api_caller.py][10:47:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][10:47:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][10:47:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][10:47:38] [INFO] AFC remote call 1 is done.
[_client.py][10:47:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:00:02] [INFO] 截图模块运行中...
[截图模块][11:00:03] [INFO]  __main__ 入口被执行
[截图模块][11:00:03] [INFO]  启动时主动清理内存...
[截图模块][11:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:00:03] [INFO]  已执行 pkill chrome
[截图模块][11:00:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:00:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][11:00:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][11:00:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:00:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:00:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:00:09] [INFO] 启动浏览器 (有头模式)
[截图模块][11:00:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:00:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:00:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:00:45] [INFO]  打开目标图表页...
[截图模块][11:00:53] [INFO]  等待5秒加载页面...
[截图模块][11:00:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:00:58] [INFO]  快捷键已发送
[截图模块][11:00:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_110059.png
[截图模块][11:00:59] [INFO]  关闭浏览器...
[数据收集总模块][11:01:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_110059.png
[数据收集总模块][11:01:00] [INFO] 技术指标模块运行中...
[技术指标模块][11:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:01:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:01:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:01:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:01:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:01:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][11:01:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:01:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:01:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][11:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:01:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][11:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:01:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:01:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:01:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_110059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103691.6,
        "volume": 122257.98,
        "RSI": 59.191664892888156,
        "MACD_macd": -52.117618065851275,
        "MACD_signal": -61.57550953889914,
        "ATR": 348.27925505794235,
        "ADX": 27.550757333153406,
        "Stoch_K": 78.61672146547755,
        "Stoch_D": 69.29700955065023,
        "StochRSI_K": 98.46953721375532,
        "StochRSI_D": 87.90667086889789,
        "BB_upper": 103952.72441204089,
        "BB_lower": 103247.83558795911,
        "BB_middle": 103600.28,
        "EMA5": 103551.510586514,
        "EMA21": 103572.79625140116,
        "EMA55": 103743.46984019609,
        "EMA144": 103977.43012648085,
        "EMA200": 104028.82424027358,
        "VWAP": 104035.81973528603
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108895.5,
        "volume": 175185.26,
        "RSI": 57.53815102294832,
        "MACD_macd": 375.2663602246321,
        "MACD_signal": 386.2827319748199,
        "ATR": 521.2147062068858,
        "ADX": 16.60605433486494,
        "Stoch_K": 66.68546189267944,
        "Stoch_D": 75.80173571757376,
        "StochRSI_K": 26.50758554914817,
        "StochRSI_D": 41.49966713093273,
        "BB_upper": 109741.65592853648,
        "BB_lower": 107120.57407146356,
        "BB_middle": 108431.11500000002,
        "EMA5": 108875.94511940754,
        "EMA21": 108481.8683148532,
        "EMA55": 107572.42515796296,
        "EMA144": 106153.78508025953,
        "EMA200": 105720.50823131313,
        "VWAP": 106317.02537407704
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0051%",
      "FGI": "56/100",
      "open_interest": "$23012495772.00002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104153.1",
        "lastSz": "0.91",
        "askPx": "104153.1",
        "askSz": "835.64",
        "bidPx": "104153",
        "bidSz": "132.76",
        "open24h": "103319.1",
        "high24h": "104861.4",
        "low24h": "103031.4",
        "volCcy24h": "40736.1532",
        "vol24h": "4073615.32",
        "ts": "1748746867608",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110726.76 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T03:01:08+00:00Z"
}
[gemini_api_caller.py][11:01:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:01:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_110059.png
[gemini_api_caller.py][11:01:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:01:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:01:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:01:09] [INFO] AFC remote call 1 is done.
[_client.py][11:01:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:01:56] [INFO] 截图模块运行中...
[截图模块][11:01:58] [INFO]  __main__ 入口被执行
[截图模块][11:01:58] [INFO]  启动时主动清理内存...
[截图模块][11:01:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:01:58] [INFO]  已执行 pkill chrome
[截图模块][11:01:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:01:59] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:01:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:01:59] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:01:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:02:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:02:03] [INFO]  启动浏览器 (有头模式)
[截图模块][11:02:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:02:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:02:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:02:16] [INFO]  打开目标图表页...
[截图模块][11:02:22] [INFO]  等待5秒加载页面...
[截图模块][11:02:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:02:28] [INFO]  快捷键已发送
[截图模块][11:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_110229.png
[截图模块][11:02:29] [INFO]  关闭浏览器...
[数据收集总模块][11:02:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_110229.png
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:58] [INFO]  __main__ 入口被执行
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:58] [INFO]  启动时主动清理内存...
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:58] [INFO]  已执行 pkill chrome
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:01:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:03] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:03] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:16] [INFO]  打开目标图表页...
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:22] [INFO]  等待5秒加载页面...
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:28] [INFO]  快捷键已发送
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_110229.png
[数据收集总模块][11:02:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:02:29] [INFO]  关闭浏览器...
[数据收集总模块][11:02:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_110229.png
[数据收集总模块][11:02:29] [INFO] 技术指标模块运行中...
[技术指标模块][11:02:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:02:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:02:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:02:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:02:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:02:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:02:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][11:02:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][11:02:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:02:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:02:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:02:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:02:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][11:02:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:02:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:02:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:02:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_110229.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2509.5,
        "volume": 808681.85,
        "RSI": 53.25709175457975,
        "MACD_macd": -5.3099673694077865,
        "MACD_signal": -4.719308232433773,
        "ATR": 16.394627870579196,
        "ADX": 32.184125976804275,
        "Stoch_K": 62.19512195121951,
        "Stoch_D": 48.31707317073195,
        "StochRSI_K": 95.41275328045144,
        "StochRSI_D": 72.53469052651646,
        "BB_upper": 2530.498586818222,
        "BB_lower": 2492.7184131817776,
        "BB_middle": 2511.6085,
        "EMA5": 2503.6793129274793,
        "EMA21": 2509.8993710811665,
        "EMA55": 2517.3321322304714,
        "EMA144": 2518.4631009763334,
        "EMA200": 2517.020866648401,
        "VWAP": 2521.879502388095
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2660.0,
        "volume": 713258.5,
        "RSI": 60.59674351894936,
        "MACD_macd": -4.326733986690215,
        "MACD_signal": -7.064755058646343,
        "ATR": 24.98119597676656,
        "ADX": 14.235407376852448,
        "Stoch_K": 71.57965194109764,
        "Stoch_D": 55.81780284728628,
        "StochRSI_K": 100.0,
        "StochRSI_D": 80.76045511773641,
        "BB_upper": 2666.358488663752,
        "BB_lower": 2617.819511336248,
        "BB_middle": 2642.089,
        "EMA5": 2649.456457264656,
        "EMA21": 2648.690438740195,
        "EMA55": 2643.1650836425597,
        "EMA144": 2598.750109360387,
        "EMA200": 2581.05901152854,
        "VWAP": 2620.071080846538
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0091%",
      "FGI": "56/100",
      "open_interest": "$591267740.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2507.14",
        "lastSz": "43.28",
        "askPx": "2507.14",
        "askSz": "539.95",
        "bidPx": "2507.13",
        "bidSz": "1146.02",
        "open24h": "2493.59",
        "high24h": "2549.99",
        "low24h": "2484.17",
        "volCcy24h": "2345916.085",
        "vol24h": "23459160.85",
        "ts": "1748746956609",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T03:02:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110710.12 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "381.22790999999995 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][11:02:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:02:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_110229.png
[gemini_api_caller.py][11:02:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:02:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:02:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:02:38] [INFO] AFC remote call 1 is done.
[_client.py][11:02:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:15:02] [INFO] 截图模块运行中...
[截图模块][11:15:04] [INFO]  __main__ 入口被执行
[截图模块][11:15:04] [INFO]  启动时主动清理内存...
[截图模块][11:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:15:04] [INFO]  已执行 pkill chrome
[截图模块][11:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][11:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][11:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:15:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:15:09] [INFO] 启动浏览器 (有头模式)
[截图模块][11:15:11] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:15:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:15:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:15:44] [INFO]  打开目标图表页...
[截图模块][11:15:50] [INFO]  等待5秒加载页面...
[截图模块][11:15:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:15:56] [INFO]  快捷键已发送
[截图模块][11:15:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_111557.png
[截图模块][11:15:57] [INFO]  关闭浏览器...
[数据收集总模块][11:15:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_111557.png
[数据收集总模块][11:15:57] [INFO] 技术指标模块运行中...
[技术指标模块][11:15:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:15:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:15:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:15:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:15:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:16:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:16:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][11:16:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:16:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:16:03] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][11:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:16:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:16:03] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][11:16:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:16:04] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:16:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:16:04] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_111557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103645.1,
        "volume": 68620.86,
        "RSI": 56.969050055750074,
        "MACD_macd": -71.46155797902611,
        "MACD_signal": -63.859577987805906,
        "ATR": 328.95300927370255,
        "ADX": 28.059143881498585,
        "Stoch_K": 73.15641146078046,
        "Stoch_D": 48.49303272271828,
        "StochRSI_K": 92.54001131746813,
        "StochRSI_D": 55.08346045279222,
        "BB_upper": 103950.24085403337,
        "BB_lower": 103247.76914596664,
        "BB_middle": 103599.005,
        "EMA5": 103481.465879771,
        "EMA21": 103560.90698433842,
        "EMA55": 103742.3482901906,
        "EMA144": 103953.26204223388,
        "EMA200": 103990.82012673945,
        "VWAP": 104049.9884635966
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108895.5,
        "volume": 175185.26,
        "RSI": 57.53815102294832,
        "MACD_macd": 375.2663602246321,
        "MACD_signal": 386.2827319748199,
        "ATR": 521.2147062068858,
        "ADX": 16.60605433486494,
        "Stoch_K": 66.68546189267944,
        "Stoch_D": 75.80173571757376,
        "StochRSI_K": 26.50758554914817,
        "StochRSI_D": 41.49966713093273,
        "BB_upper": 109741.65592853648,
        "BB_lower": 107120.57407146356,
        "BB_middle": 108431.11500000002,
        "EMA5": 108875.94511940754,
        "EMA21": 108481.8683148532,
        "EMA55": 107572.42515796296,
        "EMA144": 106153.78508025953,
        "EMA200": 105720.50823131313,
        "VWAP": 106317.02537407704
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0052%",
      "FGI": "56/100",
      "open_interest": "$23011280335.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104041.8",
        "lastSz": "0.17",
        "askPx": "104041.9",
        "askSz": "81.31",
        "bidPx": "104041.8",
        "bidSz": "1132.4",
        "open24h": "103190",
        "high24h": "104861.4",
        "low24h": "103068",
        "volCcy24h": "40271.9316",
        "vol24h": "4027193.16",
        "ts": "1748747763615",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110794.11 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T03:16:04+00:00Z"
}
[gemini_api_caller.py][11:16:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:16:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_111557.png
[gemini_api_caller.py][11:16:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:16:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:16:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:16:06] [INFO] AFC remote call 1 is done.
[_client.py][11:16:09] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:16:53] [INFO] 截图模块运行中...
[截图模块][11:16:54] [INFO]  __main__ 入口被执行
[截图模块][11:16:54] [INFO]  启动时主动清理内存...
[截图模块][11:16:54] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:16:54] [INFO]  已执行 pkill chrome
[截图模块][11:16:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:16:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:16:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:16:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:16:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:16:56] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:16:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:16:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:16:59] [INFO]  启动浏览器 (有头模式)
[截图模块][11:16:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:17:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:17:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:17:17] [INFO]  打开目标图表页...
[截图模块][11:17:22] [INFO]  等待5秒加载页面...
[截图模块][11:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:17:27] [INFO]  快捷键已发送
[截图模块][11:17:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_111728.png
[截图模块][11:17:28] [INFO]  关闭浏览器...
[数据收集总模块][11:17:29] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_111728.png
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:54] [INFO]  __main__ 入口被执行
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:54] [INFO]  启动时主动清理内存...
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:54] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:54] [INFO]  已执行 pkill chrome
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:57] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:59] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:16:59] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:17] [INFO]  打开目标图表页...
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:22] [INFO]  等待5秒加载页面...
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:27] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:27] [INFO]  快捷键已发送
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:28] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_111728.png
[数据收集总模块][11:17:29] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:17:28] [INFO]  关闭浏览器...
[数据收集总模块][11:17:29] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_111728.png
[数据收集总模块][11:17:29] [INFO] 技术指标模块运行中...
[技术指标模块][11:17:30] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:17:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:17:31] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:17:31] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:17:31] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:17:32] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:17:32] [INFO] 宏观因子模块运行中...
[宏观因子模块][11:17:32] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][11:17:34] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:17:34] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:17:35] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:17:35] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:17:36] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][11:17:36] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:17:36] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:17:36] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:17:36] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_111728.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2504.09,
        "volume": 453304.14,
        "RSI": 46.311252019219474,
        "MACD_macd": -6.0646447593153425,
        "MACD_signal": -4.567565486168052,
        "ATR": 14.670725183776824,
        "ADX": 32.614100891902964,
        "Stoch_K": 49.000000000000355,
        "Stoch_D": 32.04065040650433,
        "StochRSI_K": 74.93108935431032,
        "StochRSI_D": 40.73040670272348,
        "BB_upper": 2530.8727656837395,
        "BB_lower": 2492.9712343162596,
        "BB_middle": 2511.9219999999996,
        "EMA5": 2500.7689693912184,
        "EMA21": 2509.9388571933587,
        "EMA55": 2517.4678934114118,
        "EMA144": 2517.1599468916984,
        "EMA200": 2514.9970622639144,
        "VWAP": 2522.3178091731484
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2660.0,
        "volume": 713258.5,
        "RSI": 60.59674351894936,
        "MACD_macd": -4.326733986690215,
        "MACD_signal": -7.064755058646343,
        "ATR": 24.98119597676656,
        "ADX": 14.235407376852448,
        "Stoch_K": 71.57965194109764,
        "Stoch_D": 55.81780284728628,
        "StochRSI_K": 100.0,
        "StochRSI_D": 80.76045511773641,
        "BB_upper": 2666.358488663752,
        "BB_lower": 2617.819511336248,
        "BB_middle": 2642.089,
        "EMA5": 2649.456457264656,
        "EMA21": 2648.690438740195,
        "EMA55": 2643.1650836425597,
        "EMA144": 2598.750109360387,
        "EMA200": 2581.05901152854,
        "VWAP": 2620.071080846538
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.009%",
      "FGI": "56/100",
      "open_interest": "$592505083.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2503.17",
        "lastSz": "5.15",
        "askPx": "2503.17",
        "askSz": "1141.32",
        "bidPx": "2503.16",
        "bidSz": "741.9",
        "open24h": "2487.1",
        "high24h": "2549.99",
        "low24h": "2485.74",
        "volCcy24h": "2331038.578",
        "vol24h": "23310385.78",
        "ts": "1748747856511",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T03:17:36+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110769.22 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "439.74411000000276 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][11:17:38] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:17:38] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_111728.png
[gemini_api_caller.py][11:17:38] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:17:38] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:17:38] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:17:38] [INFO] AFC remote call 1 is done.
[_client.py][11:17:41] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:30:02] [INFO] 截图模块运行中...
[截图模块][11:30:03] [INFO]  __main__ 入口被执行
[截图模块][11:30:03] [INFO]  启动时主动清理内存...
[截图模块][11:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:30:04] [INFO]  已执行 pkill chrome
[截图模块][11:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][11:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][11:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:30:10] [INFO] 启动浏览器 (有头模式)
[截图模块][11:30:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:30:45] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:30:45] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:30:45] [INFO]  打开目标图表页...
[截图模块][11:30:52] [INFO]  等待5秒加载页面...
[截图模块][11:30:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:30:58] [INFO]  快捷键已发送
[截图模块][11:30:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_113059.png
[截图模块][11:30:59] [INFO]  关闭浏览器...
[数据收集总模块][11:30:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_113059.png
[数据收集总模块][11:30:59] [INFO] 技术指标模块运行中...
[技术指标模块][11:31:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:31:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:31:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:31:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:31:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:31:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][11:31:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:31:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:31:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][11:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:31:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][11:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:31:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:31:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:31:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_113059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103500.0,
        "volume": 58218.88,
        "RSI": 49.536052237545675,
        "MACD_macd": -90.48152169858804,
        "MACD_signal": -62.01704057415954,
        "ATR": 330.4534668207763,
        "ADX": 30.071492854127992,
        "Stoch_K": 56.117895725692705,
        "Stoch_D": 31.610827105790477,
        "StochRSI_K": 72.71040657095935,
        "StochRSI_D": 24.236802190319782,
        "BB_upper": 103951.29790783722,
        "BB_lower": 103248.01209216278,
        "BB_middle": 103599.655,
        "EMA5": 103399.64881965648,
        "EMA21": 103552.49409250195,
        "EMA55": 103748.14330324392,
        "EMA144": 103977.87457163856,
        "EMA200": 104024.13206300364,
        "VWAP": 104055.60638537248
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108895.5,
        "volume": 175185.26,
        "RSI": 57.53815102294832,
        "MACD_macd": 375.2663602246321,
        "MACD_signal": 386.2827319748199,
        "ATR": 521.2147062068858,
        "ADX": 16.60605433486494,
        "Stoch_K": 66.68546189267944,
        "Stoch_D": 75.80173571757376,
        "StochRSI_K": 26.50758554914817,
        "StochRSI_D": 41.49966713093273,
        "BB_upper": 109741.65592853648,
        "BB_lower": 107120.57407146356,
        "BB_middle": 108431.11500000002,
        "EMA5": 108875.94511940754,
        "EMA21": 108481.8683148532,
        "EMA55": 107572.42515796296,
        "EMA144": 106153.78508025953,
        "EMA200": 105720.50823131313,
        "VWAP": 106317.02537407704
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0054%",
      "FGI": "56/100",
      "open_interest": "$23012573806.000023 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104140",
        "lastSz": "0.05",
        "askPx": "104140",
        "askSz": "887.16",
        "bidPx": "104139.9",
        "bidSz": "407.67",
        "open24h": "103520",
        "high24h": "104861.4",
        "low24h": "103230",
        "volCcy24h": "39574.8737",
        "vol24h": "3957487.37",
        "ts": "1748748666214",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110763.31 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T03:31:07+00:00Z"
}
[gemini_api_caller.py][11:31:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:31:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_113059.png
[gemini_api_caller.py][11:31:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:31:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:31:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:31:09] [INFO] AFC remote call 1 is done.
[_client.py][11:31:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:31:53] [INFO] 截图模块运行中...
[截图模块][11:31:55] [INFO]  __main__ 入口被执行
[截图模块][11:31:55] [INFO]  启动时主动清理内存...
[截图模块][11:31:55] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:31:55] [INFO]  已执行 pkill chrome
[截图模块][11:31:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:31:57] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:31:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:31:57] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:31:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:31:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:32:00] [INFO]  启动浏览器 (有头模式)
[截图模块][11:32:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:32:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:32:17] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:32:17] [INFO]  打开目标图表页...
[截图模块][11:32:23] [INFO]  等待5秒加载页面...
[截图模块][11:32:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:32:29] [INFO]  快捷键已发送
[截图模块][11:32:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_113230.png
[截图模块][11:32:30] [INFO]  关闭浏览器...
[数据收集总模块][11:32:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_113230.png
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:55] [INFO]  __main__ 入口被执行
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:55] [INFO]  启动时主动清理内存...
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:55] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:55] [INFO]  已执行 pkill chrome
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:57] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:31:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:17] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:17] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:17] [INFO]  打开目标图表页...
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:23] [INFO]  等待5秒加载页面...
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:29] [INFO]  快捷键已发送
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_113230.png
[数据收集总模块][11:32:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:32:30] [INFO]  关闭浏览器...
[数据收集总模块][11:32:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_113230.png
[数据收集总模块][11:32:31] [INFO] 技术指标模块运行中...
[技术指标模块][11:32:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:32:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:32:32] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:32:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:32:33] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:32:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:32:34] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:32:34] [INFO] 宏观因子模块运行中...
[宏观因子模块][11:32:34] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][11:32:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:32:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:32:37] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:32:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:32:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:32:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][11:32:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:32:38] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:32:38] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:32:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_113230.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2497.84,
        "volume": 501508.32,
        "RSI": 36.927303454635705,
        "MACD_macd": -6.392572581394234,
        "MACD_signal": -4.193966907648046,
        "ATR": 14.166225890371487,
        "ADX": 36.78041232663222,
        "Stoch_K": 33.75609756097597,
        "Stoch_D": 24.483543703916258,
        "StochRSI_K": 47.26013687853756,
        "StochRSI_D": 15.753378959512524,
        "BB_upper": 2531.442678765985,
        "BB_lower": 2493.8493212340145,
        "BB_middle": 2512.6459999999997,
        "EMA5": 2499.1084540868274,
        "EMA21": 2510.523817147422,
        "EMA55": 2517.988771926623,
        "EMA144": 2517.5778789783476,
        "EMA200": 2515.452244451832,
        "VWAP": 2522.248443724621
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2660.0,
        "volume": 713258.5,
        "RSI": 60.59674351894936,
        "MACD_macd": -4.326733986690215,
        "MACD_signal": -7.064755058646343,
        "ATR": 24.98119597676656,
        "ADX": 14.235407376852448,
        "Stoch_K": 71.57965194109764,
        "Stoch_D": 55.81780284728628,
        "StochRSI_K": 100.0,
        "StochRSI_D": 80.76045511773641,
        "BB_upper": 2666.358488663752,
        "BB_lower": 2617.819511336248,
        "BB_middle": 2642.089,
        "EMA5": 2649.456457264656,
        "EMA21": 2648.690438740195,
        "EMA55": 2643.1650836425597,
        "EMA144": 2598.750109360387,
        "EMA200": 2581.05901152854,
        "VWAP": 2620.071080846538
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0097%",
      "FGI": "56/100",
      "open_interest": "$591616567.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2505.01",
        "lastSz": "7",
        "askPx": "2505.01",
        "askSz": "871.89",
        "bidPx": "2505",
        "bidSz": "209.75",
        "open24h": "2502.35",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2330436.964",
        "vol24h": "23304369.64",
        "ts": "1748748758315",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T03:32:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110741.23 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "412.02591 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][11:32:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:32:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_113230.png
[gemini_api_caller.py][11:32:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:32:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:32:40] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:32:40] [INFO] AFC remote call 1 is done.
[_client.py][11:32:43] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:45:03] [INFO] 截图模块运行中...
[截图模块][11:45:05] [INFO]  __main__ 入口被执行
[截图模块][11:45:05] [INFO]  启动时主动清理内存...
[截图模块][11:45:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:45:05] [INFO]  已执行 pkill chrome
[截图模块][11:45:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:45:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][11:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][11:45:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][11:45:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:45:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:45:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:45:12] [INFO] 启动浏览器 (有头模式)
[截图模块][11:45:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:45:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][11:45:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:45:47] [INFO]  打开目标图表页...
[截图模块][11:45:53] [INFO]  等待5秒加载页面...
[截图模块][11:45:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:45:58] [INFO]  快捷键已发送
[截图模块][11:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_114559.png
[截图模块][11:45:59] [INFO]  关闭浏览器...
[数据收集总模块][11:46:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_114559.png
[数据收集总模块][11:46:00] [INFO] 技术指标模块运行中...
[技术指标模块][11:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:46:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:46:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:46:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:46:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][11:46:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:46:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:46:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][11:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:46:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][11:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:46:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:46:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:46:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_114559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103160.1,
        "volume": 146864.44,
        "RSI": 22.281104803354708,
        "MACD_macd": -98.6922975609923,
        "MACD_signal": -55.005142897649854,
        "ATR": 306.6770791523086,
        "ADX": 33.729901387689374,
        "Stoch_K": 16.204790981681708,
        "Stoch_D": 28.644458073204817,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 103958.79706926522,
        "BB_lower": 103258.54293073481,
        "BB_middle": 103608.67000000001,
        "EMA5": 103349.4732294847,
        "EMA21": 103557.7550280905,
        "EMA55": 103761.27777630299,
        "EMA144": 104021.06736270976,
        "EMA200": 104083.05495344776,
        "VWAP": 104064.28423899341
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108895.5,
        "volume": 175185.26,
        "RSI": 57.53815102294832,
        "MACD_macd": 375.2663602246321,
        "MACD_signal": 386.2827319748199,
        "ATR": 521.2147062068858,
        "ADX": 16.60605433486494,
        "Stoch_K": 66.68546189267944,
        "Stoch_D": 75.80173571757376,
        "StochRSI_K": 26.50758554914817,
        "StochRSI_D": 41.49966713093273,
        "BB_upper": 109741.65592853648,
        "BB_lower": 107120.57407146356,
        "BB_middle": 108431.11500000002,
        "EMA5": 108875.94511940754,
        "EMA21": 108481.8683148532,
        "EMA55": 107572.42515796296,
        "EMA144": 106153.78508025953,
        "EMA200": 105720.50823131313,
        "VWAP": 106317.02537407704
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 102324.4,
        "volume": 1205583.71,
        "RSI": 29.775841899356536,
        "MACD_macd": -637.1207064835617,
        "MACD_signal": -700.2181281172391,
        "ATR": 1320.064581403284,
        "ADX": 17.651179045481953,
        "Stoch_K": 31.091496767776988,
        "Stoch_D": 39.80972595181845,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.107457533277573,
        "BB_upper": 104802.23075757636,
        "BB_lower": 102241.26924242364,
        "BB_middle": 103521.75,
        "EMA5": 103066.09118715348,
        "EMA21": 103779.86512049183,
        "EMA55": 105172.32257045909,
        "EMA144": 105775.55417054042,
        "EMA200": 105684.23858576055,
        "VWAP": 106954.4642188251
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0054%",
      "FGI": "56/100",
      "open_interest": "$23019171053.000027 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104305.7",
        "lastSz": "0.14",
        "askPx": "104305.7",
        "askSz": "173.52",
        "bidPx": "104305.6",
        "bidSz": "3045.69",
        "open24h": "103545.8",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39311.5483",
        "vol24h": "3931154.83",
        "ts": "1748749567609",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110645.42 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T03:46:08+00:00Z"
}
[gemini_api_caller.py][11:46:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:46:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_114559.png
[gemini_api_caller.py][11:46:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:46:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:46:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:46:09] [INFO] AFC remote call 1 is done.
[_client.py][11:46:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][11:48:08] [INFO] 截图模块运行中...
[截图模块][11:48:09] [INFO]  __main__ 入口被执行
[截图模块][11:48:09] [INFO]  启动时主动清理内存...
[截图模块][11:48:09] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][11:48:09] [INFO]  已执行 pkill chrome
[截图模块][11:48:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:48:13] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][11:48:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][11:48:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][11:48:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][11:48:13] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][11:48:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][11:48:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][11:48:16] [INFO]  启动浏览器 (有头模式)
[截图模块][11:48:16] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:48:49] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][11:48:49] [INFO]  旧截图已清理，开始截图流程...
[截图模块][11:48:49] [INFO]  打开目标图表页...
[截图模块][11:48:55] [INFO]  等待5秒加载页面...
[截图模块][11:49:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][11:49:01] [INFO]  快捷键已发送
[截图模块][11:49:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_114902.png
[截图模块][11:49:02] [INFO]  关闭浏览器...
[数据收集总模块][11:49:03] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_114902.png
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:09] [INFO]  __main__ 入口被执行
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:09] [INFO]  启动时主动清理内存...
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:09] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:09] [INFO]  已执行 pkill chrome
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:16] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:16] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:49] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:49] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:49] [INFO]  打开目标图表页...
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:48:55] [INFO]  等待5秒加载页面...
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:49:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:49:01] [INFO]  快捷键已发送
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:49:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_114902.png
[数据收集总模块][11:49:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][11:49:02] [INFO]  关闭浏览器...
[数据收集总模块][11:49:03] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_114902.png
[数据收集总模块][11:49:03] [INFO] 技术指标模块运行中...
[技术指标模块][11:49:04] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][11:49:05] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][11:49:05] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][11:49:05] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][11:49:05] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][11:49:05] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][11:49:06] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:49:06] [INFO] 宏观因子模块运行中...
[宏观因子模块][11:49:07] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][11:49:08] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:49:08] [INFO] OKX 持仓模块运行中...
[get_positions.py][11:49:10] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][11:49:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][11:49:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][11:49:10] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][11:49:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][11:49:11] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][11:49:11] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][11:49:11] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_114902.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2489.48,
        "volume": 485963.53,
        "RSI": 20.900150429446725,
        "MACD_macd": -6.084776128384419,
        "MACD_signal": -3.649512184177759,
        "ATR": 14.087180197074899,
        "ADX": 37.60184785751438,
        "Stoch_K": 13.365853658536631,
        "Stoch_D": 28.301981552074462,
        "StochRSI_K": 0.0,
        "StochRSI_D": 0.0,
        "BB_upper": 2531.407724058762,
        "BB_lower": 2496.0602759412377,
        "BB_middle": 2513.734,
        "EMA5": 2499.7426811302407,
        "EMA21": 2511.792773582634,
        "EMA55": 2518.9316754983697,
        "EMA144": 2519.674338081084,
        "EMA200": 2518.3045820372217,
        "VWAP": 2522.5985012983383
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2660.0,
        "volume": 713258.5,
        "RSI": 60.59674351894936,
        "MACD_macd": -4.326733986690215,
        "MACD_signal": -7.064755058646343,
        "ATR": 24.98119597676656,
        "ADX": 14.235407376852448,
        "Stoch_K": 71.57965194109764,
        "Stoch_D": 55.81780284728628,
        "StochRSI_K": 100.0,
        "StochRSI_D": 80.76045511773641,
        "BB_upper": 2666.358488663752,
        "BB_lower": 2617.819511336248,
        "BB_middle": 2642.089,
        "EMA5": 2649.456457264656,
        "EMA21": 2648.690438740195,
        "EMA55": 2643.1650836425597,
        "EMA144": 2598.750109360387,
        "EMA200": 2581.05901152854,
        "VWAP": 2620.071080846538
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2553.64,
        "volume": 9717901.49,
        "RSI": 52.02485062514929,
        "MACD_macd": 14.085123219883371,
        "MACD_signal": 10.45763930894787,
        "ATR": 73.02803873617263,
        "ADX": 24.614672973710466,
        "Stoch_K": 53.51495147544203,
        "Stoch_D": 51.04849171551954,
        "StochRSI_K": 21.835470740430917,
        "StochRSI_D": 17.698261236408257,
        "BB_upper": 2632.1709707051655,
        "BB_lower": 2434.2270292948338,
        "BB_middle": 2533.1989999999996,
        "EMA5": 2557.17519091162,
        "EMA21": 2539.223674209031,
        "EMA55": 2538.3607271551673,
        "EMA144": 2545.609225488523,
        "EMA200": 2544.7225734659874,
        "VWAP": 2561.865459370077
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0096%",
      "FGI": "56/100",
      "open_interest": "$589251342.0000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2516.43",
        "lastSz": "17.46",
        "askPx": "2516.43",
        "askSz": "353",
        "bidPx": "2516.42",
        "bidSz": "1787.07",
        "open24h": "2510.78",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2325210.586",
        "vol24h": "23252105.86",
        "ts": "1748749751318",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T03:49:11+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110563.92 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "236.16932999999884 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][11:49:13] [INFO] prompt_text导入完成
[gemini_api_caller.py][11:49:13] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_114902.png
[gemini_api_caller.py][11:49:13] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][11:49:13] [INFO] 开始测试 Gemini API 流式调用...
[models.py][11:49:13] [INFO] AFC is enabled with max remote calls: 10.
[models.py][11:49:13] [INFO] AFC remote call 1 is done.
[_client.py][11:49:16] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][12:00:03] [INFO] 截图模块运行中...
[截图模块][12:00:05] [INFO]  __main__ 入口被执行
[截图模块][12:00:05] [INFO]  启动时主动清理内存...
[截图模块][12:00:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:00:05] [INFO]  已执行 pkill chrome
[截图模块][12:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][12:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][12:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:00:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:00:10] [INFO] 启动浏览器 (有头模式)
[截图模块][12:00:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:00:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:00:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:00:46] [INFO]  打开目标图表页...
[截图模块][12:00:53] [INFO]  等待5秒加载页面...
[截图模块][12:00:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:00:59] [INFO]  快捷键已发送
[截图模块][12:01:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_120100.png
[截图模块][12:01:00] [INFO]  关闭浏览器...
[数据收集总模块][12:01:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_120100.png
[数据收集总模块][12:01:00] [INFO] 技术指标模块运行中...
[技术指标模块][12:01:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:01:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:01:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:01:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:01:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:01:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:01:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][12:01:06] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:01:06] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:01:07] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][12:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:01:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:01:08] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][12:01:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:01:08] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:01:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:01:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_120100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103221.0,
        "volume": 81906.25,
        "RSI": 24.320771455314997,
        "MACD_macd": -73.0813096981583,
        "MACD_signal": -44.136836884171295,
        "ATR": 273.3504922913244,
        "ADX": 35.63165553017509,
        "Stoch_K": 22.50979460999705,
        "Stoch_D": 38.11148549971307,
        "StochRSI_K": 0.0,
        "StochRSI_D": 2.259498204721389,
        "BB_upper": 103916.91214270567,
        "BB_lower": 103354.74785729434,
        "BB_middle": 103635.83,
        "EMA5": 103444.15984422705,
        "EMA21": 103597.52644573104,
        "EMA55": 103785.56750452117,
        "EMA144": 104051.84386421395,
        "EMA200": 104119.86448827629,
        "VWAP": 104096.3858350734
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109166.0,
        "volume": 287544.82,
        "RSI": 68.17085333936917,
        "MACD_macd": 387.5036735902104,
        "MACD_signal": 388.90156649061373,
        "ATR": 556.4939532546124,
        "ADX": 16.862553854637515,
        "Stoch_K": 93.6373276776246,
        "Stoch_D": 79.20919471438883,
        "StochRSI_K": 80.22962029016098,
        "StochRSI_D": 45.66924937814671,
        "BB_upper": 109790.51912596704,
        "BB_lower": 106870.97087403295,
        "BB_middle": 108330.745,
        "EMA5": 108866.1676791113,
        "EMA21": 108440.5201050352,
        "EMA55": 107528.54082036323,
        "EMA144": 106162.82050998141,
        "EMA200": 105758.2316637163,
        "VWAP": 106295.52666255753
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0055%",
      "FGI": "56/100",
      "open_interest": "$23023578050.000023 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104363.8",
        "lastSz": "0.19",
        "askPx": "104363.8",
        "askSz": "791.17",
        "bidPx": "104363.7",
        "bidSz": "293.37",
        "open24h": "103567.1",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39327.0422",
        "vol24h": "3932704.22",
        "ts": "1748750468619",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "110628.0 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T04:01:08+00:00Z"
}
[gemini_api_caller.py][12:01:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:01:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_120100.png
[gemini_api_caller.py][12:01:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:01:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:01:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:01:10] [INFO] AFC remote call 1 is done.
[_client.py][12:01:14] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][12:01:57] [INFO] 截图模块运行中...
[截图模块][12:01:58] [INFO]  __main__ 入口被执行
[截图模块][12:01:58] [INFO]  启动时主动清理内存...
[截图模块][12:01:58] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:01:58] [INFO]  已执行 pkill chrome
[截图模块][12:02:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:02:01] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][12:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][12:02:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:02:01] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:02:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:02:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:02:04] [INFO]  启动浏览器 (有头模式)
[截图模块][12:02:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:02:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:02:20] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:02:20] [INFO]  打开目标图表页...
[截图模块][12:02:26] [INFO]  等待5秒加载页面...
[截图模块][12:02:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:02:32] [INFO]  快捷键已发送
[截图模块][12:02:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_120233.png
[截图模块][12:02:33] [INFO]  关闭浏览器...
[数据收集总模块][12:02:33] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_120233.png
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:01:58] [INFO]  __main__ 入口被执行
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:01:58] [INFO]  启动时主动清理内存...
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:01:58] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:01:58] [INFO]  已执行 pkill chrome
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:02] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:04] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:04] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:20] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:20] [INFO]  打开目标图表页...
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:26] [INFO]  等待5秒加载页面...
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:32] [INFO]  快捷键已发送
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_120233.png
[数据收集总模块][12:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:02:33] [INFO]  关闭浏览器...
[数据收集总模块][12:02:33] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_120233.png
[数据收集总模块][12:02:33] [INFO] 技术指标模块运行中...
[技术指标模块][12:02:34] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:02:35] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:02:35] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:02:35] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:02:35] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:02:36] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:02:36] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:02:36] [INFO] 宏观因子模块运行中...
[宏观因子模块][12:02:37] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][12:02:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:02:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:02:40] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][12:02:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:02:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:02:40] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][12:02:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:02:41] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:02:41] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:02:41] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_120233.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2494.92,
        "volume": 385325.83,
        "RSI": 24.39623711049481,
        "MACD_macd": -4.7497805533021165,
        "MACD_signal": -3.0432656750814218,
        "ATR": 13.603669673047493,
        "ADX": 36.66031472118087,
        "Stoch_K": 26.328679892236146,
        "Stoch_D": 39.283280810573835,
        "StochRSI_K": 0.0,
        "StochRSI_D": 9.60615661856387,
        "BB_upper": 2528.8989236693546,
        "BB_lower": 2501.5920763306453,
        "BB_middle": 2515.2455,
        "EMA5": 2504.874021695361,
        "EMA21": 2514.024335108241,
        "EMA55": 2520.1197121591003,
        "EMA144": 2520.9967255811457,
        "EMA200": 2519.9170784357675,
        "VWAP": 2523.070998911207
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2657.44,
        "volume": 1408038.93,
        "RSI": 59.212217827265555,
        "MACD_macd": -6.12553192635778,
        "MACD_signal": -7.7536197763011225,
        "ATR": 26.84600081110183,
        "ADX": 14.782283549063886,
        "Stoch_K": 62.519955790249234,
        "Stoch_D": 44.5331368455523,
        "StochRSI_K": 100.0,
        "StochRSI_D": 66.05551787660285,
        "BB_upper": 2665.197541094806,
        "BB_lower": 2614.6324589051937,
        "BB_middle": 2639.915,
        "EMA5": 2644.184685896984,
        "EMA21": 2647.559964740831,
        "EMA55": 2642.7065380369536,
        "EMA144": 2599.4205849362875,
        "EMA200": 2582.5099394578865,
        "VWAP": 2619.182191821542
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0091%",
      "FGI": "56/100",
      "open_interest": "$588653573.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2513.7",
        "lastSz": "59.66",
        "askPx": "2513.7",
        "askSz": "578.81",
        "bidPx": "2513.69",
        "bidSz": "1417.47",
        "open24h": "2507.8",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2324658.996",
        "vol24h": "23246589.96",
        "ts": "1748750561409",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T04:02:41+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "110612.29 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "-153.99 piece",
      "avgPrice": "2531.7366666666666667 USDT",
      "Unrealized Gains": "284.3682000000005 USDT",
      "liqPrice": "9677.9348430828 USDT",
      "lever": "100 x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][12:02:43] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:02:43] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_120233.png
[gemini_api_caller.py][12:02:43] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:02:43] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:02:43] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:02:43] [INFO] AFC remote call 1 is done.
[_client.py][12:02:47] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][12:08:45] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][12:08:45] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][12:08:45] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][12:08:45] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][12:08:45] [INFO] 类型为 close，需要实现平仓逻辑。
[_client.py][12:08:45] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][12:08:45] [INFO] 当前多单持仓为空,查看挂单信息
[_client.py][12:08:45] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][12:08:45] [INFO] 平仓结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2558475977236549632', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1748750925894'}], 'inTime': '1748750925893686', 'msg': '', 'outTime': '1748750925896452'}
[_client.py][12:08:46] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[trade_api_eth.py][12:08:46] [ERROR] 获取挂单信息失败: list index out of range
[trade_api_eth.py][12:08:46] [INFO] trade_result: {'status': 'close', 'message': 'Close logic not implemented'}
[trade_api_eth.py][12:08:46] [INFO] execution: {
    "operation_comment": "当前ETHUSDT空头仓位已获利，鉴于M15极度超卖且高时间框架仍为多头趋势，短期内存在技术性反弹需求。为锁定利润并规避反弹风险，建议立即平仓现有空头仓位。平仓后，等待市场给出明确的做多信号再考虑入场。",
    "type": "close",
    "price": 2513.69,
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": 153.99,
    "market": true,
    "expected_winrate": 0.7008,
    "expected_return": 0.0059,
    "trade_RR_ratio": 1.75,
    "signal_strength": 0.75,
    "risk_management_strategy": "当前操作为平仓锁定利润，风险管理侧重于避免利润回吐。平仓后，将等待明确的做多信号，并根据ATR波动率、账户权益和每笔交易最大亏损（RiskPerTrade=1%）来确定新的仓位大小。考虑到当前市场极度贪婪情绪（FGI=56），建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。在美联储会议纪要公布前，考虑减半仓位或将止损上移至盈亏平衡点，以规避突发消息面的影响。如果出现交易所大规模资金外流或链上数据急剧恶化等黑天鹅事件，将立即平仓所有头寸并暂停交易。",
    "position_action": "平仓现有空头仓位",
    "risk_assessment": "当前市场短期波动性较高，但长期趋势仍为多头。平仓操作风险较低，主要风险在于平仓后价格继续下跌导致错过更多利润。但考虑到潜在反弹风险，锁定利润是更稳健的选择。后续做多需严格控制风险，等待明确入场信号。"
}
[trade_api_eth.py][12:08:46] [INFO] 交易API调用完成
[数据收集总模块][12:15:03] [INFO] 截图模块运行中...
[截图模块][12:15:05] [INFO]  __main__ 入口被执行
[截图模块][12:15:05] [INFO]  启动时主动清理内存...
[截图模块][12:15:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:15:05] [INFO]  已执行 pkill chrome
[截图模块][12:15:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:15:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][12:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][12:15:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:15:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:15:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:15:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:15:12] [INFO] 启动浏览器 (有头模式)
[截图模块][12:15:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:15:50] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:15:50] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:15:50] [INFO]  打开目标图表页...
[截图模块][12:15:55] [INFO]  等待5秒加载页面...
[截图模块][12:16:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:16:01] [INFO]  快捷键已发送
[截图模块][12:16:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_121602.png
[截图模块][12:16:02] [INFO]  关闭浏览器...
[数据收集总模块][12:16:02] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_121602.png
[数据收集总模块][12:16:02] [INFO] 技术指标模块运行中...
[技术指标模块][12:16:04] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:16:04] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:16:04] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:16:04] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:16:04] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:16:05] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:16:05] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:16:05] [INFO] 宏观因子模块运行中...
[数据收集总模块][12:16:08] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:16:08] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:16:09] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][12:16:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:16:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:16:09] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][12:16:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:16:10] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:16:10] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:16:10] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_121602.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103450.0,
        "volume": 96282.32,
        "RSI": 34.66113696277725,
        "MACD_macd": -45.50287062964344,
        "MACD_signal": -36.923887279041004,
        "ATR": 251.00438132180057,
        "ADX": 30.994834686345285,
        "Stoch_K": 47.21878862793572,
        "Stoch_D": 45.083529271689805,
        "StochRSI_K": 0.0,
        "StochRSI_D": 13.196653739955854,
        "BB_upper": 103859.7980199454,
        "BB_lower": 103445.3619800546,
        "BB_middle": 103652.58,
        "EMA5": 103555.73976634056,
        "EMA21": 103635.18165259958,
        "EMA55": 103807.35415564946,
        "EMA144": 104071.58002974777,
        "EMA200": 104140.82581560677,
        "VWAP": 104116.0327750882
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109166.0,
        "volume": 287544.82,
        "RSI": 68.17085333936917,
        "MACD_macd": 387.5036735902104,
        "MACD_signal": 388.90156649061373,
        "ATR": 556.4939532546124,
        "ADX": 16.862553854637515,
        "Stoch_K": 93.6373276776246,
        "Stoch_D": 79.20919471438883,
        "StochRSI_K": 80.22962029016098,
        "StochRSI_D": 45.66924937814671,
        "BB_upper": 109790.51912596704,
        "BB_lower": 106870.97087403295,
        "BB_middle": 108330.745,
        "EMA5": 108866.1676791113,
        "EMA21": 108440.5201050352,
        "EMA55": 107528.54082036323,
        "EMA144": 106162.82050998141,
        "EMA200": 105758.2316637163,
        "VWAP": 106295.52666255753
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0052%",
      "FGI": "56/100",
      "open_interest": "$23030731730.00001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104384.6",
        "lastSz": "0.01",
        "askPx": "104384.6",
        "askSz": "580.35",
        "bidPx": "104384.5",
        "bidSz": "709.12",
        "open24h": "103533.5",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39302.2783",
        "vol24h": "3930227.83",
        "ts": "1748751370214",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "111012.01 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T04:16:10+00:00Z"
}
[gemini_api_caller.py][12:16:12] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:16:12] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_121602.png
[gemini_api_caller.py][12:16:12] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:16:12] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:16:12] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:16:12] [INFO] AFC remote call 1 is done.
[_client.py][12:16:16] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][12:17:05] [INFO] 截图模块运行中...
[截图模块][12:17:07] [INFO]  __main__ 入口被执行
[截图模块][12:17:07] [INFO]  启动时主动清理内存...
[截图模块][12:17:07] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:17:07] [INFO]  已执行 pkill chrome
[截图模块][12:17:09] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:17:09] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:17:09] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][12:17:09] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][12:17:09] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:17:09] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:17:09] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:17:11] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:17:14] [INFO]  启动浏览器 (有头模式)
[截图模块][12:17:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:17:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:17:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:17:47] [INFO]  打开目标图表页...
[截图模块][12:17:53] [INFO]  等待5秒加载页面...
[截图模块][12:17:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:17:59] [INFO]  快捷键已发送
[截图模块][12:18:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_121800.png
[截图模块][12:18:00] [INFO]  关闭浏览器...
[数据收集总模块][12:18:00] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_121800.png
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:07] [INFO]  __main__ 入口被执行
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:07] [INFO]  启动时主动清理内存...
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:07] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:07] [INFO]  已执行 pkill chrome
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:09] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:11] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:14] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:47] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:47] [INFO]  打开目标图表页...
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:53] [INFO]  等待5秒加载页面...
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:17:59] [INFO]  快捷键已发送
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:18:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_121800.png
[数据收集总模块][12:18:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:18:00] [INFO]  关闭浏览器...
[数据收集总模块][12:18:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_121800.png
[数据收集总模块][12:18:00] [INFO] 技术指标模块运行中...
[技术指标模块][12:18:02] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:18:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:18:02] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:18:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:18:02] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:18:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:18:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:18:03] [INFO] 宏观因子模块运行中...
[宏观因子模块][12:18:04] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][12:18:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:18:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:18:07] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][12:18:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:18:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:18:07] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][12:18:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:18:08] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:18:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:18:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_121800.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2503.49,
        "volume": 399621.48,
        "RSI": 31.617099612294652,
        "MACD_macd": -3.5282447687363856,
        "MACD_signal": -2.6161461565568,
        "ATR": 12.724230783205975,
        "ADX": 31.837378321409105,
        "Stoch_K": 45.21141110545059,
        "Stoch_D": 45.06766024043471,
        "StochRSI_K": 0.0,
        "StochRSI_D": 22.34308245321492,
        "BB_upper": 2526.271507676561,
        "BB_lower": 2506.635492323439,
        "BB_middle": 2516.4535,
        "EMA5": 2509.8510325430416,
        "EMA21": 2515.9347143399095,
        "EMA55": 2521.0344620710257,
        "EMA144": 2521.189507904989,
        "EMA200": 2519.9156352893924,
        "VWAP": 2523.498379300859
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2657.44,
        "volume": 1408038.93,
        "RSI": 59.212217827265555,
        "MACD_macd": -6.12553192635778,
        "MACD_signal": -7.7536197763011225,
        "ATR": 26.84600081110183,
        "ADX": 14.782283549063886,
        "Stoch_K": 62.519955790249234,
        "Stoch_D": 44.5331368455523,
        "StochRSI_K": 100.0,
        "StochRSI_D": 66.05551787660285,
        "BB_upper": 2665.197541094806,
        "BB_lower": 2614.6324589051937,
        "BB_middle": 2639.915,
        "EMA5": 2644.184685896984,
        "EMA21": 2647.559964740831,
        "EMA55": 2642.7065380369536,
        "EMA144": 2599.4205849362875,
        "EMA200": 2582.5099394578865,
        "VWAP": 2619.182191821542
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0086%",
      "FGI": "56/100",
      "open_interest": "$588726942.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2513.15",
        "lastSz": "0.03",
        "askPx": "2513.16",
        "askSz": "2.42",
        "bidPx": "2513.15",
        "bidSz": "1789.36",
        "open24h": "2503.31",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2316835.43",
        "vol24h": "23168354.3",
        "ts": "1748751488118",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T04:18:08+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][12:18:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:18:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_121800.png
[gemini_api_caller.py][12:18:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:18:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:18:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:18:10] [INFO] AFC remote call 1 is done.
[_client.py][12:18:14] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][12:23:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][12:23:03] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][12:23:03] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][12:23:03] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][12:23:03] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][12:23:03] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][12:23:03] [INFO] execution: {
    "operation_comment": "市场处于震荡筑底阶段，缺乏明确趋势信号。尽管15m RSI超卖且存在潜在双底，但MACD和EMA仍偏空，且缺乏放量反弹确认。建议观望，等待价格突破关键阻力或支撑位，以获得更明确的交易信号。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": 0.5979,
    "expected_return": 0.00849,
    "trade_RR_ratio": 1.5,
    "signal_strength": 0.396675,
    "risk_management_strategy": "当前市场处于震荡筑底阶段，多空力量胶着，缺乏明确趋势。波动率相对较低，但随时可能因突破而放大。建议等待更明确的信号再入场。避免高杠杆操作，并保持足够的现金头寸以应对市场不确定性。本次交易不建议立即执行。",
    "position_action": "N/A",
    "risk_assessment": "当前市场处于震荡筑底阶段，多空力量胶着，缺乏明确趋势。波动率相对较低，但随时可能因突破而放大。风险等级为中等，建议等待更明确的信号再入场。"
}
[trade_api_eth.py][12:23:03] [INFO] 交易API调用完成
[trade_api_eth.py][12:23:03] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][12:30:03] [INFO] 截图模块运行中...
[截图模块][12:30:05] [INFO]  __main__ 入口被执行
[截图模块][12:30:05] [INFO]  启动时主动清理内存...
[截图模块][12:30:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:30:05] [INFO]  已执行 pkill chrome
[截图模块][12:30:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:30:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][12:30:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][12:30:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:30:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:30:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:30:10] [INFO] 启动浏览器 (有头模式)
[截图模块][12:30:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:30:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:30:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:30:46] [INFO]  打开目标图表页...
[截图模块][12:30:52] [INFO]  等待5秒加载页面...
[截图模块][12:30:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:30:58] [INFO]  快捷键已发送
[截图模块][12:30:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_123059.png
[截图模块][12:30:59] [INFO]  关闭浏览器...
[数据收集总模块][12:30:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_123059.png
[数据收集总模块][12:30:59] [INFO] 技术指标模块运行中...
[技术指标模块][12:31:00] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:31:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:31:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:31:01] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:31:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:31:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:31:02] [INFO] 宏观因子模块运行中...
[数据收集总模块][12:31:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:31:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:31:05] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][12:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:31:06] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][12:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:31:06] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:31:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:31:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_123059.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103518.6,
        "volume": 58761.53,
        "RSI": 38.96182749224358,
        "MACD_macd": -32.987086007749895,
        "MACD_signal": -34.85037946824343,
        "ATR": 220.297361142107,
        "ADX": 25.94186554773554,
        "Stoch_K": 44.60587326120646,
        "Stoch_D": 40.18498244509395,
        "StochRSI_K": 6.7785531894719,
        "StochRSI_D": 19.5879709540189,
        "BB_upper": 103846.65577343122,
        "BB_lower": 103478.53422656878,
        "BB_middle": 103662.595,
        "EMA5": 103608.60964951082,
        "EMA21": 103653.70769631931,
        "EMA55": 103823.2852763278,
        "EMA144": 104105.22817324034,
        "EMA200": 104184.44310546294,
        "VWAP": 104136.98385411996
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109166.0,
        "volume": 287544.82,
        "RSI": 68.17085333936917,
        "MACD_macd": 387.5036735902104,
        "MACD_signal": 388.90156649061373,
        "ATR": 556.4939532546124,
        "ADX": 16.862553854637515,
        "Stoch_K": 93.6373276776246,
        "Stoch_D": 79.20919471438883,
        "StochRSI_K": 80.22962029016098,
        "StochRSI_D": 45.66924937814671,
        "BB_upper": 109790.51912596704,
        "BB_lower": 106870.97087403295,
        "BB_middle": 108330.745,
        "EMA5": 108866.1676791113,
        "EMA21": 108440.5201050352,
        "EMA55": 107528.54082036323,
        "EMA144": 106162.82050998141,
        "EMA200": 105758.2316637163,
        "VWAP": 106295.52666255753
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0045%",
      "FGI": "56/100",
      "open_interest": "$23029796536.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104541.1",
        "lastSz": "6.41",
        "askPx": "104541.1",
        "askSz": "671.91",
        "bidPx": "104541",
        "bidSz": "519.74",
        "open24h": "103741.7",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39195.4152",
        "vol24h": "3919541.52",
        "ts": "1748752266719",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T04:31:07+00:00Z"
}
[gemini_api_caller.py][12:31:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:31:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_123059.png
[gemini_api_caller.py][12:31:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:31:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:31:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:31:09] [INFO] AFC remote call 1 is done.
[_client.py][12:31:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][12:31:55] [INFO] 截图模块运行中...
[截图模块][12:31:57] [INFO]  __main__ 入口被执行
[截图模块][12:31:57] [INFO]  启动时主动清理内存...
[截图模块][12:31:57] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:31:57] [INFO]  已执行 pkill chrome
[截图模块][12:31:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:31:59] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][12:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][12:31:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:31:59] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:31:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:32:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:32:02] [INFO]  启动浏览器 (有头模式)
[截图模块][12:32:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:32:19] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:32:19] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:32:19] [INFO]  打开目标图表页...
[截图模块][12:32:26] [INFO]  等待5秒加载页面...
[截图模块][12:32:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:32:31] [INFO]  快捷键已发送
[截图模块][12:32:32] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_123232.png
[截图模块][12:32:32] [INFO]  关闭浏览器...
[数据收集总模块][12:32:33] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_123232.png
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:57] [INFO]  __main__ 入口被执行
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:57] [INFO]  启动时主动清理内存...
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:57] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:57] [INFO]  已执行 pkill chrome
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:31:59] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:01] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:02] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:19] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:19] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:19] [INFO]  打开目标图表页...
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:26] [INFO]  等待5秒加载页面...
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:31] [INFO]  快捷键已发送
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:32] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_123232.png
[数据收集总模块][12:32:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:32:32] [INFO]  关闭浏览器...
[数据收集总模块][12:32:33] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_123232.png
[数据收集总模块][12:32:33] [INFO] 技术指标模块运行中...
[技术指标模块][12:32:34] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:32:34] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:32:34] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:32:35] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:32:35] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:32:35] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:32:35] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:32:35] [INFO] 宏观因子模块运行中...
[宏观因子模块][12:32:36] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][12:32:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:32:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:32:39] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][12:32:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:32:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:32:39] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][12:32:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:32:40] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:32:40] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:32:40] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_123232.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2510.96,
        "volume": 402016.51,
        "RSI": 40.722318621359776,
        "MACD_macd": -2.792323638594553,
        "MACD_signal": -2.390395057559958,
        "ATR": 10.801804172859292,
        "ADX": 26.499029491167462,
        "Stoch_K": 46.30975143403474,
        "Stoch_D": 38.1790080537695,
        "StochRSI_K": 28.818511278251396,
        "StochRSI_D": 23.973288813462375,
        "BB_upper": 2525.0162457838906,
        "BB_lower": 2509.490754216109,
        "BB_middle": 2517.2535,
        "EMA5": 2513.0315488145625,
        "EMA21": 2517.179437214106,
        "EMA55": 2521.770292544891,
        "EMA144": 2522.2334805925343,
        "EMA200": 2521.251173971359,
        "VWAP": 2523.882161812236
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2657.44,
        "volume": 1408038.93,
        "RSI": 59.212217827265555,
        "MACD_macd": -6.12553192635778,
        "MACD_signal": -7.7536197763011225,
        "ATR": 26.84600081110183,
        "ADX": 14.782283549063886,
        "Stoch_K": 62.519955790249234,
        "Stoch_D": 44.5331368455523,
        "StochRSI_K": 100.0,
        "StochRSI_D": 66.05551787660285,
        "BB_upper": 2665.197541094806,
        "BB_lower": 2614.6324589051937,
        "BB_middle": 2639.915,
        "EMA5": 2644.184685896984,
        "EMA21": 2647.559964740831,
        "EMA55": 2642.7065380369536,
        "EMA144": 2599.4205849362875,
        "EMA200": 2582.5099394578865,
        "VWAP": 2619.182191821542
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0083%",
      "FGI": "56/100",
      "open_interest": "$588167695.0000004 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2518.85",
        "lastSz": "0.14",
        "askPx": "2518.85",
        "askSz": "702.68",
        "bidPx": "2518.84",
        "bidSz": "1528.57",
        "open24h": "2519.99",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2266209.59",
        "vol24h": "22662095.9",
        "ts": "1748752360219",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T04:32:40+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][12:32:42] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:32:42] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_123232.png
[gemini_api_caller.py][12:32:42] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:32:42] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:32:42] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:32:42] [INFO] AFC remote call 1 is done.
[_client.py][12:32:45] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][12:45:03] [INFO] 截图模块运行中...
[截图模块][12:45:04] [INFO]  __main__ 入口被执行
[截图模块][12:45:04] [INFO]  启动时主动清理内存...
[截图模块][12:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:45:04] [INFO]  已执行 pkill chrome
[截图模块][12:45:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:45:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][12:45:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][12:45:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][12:45:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:45:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:45:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:45:11] [INFO] 启动浏览器 (有头模式)
[截图模块][12:45:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:45:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][12:45:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:45:47] [INFO]  打开目标图表页...
[截图模块][12:45:54] [INFO]  等待5秒加载页面...
[截图模块][12:45:59] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:46:00] [INFO]  快捷键已发送
[截图模块][12:46:01] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_124601.png
[截图模块][12:46:01] [INFO]  关闭浏览器...
[数据收集总模块][12:46:01] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_124601.png
[数据收集总模块][12:46:01] [INFO] 技术指标模块运行中...
[技术指标模块][12:46:02] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:46:03] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:46:03] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:46:04] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:46:04] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:46:04] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:46:04] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:46:04] [INFO] 宏观因子模块运行中...
[数据收集总模块][12:46:07] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:46:07] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:46:08] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][12:46:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:46:09] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][12:46:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:46:09] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:46:09] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:46:10] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_124601.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103632.6,
        "volume": 62443.54,
        "RSI": 47.439301782033255,
        "MACD_macd": -23.54497234764858,
        "MACD_signal": -35.44106786517935,
        "ATR": 192.2508948330161,
        "ADX": 21.648047937784952,
        "Stoch_K": 43.425925925927274,
        "Stoch_D": 47.307098765432535,
        "StochRSI_K": 32.81162199705332,
        "StochRSI_D": 36.47291253293344,
        "BB_upper": 103845.93018205937,
        "BB_lower": 103479.90981794063,
        "BB_middle": 103662.92,
        "EMA5": 103653.61447426621,
        "EMA21": 103667.23227520697,
        "EMA55": 103839.29504500004,
        "EMA144": 104157.17304630828,
        "EMA200": 104255.41723317832,
        "VWAP": 104152.9638079116
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 109166.0,
        "volume": 287544.82,
        "RSI": 68.17085333936917,
        "MACD_macd": 387.5036735902104,
        "MACD_signal": 388.90156649061373,
        "ATR": 556.4939532546124,
        "ADX": 16.862553854637515,
        "Stoch_K": 93.6373276776246,
        "Stoch_D": 79.20919471438883,
        "StochRSI_K": 80.22962029016098,
        "StochRSI_D": 45.66924937814671,
        "BB_upper": 109790.51912596704,
        "BB_lower": 106870.97087403295,
        "BB_middle": 108330.745,
        "EMA5": 108866.1676791113,
        "EMA21": 108440.5201050352,
        "EMA55": 107528.54082036323,
        "EMA144": 106162.82050998141,
        "EMA200": 105758.2316637163,
        "VWAP": 106295.52666255753
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0042%",
      "FGI": "56/100",
      "open_interest": "$23032990332.00002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104650.7",
        "lastSz": "1.28",
        "askPx": "104650.8",
        "askSz": "805.37",
        "bidPx": "104650.7",
        "bidSz": "616.84",
        "open24h": "103717.4",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39462.917",
        "vol24h": "3946291.7",
        "ts": "1748753169710",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T04:46:10+00:00Z"
}
[gemini_api_caller.py][12:46:11] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:46:11] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_124601.png
[gemini_api_caller.py][12:46:11] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:46:11] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:46:11] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:46:11] [INFO] AFC remote call 1 is done.
[_client.py][12:46:14] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][12:46:59] [INFO] 截图模块运行中...
[截图模块][12:47:00] [INFO]  __main__ 入口被执行
[截图模块][12:47:00] [INFO]  启动时主动清理内存...
[截图模块][12:47:00] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][12:47:00] [INFO]  已执行 pkill chrome
[截图模块][12:47:04] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:47:04] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][12:47:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][12:47:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][12:47:04] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][12:47:04] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][12:47:04] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][12:47:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][12:47:08] [INFO]  启动浏览器 (有头模式)
[截图模块][12:47:08] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:47:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][12:47:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][12:47:18] [INFO]  打开目标图表页...
[截图模块][12:47:24] [INFO]  等待5秒加载页面...
[截图模块][12:47:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][12:47:30] [INFO]  快捷键已发送
[截图模块][12:47:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_124731.png
[截图模块][12:47:31] [INFO]  关闭浏览器...
[数据收集总模块][12:47:31] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_124731.png
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:00] [INFO]  __main__ 入口被执行
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:00] [INFO]  启动时主动清理内存...
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:00] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:00] [INFO]  已执行 pkill chrome
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:04] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:06] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:08] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:08] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:18] [INFO]  打开目标图表页...
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:24] [INFO]  等待5秒加载页面...
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:29] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:30] [INFO]  快捷键已发送
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:31] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_124731.png
[数据收集总模块][12:47:31] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][12:47:31] [INFO]  关闭浏览器...
[数据收集总模块][12:47:31] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_124731.png
[数据收集总模块][12:47:31] [INFO] 技术指标模块运行中...
[技术指标模块][12:47:32] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][12:47:33] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][12:47:33] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][12:47:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][12:47:33] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][12:47:34] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][12:47:34] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:47:34] [INFO] 宏观因子模块运行中...
[宏观因子模块][12:47:35] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][12:47:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:47:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][12:47:38] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][12:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][12:47:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][12:47:38] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][12:47:39] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][12:47:39] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][12:47:39] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][12:47:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_124731.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2512.61,
        "volume": 283085.19,
        "RSI": 43.098297457331235,
        "MACD_macd": -2.575081639427026,
        "MACD_signal": -2.295679800186763,
        "ATR": 10.346702483808311,
        "ADX": 22.9069277323909,
        "Stoch_K": 43.68181818181876,
        "Stoch_D": 45.62121212121232,
        "StochRSI_K": 38.21101067316987,
        "StochRSI_D": 35.18642273280469,
        "BB_upper": 2524.75067968541,
        "BB_lower": 2510.3993203145897,
        "BB_middle": 2517.575,
        "EMA5": 2514.0673232218433,
        "EMA21": 2517.8020187155935,
        "EMA55": 2522.3889036877035,
        "EMA144": 2524.41129536669,
        "EMA200": 2524.3234761230888,
        "VWAP": 2524.113286564458
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2657.44,
        "volume": 1408038.93,
        "RSI": 59.212217827265555,
        "MACD_macd": -6.12553192635778,
        "MACD_signal": -7.7536197763011225,
        "ATR": 26.84600081110183,
        "ADX": 14.782283549063886,
        "Stoch_K": 62.519955790249234,
        "Stoch_D": 44.5331368455523,
        "StochRSI_K": 100.0,
        "StochRSI_D": 66.05551787660285,
        "BB_upper": 2665.197541094806,
        "BB_lower": 2614.6324589051937,
        "BB_middle": 2639.915,
        "EMA5": 2644.184685896984,
        "EMA21": 2647.559964740831,
        "EMA55": 2642.7065380369536,
        "EMA144": 2599.4205849362875,
        "EMA200": 2582.5099394578865,
        "VWAP": 2619.182191821542
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0079%",
      "FGI": "56/100",
      "open_interest": "$586090192.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2521.3",
        "lastSz": "13.81",
        "askPx": "2521.31",
        "askSz": "473.95",
        "bidPx": "2521.3",
        "bidSz": "1904.04",
        "open24h": "2519.89",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2281211.899",
        "vol24h": "22812118.99",
        "ts": "1748753259313",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T04:47:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][12:47:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][12:47:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_124731.png
[gemini_api_caller.py][12:47:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][12:47:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][12:47:41] [INFO] AFC is enabled with max remote calls: 10.
[models.py][12:47:41] [INFO] AFC remote call 1 is done.
[_client.py][12:47:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][12:48:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][12:48:36] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][12:48:36] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][12:48:36] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][12:48:36] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][12:48:36] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][12:48:36] [INFO] execution: {
    "operation_comment": "当前市场缺乏明确趋势，多空信号冲突，风险回报比不佳，建议观望，等待更清晰的入场信号。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "N/A",
    "expected_return": "N/A",
    "trade_RR_ratio": "N/A",
    "signal_strength": "N/A",
    "risk_management_strategy": "在市场无明确趋势时，保持观望是最佳风险管理策略。避免不必要的交易，保存本金，等待高胜率机会。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等，主要风险来源于趋势不明确和多空信号冲突，可能导致频繁止损。建议规避风险，不进行操作。"
}
[trade_api_eth.py][12:48:36] [INFO] 交易API调用完成
[trade_api_eth.py][12:48:36] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][13:00:03] [INFO] 截图模块运行中...
[截图模块][13:00:05] [INFO]  __main__ 入口被执行
[截图模块][13:00:05] [INFO]  启动时主动清理内存...
[截图模块][13:00:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:00:05] [INFO]  已执行 pkill chrome
[截图模块][13:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:00:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:00:11] [INFO] 启动浏览器 (有头模式)
[截图模块][13:00:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:00:48] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:00:48] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:00:48] [INFO]  打开目标图表页...
[截图模块][13:00:55] [INFO]  等待5秒加载页面...
[截图模块][13:01:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:01:01] [INFO]  快捷键已发送
[截图模块][13:01:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_130102.png
[截图模块][13:01:02] [INFO]  关闭浏览器...
[数据收集总模块][13:01:02] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_130102.png
[数据收集总模块][13:01:02] [INFO] 技术指标模块运行中...
[技术指标模块][13:01:03] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:01:04] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:01:04] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:01:04] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:01:04] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:01:04] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:01:05] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:01:05] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:01:07] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:01:07] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:01:08] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:01:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:01:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:01:09] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:01:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:01:09] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:01:09] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:01:10] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_130102.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103585.5,
        "volume": 33010.14,
        "RSI": 42.99827421729473,
        "MACD_macd": -22.63432105751417,
        "MACD_signal": -38.38051928778989,
        "ATR": 200.2894347203268,
        "ADX": 21.70362004830185,
        "Stoch_K": 32.523148148148145,
        "Stoch_D": 51.058914306463784,
        "StochRSI_K": 19.173899207575325,
        "StochRSI_D": 41.465270215178016,
        "BB_upper": 103845.90457998308,
        "BB_lower": 103477.31542001692,
        "BB_middle": 103661.61,
        "EMA5": 103664.12171139932,
        "EMA21": 103670.69167924009,
        "EMA55": 103845.64212992776,
        "EMA144": 104152.39898332943,
        "EMA200": 104243.87832619794,
        "VWAP": 104166.03820353
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22985026809.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104574.7",
        "lastSz": "0.15",
        "askPx": "104574.8",
        "askSz": "429.39",
        "bidPx": "104574.7",
        "bidSz": "362.3",
        "open24h": "103824.6",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39521.385",
        "vol24h": "3952138.5",
        "ts": "1748754069321",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:01:10+00:00Z"
}
[gemini_api_caller.py][13:01:11] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:01:11] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_130102.png
[gemini_api_caller.py][13:01:11] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:01:11] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:01:12] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:01:12] [INFO] AFC remote call 1 is done.
[_client.py][13:01:15] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:01:57] [INFO] 截图模块运行中...
[截图模块][13:01:58] [INFO]  __main__ 入口被执行
[截图模块][13:01:58] [INFO]  启动时主动清理内存...
[截图模块][13:01:59] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:01:59] [INFO]  已执行 pkill chrome
[截图模块][13:02:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:02:01] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:02:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:02:01] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:02:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:02:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:02:05] [INFO]  启动浏览器 (有头模式)
[截图模块][13:02:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:02:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:02:20] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:02:20] [INFO]  打开目标图表页...
[截图模块][13:02:26] [INFO]  等待5秒加载页面...
[截图模块][13:02:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:02:32] [INFO]  快捷键已发送
[截图模块][13:02:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_130233.png
[截图模块][13:02:33] [INFO]  关闭浏览器...
[数据收集总模块][13:02:33] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_130233.png
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:01:58] [INFO]  __main__ 入口被执行
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:01:58] [INFO]  启动时主动清理内存...
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:01:59] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:01:59] [INFO]  已执行 pkill chrome
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:01] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:03] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:05] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:05] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:20] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:20] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:20] [INFO]  打开目标图表页...
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:26] [INFO]  等待5秒加载页面...
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:32] [INFO]  快捷键已发送
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_130233.png
[数据收集总模块][13:02:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:02:33] [INFO]  关闭浏览器...
[数据收集总模块][13:02:33] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_130233.png
[数据收集总模块][13:02:33] [INFO] 技术指标模块运行中...
[技术指标模块][13:02:34] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:02:35] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:02:35] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:02:35] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:02:35] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:02:35] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:02:36] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:02:36] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:02:36] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:02:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:02:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:02:39] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:02:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:02:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:02:40] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:02:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:02:40] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:02:40] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:02:41] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_130233.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2508.4,
        "volume": 204831.18,
        "RSI": 34.669231758150005,
        "MACD_macd": -2.4228908640739064,
        "MACD_signal": -2.224623995849922,
        "ATR": 10.710807187752666,
        "ADX": 22.43479513608276,
        "Stoch_K": 24.54545454545496,
        "Stoch_D": 46.799002685078534,
        "StochRSI_K": 4.890546229186044,
        "StochRSI_D": 39.446796175810924,
        "BB_upper": 2525.290501344446,
        "BB_lower": 2510.9134986555537,
        "BB_middle": 2518.102,
        "EMA5": 2514.795984832765,
        "EMA21": 2518.321087283933,
        "EMA55": 2522.7054727906802,
        "EMA144": 2524.1541156568455,
        "EMA200": 2523.820671546657,
        "VWAP": 2524.2346769687365
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0069%",
      "FGI": "56/100",
      "open_interest": "$588145335.0000005 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2520.38",
        "lastSz": "141.67",
        "askPx": "2520.38",
        "askSz": "831.11",
        "bidPx": "2520.37",
        "bidSz": "1017.86",
        "open24h": "2523.24",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2273312.259",
        "vol24h": "22733122.59",
        "ts": "1748754160713",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:02:41+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116008.01 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:02:42] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:02:42] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_130233.png
[gemini_api_caller.py][13:02:42] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:02:42] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:02:42] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:02:42] [INFO] AFC remote call 1 is done.
[_client.py][13:02:46] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][13:03:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][13:03:28] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][13:03:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][13:03:28] [INFO] 杠杆设置为 100 倍成功。
[_client.py][13:03:28] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][13:03:28] [INFO] 主订单下单成功,
[trade_api_eth.py][13:03:28] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][13:03:28] [INFO] execution: {
    "operation_comment": "ETHUSDT在M15和H1周期呈现明显下跌趋势，短期反弹动能不足，MACD和EMA均支持做空。在2525-2535 USDT区间做空，止损设于2545 USDT，止盈目标2500 USDT。",
    "type": "sell",
    "price": 2535.0,
    "stop_loss": 2545.0,
    "take_profit": 2500.0,
    "size": 23.2,
    "market": false,
    "expected_winrate": 0.65,
    "expected_return": 0.0065,
    "trade_RR_ratio": 2.35,
    "signal_strength": 0.7,
    "risk_management_strategy": "根据ATR波动率、总账户权益和每笔交易最大亏损（可用保证金的2%）确定初始仓位。如果价格突破2540 USDT并伴随放量，则立即止损。如果价格回调至2525-2535 USDT区域并出现做空信号，则视为入场机会。如果价格跌破2500 USDT，则止盈90%仓位，剩余10%继续持有并上移止损。",
    "position_action": "开空",
    "risk_assessment": "当前市场处于下跌趋势，但短期存在反弹风险。高波动率可能导致止损被触发。建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。"
}
[trade_api_eth.py][13:03:28] [INFO] 交易API调用完成
[trade_api_eth.py][13:03:28] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][13:15:03] [INFO] 截图模块运行中...
[截图模块][13:15:05] [INFO]  __main__ 入口被执行
[截图模块][13:15:05] [INFO]  启动时主动清理内存...
[截图模块][13:15:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:15:05] [INFO]  已执行 pkill chrome
[截图模块][13:15:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:15:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:15:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:15:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:15:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:15:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:15:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:15:19] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:15:20] [INFO] 启动浏览器 (有头模式)
[截图模块][13:15:22] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:16:05] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:16:05] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:16:05] [INFO]  打开目标图表页...
[截图模块][13:16:13] [INFO]  等待5秒加载页面...
[截图模块][13:16:18] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:16:19] [INFO]  快捷键已发送
[截图模块][13:16:20] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_131620.png
[截图模块][13:16:20] [INFO]  关闭浏览器...
[数据收集总模块][13:16:20] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_131620.png
[数据收集总模块][13:16:20] [INFO] 技术指标模块运行中...
[技术指标模块][13:16:21] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:16:22] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:16:22] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:16:22] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:16:22] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:16:22] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:16:23] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:16:23] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:16:25] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:16:25] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:16:26] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:16:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:16:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:16:27] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:16:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:16:27] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:16:28] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:16:28] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_131620.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103730.0,
        "volume": 56917.91,
        "RSI": 55.45716008595312,
        "MACD_macd": -16.399421293317573,
        "MACD_signal": -42.353084828488264,
        "ATR": 192.64164517322808,
        "ADX": 21.03467424979562,
        "Stoch_K": 65.97222222222221,
        "Stoch_D": 64.760348583878,
        "StochRSI_K": 57.433205951645924,
        "StochRSI_D": 58.62821414888873,
        "BB_upper": 103845.2787078207,
        "BB_lower": 103481.9812921793,
        "BB_middle": 103663.63,
        "EMA5": 103703.43256709896,
        "EMA21": 103679.21483029627,
        "EMA55": 103856.63993650468,
        "EMA144": 104172.94405739442,
        "EMA200": 104269.0367177094,
        "VWAP": 104174.80031430359
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22989856671.000023 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104636.3",
        "lastSz": "0.07",
        "askPx": "104636.3",
        "askSz": "1026.21",
        "bidPx": "104636.2",
        "bidSz": "287.72",
        "open24h": "103600",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39530.0554",
        "vol24h": "3953005.54",
        "ts": "1748754987737",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:16:28+00:00Z"
}
[gemini_api_caller.py][13:16:29] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:16:29] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_131620.png
[gemini_api_caller.py][13:16:29] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:16:29] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:16:30] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:16:30] [INFO] AFC remote call 1 is done.
[_client.py][13:16:33] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:18:14] [INFO] 截图模块运行中...
[截图模块][13:18:16] [INFO]  __main__ 入口被执行
[截图模块][13:18:16] [INFO]  启动时主动清理内存...
[截图模块][13:18:16] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:18:17] [INFO]  已执行 pkill chrome
[截图模块][13:18:20] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:18:20] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:18:20] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:18:20] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:18:20] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:18:20] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:18:20] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:18:22] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:18:24] [INFO]  启动浏览器 (有头模式)
[截图模块][13:18:24] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:19:00] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:19:00] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:19:00] [INFO]  打开目标图表页...
[截图模块][13:19:07] [INFO]  等待5秒加载页面...
[截图模块][13:19:12] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:19:12] [INFO]  快捷键已发送
[截图模块][13:19:13] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_131913.png
[截图模块][13:19:13] [INFO]  关闭浏览器...
[数据收集总模块][13:19:14] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_131913.png
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:16] [INFO]  __main__ 入口被执行
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:16] [INFO]  启动时主动清理内存...
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:16] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:17] [INFO]  已执行 pkill chrome
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:20] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:22] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:24] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:18:24] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:00] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:00] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:00] [INFO]  打开目标图表页...
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:07] [INFO]  等待5秒加载页面...
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:12] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:12] [INFO]  快捷键已发送
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:13] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_131913.png
[数据收集总模块][13:19:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:19:13] [INFO]  关闭浏览器...
[数据收集总模块][13:19:14] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_131913.png
[数据收集总模块][13:19:14] [INFO] 技术指标模块运行中...
[技术指标模块][13:19:15] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:19:15] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:19:15] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:19:16] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:19:16] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:19:16] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:19:16] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:19:16] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:19:17] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:19:22] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:19:22] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:19:23] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:19:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:19:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:19:24] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:19:24] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:19:24] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:19:24] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:19:25] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_131913.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2518.1,
        "volume": 619279.39,
        "RSI": 49.23197862913104,
        "MACD_macd": -1.7660314437912348,
        "MACD_signal": -2.175526424867683,
        "ATR": 10.095547106924663,
        "ADX": 18.34074038460615,
        "Stoch_K": 68.63636363636321,
        "Stoch_D": 63.84925201380852,
        "StochRSI_K": 62.45766907131065,
        "StochRSI_D": 65.98943851966241,
        "BB_upper": 2525.06299100747,
        "BB_lower": 2512.7560089925296,
        "BB_middle": 2518.9094999999998,
        "EMA5": 2517.9939772491475,
        "EMA21": 2519.313247896813,
        "EMA55": 2523.253058490397,
        "EMA144": 2524.5387950433897,
        "EMA200": 2524.217176026803,
        "VWAP": 2524.3587743334992
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0063%",
      "FGI": "56/100",
      "open_interest": "$589262666.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2521.93",
        "lastSz": "0.01",
        "askPx": "2521.94",
        "askSz": "1567.24",
        "bidPx": "2521.93",
        "bidSz": "445.78",
        "open24h": "2514.87",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2254374.701",
        "vol24h": "22543747.01",
        "ts": "1748755164612",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:19:25+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:19:26] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:19:26] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_131913.png
[gemini_api_caller.py][13:19:26] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:19:26] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:19:27] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:19:27] [INFO] AFC remote call 1 is done.
[_client.py][13:19:30] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][13:20:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][13:20:14] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][13:20:14] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][13:20:14] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][13:20:14] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][13:20:14] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][13:20:14] [INFO] execution: {
    "operation_comment": "当前市场缺乏明确趋势，多时间框架信号不一致，建议观望，等待更清晰的入场信号。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "N/A",
    "expected_return": "N/A",
    "trade_RR_ratio": "N/A",
    "signal_strength": "N/A",
    "risk_management_strategy": "观望策略，避免在不确定市场中开仓。如果市场出现明确的突破或反转信号，将重新评估并制定交易计划。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等，主要风险来源于趋势不明确导致的潜在震荡和假突破。建议保持现金头寸，规避不确定性。"
}
[trade_api_eth.py][13:20:14] [INFO] 交易API调用完成
[trade_api_eth.py][13:20:14] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][13:21:44] [INFO] 截图模块运行中...
[截图模块][13:21:45] [INFO]  __main__ 入口被执行
[截图模块][13:21:45] [INFO]  启动时主动清理内存...
[截图模块][13:21:45] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:21:45] [INFO]  已执行 pkill chrome
[截图模块][13:21:47] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:21:47] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:21:47] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:21:47] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:21:47] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:21:47] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:21:47] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:21:50] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:21:52] [INFO] 启动浏览器 (有头模式)
[截图模块][13:21:54] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:22:28] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:22:28] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:22:28] [INFO]  打开目标图表页...
[截图模块][13:22:35] [INFO]  等待5秒加载页面...
[截图模块][13:22:40] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:22:41] [INFO]  快捷键已发送
[截图模块][13:22:42] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_132242.png
[截图模块][13:22:42] [INFO]  关闭浏览器...
[数据收集总模块][13:22:42] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_132242.png
[数据收集总模块][13:22:42] [INFO] 技术指标模块运行中...
[技术指标模块][13:22:43] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:22:45] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:22:45] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:22:46] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:22:46] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:22:46] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:22:46] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:22:46] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:22:49] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:22:49] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:22:50] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:22:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:22:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:22:51] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:22:51] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:22:51] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:22:51] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:22:52] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_132242.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103730.0,
        "volume": 56917.91,
        "RSI": 55.45716008595312,
        "MACD_macd": -16.399421293317573,
        "MACD_signal": -42.353084828488264,
        "ATR": 192.64164517322808,
        "ADX": 21.03467424979562,
        "Stoch_K": 65.97222222222221,
        "Stoch_D": 64.760348583878,
        "StochRSI_K": 57.433205951645924,
        "StochRSI_D": 58.62821414888873,
        "BB_upper": 103845.2787078207,
        "BB_lower": 103481.9812921793,
        "BB_middle": 103663.63,
        "EMA5": 103703.43256709896,
        "EMA21": 103679.21483029627,
        "EMA55": 103856.63993650468,
        "EMA144": 104172.94405739442,
        "EMA200": 104269.0367177094,
        "VWAP": 104174.80031430359
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22994983654.000023 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104511.8",
        "lastSz": "0.02",
        "askPx": "104511.8",
        "askSz": "932.8",
        "bidPx": "104511.7",
        "bidSz": "848.69",
        "open24h": "103687.7",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39476.1122",
        "vol24h": "3947611.22",
        "ts": "1748755372015",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:22:52+00:00Z"
}
[gemini_api_caller.py][13:22:53] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:22:53] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_132242.png
[gemini_api_caller.py][13:22:53] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:22:53] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:22:54] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:22:54] [INFO] AFC remote call 1 is done.
[_client.py][13:22:57] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:23:42] [INFO] 截图模块运行中...
[截图模块][13:23:43] [INFO]  __main__ 入口被执行
[截图模块][13:23:43] [INFO]  启动时主动清理内存...
[截图模块][13:23:43] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:23:43] [INFO]  已执行 pkill chrome
[截图模块][13:23:46] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:23:46] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:23:46] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:23:46] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:23:46] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:23:46] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:23:46] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:23:48] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:23:50] [INFO]  启动浏览器 (有头模式)
[截图模块][13:23:50] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:24:01] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:24:01] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:24:01] [INFO]  打开目标图表页...
[截图模块][13:24:07] [INFO]  等待5秒加载页面...
[截图模块][13:24:12] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:24:13] [INFO]  快捷键已发送
[截图模块][13:24:14] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_132414.png
[截图模块][13:24:14] [INFO]  关闭浏览器...
[数据收集总模块][13:24:14] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_132414.png
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:43] [INFO]  __main__ 入口被执行
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:43] [INFO]  启动时主动清理内存...
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:43] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:43] [INFO]  已执行 pkill chrome
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:46] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:48] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:50] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:23:50] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:01] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:01] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:01] [INFO]  打开目标图表页...
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:07] [INFO]  等待5秒加载页面...
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:12] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:13] [INFO]  快捷键已发送
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:14] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_132414.png
[数据收集总模块][13:24:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:24:14] [INFO]  关闭浏览器...
[数据收集总模块][13:24:14] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_132414.png
[数据收集总模块][13:24:14] [INFO] 技术指标模块运行中...
[技术指标模块][13:24:15] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:24:16] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:24:16] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:24:17] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:24:17] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:24:17] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:24:18] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:24:18] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:24:18] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:24:20] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:24:20] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:24:21] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:24:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:24:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:24:21] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:24:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:24:22] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:24:22] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:24:23] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_132414.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2518.1,
        "volume": 619279.39,
        "RSI": 49.23197862913104,
        "MACD_macd": -1.7660314437912348,
        "MACD_signal": -2.175526424867683,
        "ATR": 10.095547106924663,
        "ADX": 18.34074038460615,
        "Stoch_K": 68.63636363636321,
        "Stoch_D": 63.84925201380852,
        "StochRSI_K": 62.45766907131065,
        "StochRSI_D": 65.98943851966241,
        "BB_upper": 2525.06299100747,
        "BB_lower": 2512.7560089925296,
        "BB_middle": 2518.9094999999998,
        "EMA5": 2517.9939772491475,
        "EMA21": 2519.313247896813,
        "EMA55": 2523.253058490397,
        "EMA144": 2524.5387950433897,
        "EMA200": 2524.217176026803,
        "VWAP": 2524.3587743334992
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0058%",
      "FGI": "56/100",
      "open_interest": "$589611127.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2517.66",
        "lastSz": "27.43",
        "askPx": "2517.67",
        "askSz": "652.44",
        "bidPx": "2517.66",
        "bidSz": "753.19",
        "open24h": "2517.19",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2256086.925",
        "vol24h": "22560869.25",
        "ts": "1748755462513",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:24:23+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:24:24] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:24:24] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_132414.png
[gemini_api_caller.py][13:24:24] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:24:24] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:24:24] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:24:24] [INFO] AFC remote call 1 is done.
[_client.py][13:24:27] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:30:02] [INFO] 截图模块运行中...
[截图模块][13:30:04] [INFO]  __main__ 入口被执行
[截图模块][13:30:04] [INFO]  启动时主动清理内存...
[截图模块][13:30:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:30:04] [INFO]  已执行 pkill chrome
[截图模块][13:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:30:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:30:16] [INFO] 启动浏览器 (有头模式)
[截图模块][13:30:18] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:30:54] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:30:54] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:30:54] [INFO]  打开目标图表页...
[截图模块][13:31:03] [INFO]  等待5秒加载页面...
[截图模块][13:31:08] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:31:09] [INFO]  快捷键已发送
[截图模块][13:31:10] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133110.png
[截图模块][13:31:10] [INFO]  关闭浏览器...
[数据收集总模块][13:31:11] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133110.png
[数据收集总模块][13:31:11] [INFO] 技术指标模块运行中...
[技术指标模块][13:31:12] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:31:12] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:31:12] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:31:12] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:31:12] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:31:13] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:31:13] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:31:13] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:31:16] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:31:16] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:31:17] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:31:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:31:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:31:18] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:31:18] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:31:18] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:31:18] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:31:19] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133110.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103692.1,
        "volume": 24214.42,
        "RSI": 52.3165148296566,
        "MACD_macd": -22.83492183346243,
        "MACD_signal": -48.76542687211899,
        "ATR": 175.35576952933326,
        "ADX": 20.263400760645094,
        "Stoch_K": 54.681372549021035,
        "Stoch_D": 60.12087108682056,
        "StochRSI_K": 47.788728558593775,
        "StochRSI_D": 56.26248901433234,
        "BB_upper": 103850.49411802804,
        "BB_lower": 103449.57588197196,
        "BB_middle": 103650.035,
        "EMA5": 103690.14885064843,
        "EMA21": 103674.1279000568,
        "EMA55": 103858.45152662515,
        "EMA144": 104152.49037482531,
        "EMA200": 104235.29031203309,
        "VWAP": 104184.45353260229
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22995036209.000027 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104524.5",
        "lastSz": "0.01",
        "askPx": "104524.6",
        "askSz": "1150.71",
        "bidPx": "104524.5",
        "bidSz": "721.8",
        "open24h": "103601.3",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39445.5267",
        "vol24h": "3944552.67",
        "ts": "1748755878318",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:31:19+00:00Z"
}
[gemini_api_caller.py][13:31:20] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:31:20] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133110.png
[gemini_api_caller.py][13:31:20] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:31:20] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:31:20] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:31:20] [INFO] AFC remote call 1 is done.
[_client.py][13:31:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:32:14] [INFO] 截图模块运行中...
[截图模块][13:32:16] [INFO]  __main__ 入口被执行
[截图模块][13:32:16] [INFO]  启动时主动清理内存...
[截图模块][13:32:16] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:32:16] [INFO]  已执行 pkill chrome
[截图模块][13:32:19] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:32:19] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:32:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:32:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:32:19] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:32:19] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:32:19] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:32:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:32:25] [INFO]  启动浏览器 (有头模式)
[截图模块][13:32:25] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:33:01] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:33:01] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:33:01] [INFO]  打开目标图表页...
[截图模块][13:33:06] [INFO]  等待5秒加载页面...
[截图模块][13:33:11] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:33:12] [INFO]  快捷键已发送
[截图模块][13:33:13] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133313.png
[截图模块][13:33:13] [INFO]  关闭浏览器...
[数据收集总模块][13:33:14] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133313.png
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:16] [INFO]  __main__ 入口被执行
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:16] [INFO]  启动时主动清理内存...
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:16] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:16] [INFO]  已执行 pkill chrome
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:19] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:25] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:32:25] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:01] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:01] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:01] [INFO]  打开目标图表页...
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:06] [INFO]  等待5秒加载页面...
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:11] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:12] [INFO]  快捷键已发送
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:13] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133313.png
[数据收集总模块][13:33:14] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:33:13] [INFO]  关闭浏览器...
[数据收集总模块][13:33:14] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133313.png
[数据收集总模块][13:33:14] [INFO] 技术指标模块运行中...
[技术指标模块][13:33:15] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:33:15] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:33:15] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:33:16] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:33:16] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:33:17] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:33:18] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:33:18] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:33:18] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:33:20] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:33:20] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:33:21] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:33:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:33:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:33:22] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:33:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:33:23] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:33:23] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:33:24] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133313.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2516.66,
        "volume": 260408.99,
        "RSI": 46.33156307093078,
        "MACD_macd": -1.887650445381496,
        "MACD_signal": -2.2756049631933895,
        "ATR": 8.270247452090203,
        "ADX": 13.616292517423927,
        "Stoch_K": 47.21518987341741,
        "Stoch_D": 57.70042194092838,
        "StochRSI_K": 50.99215684932664,
        "StochRSI_D": 63.48248913138238,
        "BB_upper": 2525.06838960516,
        "BB_lower": 2512.77161039484,
        "BB_middle": 2518.92,
        "EMA5": 2517.9409658737213,
        "EMA21": 2519.4343188516204,
        "EMA55": 2523.3570575397134,
        "EMA144": 2523.824835978265,
        "EMA200": 2523.0970510538236,
        "VWAP": 2524.559973776824
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.005%",
      "FGI": "56/100",
      "open_interest": "$590033927.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2520.18",
        "lastSz": "33.91",
        "askPx": "2520.19",
        "askSz": "1084.88",
        "bidPx": "2520.18",
        "bidSz": "567.52",
        "open24h": "2516.94",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2258341.29",
        "vol24h": "22583412.9",
        "ts": "1748756003610",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:33:24+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:33:25] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:33:25] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133313.png
[gemini_api_caller.py][13:33:25] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:33:25] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:33:25] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:33:25] [INFO] AFC remote call 1 is done.
[_client.py][13:33:29] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:34:59] [INFO] 截图模块运行中...
[截图模块][13:35:01] [INFO]  __main__ 入口被执行
[截图模块][13:35:01] [INFO]  启动时主动清理内存...
[截图模块][13:35:01] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:35:01] [INFO]  已执行 pkill chrome
[截图模块][13:35:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:35:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:35:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:35:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:35:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:35:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:35:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:35:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:35:08] [INFO] 启动浏览器 (有头模式)
[截图模块][13:35:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:35:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:35:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:35:44] [INFO]  打开目标图表页...
[截图模块][13:35:50] [INFO]  等待5秒加载页面...
[截图模块][13:35:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:35:56] [INFO]  快捷键已发送
[截图模块][13:35:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133557.png
[截图模块][13:35:57] [INFO]  关闭浏览器...
[数据收集总模块][13:35:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133557.png
[数据收集总模块][13:35:57] [INFO] 技术指标模块运行中...
[技术指标模块][13:35:58] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:35:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:35:59] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:35:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:35:59] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:36:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:36:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:36:00] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:36:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:36:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:36:04] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:36:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:36:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:36:04] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:36:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:36:05] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:36:05] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:36:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103692.1,
        "volume": 24214.42,
        "RSI": 52.3165148296566,
        "MACD_macd": -22.83492183346243,
        "MACD_signal": -48.76542687211899,
        "ATR": 175.35576952933326,
        "ADX": 20.263400760645094,
        "Stoch_K": 54.681372549021035,
        "Stoch_D": 60.12087108682056,
        "StochRSI_K": 47.788728558593775,
        "StochRSI_D": 56.26248901433234,
        "BB_upper": 103850.49411802804,
        "BB_lower": 103449.57588197196,
        "BB_middle": 103650.035,
        "EMA5": 103690.14885064843,
        "EMA21": 103674.1279000568,
        "EMA55": 103858.45152662515,
        "EMA144": 104152.49037482531,
        "EMA200": 104235.29031203309,
        "VWAP": 104184.45353260229
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22995340363.00002 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104564.3",
        "lastSz": "0.01",
        "askPx": "104564.3",
        "askSz": "455.01",
        "bidPx": "104564.2",
        "bidSz": "1800.02",
        "open24h": "103614.1",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39348.8345",
        "vol24h": "3934883.45",
        "ts": "1748756165813",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:36:06+00:00Z"
}
[gemini_api_caller.py][13:36:07] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:36:07] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_133557.png
[gemini_api_caller.py][13:36:07] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:36:07] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:36:07] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:36:07] [INFO] AFC remote call 1 is done.
[_client.py][13:36:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:36:51] [INFO] 截图模块运行中...
[截图模块][13:36:51] [INFO]  __main__ 入口被执行
[截图模块][13:36:51] [INFO]  启动时主动清理内存...
[截图模块][13:36:51] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:36:51] [INFO]  已执行 pkill chrome
[截图模块][13:36:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:36:54] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:36:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:36:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:36:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:36:54] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:36:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:36:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:36:58] [INFO]  启动浏览器 (有头模式)
[截图模块][13:36:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:37:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:37:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:37:16] [INFO]  打开目标图表页...
[截图模块][13:37:23] [INFO]  等待5秒加载页面...
[截图模块][13:37:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:37:28] [INFO]  快捷键已发送
[截图模块][13:37:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133729.png
[截图模块][13:37:29] [INFO]  关闭浏览器...
[数据收集总模块][13:37:30] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133729.png
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:51] [INFO]  __main__ 入口被执行
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:51] [INFO]  启动时主动清理内存...
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:51] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:51] [INFO]  已执行 pkill chrome
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:54] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:56] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:58] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:36:58] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:16] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:16] [INFO]  打开目标图表页...
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:23] [INFO]  等待5秒加载页面...
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:28] [INFO]  快捷键已发送
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:29] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133729.png
[数据收集总模块][13:37:30] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:37:29] [INFO]  关闭浏览器...
[数据收集总模块][13:37:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133729.png
[数据收集总模块][13:37:30] [INFO] 技术指标模块运行中...
[技术指标模块][13:37:31] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:37:31] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:37:31] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:37:32] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:37:32] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:37:33] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:37:33] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:37:33] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:37:34] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:37:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:37:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:37:36] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:37:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:37:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:37:37] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:37:37] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:37:37] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:37:38] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:37:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133729.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2516.66,
        "volume": 260408.99,
        "RSI": 46.33156307093078,
        "MACD_macd": -1.887650445381496,
        "MACD_signal": -2.2756049631933895,
        "ATR": 8.270247452090203,
        "ADX": 13.616292517423927,
        "Stoch_K": 47.21518987341741,
        "Stoch_D": 57.70042194092838,
        "StochRSI_K": 50.99215684932664,
        "StochRSI_D": 63.48248913138238,
        "BB_upper": 2525.06838960516,
        "BB_lower": 2512.77161039484,
        "BB_middle": 2518.92,
        "EMA5": 2517.9409658737213,
        "EMA21": 2519.4343188516204,
        "EMA55": 2523.3570575397134,
        "EMA144": 2523.824835978265,
        "EMA200": 2523.0970510538236,
        "VWAP": 2524.559973776824
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0048%",
      "FGI": "56/100",
      "open_interest": "$590609355.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2520.48",
        "lastSz": "5",
        "askPx": "2520.49",
        "askSz": "3215.95",
        "bidPx": "2520.48",
        "bidSz": "97.66",
        "open24h": "2517.19",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2257603.866",
        "vol24h": "22576038.66",
        "ts": "1748756258510",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:37:39+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:37:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:37:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_133729.png
[gemini_api_caller.py][13:37:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:37:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:37:40] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:37:40] [INFO] AFC remote call 1 is done.
[_client.py][13:37:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][13:38:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][13:38:24] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][13:38:24] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][13:38:24] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][13:38:24] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][13:38:24] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][13:38:24] [INFO] execution: {
    "operation_comment": "市场处于震荡盘整，缺乏明确方向，建议观望，等待更清晰的趋势信号。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "N/A",
    "expected_return": "N/A",
    "trade_RR_ratio": "N/A",
    "signal_strength": "N/A",
    "risk_management_strategy": "观望策略，避免在无明确趋势的市场中进行交易，以保护本金。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等，主要风险来源于缺乏明确趋势和潜在的突发消息面影响。建议保持现金头寸，规避不确定性。"
}
[trade_api_eth.py][13:38:24] [INFO] 交易API调用完成
[trade_api_eth.py][13:38:24] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][13:39:07] [INFO] 截图模块运行中...
[截图模块][13:39:08] [INFO]  __main__ 入口被执行
[截图模块][13:39:08] [INFO]  启动时主动清理内存...
[截图模块][13:39:08] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:39:08] [INFO]  已执行 pkill chrome
[截图模块][13:39:11] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:39:11] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:39:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:39:11] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:39:11] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:39:11] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:39:11] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:39:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:39:16] [INFO] 启动浏览器 (有头模式)
[截图模块][13:39:18] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:39:53] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:39:53] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:39:53] [INFO]  打开目标图表页...
[截图模块][13:39:59] [INFO]  等待5秒加载页面...
[截图模块][13:40:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:40:05] [INFO]  快捷键已发送
[截图模块][13:40:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134006.png
[截图模块][13:40:06] [INFO]  关闭浏览器...
[数据收集总模块][13:40:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134006.png
[数据收集总模块][13:40:06] [INFO] 技术指标模块运行中...
[技术指标模块][13:40:07] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:40:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:40:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:40:08] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:40:08] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:40:12] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:40:12] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:40:12] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:40:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:40:15] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:40:16] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:40:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:40:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:40:17] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:40:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:40:17] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:40:17] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:40:18] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134006.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103692.1,
        "volume": 24214.42,
        "RSI": 52.3165148296566,
        "MACD_macd": -22.83492183346243,
        "MACD_signal": -48.76542687211899,
        "ATR": 175.35576952933326,
        "ADX": 20.263400760645094,
        "Stoch_K": 54.681372549021035,
        "Stoch_D": 60.12087108682056,
        "StochRSI_K": 47.788728558593775,
        "StochRSI_D": 56.26248901433234,
        "BB_upper": 103850.49411802804,
        "BB_lower": 103449.57588197196,
        "BB_middle": 103650.035,
        "EMA5": 103690.14885064843,
        "EMA21": 103674.1279000568,
        "EMA55": 103858.45152662515,
        "EMA144": 104152.49037482531,
        "EMA200": 104235.29031203309,
        "VWAP": 104184.45353260229
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22998219486.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104547.6",
        "lastSz": "0.1",
        "askPx": "104547.7",
        "askSz": "841.5",
        "bidPx": "104547.6",
        "bidSz": "692.38",
        "open24h": "103674.3",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39290.0645",
        "vol24h": "3929006.45",
        "ts": "1748756418005",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:40:18+00:00Z"
}
[gemini_api_caller.py][13:40:19] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:40:19] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134006.png
[gemini_api_caller.py][13:40:19] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:40:19] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:40:20] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:40:20] [INFO] AFC remote call 1 is done.
[_client.py][13:40:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:42:01] [INFO] 截图模块运行中...
[截图模块][13:42:02] [INFO]  __main__ 入口被执行
[截图模块][13:42:02] [INFO]  启动时主动清理内存...
[截图模块][13:42:02] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:42:02] [INFO]  已执行 pkill chrome
[截图模块][13:42:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:42:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:42:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:42:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:42:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:42:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:42:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:42:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:42:09] [INFO]  启动浏览器 (有头模式)
[截图模块][13:42:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:42:43] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:42:43] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:42:43] [INFO]  打开目标图表页...
[截图模块][13:42:53] [INFO]  等待5秒加载页面...
[截图模块][13:42:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:43:01] [INFO]  快捷键已发送
[截图模块][13:43:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134302.png
[截图模块][13:43:02] [INFO]  关闭浏览器...
[数据收集总模块][13:43:02] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134302.png
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:02] [INFO]  __main__ 入口被执行
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:02] [INFO]  启动时主动清理内存...
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:02] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:02] [INFO]  已执行 pkill chrome
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:09] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:43] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:43] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:43] [INFO]  打开目标图表页...
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:53] [INFO]  等待5秒加载页面...
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:42:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:43:01] [INFO]  快捷键已发送
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:43:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134302.png
[数据收集总模块][13:43:02] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:43:02] [INFO]  关闭浏览器...
[数据收集总模块][13:43:02] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134302.png
[数据收集总模块][13:43:02] [INFO] 技术指标模块运行中...
[技术指标模块][13:43:05] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:43:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:43:06] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:43:06] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:43:06] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:43:07] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:43:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:43:07] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:43:08] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:43:09] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:43:09] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:43:10] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:43:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:43:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:43:11] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:43:11] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:43:11] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:43:11] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:43:12] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134302.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2516.66,
        "volume": 260408.99,
        "RSI": 46.33156307093078,
        "MACD_macd": -1.887650445381496,
        "MACD_signal": -2.2756049631933895,
        "ATR": 8.270247452090203,
        "ADX": 13.616292517423927,
        "Stoch_K": 47.21518987341741,
        "Stoch_D": 57.70042194092838,
        "StochRSI_K": 50.99215684932664,
        "StochRSI_D": 63.48248913138238,
        "BB_upper": 2525.06838960516,
        "BB_lower": 2512.77161039484,
        "BB_middle": 2518.92,
        "EMA5": 2517.9409658737213,
        "EMA21": 2519.4343188516204,
        "EMA55": 2523.3570575397134,
        "EMA144": 2523.824835978265,
        "EMA200": 2523.0970510538236,
        "VWAP": 2524.559973776824
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0046%",
      "FGI": "56/100",
      "open_interest": "$591036926.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2516.5",
        "lastSz": "16.38",
        "askPx": "2516.51",
        "askSz": "1561.28",
        "bidPx": "2516.5",
        "bidSz": "269.75",
        "open24h": "2519.49",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2259739.569",
        "vol24h": "22597395.69",
        "ts": "1748756590814",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:43:12+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:43:17] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:43:17] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134302.png
[gemini_api_caller.py][13:43:17] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:43:17] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:43:19] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:43:19] [INFO] AFC remote call 1 is done.
[_client.py][13:43:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:45:02] [INFO] 截图模块运行中...
[截图模块][13:45:03] [INFO]  __main__ 入口被执行
[截图模块][13:45:03] [INFO]  启动时主动清理内存...
[截图模块][13:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:45:03] [INFO]  已执行 pkill chrome
[截图模块][13:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:45:10] [INFO] 启动浏览器 (有头模式)
[截图模块][13:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:45:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:45:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:45:47] [INFO]  打开目标图表页...
[截图模块][13:45:53] [INFO]  等待5秒加载页面...
[截图模块][13:45:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:45:59] [INFO]  快捷键已发送
[截图模块][13:46:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134600.png
[截图模块][13:46:00] [INFO]  关闭浏览器...
[数据收集总模块][13:46:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134600.png
[数据收集总模块][13:46:00] [INFO] 技术指标模块运行中...
[技术指标模块][13:46:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:46:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:46:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:46:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:46:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:46:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:46:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:46:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:46:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:46:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:46:07] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:46:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:46:08] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:46:08] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:46:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:46:09] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134600.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103769.4,
        "volume": 19450.07,
        "RSI": 59.765261372836804,
        "MACD_macd": -26.888620282697957,
        "MACD_signal": -55.2033038140122,
        "ATR": 188.45664018583233,
        "ADX": 19.82499014701907,
        "Stoch_K": 73.62745098039073,
        "Stoch_D": 55.74867762915992,
        "StochRSI_K": 70.6626364552687,
        "StochRSI_D": 53.55071363022531,
        "BB_upper": 103852.35754475264,
        "BB_lower": 103426.69245524735,
        "BB_middle": 103639.525,
        "EMA5": 103689.17327597263,
        "EMA21": 103672.32574108065,
        "EMA55": 103862.91929551426,
        "EMA144": 104143.253692605,
        "EMA200": 104217.71194636913,
        "VWAP": 104189.28158094613
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22996307512.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104455.8",
        "lastSz": "16.82",
        "askPx": "104455.8",
        "askSz": "662.55",
        "bidPx": "104455.7",
        "bidSz": "433.52",
        "open24h": "103602.8",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39380.0821",
        "vol24h": "3938008.21",
        "ts": "1748756767917",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:46:09+00:00Z"
}
[gemini_api_caller.py][13:46:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:46:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_134600.png
[gemini_api_caller.py][13:46:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:46:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:46:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:46:10] [INFO] AFC remote call 1 is done.
[_client.py][13:46:14] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:47:44] [INFO] 截图模块运行中...
[截图模块][13:47:45] [INFO]  __main__ 入口被执行
[截图模块][13:47:45] [INFO]  启动时主动清理内存...
[截图模块][13:47:45] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:47:45] [INFO]  已执行 pkill chrome
[截图模块][13:47:48] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:47:48] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:47:48] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:47:48] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:47:48] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:47:48] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:47:48] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:47:50] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:47:51] [INFO]  启动浏览器 (有头模式)
[截图模块][13:47:51] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:48:28] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:48:28] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:48:28] [INFO]  打开目标图表页...
[截图模块][13:48:35] [INFO]  等待5秒加载页面...
[截图模块][13:48:40] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:48:40] [INFO]  快捷键已发送
[截图模块][13:48:41] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134841.png
[截图模块][13:48:41] [INFO]  关闭浏览器...
[数据收集总模块][13:48:42] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134841.png
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:45] [INFO]  __main__ 入口被执行
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:45] [INFO]  启动时主动清理内存...
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:45] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:45] [INFO]  已执行 pkill chrome
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:48] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:50] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:51] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:47:51] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:28] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:28] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:28] [INFO]  打开目标图表页...
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:35] [INFO]  等待5秒加载页面...
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:40] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:40] [INFO]  快捷键已发送
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:41] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134841.png
[数据收集总模块][13:48:42] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:48:41] [INFO]  关闭浏览器...
[数据收集总模块][13:48:42] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134841.png
[数据收集总模块][13:48:42] [INFO] 技术指标模块运行中...
[技术指标模块][13:48:45] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:48:46] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:48:46] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:48:47] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:48:47] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:48:47] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:48:47] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:48:47] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:48:49] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:48:51] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:48:51] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:48:53] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:48:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:48:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:48:53] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:48:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:48:53] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:48:54] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:48:54] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134841.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2521.16,
        "volume": 206028.45,
        "RSI": 54.81270102100232,
        "MACD_macd": -1.8693741698139092,
        "MACD_signal": -2.3707170083528557,
        "ATR": 8.621053808437093,
        "ADX": 15.627067482757578,
        "Stoch_K": 75.69620253164493,
        "Stoch_D": 57.95358649789114,
        "StochRSI_K": 84.5183903307137,
        "StochRSI_D": 63.921360814462,
        "BB_upper": 2525.110542095573,
        "BB_lower": 2512.996457904427,
        "BB_middle": 2519.0535,
        "EMA5": 2518.5814488105816,
        "EMA21": 2519.711543198835,
        "EMA55": 2523.534083211311,
        "EMA144": 2523.267675055944,
        "EMA200": 2522.1956536080106,
        "VWAP": 2524.595837743008
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0042%",
      "FGI": "56/100",
      "open_interest": "$591491983.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2515.31",
        "lastSz": "0.04",
        "askPx": "2515.31",
        "askSz": "488.86",
        "bidPx": "2515.3",
        "bidSz": "631.33",
        "open24h": "2518.89",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2259309.677",
        "vol24h": "22593096.77",
        "ts": "1748756933407",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:48:54+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:48:56] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:48:56] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_134841.png
[gemini_api_caller.py][13:48:56] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:48:56] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:48:56] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:48:56] [INFO] AFC remote call 1 is done.
[_client.py][13:49:00] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][13:49:51] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][13:49:51] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][13:49:52] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][13:49:52] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][13:49:52] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][13:49:52] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][13:49:52] [INFO] execution: {
    "operation_comment": "当前市场多时间框架信号不一致，短期和中期趋势偏弱，长期趋势不明确，市场处于盘整状态，缺乏明确的交易方向。为规避不确定性风险，建议观望，等待更清晰的趋势信号出现。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "N/A",
    "expected_return": "N/A",
    "trade_RR_ratio": "N/A",
    "signal_strength": "N/A",
    "risk_management_strategy": "观望策略：在市场方向不明朗时，不进行任何交易，以规避不必要的风险。等待市场形成明确的趋势或突破关键区间后再考虑入场。此策略旨在保护本金，避免在震荡市场中被反复止损。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等。主要风险来源于多时间框架信号冲突导致的趋势不确定性，以及低波动性可能带来的假突破风险。建议保持观望，避免在无明确趋势的市场中进行交易，以降低资金损失的风险。"
}
[trade_api_eth.py][13:49:52] [INFO] 交易API调用完成
[trade_api_eth.py][13:49:52] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][13:50:06] [INFO] 截图模块运行中...
[截图模块][13:50:08] [INFO]  __main__ 入口被执行
[截图模块][13:50:08] [INFO]  启动时主动清理内存...
[截图模块][13:50:08] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:50:08] [INFO]  已执行 pkill chrome
[截图模块][13:50:10] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:50:10] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:50:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:50:10] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:50:10] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:50:10] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:50:10] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:50:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:50:14] [INFO] 启动浏览器 (有头模式)
[截图模块][13:50:16] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:50:54] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:50:54] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:50:54] [INFO]  打开目标图表页...
[截图模块][13:50:59] [INFO]  等待5秒加载页面...
[截图模块][13:51:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:51:06] [INFO]  快捷键已发送
[截图模块][13:51:07] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135107.png
[截图模块][13:51:07] [INFO]  关闭浏览器...
[数据收集总模块][13:51:07] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135107.png
[数据收集总模块][13:51:07] [INFO] 技术指标模块运行中...
[技术指标模块][13:51:09] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:51:09] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:51:09] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:51:10] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:51:10] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:51:10] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:51:11] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:51:11] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:51:13] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:51:13] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:51:14] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:51:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:51:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:51:15] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:51:16] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:51:16] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:51:16] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:51:16] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135107.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103769.4,
        "volume": 19450.07,
        "RSI": 59.765261372836804,
        "MACD_macd": -26.888620282697957,
        "MACD_signal": -55.2033038140122,
        "ATR": 188.45664018583233,
        "ADX": 19.82499014701907,
        "Stoch_K": 73.62745098039073,
        "Stoch_D": 55.74867762915992,
        "StochRSI_K": 70.6626364552687,
        "StochRSI_D": 53.55071363022531,
        "BB_upper": 103852.35754475264,
        "BB_lower": 103426.69245524735,
        "BB_middle": 103639.525,
        "EMA5": 103689.17327597263,
        "EMA21": 103672.32574108065,
        "EMA55": 103862.91929551426,
        "EMA144": 104143.253692605,
        "EMA200": 104217.71194636913,
        "VWAP": 104189.28158094613
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22985994323.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104433.6",
        "lastSz": "2.85",
        "askPx": "104433.6",
        "askSz": "481.36",
        "bidPx": "104433.5",
        "bidSz": "454.21",
        "open24h": "103600.1",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39376.9859",
        "vol24h": "3937698.59",
        "ts": "1748757076113",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:51:16+00:00Z"
}
[gemini_api_caller.py][13:51:18] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:51:18] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135107.png
[gemini_api_caller.py][13:51:18] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:51:18] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:51:18] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:51:18] [INFO] AFC remote call 1 is done.
[_client.py][13:51:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:52:09] [INFO] 截图模块运行中...
[截图模块][13:52:10] [INFO]  __main__ 入口被执行
[截图模块][13:52:10] [INFO]  启动时主动清理内存...
[截图模块][13:52:10] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:52:10] [INFO]  已执行 pkill chrome
[截图模块][13:52:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:52:13] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:52:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:52:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:52:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:52:13] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:52:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:52:16] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:52:18] [INFO]  启动浏览器 (有头模式)
[截图模块][13:52:18] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:52:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:52:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:52:51] [INFO]  打开目标图表页...
[截图模块][13:52:58] [INFO]  等待5秒加载页面...
[截图模块][13:53:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:53:04] [INFO]  快捷键已发送
[截图模块][13:53:05] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135305.png
[截图模块][13:53:05] [INFO]  关闭浏览器...
[数据收集总模块][13:53:05] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135305.png
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:10] [INFO]  __main__ 入口被执行
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:10] [INFO]  启动时主动清理内存...
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:10] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:10] [INFO]  已执行 pkill chrome
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:16] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:18] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:18] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:51] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:51] [INFO]  打开目标图表页...
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:52:58] [INFO]  等待5秒加载页面...
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:53:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:53:04] [INFO]  快捷键已发送
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:53:05] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135305.png
[数据收集总模块][13:53:05] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:53:05] [INFO]  关闭浏览器...
[数据收集总模块][13:53:05] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135305.png
[数据收集总模块][13:53:05] [INFO] 技术指标模块运行中...
[技术指标模块][13:53:06] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:53:07] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:53:07] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:53:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:53:07] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:53:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:53:09] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:53:09] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:53:09] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:53:11] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:53:11] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:53:12] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:53:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:53:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:53:13] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:53:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:53:13] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:53:13] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:53:13] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135305.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2521.16,
        "volume": 206028.45,
        "RSI": 54.81270102100232,
        "MACD_macd": -1.8693741698139092,
        "MACD_signal": -2.3707170083528557,
        "ATR": 8.621053808437093,
        "ADX": 15.627067482757578,
        "Stoch_K": 75.69620253164493,
        "Stoch_D": 57.95358649789114,
        "StochRSI_K": 84.5183903307137,
        "StochRSI_D": 63.921360814462,
        "BB_upper": 2525.110542095573,
        "BB_lower": 2512.996457904427,
        "BB_middle": 2519.0535,
        "EMA5": 2518.5814488105816,
        "EMA21": 2519.711543198835,
        "EMA55": 2523.534083211311,
        "EMA144": 2523.267675055944,
        "EMA200": 2522.1956536080106,
        "VWAP": 2524.595837743008
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0042%",
      "FGI": "56/100",
      "open_interest": "$590748054.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2518.57",
        "lastSz": "0.76",
        "askPx": "2518.57",
        "askSz": "785.97",
        "bidPx": "2518.56",
        "bidSz": "174.25",
        "open24h": "2514.77",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2256870.562",
        "vol24h": "22568705.62",
        "ts": "1748757193108",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:53:13+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:53:15] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:53:15] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135305.png
[gemini_api_caller.py][13:53:15] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:53:15] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:53:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:53:15] [INFO] AFC remote call 1 is done.
[_client.py][13:53:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:56:25] [INFO] 截图模块运行中...
[截图模块][13:56:26] [INFO]  __main__ 入口被执行
[截图模块][13:56:26] [INFO]  启动时主动清理内存...
[截图模块][13:56:26] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:56:26] [INFO]  已执行 pkill chrome
[截图模块][13:56:29] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:56:29] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:56:29] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][13:56:29] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][13:56:29] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][13:56:29] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:56:29] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:56:38] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:56:39] [INFO] 启动浏览器 (有头模式)
[截图模块][13:56:41] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:57:16] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][13:57:16] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:57:16] [INFO]  打开目标图表页...
[截图模块][13:57:23] [INFO]  等待5秒加载页面...
[截图模块][13:57:28] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:57:29] [INFO]  快捷键已发送
[截图模块][13:57:30] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135730.png
[截图模块][13:57:30] [INFO]  关闭浏览器...
[数据收集总模块][13:57:30] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135730.png
[数据收集总模块][13:57:30] [INFO] 技术指标模块运行中...
[技术指标模块][13:57:32] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:57:32] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:57:32] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:57:33] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:57:33] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:57:34] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:57:34] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:57:34] [INFO] 宏观因子模块运行中...
[数据收集总模块][13:57:36] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:57:36] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:57:37] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][13:57:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:57:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:57:38] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][13:57:38] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:57:38] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:57:38] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:57:39] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135730.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103769.4,
        "volume": 19450.07,
        "RSI": 59.765261372836804,
        "MACD_macd": -26.888620282697957,
        "MACD_signal": -55.2033038140122,
        "ATR": 188.45664018583233,
        "ADX": 19.82499014701907,
        "Stoch_K": 73.62745098039073,
        "Stoch_D": 55.74867762915992,
        "StochRSI_K": 70.6626364552687,
        "StochRSI_D": 53.55071363022531,
        "BB_upper": 103852.35754475264,
        "BB_lower": 103426.69245524735,
        "BB_middle": 103639.525,
        "EMA5": 103689.17327597263,
        "EMA21": 103672.32574108065,
        "EMA55": 103862.91929551426,
        "EMA144": 104143.253692605,
        "EMA200": 104217.71194636913,
        "VWAP": 104189.28158094613
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108650.9,
        "volume": 266302.71,
        "RSI": 54.204301119833346,
        "MACD_macd": 369.9278011439892,
        "MACD_signal": 389.0663405154481,
        "ATR": 554.2160492030032,
        "ADX": 17.158433117327135,
        "Stoch_K": 67.08241758241726,
        "Stoch_D": 77.0757698579132,
        "StochRSI_K": 17.761999254695883,
        "StochRSI_D": 41.11177766075221,
        "BB_upper": 109711.47040141541,
        "BB_lower": 106762.74959858462,
        "BB_middle": 108237.11000000002,
        "EMA5": 108716.25151866695,
        "EMA21": 108367.9925420621,
        "EMA55": 107474.88355091296,
        "EMA144": 106185.51822205452,
        "EMA200": 105819.06842647407,
        "VWAP": 106266.31315331464
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$22998022794.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104482.8",
        "lastSz": "2.15",
        "askPx": "104482.9",
        "askSz": "730.88",
        "bidPx": "104482.8",
        "bidSz": "271.63",
        "open24h": "103515.1",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39244.4212",
        "vol24h": "3924442.12",
        "ts": "1748757458722",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T05:57:39+00:00Z"
}
[gemini_api_caller.py][13:57:40] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:57:40] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135730.png
[gemini_api_caller.py][13:57:40] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:57:40] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:57:41] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:57:41] [INFO] AFC remote call 1 is done.
[_client.py][13:57:44] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][13:58:53] [INFO] 截图模块运行中...
[截图模块][13:58:53] [INFO]  __main__ 入口被执行
[截图模块][13:58:53] [INFO]  启动时主动清理内存...
[截图模块][13:58:54] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][13:58:54] [INFO]  已执行 pkill chrome
[截图模块][13:58:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:58:56] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][13:58:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][13:58:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][13:58:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][13:58:56] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][13:58:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][13:58:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][13:59:00] [INFO]  启动浏览器 (有头模式)
[截图模块][13:59:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:59:34] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][13:59:34] [INFO]  旧截图已清理，开始截图流程...
[截图模块][13:59:34] [INFO]  打开目标图表页...
[截图模块][13:59:40] [INFO]  等待5秒加载页面...
[截图模块][13:59:45] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][13:59:46] [INFO]  快捷键已发送
[截图模块][13:59:47] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135947.png
[截图模块][13:59:47] [INFO]  关闭浏览器...
[数据收集总模块][13:59:47] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135947.png
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:53] [INFO]  __main__ 入口被执行
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:53] [INFO]  启动时主动清理内存...
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:54] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:54] [INFO]  已执行 pkill chrome
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:56] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:58:58] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:00] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:00] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:34] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:34] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:34] [INFO]  打开目标图表页...
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:40] [INFO]  等待5秒加载页面...
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:45] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:46] [INFO]  快捷键已发送
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:47] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135947.png
[数据收集总模块][13:59:47] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][13:59:47] [INFO]  关闭浏览器...
[数据收集总模块][13:59:47] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135947.png
[数据收集总模块][13:59:47] [INFO] 技术指标模块运行中...
[技术指标模块][13:59:48] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][13:59:49] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][13:59:49] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][13:59:49] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][13:59:49] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][13:59:50] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][13:59:50] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:59:50] [INFO] 宏观因子模块运行中...
[宏观因子模块][13:59:51] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][13:59:52] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:59:52] [INFO] OKX 持仓模块运行中...
[get_positions.py][13:59:53] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][13:59:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][13:59:53] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][13:59:53] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][13:59:54] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][13:59:54] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][13:59:54] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][13:59:55] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135947.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2521.16,
        "volume": 206028.45,
        "RSI": 54.81270102100232,
        "MACD_macd": -1.8693741698139092,
        "MACD_signal": -2.3707170083528557,
        "ATR": 8.621053808437093,
        "ADX": 15.627067482757578,
        "Stoch_K": 75.69620253164493,
        "Stoch_D": 57.95358649789114,
        "StochRSI_K": 84.5183903307137,
        "StochRSI_D": 63.921360814462,
        "BB_upper": 2525.110542095573,
        "BB_lower": 2512.996457904427,
        "BB_middle": 2519.0535,
        "EMA5": 2518.5814488105816,
        "EMA21": 2519.711543198835,
        "EMA55": 2523.534083211311,
        "EMA144": 2523.267675055944,
        "EMA200": 2522.1956536080106,
        "VWAP": 2524.595837743008
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2633.69,
        "volume": 1321200.43,
        "RSI": 43.151619560424834,
        "MACD_macd": -8.072509845729655,
        "MACD_signal": -8.166986037225728,
        "ATR": 26.78999279139848,
        "ADX": 16.123072868761952,
        "Stoch_K": 33.353800810511984,
        "Stoch_D": 39.060133447951124,
        "StochRSI_K": 42.28146425540002,
        "StochRSI_D": 59.104107201776365,
        "BB_upper": 2662.7427401040204,
        "BB_lower": 2614.69725989598,
        "BB_middle": 2638.7200000000003,
        "EMA5": 2637.557028845475,
        "EMA21": 2646.5726628528214,
        "EMA55": 2642.400934504616,
        "EMA144": 2600.8315355083655,
        "EMA200": 2585.023005690767,
        "VWAP": 2618.488416454772
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0039%",
      "FGI": "56/100",
      "open_interest": "$591560165.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2517.14",
        "lastSz": "10",
        "askPx": "2517.14",
        "askSz": "492.94",
        "bidPx": "2517.13",
        "bidSz": "810.69",
        "open24h": "2511.01",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2246011.88",
        "vol24h": "22460118.8",
        "ts": "1748757594009",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T05:59:55+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][13:59:56] [INFO] prompt_text导入完成
[gemini_api_caller.py][13:59:56] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_135947.png
[gemini_api_caller.py][13:59:56] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][13:59:56] [INFO] 开始测试 Gemini API 流式调用...
[models.py][13:59:56] [INFO] AFC is enabled with max remote calls: 10.
[models.py][13:59:56] [INFO] AFC remote call 1 is done.
[_client.py][13:59:59] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:00:03] [INFO] 截图模块运行中...
[截图模块][14:00:04] [INFO]  __main__ 入口被执行
[截图模块][14:00:04] [INFO]  启动时主动清理内存...
[截图模块][14:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:00:04] [INFO]  已执行 pkill chrome
[截图模块][14:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][14:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][14:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:00:19] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:00:21] [INFO] 启动浏览器 (有头模式)
[截图模块][14:00:23] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:00:59] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:00:59] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:00:59] [INFO]  打开目标图表页...
[截图模块][14:01:06] [INFO]  等待5秒加载页面...
[截图模块][14:01:07] [INFO]  关闭浏览器...
[gemini_api_caller.py][14:01:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:01:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_135730.png
[gemini_api_caller.py][14:01:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:01:10] [INFO] 开始测试 Gemini API 流式调用...
[gemini_api_caller.py][14:01:10] [ERROR] [gemini_api_caller] Gemini API调用异常: local variable 'image' referenced before assignment
Traceback (most recent call last):
  File "/root/codespace/Qwen_quant_v1/BTC_code/gemini_api_caller.py", line 118, in call_gemini_api_stream
    image,
UnboundLocalError: local variable 'image' referenced before assignment

[数据收集总模块][14:03:22] [INFO] 截图模块运行中...
[截图模块][14:03:24] [INFO]  __main__ 入口被执行
[截图模块][14:03:24] [INFO]  启动时主动清理内存...
[截图模块][14:03:24] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:03:24] [INFO]  已执行 pkill chrome
[截图模块][14:03:26] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:03:26] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:03:26] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][14:03:26] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][14:03:26] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:03:26] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:03:26] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:03:28] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:03:30] [INFO] 启动浏览器 (有头模式)
[截图模块][14:03:32] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:04:07] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:04:07] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:04:07] [INFO]  打开目标图表页...
[截图模块][14:04:14] [INFO]  等待5秒加载页面...
[截图模块][14:04:19] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:04:21] [INFO]  快捷键已发送
[截图模块][14:04:22] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_140422.png
[截图模块][14:04:22] [INFO]  关闭浏览器...
[数据收集总模块][14:04:22] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_140422.png
[数据收集总模块][14:04:22] [INFO] 技术指标模块运行中...
[技术指标模块][14:04:23] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:04:24] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:04:24] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:04:24] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:04:24] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:04:25] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:04:25] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:04:25] [INFO] 宏观因子模块运行中...
[数据收集总模块][14:04:27] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:04:27] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:04:29] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][14:04:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:04:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:04:29] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][14:04:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:04:29] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:04:30] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:04:30] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_140422.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103680.9,
        "volume": 43332.61,
        "RSI": 53.14604860563592,
        "MACD_macd": -39.58803587217699,
        "MACD_signal": -62.2966986659083,
        "ATR": 202.2653332325081,
        "ADX": 19.150416497182956,
        "Stoch_K": 52.053789731049925,
        "Stoch_D": 46.560717196413066,
        "StochRSI_K": 50.33608166525687,
        "StochRSI_D": 44.65725875979001,
        "BB_upper": 103838.34803049211,
        "BB_lower": 103413.80196950788,
        "BB_middle": 103626.075,
        "EMA5": 103649.05991395892,
        "EMA21": 103662.61994356339,
        "EMA55": 103866.94015594493,
        "EMA144": 104153.64022932376,
        "EMA200": 104229.79769603121,
        "VWAP": 104192.42975054301
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108596.6,
        "volume": 361407.98,
        "RSI": 52.29173096180888,
        "MACD_macd": 394.7565024383948,
        "MACD_signal": 393.92105856402026,
        "ATR": 537.5722879781546,
        "ADX": 17.499651767410246,
        "Stoch_K": 76.90783888312461,
        "Stoch_D": 85.67273527654663,
        "StochRSI_K": 39.01624311854018,
        "StochRSI_D": 62.9073449743934,
        "BB_upper": 109678.21202421191,
        "BB_lower": 106675.59797578809,
        "BB_middle": 108176.905,
        "EMA5": 108748.92727800041,
        "EMA21": 108339.69404552419,
        "EMA55": 107428.67530516499,
        "EMA144": 106126.48717593552,
        "EMA200": 105754.52800861045,
        "VWAP": 106242.64303339335
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0099%",
      "FGI": "56/100",
      "open_interest": "$22999611660.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104427.6",
        "lastSz": "2.61",
        "askPx": "104427.7",
        "askSz": "671.42",
        "bidPx": "104427.6",
        "bidSz": "499.77",
        "open24h": "103531.9",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39134.1463",
        "vol24h": "3913414.63",
        "ts": "1748757869414",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T06:04:30+00:00Z"
}
[gemini_api_caller.py][14:04:31] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:04:31] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_140422.png
[gemini_api_caller.py][14:04:31] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:04:31] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:04:32] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:04:32] [INFO] AFC remote call 1 is done.
[_client.py][14:04:36] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:05:18] [INFO] 截图模块运行中...
[截图模块][14:05:19] [INFO]  __main__ 入口被执行
[截图模块][14:05:19] [INFO]  启动时主动清理内存...
[截图模块][14:05:19] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:05:19] [INFO]  已执行 pkill chrome
[截图模块][14:05:22] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:05:22] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:05:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][14:05:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][14:05:22] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:05:22] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:05:22] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:05:26] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:05:27] [INFO]  启动浏览器 (有头模式)
[截图模块][14:05:27] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:05:37] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:05:37] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:05:37] [INFO]  打开目标图表页...
[截图模块][14:05:43] [INFO]  等待5秒加载页面...
[截图模块][14:05:48] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:05:50] [INFO]  快捷键已发送
[截图模块][14:05:51] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_140551.png
[截图模块][14:05:51] [INFO]  关闭浏览器...
[数据收集总模块][14:05:51] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_140551.png
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:19] [INFO]  __main__ 入口被执行
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:19] [INFO]  启动时主动清理内存...
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:19] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:19] [INFO]  已执行 pkill chrome
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:22] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:26] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:27] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:27] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:37] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:37] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:37] [INFO]  打开目标图表页...
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:43] [INFO]  等待5秒加载页面...
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:48] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:50] [INFO]  快捷键已发送
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:51] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_140551.png
[数据收集总模块][14:05:51] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:05:51] [INFO]  关闭浏览器...
[数据收集总模块][14:05:51] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_140551.png
[数据收集总模块][14:05:51] [INFO] 技术指标模块运行中...
[技术指标模块][14:05:52] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:05:53] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:05:53] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:05:53] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:05:53] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:05:54] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:05:54] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:05:54] [INFO] 宏观因子模块运行中...
[宏观因子模块][14:05:55] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][14:05:56] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:05:56] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:05:57] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][14:05:57] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:05:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:05:58] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][14:05:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:05:58] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:05:58] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:05:59] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_140551.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2517.13,
        "volume": 277617.7,
        "RSI": 47.329465243413,
        "MACD_macd": -2.279302307340913,
        "MACD_signal": -2.4971642332993955,
        "ATR": 8.971984924339942,
        "ADX": 17.457604256135095,
        "Stoch_K": 50.18987341772279,
        "Stoch_D": 51.63772571087558,
        "StochRSI_K": 54.936885236278776,
        "StochRSI_D": 61.29930859631671,
        "BB_upper": 2525.265236233817,
        "BB_lower": 2512.9517637661825,
        "BB_middle": 2519.1085,
        "EMA5": 2517.2921732158725,
        "EMA21": 2519.5668204450417,
        "EMA55": 2523.664074059396,
        "EMA144": 2523.686517399724,
        "EMA200": 2522.778285570227,
        "VWAP": 2524.593210242713
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.25,
        "volume": 2078808.6,
        "RSI": 45.4779487957597,
        "MACD_macd": -8.015099617736723,
        "MACD_signal": -8.188013955248387,
        "ATR": 26.516142481728465,
        "ADX": 18.185331680054077,
        "Stoch_K": 37.72565393589569,
        "Stoch_D": 43.632567849686815,
        "StochRSI_K": 55.88517209321542,
        "StochRSI_D": 72.25557439208443,
        "BB_upper": 2664.0363646239257,
        "BB_lower": 2615.0996353760747,
        "BB_middle": 2639.568,
        "EMA5": 2639.4905432682126,
        "EMA21": 2647.860642576092,
        "EMA55": 2642.625508457498,
        "EMA144": 2599.464302478852,
        "EMA200": 2583.1999408545953,
        "VWAP": 2618.017664121312
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0038%",
      "FGI": "56/100",
      "open_interest": "$591664740.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2514.83",
        "lastSz": "11.58",
        "askPx": "2514.84",
        "askSz": "1089.66",
        "bidPx": "2514.83",
        "bidSz": "563.85",
        "open24h": "2515.68",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2244453.234",
        "vol24h": "22444532.34",
        "ts": "1748757958314",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T06:05:59+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][14:06:00] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:06:00] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_140551.png
[gemini_api_caller.py][14:06:00] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:06:00] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:06:00] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:06:00] [INFO] AFC remote call 1 is done.
[_client.py][14:06:03] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:09:08] [INFO] 截图模块运行中...
[截图模块][14:09:09] [INFO]  __main__ 入口被执行
[截图模块][14:09:09] [INFO]  启动时主动清理内存...
[截图模块][14:09:09] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:09:09] [INFO]  已执行 pkill chrome
[截图模块][14:09:12] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:09:12] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:09:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][14:09:12] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][14:09:12] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:09:12] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:09:12] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:09:14] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:09:16] [INFO] 启动浏览器 (有头模式)
[截图模块][14:09:18] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:09:53] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:09:53] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:09:53] [INFO]  打开目标图表页...
[截图模块][14:10:00] [INFO]  等待5秒加载页面...
[截图模块][14:10:05] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:10:05] [INFO]  快捷键已发送
[截图模块][14:10:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141006.png
[截图模块][14:10:06] [INFO]  关闭浏览器...
[数据收集总模块][14:10:07] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141006.png
[数据收集总模块][14:10:07] [INFO] 技术指标模块运行中...
[技术指标模块][14:10:08] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:10:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:10:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:10:09] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:10:09] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:10:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:10:09] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:10:09] [INFO] 宏观因子模块运行中...
[数据收集总模块][14:10:13] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:10:13] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:10:14] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][14:10:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:10:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:10:15] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][14:10:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:10:15] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:10:15] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:10:16] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141006.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103680.9,
        "volume": 43332.61,
        "RSI": 53.14604860563592,
        "MACD_macd": -39.58803587217699,
        "MACD_signal": -62.2966986659083,
        "ATR": 202.2653332325081,
        "ADX": 19.150416497182956,
        "Stoch_K": 52.053789731049925,
        "Stoch_D": 46.560717196413066,
        "StochRSI_K": 50.33608166525687,
        "StochRSI_D": 44.65725875979001,
        "BB_upper": 103838.34803049211,
        "BB_lower": 103413.80196950788,
        "BB_middle": 103626.075,
        "EMA5": 103649.05991395892,
        "EMA21": 103662.61994356339,
        "EMA55": 103866.94015594493,
        "EMA144": 104153.64022932376,
        "EMA200": 104229.79769603121,
        "VWAP": 104192.42975054301
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108596.6,
        "volume": 361407.98,
        "RSI": 52.29173096180888,
        "MACD_macd": 394.7565024383948,
        "MACD_signal": 393.92105856402026,
        "ATR": 537.5722879781546,
        "ADX": 17.499651767410246,
        "Stoch_K": 76.90783888312461,
        "Stoch_D": 85.67273527654663,
        "StochRSI_K": 39.01624311854018,
        "StochRSI_D": 62.9073449743934,
        "BB_upper": 109678.21202421191,
        "BB_lower": 106675.59797578809,
        "BB_middle": 108176.905,
        "EMA5": 108748.92727800041,
        "EMA21": 108339.69404552419,
        "EMA55": 107428.67530516499,
        "EMA144": 106126.48717593552,
        "EMA200": 105754.52800861045,
        "VWAP": 106242.64303339335
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0096%",
      "FGI": "56/100",
      "open_interest": "$23000638907.999992 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104395.9",
        "lastSz": "0.01",
        "askPx": "104395.9",
        "askSz": "766.73",
        "bidPx": "104395.8",
        "bidSz": "105.76",
        "open24h": "103518.7",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39168.9945",
        "vol24h": "3916899.45",
        "ts": "1748758215715",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T06:10:16+00:00Z"
}
[gemini_api_caller.py][14:10:17] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:10:17] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141006.png
[gemini_api_caller.py][14:10:17] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:10:17] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:10:17] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:10:17] [INFO] AFC remote call 1 is done.
[_client.py][14:10:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:11:10] [INFO] 截图模块运行中...
[截图模块][14:11:11] [INFO]  __main__ 入口被执行
[截图模块][14:11:11] [INFO]  启动时主动清理内存...
[截图模块][14:11:11] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:11:11] [INFO]  已执行 pkill chrome
[截图模块][14:11:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:11:13] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:11:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][14:11:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][14:11:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:11:13] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:11:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:11:22] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:11:23] [INFO]  启动浏览器 (有头模式)
[截图模块][14:11:23] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:15:02] [INFO] 截图模块运行中...
[截图模块][14:15:04] [INFO]  __main__ 入口被执行
[截图模块][14:15:04] [INFO]  启动时主动清理内存...
[截图模块][14:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:15:04] [INFO]  已执行 pkill chrome
[截图模块][14:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][14:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][14:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:15:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:15:10] [INFO] 启动浏览器 (有头模式)
[截图模块][14:15:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:15:49] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:15:49] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:15:49] [INFO]  打开目标图表页...
[截图模块][14:15:55] [INFO]  等待5秒加载页面...
[截图模块][14:16:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:16:01] [INFO]  快捷键已发送
[截图模块][14:16:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141602.png
[截图模块][14:16:02] [INFO]  关闭浏览器...
[数据收集总模块][14:16:02] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141602.png
[数据收集总模块][14:16:02] [INFO] 技术指标模块运行中...
[技术指标模块][14:16:03] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:16:04] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:16:04] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:16:04] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:16:04] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:16:05] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:16:05] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:16:05] [INFO] 宏观因子模块运行中...
[数据收集总模块][14:16:08] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:16:08] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:16:09] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][14:16:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:16:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:16:09] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][14:16:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:16:10] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:16:10] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:16:10] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141602.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103638.0,
        "volume": 30776.96,
        "RSI": 49.66732432156356,
        "MACD_macd": -46.117490815056954,
        "MACD_signal": -67.85470126173765,
        "ATR": 197.1216044883843,
        "ADX": 18.372768026456463,
        "Stoch_K": 41.56479217603912,
        "Stoch_D": 30.75794621026847,
        "StochRSI_K": 39.653413457032926,
        "StochRSI_D": 27.878552206859695,
        "BB_upper": 103840.3776355042,
        "BB_lower": 103387.43236449579,
        "BB_middle": 103613.905,
        "EMA5": 103633.13987093838,
        "EMA21": 103660.77875926005,
        "EMA55": 103869.32117506072,
        "EMA144": 104118.5090862067,
        "EMA200": 104173.96745022331,
        "VWAP": 104198.7542730035
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108596.6,
        "volume": 361407.98,
        "RSI": 52.29173096180888,
        "MACD_macd": 394.7565024383948,
        "MACD_signal": 393.92105856402026,
        "ATR": 537.5722879781546,
        "ADX": 17.499651767410246,
        "Stoch_K": 76.90783888312461,
        "Stoch_D": 85.67273527654663,
        "StochRSI_K": 39.01624311854018,
        "StochRSI_D": 62.9073449743934,
        "BB_upper": 109678.21202421191,
        "BB_lower": 106675.59797578809,
        "BB_middle": 108176.905,
        "EMA5": 108748.92727800041,
        "EMA21": 108339.69404552419,
        "EMA55": 107428.67530516499,
        "EMA144": 106126.48717593552,
        "EMA200": 105754.52800861045,
        "VWAP": 106242.64303339335
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0096%",
      "FGI": "56/100",
      "open_interest": "$22998849274.999996 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104303.7",
        "lastSz": "0.02",
        "askPx": "104303.8",
        "askSz": "759.27",
        "bidPx": "104303.7",
        "bidSz": "179.79",
        "open24h": "103593.2",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39264.0618",
        "vol24h": "3926406.18",
        "ts": "1748758570113",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T06:16:10+00:00Z"
}
[gemini_api_caller.py][14:16:12] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:16:12] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_141602.png
[gemini_api_caller.py][14:16:12] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:16:12] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:16:12] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:16:12] [INFO] AFC remote call 1 is done.
[_client.py][14:16:15] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:17:29] [INFO] 截图模块运行中...
[截图模块][14:17:31] [INFO]  __main__ 入口被执行
[截图模块][14:17:31] [INFO]  启动时主动清理内存...
[截图模块][14:17:31] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:17:31] [INFO]  已执行 pkill chrome
[截图模块][14:17:33] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:17:33] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:17:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][14:17:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][14:17:33] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:17:33] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:17:33] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:17:42] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:17:44] [INFO]  启动浏览器 (有头模式)
[截图模块][14:17:44] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:18:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:18:18] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:18:18] [INFO]  打开目标图表页...
[截图模块][14:18:26] [INFO]  等待5秒加载页面...
[截图模块][14:18:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:18:32] [INFO]  快捷键已发送
[截图模块][14:18:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_141833.png
[截图模块][14:18:33] [INFO]  关闭浏览器...
[数据收集总模块][14:18:33] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_141833.png
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:31] [INFO]  __main__ 入口被执行
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:31] [INFO]  启动时主动清理内存...
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:31] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:31] [INFO]  已执行 pkill chrome
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:33] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:42] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:44] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:17:44] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:18] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:18] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:18] [INFO]  打开目标图表页...
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:26] [INFO]  等待5秒加载页面...
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:31] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:32] [INFO]  快捷键已发送
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:33] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_141833.png
[数据收集总模块][14:18:33] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:18:33] [INFO]  关闭浏览器...
[数据收集总模块][14:18:33] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_141833.png
[数据收集总模块][14:18:33] [INFO] 技术指标模块运行中...
[技术指标模块][14:18:34] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:18:35] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:18:35] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:18:35] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:18:35] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:18:36] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:18:36] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:18:36] [INFO] 宏观因子模块运行中...
[宏观因子模块][14:18:36] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][14:18:38] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:18:38] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:18:40] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][14:18:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:18:40] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:18:40] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][14:18:41] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:18:41] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:18:41] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:18:41] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_141833.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2516.78,
        "volume": 235970.42,
        "RSI": 46.66464856117378,
        "MACD_macd": -2.357443490251171,
        "MACD_signal": -2.5505975934276477,
        "ATR": 9.050750984359292,
        "ADX": 19.56975776913376,
        "Stoch_K": 47.97468354430566,
        "Stoch_D": 37.93502998892914,
        "StochRSI_K": 52.30882224408687,
        "StochRSI_D": 42.98700786923436,
        "BB_upper": 2528.0546421691665,
        "BB_lower": 2511.607357830833,
        "BB_middle": 2519.8309999999997,
        "EMA5": 2517.3732598238084,
        "EMA21": 2519.8103883436743,
        "EMA55": 2523.867019379239,
        "EMA144": 2523.416664313592,
        "EMA200": 2522.303701974937,
        "VWAP": 2524.6015103659497
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.25,
        "volume": 2078808.6,
        "RSI": 45.4779487957597,
        "MACD_macd": -8.015099617736723,
        "MACD_signal": -8.188013955248387,
        "ATR": 26.516142481728465,
        "ADX": 18.185331680054077,
        "Stoch_K": 37.72565393589569,
        "Stoch_D": 43.632567849686815,
        "StochRSI_K": 55.88517209321542,
        "StochRSI_D": 72.25557439208443,
        "BB_upper": 2664.0363646239257,
        "BB_lower": 2615.0996353760747,
        "BB_middle": 2639.568,
        "EMA5": 2639.4905432682126,
        "EMA21": 2647.860642576092,
        "EMA55": 2642.625508457498,
        "EMA144": 2599.464302478852,
        "EMA200": 2583.1999408545953,
        "VWAP": 2618.017664121312
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0033%",
      "FGI": "56/100",
      "open_interest": "$592614791.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2512.11",
        "lastSz": "2.69",
        "askPx": "2512.11",
        "askSz": "1435.56",
        "bidPx": "2512.1",
        "bidSz": "271.48",
        "open24h": "2516.17",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2245255.018",
        "vol24h": "22452550.18",
        "ts": "1748758720815",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T06:18:41+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][14:18:43] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:18:43] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_141833.png
[gemini_api_caller.py][14:18:43] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:18:43] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:18:43] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:18:43] [INFO] AFC remote call 1 is done.
[_client.py][14:18:47] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:30:03] [INFO] 截图模块运行中...
[截图模块][14:30:05] [INFO]  __main__ 入口被执行
[截图模块][14:30:05] [INFO]  启动时主动清理内存...
[截图模块][14:30:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:30:05] [INFO]  已执行 pkill chrome
[截图模块][14:30:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:30:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:30:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][14:30:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][14:30:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:30:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:30:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:30:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:30:11] [INFO] 启动浏览器 (有头模式)
[截图模块][14:30:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:30:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:30:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:30:51] [INFO]  打开目标图表页...
[截图模块][14:30:58] [INFO]  等待5秒加载页面...
[截图模块][14:31:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:31:03] [INFO]  快捷键已发送
[截图模块][14:31:05] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_143105.png
[截图模块][14:31:05] [INFO]  关闭浏览器...
[数据收集总模块][14:31:05] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_143105.png
[数据收集总模块][14:31:05] [INFO] 技术指标模块运行中...
[技术指标模块][14:31:06] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:31:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:31:06] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:31:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:31:07] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:31:08] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:31:08] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:31:08] [INFO] 宏观因子模块运行中...
[数据收集总模块][14:31:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:31:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:31:12] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][14:31:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:31:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:31:12] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][14:31:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:31:13] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:31:13] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:31:13] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_143105.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103656.4,
        "volume": 33630.67,
        "RSI": 51.07698182286858,
        "MACD_macd": -49.48393803086947,
        "MACD_signal": -73.25298789022216,
        "ATR": 202.44801318428685,
        "ADX": 20.737002097195003,
        "Stoch_K": 46.06356968215017,
        "Stoch_D": 28.616368555597035,
        "StochRSI_K": 43.98223821082644,
        "StochRSI_D": 20.27178675494041,
        "BB_upper": 103852.76661014163,
        "BB_lower": 103347.29338985837,
        "BB_middle": 103600.03,
        "EMA5": 103630.70980640755,
        "EMA21": 103663.05265205391,
        "EMA55": 103876.52571311296,
        "EMA144": 104112.61307605132,
        "EMA200": 104160.81253385176,
        "VWAP": 104203.47639070266
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108596.6,
        "volume": 361407.98,
        "RSI": 52.29173096180888,
        "MACD_macd": 394.7565024383948,
        "MACD_signal": 393.92105856402026,
        "ATR": 537.5722879781546,
        "ADX": 17.499651767410246,
        "Stoch_K": 76.90783888312461,
        "Stoch_D": 85.67273527654663,
        "StochRSI_K": 39.01624311854018,
        "StochRSI_D": 62.9073449743934,
        "BB_upper": 109678.21202421191,
        "BB_lower": 106675.59797578809,
        "BB_middle": 108176.905,
        "EMA5": 108748.92727800041,
        "EMA21": 108339.69404552419,
        "EMA55": 107428.67530516499,
        "EMA144": 106126.48717593552,
        "EMA200": 105754.52800861045,
        "VWAP": 106242.64303339335
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0094%",
      "FGI": "56/100",
      "open_interest": "$22992389895.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104290.1",
        "lastSz": "0.03",
        "askPx": "104290.2",
        "askSz": "42.85",
        "bidPx": "104290.1",
        "bidSz": "1416.34",
        "open24h": "103664",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39632.284",
        "vol24h": "3963228.4",
        "ts": "1748759473315",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T06:31:13+00:00Z"
}
[gemini_api_caller.py][14:31:14] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:31:14] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_143105.png
[gemini_api_caller.py][14:31:14] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:31:14] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:31:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:31:15] [INFO] AFC remote call 1 is done.
[_client.py][14:31:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:33:03] [INFO] 截图模块运行中...
[截图模块][14:33:05] [INFO]  __main__ 入口被执行
[截图模块][14:33:05] [INFO]  启动时主动清理内存...
[截图模块][14:33:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:33:05] [INFO]  已执行 pkill chrome
[截图模块][14:33:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:33:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:33:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][14:33:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][14:33:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:33:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:33:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:33:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:33:10] [INFO]  启动浏览器 (有头模式)
[截图模块][14:33:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:33:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:33:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:33:44] [INFO]  打开目标图表页...
[截图模块][14:33:50] [INFO]  等待5秒加载页面...
[截图模块][14:33:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:33:56] [INFO]  快捷键已发送
[截图模块][14:33:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_143357.png
[截图模块][14:33:57] [INFO]  关闭浏览器...
[数据收集总模块][14:33:57] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_143357.png
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:05] [INFO]  __main__ 入口被执行
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:05] [INFO]  启动时主动清理内存...
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:05] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:05] [INFO]  已执行 pkill chrome
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:44] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:44] [INFO]  打开目标图表页...
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:50] [INFO]  等待5秒加载页面...
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:56] [INFO]  快捷键已发送
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_143357.png
[数据收集总模块][14:33:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:33:57] [INFO]  关闭浏览器...
[数据收集总模块][14:33:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_143357.png
[数据收集总模块][14:33:57] [INFO] 技术指标模块运行中...
[技术指标模块][14:33:58] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:33:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:33:59] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:33:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:33:59] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:34:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:34:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:34:00] [INFO] 宏观因子模块运行中...
[宏观因子模块][14:34:01] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][14:34:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:34:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:34:05] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][14:34:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:34:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:34:05] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][14:34:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:34:06] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:34:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:34:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_143357.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2520.51,
        "volume": 145272.94,
        "RSI": 52.82279418146969,
        "MACD_macd": -2.386247275220285,
        "MACD_signal": -2.5961867248930495,
        "ATR": 9.143177720692464,
        "ADX": 17.488203710558953,
        "Stoch_K": 56.74862017059827,
        "Stoch_D": 33.22884829190015,
        "StochRSI_K": 76.65218179539261,
        "StochRSI_D": 33.322143826315916,
        "BB_upper": 2528.1720943725463,
        "BB_lower": 2511.9379056274543,
        "BB_middle": 2520.0550000000003,
        "EMA5": 2517.669889735712,
        "EMA21": 2520.1131286426867,
        "EMA55": 2524.027351394985,
        "EMA144": 2522.5638856068576,
        "EMA200": 2520.9695312083513,
        "VWAP": 2524.5409014334928
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.25,
        "volume": 2078808.6,
        "RSI": 45.4779487957597,
        "MACD_macd": -8.015099617736723,
        "MACD_signal": -8.188013955248387,
        "ATR": 26.516142481728465,
        "ADX": 18.185331680054077,
        "Stoch_K": 37.72565393589569,
        "Stoch_D": 43.632567849686815,
        "StochRSI_K": 55.88517209321542,
        "StochRSI_D": 72.25557439208443,
        "BB_upper": 2664.0363646239257,
        "BB_lower": 2615.0996353760747,
        "BB_middle": 2639.568,
        "EMA5": 2639.4905432682126,
        "EMA21": 2647.860642576092,
        "EMA55": 2642.625508457498,
        "EMA144": 2599.464302478852,
        "EMA200": 2583.1999408545953,
        "VWAP": 2618.017664121312
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0032%",
      "FGI": "56/100",
      "open_interest": "$591519538.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2516.32",
        "lastSz": "0.01",
        "askPx": "2516.4",
        "askSz": "32.58",
        "bidPx": "2516.39",
        "bidSz": "1713.14",
        "open24h": "2516.33",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2251968.255",
        "vol24h": "22519682.55",
        "ts": "1748759646318",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T06:34:07+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][14:34:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:34:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_143357.png
[gemini_api_caller.py][14:34:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:34:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:34:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:34:08] [INFO] AFC remote call 1 is done.
[_client.py][14:34:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:45:02] [INFO] 截图模块运行中...
[截图模块][14:45:04] [INFO]  __main__ 入口被执行
[截图模块][14:45:04] [INFO]  启动时主动清理内存...
[截图模块][14:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:45:04] [INFO]  已执行 pkill chrome
[截图模块][14:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][14:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][14:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][14:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:45:10] [INFO] 启动浏览器 (有头模式)
[截图模块][14:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:45:50] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][14:45:50] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:45:50] [INFO]  打开目标图表页...
[截图模块][14:45:58] [INFO]  等待5秒加载页面...
[截图模块][14:46:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:46:03] [INFO]  快捷键已发送
[截图模块][14:46:04] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_144604.png
[截图模块][14:46:04] [INFO]  关闭浏览器...
[数据收集总模块][14:46:05] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_144604.png
[数据收集总模块][14:46:05] [INFO] 技术指标模块运行中...
[技术指标模块][14:46:06] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:46:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:46:06] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:46:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:46:07] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:46:07] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:46:07] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:46:07] [INFO] 宏观因子模块运行中...
[数据收集总模块][14:46:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:46:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:46:12] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][14:46:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:46:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:46:12] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][14:46:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:46:12] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:46:13] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:46:13] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_144604.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103487.0,
        "volume": 36855.36,
        "RSI": 36.75445467915041,
        "MACD_macd": -54.97914464837231,
        "MACD_signal": -79.21841895344637,
        "ATR": 200.393786216571,
        "ADX": 22.381329391804478,
        "Stoch_K": 4.645476772616137,
        "Stoch_D": 30.66107101712343,
        "StochRSI_K": 0.0,
        "StochRSI_D": 17.36453449577901,
        "BB_upper": 103866.51611554364,
        "BB_lower": 103297.89388445637,
        "BB_middle": 103582.205,
        "EMA5": 103617.86470961131,
        "EMA21": 103663.72047955473,
        "EMA55": 103885.55526085579,
        "EMA144": 104127.10965014227,
        "EMA200": 104177.80951993173,
        "VWAP": 104208.56128190125
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108596.6,
        "volume": 361407.98,
        "RSI": 52.29173096180888,
        "MACD_macd": 394.7565024383948,
        "MACD_signal": 393.92105856402026,
        "ATR": 537.5722879781546,
        "ADX": 17.499651767410246,
        "Stoch_K": 76.90783888312461,
        "Stoch_D": 85.67273527654663,
        "StochRSI_K": 39.01624311854018,
        "StochRSI_D": 62.9073449743934,
        "BB_upper": 109678.21202421191,
        "BB_lower": 106675.59797578809,
        "BB_middle": 108176.905,
        "EMA5": 108748.92727800041,
        "EMA21": 108339.69404552419,
        "EMA55": 107428.67530516499,
        "EMA144": 106126.48717593552,
        "EMA200": 105754.52800861045,
        "VWAP": 106242.64303339335
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0093%",
      "FGI": "56/100",
      "open_interest": "$22992860271.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104310.4",
        "lastSz": "0.02",
        "askPx": "104310.5",
        "askSz": "664.16",
        "bidPx": "104310.4",
        "bidSz": "253.34",
        "open24h": "103840",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39299.6092",
        "vol24h": "3929960.92",
        "ts": "1748760372716",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T06:46:13+00:00Z"
}
[gemini_api_caller.py][14:46:14] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:46:14] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_144604.png
[gemini_api_caller.py][14:46:14] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:46:14] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:46:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:46:15] [INFO] AFC remote call 1 is done.
[_client.py][14:46:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][14:47:25] [INFO] 截图模块运行中...
[截图模块][14:47:27] [INFO]  __main__ 入口被执行
[截图模块][14:47:27] [INFO]  启动时主动清理内存...
[截图模块][14:47:27] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][14:47:27] [INFO]  已执行 pkill chrome
[截图模块][14:47:30] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:47:30] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][14:47:30] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][14:47:30] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][14:47:30] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][14:47:30] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][14:47:30] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][14:47:32] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][14:47:34] [INFO]  启动浏览器 (有头模式)
[截图模块][14:47:34] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:48:08] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][14:48:08] [INFO]  旧截图已清理，开始截图流程...
[截图模块][14:48:08] [INFO]  打开目标图表页...
[截图模块][14:48:14] [INFO]  等待5秒加载页面...
[截图模块][14:48:19] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][14:48:20] [INFO]  快捷键已发送
[截图模块][14:48:21] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_144821.png
[截图模块][14:48:21] [INFO]  关闭浏览器...
[数据收集总模块][14:48:22] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_144821.png
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:27] [INFO]  __main__ 入口被执行
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:27] [INFO]  启动时主动清理内存...
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:27] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:27] [INFO]  已执行 pkill chrome
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:30] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:32] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:34] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:47:34] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:08] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:08] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:08] [INFO]  打开目标图表页...
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:14] [INFO]  等待5秒加载页面...
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:19] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:20] [INFO]  快捷键已发送
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:21] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_144821.png
[数据收集总模块][14:48:22] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][14:48:21] [INFO]  关闭浏览器...
[数据收集总模块][14:48:22] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_144821.png
[数据收集总模块][14:48:22] [INFO] 技术指标模块运行中...
[技术指标模块][14:48:23] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][14:48:24] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][14:48:24] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][14:48:25] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][14:48:25] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][14:48:25] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][14:48:25] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:48:25] [INFO] 宏观因子模块运行中...
[宏观因子模块][14:48:26] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][14:48:28] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:48:28] [INFO] OKX 持仓模块运行中...
[get_positions.py][14:48:29] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][14:48:29] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:48:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:48:30] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][14:48:30] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:48:30] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][14:48:30] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][14:48:31] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_144821.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2511.01,
        "volume": 231621.2,
        "RSI": 33.43209969659539,
        "MACD_macd": -2.7712799082646598,
        "MACD_signal": -2.650180072377843,
        "ATR": 9.011357100108555,
        "ADX": 17.048540579069765,
        "Stoch_K": 9.081786251883461,
        "Stoch_D": 24.856859255442103,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.202669924906477,
        "BB_upper": 2528.2006260462713,
        "BB_lower": 2511.3573739537287,
        "BB_middle": 2519.779,
        "EMA5": 2516.2498346035677,
        "EMA21": 2520.0736083355373,
        "EMA55": 2524.214707594938,
        "EMA144": 2523.1210343545686,
        "EMA200": 2521.750738489711,
        "VWAP": 2524.5271608625485
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2637.25,
        "volume": 2078808.6,
        "RSI": 45.4779487957597,
        "MACD_macd": -8.015099617736723,
        "MACD_signal": -8.188013955248387,
        "ATR": 26.516142481728465,
        "ADX": 18.185331680054077,
        "Stoch_K": 37.72565393589569,
        "Stoch_D": 43.632567849686815,
        "StochRSI_K": 55.88517209321542,
        "StochRSI_D": 72.25557439208443,
        "BB_upper": 2664.0363646239257,
        "BB_lower": 2615.0996353760747,
        "BB_middle": 2639.568,
        "EMA5": 2639.4905432682126,
        "EMA21": 2647.860642576092,
        "EMA55": 2642.625508457498,
        "EMA144": 2599.464302478852,
        "EMA200": 2583.1999408545953,
        "VWAP": 2618.017664121312
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "56/100",
      "open_interest": "$591561401.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2511.09",
        "lastSz": "0.19",
        "askPx": "2511.1",
        "askSz": "540.34",
        "bidPx": "2511.09",
        "bidSz": "614.23",
        "open24h": "2520.85",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2241130.853",
        "vol24h": "22411308.53",
        "ts": "1748760510313",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T06:48:31+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  }
}
[gemini_api_caller.py][14:48:33] [INFO] prompt_text导入完成
[gemini_api_caller.py][14:48:33] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_144821.png
[gemini_api_caller.py][14:48:33] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][14:48:33] [INFO] 开始测试 Gemini API 流式调用...
[models.py][14:48:33] [INFO] AFC is enabled with max remote calls: 10.
[models.py][14:48:33] [INFO] AFC remote call 1 is done.
[_client.py][14:48:36] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[get_positions.py][14:54:04] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][14:54:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:54:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:54:04] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][14:54:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][14:54:05] [INFO] 未获取到 ETH-USDT-SWAP 的挂单信息或挂单列表为空。
[get_positions.py][14:55:20] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][14:55:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][14:55:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][14:55:21] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][14:55:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][14:55:21] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][15:00:03] [INFO] 截图模块运行中...
[截图模块][15:00:05] [INFO]  __main__ 入口被执行
[截图模块][15:00:05] [INFO]  启动时主动清理内存...
[截图模块][15:00:05] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:00:05] [INFO]  已执行 pkill chrome
[截图模块][15:00:08] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:00:08] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:00:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][15:00:08] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][15:00:08] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:00:08] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:00:08] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:00:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:00:12] [INFO] 启动浏览器 (有头模式)
[截图模块][15:00:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:00:52] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:00:52] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:00:52] [INFO]  打开目标图表页...
[截图模块][15:00:59] [INFO]  等待5秒加载页面...
[截图模块][15:01:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:01:05] [INFO]  快捷键已发送
[截图模块][15:01:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_150106.png
[截图模块][15:01:06] [INFO]  关闭浏览器...
[数据收集总模块][15:01:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_150106.png
[数据收集总模块][15:01:06] [INFO] 技术指标模块运行中...
[技术指标模块][15:01:08] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:01:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:01:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:01:09] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:01:09] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:01:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:01:09] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:01:09] [INFO] 宏观因子模块运行中...
[数据收集总模块][15:01:12] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:01:12] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:01:14] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][15:01:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:01:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:01:14] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][15:01:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][15:01:15] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][15:01:15] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:01:15] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_150106.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103592.2,
        "volume": 26189.45,
        "RSI": 43.62885681929446,
        "MACD_macd": -43.8846370044339,
        "MACD_signal": -85.21638242435043,
        "ATR": 202.39287672332438,
        "ADX": 22.513760931395154,
        "Stoch_K": 35.140059212024795,
        "Stoch_D": 61.018750474455835,
        "StochRSI_K": 16.833033779460923,
        "StochRSI_D": 50.69779586523188,
        "BB_upper": 103873.09011043773,
        "BB_lower": 103279.98988956226,
        "BB_middle": 103576.54,
        "EMA5": 103683.29706441695,
        "EMA21": 103681.38568674018,
        "EMA55": 103897.97585271594,
        "EMA144": 104114.39435825123,
        "EMA200": 104152.90846947356,
        "VWAP": 104214.84069612461
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108815.6,
        "volume": 144099.66,
        "RSI": 61.230016464109234,
        "MACD_macd": 426.30928999251046,
        "MACD_signal": 393.9060631881869,
        "ATR": 546.5373226446704,
        "ADX": 17.530189880629756,
        "Stoch_K": 87.23705310819774,
        "Stoch_D": 90.85463635506112,
        "StochRSI_K": 66.55702893217706,
        "StochRSI_D": 77.42240317704646,
        "BB_upper": 109646.06237823037,
        "BB_lower": 106582.48762176961,
        "BB_middle": 108114.275,
        "EMA5": 108825.09091700059,
        "EMA21": 108313.98200981018,
        "EMA55": 107378.08259453566,
        "EMA144": 106024.02892911766,
        "EMA200": 105626.15979520435,
        "VWAP": 106211.96402053231
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0091%",
      "FGI": "56/100",
      "open_interest": "$22997505091.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104192.8",
        "lastSz": "2.8",
        "askPx": "104192.9",
        "askSz": "672.78",
        "bidPx": "104192.8",
        "bidSz": "149.66",
        "open24h": "103803.6",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39277.5955",
        "vol24h": "3927759.55",
        "ts": "1748761274612",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T07:01:15+00:00Z"
}
[gemini_api_caller.py][15:01:17] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:01:17] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_150106.png
[gemini_api_caller.py][15:01:17] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:01:17] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:01:17] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:01:17] [INFO] AFC remote call 1 is done.
[_client.py][15:01:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:02:09] [INFO] 截图模块运行中...
[截图模块][15:02:11] [INFO]  __main__ 入口被执行
[截图模块][15:02:11] [INFO]  启动时主动清理内存...
[截图模块][15:02:11] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:02:11] [INFO]  已执行 pkill chrome
[截图模块][15:02:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:02:13] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:02:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][15:02:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][15:02:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:02:13] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:02:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:02:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:02:26] [INFO]  启动浏览器 (有头模式)
[截图模块][15:02:26] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:03:00] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:03:00] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:03:00] [INFO]  打开目标图表页...
[截图模块][15:03:06] [INFO]  等待5秒加载页面...
[截图模块][15:03:11] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:03:12] [INFO]  快捷键已发送
[截图模块][15:03:13] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_150313.png
[截图模块][15:03:13] [INFO]  关闭浏览器...
[数据收集总模块][15:03:13] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_150313.png
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:11] [INFO]  __main__ 入口被执行
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:11] [INFO]  启动时主动清理内存...
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:11] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:11] [INFO]  已执行 pkill chrome
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:13] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:23] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:26] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:02:26] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:00] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:00] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:00] [INFO]  打开目标图表页...
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:06] [INFO]  等待5秒加载页面...
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:11] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:12] [INFO]  快捷键已发送
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:13] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_150313.png
[数据收集总模块][15:03:13] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:03:13] [INFO]  关闭浏览器...
[数据收集总模块][15:03:13] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_150313.png
[数据收集总模块][15:03:13] [INFO] 技术指标模块运行中...
[技术指标模块][15:03:14] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:03:15] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:03:15] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:03:15] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:03:15] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:03:16] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:03:16] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:03:16] [INFO] 宏观因子模块运行中...
[宏观因子模块][15:03:17] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][15:03:19] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:03:19] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:03:20] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][15:03:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:03:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:03:21] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][15:03:21] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][15:03:21] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][15:03:21] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:03:22] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_150313.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2516.9,
        "volume": 194853.59,
        "RSI": 42.90863983228812,
        "MACD_macd": -2.252488450621513,
        "MACD_signal": -2.61779034726002,
        "ATR": 8.657719841854755,
        "ADX": 15.95477962013629,
        "Stoch_K": 33.856138453218705,
        "Stoch_D": 44.51242030073238,
        "StochRSI_K": 23.314238115044457,
        "StochRSI_D": 53.535987799706284,
        "BB_upper": 2527.542106804859,
        "BB_lower": 2512.8268931951416,
        "BB_middle": 2520.1845000000003,
        "EMA5": 2518.869751905351,
        "EMA21": 2520.979735289787,
        "EMA55": 2524.623744091171,
        "EMA144": 2522.549615809564,
        "EMA200": 2520.7699748875502,
        "VWAP": 2524.5886162101415
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.07,
        "volume": 1115826.65,
        "RSI": 49.948746349034174,
        "MACD_macd": -8.18684522616877,
        "MACD_signal": -8.226904742855933,
        "ATR": 26.398625807844763,
        "ADX": 17.00203281526342,
        "Stoch_K": 46.10094559744571,
        "Stoch_D": 43.992795448033085,
        "StochRSI_K": 79.14561559863527,
        "StochRSI_D": 74.04578132927874,
        "BB_upper": 2664.7898717381586,
        "BB_lower": 2615.386128261841,
        "BB_middle": 2640.0879999999997,
        "EMA5": 2640.610814902319,
        "EMA21": 2648.921227101753,
        "EMA55": 2642.6604509347912,
        "EMA144": 2597.416298802035,
        "EMA200": 2580.423566690626,
        "VWAP": 2617.5020681055976
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "56/100",
      "open_interest": "$592244283.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2509.32",
        "lastSz": "1.89",
        "askPx": "2509.33",
        "askSz": "787.04",
        "bidPx": "2509.32",
        "bidSz": "613.48",
        "open24h": "2520.91",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2241464.661",
        "vol24h": "22414646.61",
        "ts": "1748761401128",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T07:03:22+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][15:03:24] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:03:24] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_150313.png
[gemini_api_caller.py][15:03:24] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:03:24] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:03:24] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:03:24] [INFO] AFC remote call 1 is done.
[_client.py][15:03:27] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:15:03] [INFO] 截图模块运行中...
[截图模块][15:15:04] [INFO]  __main__ 入口被执行
[截图模块][15:15:04] [INFO]  启动时主动清理内存...
[截图模块][15:15:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:15:05] [INFO]  已执行 pkill chrome
[截图模块][15:15:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:15:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][15:15:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][15:15:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:15:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:15:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:15:09] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:15:11] [INFO] 启动浏览器 (有头模式)
[截图模块][15:15:13] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:15:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:15:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:15:47] [INFO]  打开目标图表页...
[截图模块][15:15:53] [INFO]  等待5秒加载页面...
[截图模块][15:15:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:15:59] [INFO]  快捷键已发送
[截图模块][15:16:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_151600.png
[截图模块][15:16:00] [INFO]  关闭浏览器...
[数据收集总模块][15:16:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_151600.png
[数据收集总模块][15:16:00] [INFO] 技术指标模块运行中...
[技术指标模块][15:16:01] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:16:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:16:02] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:16:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:16:02] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:16:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:16:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:16:03] [INFO] 宏观因子模块运行中...
[数据收集总模块][15:16:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:16:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:16:06] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][15:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:16:07] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][15:16:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][15:16:07] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][15:16:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:16:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_151600.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103667.1,
        "volume": 15437.24,
        "RSI": 49.3209780638869,
        "MACD_macd": -39.87451494245033,
        "MACD_signal": -95.59024275218457,
        "ATR": 205.03793517331272,
        "ADX": 21.058990684251498,
        "Stoch_K": 52.197677066729355,
        "Stoch_D": 80.28916725202654,
        "StochRSI_K": 35.26038906658488,
        "StochRSI_D": 78.42012968886162,
        "BB_upper": 103882.29957601496,
        "BB_lower": 103242.15042398505,
        "BB_middle": 103562.225,
        "EMA5": 103728.84559662541,
        "EMA21": 103690.3087813379,
        "EMA55": 103910.8495247802,
        "EMA144": 104136.03346405305,
        "EMA200": 104179.61195503801,
        "VWAP": 104219.21631805287
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108815.6,
        "volume": 144099.66,
        "RSI": 61.230016464109234,
        "MACD_macd": 426.30928999251046,
        "MACD_signal": 393.9060631881869,
        "ATR": 546.5373226446704,
        "ADX": 17.530189880629756,
        "Stoch_K": 87.23705310819774,
        "Stoch_D": 90.85463635506112,
        "StochRSI_K": 66.55702893217706,
        "StochRSI_D": 77.42240317704646,
        "BB_upper": 109646.06237823037,
        "BB_lower": 106582.48762176961,
        "BB_middle": 108114.275,
        "EMA5": 108825.09091700059,
        "EMA21": 108313.98200981018,
        "EMA55": 107378.08259453566,
        "EMA144": 106024.02892911766,
        "EMA200": 105626.15979520435,
        "VWAP": 106211.96402053231
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0091%",
      "FGI": "56/100",
      "open_interest": "$23002840034.000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104319.9",
        "lastSz": "0.02",
        "askPx": "104320",
        "askSz": "465.4",
        "bidPx": "104319.9",
        "bidSz": "44.46",
        "open24h": "103630",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39155.4974",
        "vol24h": "3915549.74",
        "ts": "1748762167513",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T07:16:08+00:00Z"
}
[gemini_api_caller.py][15:16:09] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:16:09] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_151600.png
[gemini_api_caller.py][15:16:09] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:16:09] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:16:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:16:09] [INFO] AFC remote call 1 is done.
[_client.py][15:16:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:16:58] [INFO] 截图模块运行中...
[截图模块][15:17:00] [INFO]  __main__ 入口被执行
[截图模块][15:17:00] [INFO]  启动时主动清理内存...
[截图模块][15:17:00] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:17:00] [INFO]  已执行 pkill chrome
[截图模块][15:17:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:17:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][15:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][15:17:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:17:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:17:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:17:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:17:17] [INFO]  启动浏览器 (有头模式)
[截图模块][15:17:17] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:17:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:17:51] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:17:51] [INFO]  打开目标图表页...
[截图模块][15:17:58] [INFO]  等待5秒加载页面...
[截图模块][15:18:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:18:03] [INFO]  快捷键已发送
[截图模块][15:18:04] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_151804.png
[截图模块][15:18:04] [INFO]  关闭浏览器...
[数据收集总模块][15:18:04] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_151804.png
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:00] [INFO]  __main__ 入口被执行
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:00] [INFO]  启动时主动清理内存...
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:00] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:00] [INFO]  已执行 pkill chrome
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:17] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:17] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:51] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:51] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:51] [INFO]  打开目标图表页...
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:17:58] [INFO]  等待5秒加载页面...
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:18:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:18:03] [INFO]  快捷键已发送
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:18:04] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_151804.png
[数据收集总模块][15:18:04] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:18:04] [INFO]  关闭浏览器...
[数据收集总模块][15:18:05] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_151804.png
[数据收集总模块][15:18:05] [INFO] 技术指标模块运行中...
[技术指标模块][15:18:06] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:18:06] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:18:06] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:18:07] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:18:07] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:18:08] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:18:08] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:18:08] [INFO] 宏观因子模块运行中...
[宏观因子模块][15:18:08] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][15:18:10] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:18:10] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:18:12] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][15:18:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:18:12] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:18:12] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][15:18:13] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][15:18:13] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][15:18:13] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:18:13] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_151804.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2518.41,
        "volume": 138294.33,
        "RSI": 45.79263847048428,
        "MACD_macd": -2.1594828242091353,
        "MACD_signal": -2.709873672768162,
        "ATR": 8.72198479880775,
        "ADX": 12.814676786729708,
        "Stoch_K": 31.632653061224136,
        "Stoch_D": 42.46315192743739,
        "StochRSI_K": 37.29372978777485,
        "StochRSI_D": 63.84112944642681,
        "BB_upper": 2528.1396560608437,
        "BB_lower": 2511.6813439391562,
        "BB_middle": 2519.9105,
        "EMA5": 2519.854627858027,
        "EMA21": 2521.3877926321684,
        "EMA55": 2524.9384872145893,
        "EMA144": 2522.8941071227723,
        "EMA200": 2521.1990214142807,
        "VWAP": 2524.558116886165
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.07,
        "volume": 1115826.65,
        "RSI": 49.948746349034174,
        "MACD_macd": -8.18684522616877,
        "MACD_signal": -8.226904742855933,
        "ATR": 26.398625807844763,
        "ADX": 17.00203281526342,
        "Stoch_K": 46.10094559744571,
        "Stoch_D": 43.992795448033085,
        "StochRSI_K": 79.14561559863527,
        "StochRSI_D": 74.04578132927874,
        "BB_upper": 2664.7898717381586,
        "BB_lower": 2615.386128261841,
        "BB_middle": 2640.0879999999997,
        "EMA5": 2640.610814902319,
        "EMA21": 2648.921227101753,
        "EMA55": 2642.6604509347912,
        "EMA144": 2597.416298802035,
        "EMA200": 2580.423566690626,
        "VWAP": 2617.5020681055976
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0028%",
      "FGI": "56/100",
      "open_interest": "$592243317.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2514.22",
        "lastSz": "0.93",
        "askPx": "2514.22",
        "askSz": "6288",
        "bidPx": "2514.21",
        "bidSz": "1081.31",
        "open24h": "2516.95",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2241431.162",
        "vol24h": "22414311.62",
        "ts": "1748762292906",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T07:18:13+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][15:18:15] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:18:15] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_151804.png
[gemini_api_caller.py][15:18:15] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:18:15] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:18:15] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:18:15] [INFO] AFC remote call 1 is done.
[_client.py][15:18:18] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:30:02] [INFO] 截图模块运行中...
[截图模块][15:30:03] [INFO]  __main__ 入口被执行
[截图模块][15:30:03] [INFO]  启动时主动清理内存...
[截图模块][15:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:30:03] [INFO]  已执行 pkill chrome
[截图模块][15:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][15:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][15:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:30:10] [INFO]  启动浏览器 (有头模式)
[截图模块][15:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:30:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:30:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:30:44] [INFO]  打开目标图表页...
[截图模块][15:30:50] [INFO]  等待5秒加载页面...
[截图模块][15:30:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:30:56] [INFO]  快捷键已发送
[截图模块][15:30:57] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][15:30:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_153058.png
[截图模块][15:30:58] [INFO]  关闭浏览器...
[数据收集总模块][15:30:58] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_153058.png
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:03] [INFO]  __main__ 入口被执行
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:03] [INFO]  启动时主动清理内存...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:03] [INFO]  已执行 pkill chrome
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:05] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:44] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:44] [INFO]  打开目标图表页...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:50] [INFO]  等待5秒加载页面...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:56] [INFO]  快捷键已发送
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:57] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:58] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_153058.png
[数据收集总模块][15:30:58] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:30:58] [INFO]  关闭浏览器...
[数据收集总模块][15:30:58] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_153058.png
[数据收集总模块][15:30:58] [INFO] 技术指标模块运行中...
[技术指标模块][15:30:59] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:31:00] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:31:00] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:31:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:31:00] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:31:01] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:31:01] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:31:01] [INFO] 宏观因子模块运行中...
[宏观因子模块][15:31:02] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][15:31:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:31:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:31:05] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][15:31:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:31:06] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][15:31:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][15:31:06] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][15:31:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:31:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_153058.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2524.12,
        "volume": 219010.82,
        "RSI": 58.729086153638356,
        "MACD_macd": -2.1621901898752185,
        "MACD_signal": -2.8470166740989926,
        "ATR": 8.72382758667866,
        "ADX": 12.443440882228739,
        "Stoch_K": 68.04846938775431,
        "Stoch_D": 35.117169696662835,
        "StochRSI_K": 100.0,
        "StochRSI_D": 51.4098837939718,
        "BB_upper": 2528.1689328181883,
        "BB_lower": 2511.439067181812,
        "BB_middle": 2519.804,
        "EMA5": 2520.57694178704,
        "EMA21": 2521.685521607344,
        "EMA55": 2525.163075920883,
        "EMA144": 2522.797536483219,
        "EMA200": 2520.9929603962005,
        "VWAP": 2524.539172347432
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.07,
        "volume": 1115826.65,
        "RSI": 49.948746349034174,
        "MACD_macd": -8.18684522616877,
        "MACD_signal": -8.226904742855933,
        "ATR": 26.398625807844763,
        "ADX": 17.00203281526342,
        "Stoch_K": 46.10094559744571,
        "Stoch_D": 43.992795448033085,
        "StochRSI_K": 79.14561559863527,
        "StochRSI_D": 74.04578132927874,
        "BB_upper": 2664.7898717381586,
        "BB_lower": 2615.386128261841,
        "BB_middle": 2640.0879999999997,
        "EMA5": 2640.610814902319,
        "EMA21": 2648.921227101753,
        "EMA55": 2642.6604509347912,
        "EMA144": 2597.416298802035,
        "EMA200": 2580.423566690626,
        "VWAP": 2617.5020681055976
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "56/100",
      "open_interest": "$592888565.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2511.11",
        "lastSz": "8.12",
        "askPx": "2511.12",
        "askSz": "9.46",
        "bidPx": "2511.11",
        "bidSz": "2531.68",
        "open24h": "2520.65",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2235880.132",
        "vol24h": "22358801.32",
        "ts": "1748763067108",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T07:31:07+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][15:31:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:31:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_153058.png
[gemini_api_caller.py][15:31:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:31:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:31:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:31:08] [INFO] AFC remote call 1 is done.
[_client.py][15:31:12] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:32:18] [INFO] 截图模块运行中...
[截图模块][15:32:19] [INFO]  __main__ 入口被执行
[截图模块][15:32:19] [INFO]  启动时主动清理内存...
[截图模块][15:32:19] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:32:19] [INFO]  已执行 pkill chrome
[截图模块][15:32:22] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:32:22] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:32:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][15:32:22] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][15:32:22] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:32:22] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:32:22] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:32:24] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:32:27] [INFO] 启动浏览器 (有头模式)
[截图模块][15:32:29] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:33:05] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:33:05] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:33:05] [INFO]  打开目标图表页...
[截图模块][15:33:11] [INFO]  等待5秒加载页面...
[截图模块][15:33:16] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:33:16] [INFO]  快捷键已发送
[截图模块][15:33:18] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_153317.png
[截图模块][15:33:18] [INFO]  关闭浏览器...
[数据收集总模块][15:33:18] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_153317.png
[数据收集总模块][15:33:18] [INFO] 技术指标模块运行中...
[技术指标模块][15:33:19] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:33:19] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:33:19] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:33:20] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:33:20] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:33:20] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:33:21] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:33:21] [INFO] 宏观因子模块运行中...
[数据收集总模块][15:33:24] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:33:24] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:33:26] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][15:33:26] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:33:26] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:33:26] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][15:33:27] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][15:33:27] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][15:33:27] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:33:28] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_153317.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103858.2,
        "volume": 48217.5,
        "RSI": 69.31878549246036,
        "MACD_macd": -41.78956168303557,
        "MACD_signal": -109.54876699540534,
        "ATR": 193.7822349328719,
        "ADX": 21.67243062334223,
        "Stoch_K": 95.71851514461338,
        "Stoch_D": 85.9043137265058,
        "StochRSI_K": 100.0,
        "StochRSI_D": 96.15095869634247,
        "BB_upper": 103871.54516378342,
        "BB_lower": 103229.5748362166,
        "BB_middle": 103550.56000000001,
        "EMA5": 103759.7183949381,
        "EMA21": 103692.63293218547,
        "EMA55": 103920.99711317195,
        "EMA144": 104152.95816833188,
        "EMA200": 104199.9973476028,
        "VWAP": 104221.71352749378
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108815.6,
        "volume": 144099.66,
        "RSI": 61.230016464109234,
        "MACD_macd": 426.30928999251046,
        "MACD_signal": 393.9060631881869,
        "ATR": 546.5373226446704,
        "ADX": 17.530189880629756,
        "Stoch_K": 87.23705310819774,
        "Stoch_D": 90.85463635506112,
        "StochRSI_K": 66.55702893217706,
        "StochRSI_D": 77.42240317704646,
        "BB_upper": 109646.06237823037,
        "BB_lower": 106582.48762176961,
        "BB_middle": 108114.275,
        "EMA5": 108825.09091700059,
        "EMA21": 108313.98200981018,
        "EMA55": 107378.08259453566,
        "EMA144": 106024.02892911766,
        "EMA200": 105626.15979520435,
        "VWAP": 106211.96402053231
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0096%",
      "FGI": "56/100",
      "open_interest": "$23008339839.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104265",
        "lastSz": "0.02",
        "askPx": "104265.1",
        "askSz": "157.57",
        "bidPx": "104265",
        "bidSz": "720.07",
        "open24h": "103749.9",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39137.1953",
        "vol24h": "3913719.53",
        "ts": "1748763207415",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T07:33:28+00:00Z"
}
[gemini_api_caller.py][15:33:29] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:33:29] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_153317.png
[gemini_api_caller.py][15:33:29] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:33:29] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:33:29] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:33:29] [INFO] AFC remote call 1 is done.
[_client.py][15:33:33] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:45:02] [INFO] 截图模块运行中...
[截图模块][15:45:04] [INFO]  __main__ 入口被执行
[截图模块][15:45:04] [INFO]  启动时主动清理内存...
[截图模块][15:45:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:45:04] [INFO]  已执行 pkill chrome
[截图模块][15:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][15:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][15:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][15:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:45:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:45:12] [INFO]  启动浏览器 (有头模式)
[截图模块][15:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:45:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][15:45:46] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:45:46] [INFO]  打开目标图表页...
[截图模块][15:45:52] [INFO]  等待5秒加载页面...
[截图模块][15:45:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:45:58] [INFO]  快捷键已发送
[截图模块][15:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_154559.png
[截图模块][15:45:59] [INFO]  关闭浏览器...
[数据收集总模块][15:45:59] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_154559.png
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:04] [INFO]  __main__ 入口被执行
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:04] [INFO]  启动时主动清理内存...
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:04] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:04] [INFO]  已执行 pkill chrome
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:10] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:12] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:12] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:46] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:46] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:46] [INFO]  打开目标图表页...
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:52] [INFO]  等待5秒加载页面...
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:57] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:58] [INFO]  快捷键已发送
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:59] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_154559.png
[数据收集总模块][15:45:59] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][15:45:59] [INFO]  关闭浏览器...
[数据收集总模块][15:45:59] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_154559.png
[数据收集总模块][15:45:59] [INFO] 技术指标模块运行中...
[技术指标模块][15:46:00] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:46:01] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:46:01] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:46:01] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:46:01] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:46:02] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:46:02] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:46:02] [INFO] 宏观因子模块运行中...
[宏观因子模块][15:46:03] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][15:46:04] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:46:04] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:46:06] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][15:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:46:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:46:06] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][15:46:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][15:46:07] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][15:46:07] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:46:07] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_154559.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2520.1,
        "volume": 125594.05,
        "RSI": 50.13363312487421,
        "MACD_macd": -2.71385183125858,
        "MACD_signal": -3.0151485839666914,
        "ATR": 8.57364952878605,
        "ADX": 12.01527839363128,
        "Stoch_K": 27.708333333333712,
        "Stoch_D": 20.60596372912764,
        "StochRSI_K": 54.22960936589435,
        "StochRSI_D": 29.37009811881258,
        "BB_upper": 2527.6624163751276,
        "BB_lower": 2511.421583624873,
        "BB_middle": 2519.5420000000004,
        "EMA5": 2518.80541268056,
        "EMA21": 2521.441733725134,
        "EMA55": 2525.085355479603,
        "EMA144": 2521.7019676196305,
        "EMA200": 2519.378629217945,
        "VWAP": 2524.4493322775975
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.07,
        "volume": 1115826.65,
        "RSI": 49.948746349034174,
        "MACD_macd": -8.18684522616877,
        "MACD_signal": -8.226904742855933,
        "ATR": 26.398625807844763,
        "ADX": 17.00203281526342,
        "Stoch_K": 46.10094559744571,
        "Stoch_D": 43.992795448033085,
        "StochRSI_K": 79.14561559863527,
        "StochRSI_D": 74.04578132927874,
        "BB_upper": 2664.7898717381586,
        "BB_lower": 2615.386128261841,
        "BB_middle": 2640.0879999999997,
        "EMA5": 2640.610814902319,
        "EMA21": 2648.921227101753,
        "EMA55": 2642.6604509347912,
        "EMA144": 2597.416298802035,
        "EMA200": 2580.423566690626,
        "VWAP": 2617.5020681055976
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2562.66,
        "volume": 18323487.31,
        "RSI": 54.76611056941951,
        "MACD_macd": 14.897970633182013,
        "MACD_signal": 9.561623649587307,
        "ATR": 76.63236296105782,
        "ADX": 27.24523536067079,
        "Stoch_K": 57.95852012414393,
        "Stoch_D": 50.08785326042324,
        "StochRSI_K": 31.259309753786095,
        "StochRSI_D": 14.80480456503897,
        "BB_upper": 2639.120168280061,
        "BB_lower": 2412.633831719938,
        "BB_middle": 2525.8769999999995,
        "EMA5": 2558.94278636743,
        "EMA21": 2537.780841102731,
        "EMA55": 2537.384042396312,
        "EMA144": 2541.694283496745,
        "EMA200": 2539.0444837615273,
        "VWAP": 2561.714793595232
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0023%",
      "FGI": "56/100",
      "open_interest": "$594197518.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2507.05",
        "lastSz": "0.31",
        "askPx": "2507.05",
        "askSz": "927.41",
        "bidPx": "2507.04",
        "bidSz": "527.48",
        "open24h": "2520.4",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2241998.732",
        "vol24h": "22419987.32",
        "ts": "1748763966719",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T07:46:07+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][15:46:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:46:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_154559.png
[gemini_api_caller.py][15:46:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:46:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:46:09] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:46:09] [INFO] AFC remote call 1 is done.
[_client.py][15:46:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][15:46:59] [INFO] 截图模块运行中...
[截图模块][15:47:01] [INFO]  __main__ 入口被执行
[截图模块][15:47:01] [INFO]  启动时主动清理内存...
[截图模块][15:47:01] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][15:47:01] [INFO]  已执行 pkill chrome
[截图模块][15:47:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:47:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][15:47:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][15:47:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][15:47:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][15:47:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][15:47:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][15:47:05] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][15:47:07] [INFO] 启动浏览器 (有头模式)
[截图模块][15:47:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:47:22] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][15:47:22] [INFO]  旧截图已清理，开始截图流程...
[截图模块][15:47:22] [INFO]  打开目标图表页...
[截图模块][15:47:30] [INFO]  等待5秒加载页面...
[截图模块][15:47:35] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][15:47:36] [INFO]  快捷键已发送
[截图模块][15:47:37] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_154737.png
[截图模块][15:47:37] [INFO]  关闭浏览器...
[数据收集总模块][15:47:37] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_154737.png
[数据收集总模块][15:47:37] [INFO] 技术指标模块运行中...
[技术指标模块][15:47:38] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][15:47:38] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][15:47:38] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][15:47:39] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][15:47:39] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][15:47:39] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][15:47:39] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:47:39] [INFO] 宏观因子模块运行中...
[数据收集总模块][15:47:42] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:47:42] [INFO] OKX 持仓模块运行中...
[get_positions.py][15:47:43] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][15:47:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][15:47:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][15:47:44] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][15:47:44] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][15:47:44] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][15:47:44] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][15:47:45] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_154737.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103829.8,
        "volume": 29082.29,
        "RSI": 67.62824438893351,
        "MACD_macd": -63.012600638510776,
        "MACD_signal": -126.41935123360182,
        "ATR": 183.74873732931303,
        "ADX": 23.3925325178292,
        "Stoch_K": 92.95130954473692,
        "Stoch_D": 79.1312218595438,
        "StochRSI_K": 100.0,
        "StochRSI_D": 92.35440332105777,
        "BB_upper": 103819.07331016123,
        "BB_lower": 103243.57668983877,
        "BB_middle": 103531.325,
        "EMA5": 103710.47759240714,
        "EMA21": 103676.06857044666,
        "EMA55": 103920.70362667131,
        "EMA144": 104132.83387891352,
        "EMA200": 104167.79858614129,
        "VWAP": 104227.038015994
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108815.6,
        "volume": 144099.66,
        "RSI": 61.230016464109234,
        "MACD_macd": 426.30928999251046,
        "MACD_signal": 393.9060631881869,
        "ATR": 546.5373226446704,
        "ADX": 17.530189880629756,
        "Stoch_K": 87.23705310819774,
        "Stoch_D": 90.85463635506112,
        "StochRSI_K": 66.55702893217706,
        "StochRSI_D": 77.42240317704646,
        "BB_upper": 109646.06237823037,
        "BB_lower": 106582.48762176961,
        "BB_middle": 108114.275,
        "EMA5": 108825.09091700059,
        "EMA21": 108313.98200981018,
        "EMA55": 107378.08259453566,
        "EMA144": 106024.02892911766,
        "EMA200": 105626.15979520435,
        "VWAP": 106211.96402053231
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103209.3,
        "volume": 2544481.27,
        "RSI": 40.84757770750365,
        "MACD_macd": -578.986559751138,
        "MACD_signal": -715.829437221096,
        "ATR": 1254.7054886099613,
        "ADX": 14.832185363657455,
        "Stoch_K": 58.593361511685714,
        "Stoch_D": 49.025736936044666,
        "StochRSI_K": 19.899826160430674,
        "StochRSI_D": 29.79545165028291,
        "BB_upper": 104752.52865583556,
        "BB_lower": 102442.10134416445,
        "BB_middle": 103597.315,
        "EMA5": 103436.9367807302,
        "EMA21": 103925.39360068626,
        "EMA55": 105271.63120384578,
        "EMA144": 105766.70685882824,
        "EMA200": 105634.06732573181,
        "VWAP": 106978.9546254877
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0099%",
      "FGI": "56/100",
      "open_interest": "$23013773886.00001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104207.6",
        "lastSz": "0.02",
        "askPx": "104207.7",
        "askSz": "691.18",
        "bidPx": "104207.6",
        "bidSz": "165.73",
        "open24h": "103660.2",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39250.6818",
        "vol24h": "3925068.18",
        "ts": "1748764065147",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T07:47:45+00:00Z"
}
[gemini_api_caller.py][15:47:46] [INFO] prompt_text导入完成
[gemini_api_caller.py][15:47:46] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_154737.png
[gemini_api_caller.py][15:47:46] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][15:47:46] [INFO] 开始测试 Gemini API 流式调用...
[models.py][15:47:47] [INFO] AFC is enabled with max remote calls: 10.
[models.py][15:47:47] [INFO] AFC remote call 1 is done.
[_client.py][15:47:51] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][16:00:02] [INFO] 截图模块运行中...
[截图模块][16:00:03] [INFO]  __main__ 入口被执行
[截图模块][16:00:03] [INFO]  启动时主动清理内存...
[截图模块][16:00:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:00:03] [INFO]  已执行 pkill chrome
[截图模块][16:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][16:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][16:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:00:09] [INFO]  启动浏览器 (有头模式)
[截图模块][16:00:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:00:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:00:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:00:44] [INFO]  打开目标图表页...
[截图模块][16:00:50] [INFO]  等待5秒加载页面...
[截图模块][16:00:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:00:56] [INFO]  快捷键已发送
[截图模块][16:00:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_160057.png
[截图模块][16:00:57] [INFO]  关闭浏览器...
[数据收集总模块][16:00:57] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_160057.png
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:03] [INFO]  __main__ 入口被执行
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:03] [INFO]  启动时主动清理内存...
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:03] [INFO]  已执行 pkill chrome
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:07] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:09] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:09] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:44] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:44] [INFO]  打开目标图表页...
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:50] [INFO]  等待5秒加载页面...
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:56] [INFO]  快捷键已发送
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_160057.png
[数据收集总模块][16:00:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:00:57] [INFO]  关闭浏览器...
[数据收集总模块][16:00:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_160057.png
[数据收集总模块][16:00:57] [INFO] 技术指标模块运行中...
[技术指标模块][16:00:59] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:00:59] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:00:59] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:01:00] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:01:00] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:01:00] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:01:00] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:01:00] [INFO] 宏观因子模块运行中...
[宏观因子模块][16:01:01] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][16:01:03] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:01:03] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:01:05] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][16:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:01:05] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:01:05] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][16:01:06] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][16:01:06] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][16:01:06] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:01:06] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_160057.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2515.77,
        "volume": 121251.32,
        "RSI": 38.09887012622232,
        "MACD_macd": -2.971881764192858,
        "MACD_signal": -3.0907975655792854,
        "ATR": 8.586516308720833,
        "ADX": 13.222135099665744,
        "Stoch_K": 9.594706368900479,
        "Stoch_D": 25.815693808043534,
        "StochRSI_K": 0.0,
        "StochRSI_D": 25.726454840420804,
        "BB_upper": 2527.5905415697225,
        "BB_lower": 2511.3324584302773,
        "BB_middle": 2519.4615,
        "EMA5": 2518.1581190208403,
        "EMA21": 2521.575943017677,
        "EMA55": 2525.2822890726216,
        "EMA144": 2521.838148064369,
        "EMA200": 2519.5385873918035,
        "VWAP": 2524.3798326061674
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.86,
        "volume": 1002682.54,
        "RSI": 50.44661171222863,
        "MACD_macd": -8.983196296065671,
        "MACD_signal": -8.234472844814094,
        "ATR": 27.690721825623903,
        "ADX": 18.98534829068395,
        "Stoch_K": 47.07110401571903,
        "Stoch_D": 36.845552417209035,
        "StochRSI_K": 81.73587003421774,
        "StochRSI_D": 64.03906247874563,
        "BB_upper": 2672.3514491821884,
        "BB_lower": 2611.4155508178114,
        "BB_middle": 2641.8835,
        "EMA5": 2638.8812223534783,
        "EMA21": 2649.406079214374,
        "EMA55": 2642.5156547395213,
        "EMA144": 2595.9066922004326,
        "EMA200": 2578.524269453921,
        "VWAP": 2617.0181369926186
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.6,
        "volume": 13740680.64,
        "RSI": 45.673238238087286,
        "MACD_macd": 14.793697958845314,
        "MACD_signal": 8.230568309085387,
        "ATR": 72.70963672178634,
        "ADX": 30.280755674753042,
        "Stoch_K": 41.672003546972654,
        "Stoch_D": 52.93035781729796,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.476629108205568,
        "BB_upper": 2635.1516218317593,
        "BB_lower": 2410.005378168241,
        "BB_middle": 2522.5785,
        "EMA5": 2557.0841795511446,
        "EMA21": 2535.292589959396,
        "EMA55": 2536.3331817086014,
        "EMA144": 2540.339153862582,
        "EMA200": 2537.246532662764,
        "VWAP": 2562.0614802113973
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.002%",
      "FGI": "56/100",
      "open_interest": "$594998130.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2507.57",
        "lastSz": "13.35",
        "askPx": "2507.58",
        "askSz": "40.53",
        "bidPx": "2507.57",
        "bidSz": "831.47",
        "open24h": "2521.9",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2235218.972",
        "vol24h": "22352189.72",
        "ts": "1748764866061",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T08:01:06+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "115946.25 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][16:01:08] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:01:08] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_160057.png
[gemini_api_caller.py][16:01:08] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:01:08] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:01:08] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:01:08] [INFO] AFC remote call 1 is done.
[_client.py][16:01:11] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][16:02:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][16:02:56] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][16:02:56] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][16:02:56] [INFO] 杠杆设置为 100 倍成功。
[_client.py][16:02:57] [INFO] HTTP Request: POST https://www.okx.com/api/v5/trade/order "HTTP/2 200 OK"
[trade_api_eth.py][16:02:57] [INFO] 主订单下单成功,
[trade_api_eth.py][16:02:57] [INFO] trade_result: {'status': 'success', 'message': '下单成功'}
[trade_api_eth.py][16:02:57] [INFO] execution: {
    "operation_comment": "当前M15周期呈现弱势下跌趋势，价格位于EMA均线下方且布林带收缩，RSI接近超卖区但MACD动能不足。为追求利益最大化并采取激进操作，决定取消现有挂单并立即市价开空，以抓住当前下跌机会。止损设置在M15 EMA55上方，止盈分两级，第一级在24小时低点，第二级为福根。",
    "type": "sell",
    "price": 2507.57,
    "stop_loss": 2525.28,
    "take_profit": 2489.24,
    "size": 130.93,
    "market": true,
    "expected_winrate": 0.5257,
    "expected_return": 0.0045,
    "trade_RR_ratio": 2.12,
    "signal_strength": 0.7,
    "risk_management_strategy": "基于可用保证金的2%风险进行仓位计算。TP1平仓90%仓位，并将止损上移至入场价。剩余10%仓位作为福根，止损上移至TP1。如果价格突破止损位，立即止损。如果价格突破TP1并伴随放量，考虑小幅加仓。",
    "position_action": "cancel_existing_order_and_open_new_short",
    "risk_assessment": "当前市场风险中等。M15 RSI接近超卖可能引发短期反弹，但整体趋势偏空。建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。"
}
[trade_api_eth.py][16:02:57] [INFO] 交易API调用完成
[trade_api_eth.py][16:02:57] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][16:02:59] [INFO] 截图模块运行中...
[截图模块][16:03:01] [INFO]  __main__ 入口被执行
[截图模块][16:03:01] [INFO]  启动时主动清理内存...
[截图模块][16:03:01] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:03:01] [INFO]  已执行 pkill chrome
[截图模块][16:03:03] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:03:03] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:03:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][16:03:03] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][16:03:03] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:03:03] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:03:03] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:03:15] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:03:17] [INFO] 启动浏览器 (有头模式)
[截图模块][16:03:19] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:03:53] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:03:53] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:03:53] [INFO]  打开目标图表页...
[截图模块][16:03:58] [INFO]  等待5秒加载页面...
[截图模块][16:04:03] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:04:04] [INFO]  快捷键已发送
[截图模块][16:04:05] [WARNING]  第1次未检测到刚刚下载的K线图片，3秒后重试...
[截图模块][16:04:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_160406.png
[截图模块][16:04:06] [INFO]  关闭浏览器...
[数据收集总模块][16:04:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_160406.png
[数据收集总模块][16:04:06] [INFO] 技术指标模块运行中...
[技术指标模块][16:04:08] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:04:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:04:08] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:04:09] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:04:09] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:04:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:04:09] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:04:09] [INFO] 宏观因子模块运行中...
[数据收集总模块][16:04:12] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:04:12] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:04:13] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][16:04:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:04:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:04:14] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][16:04:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][16:04:14] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][16:04:14] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:04:15] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_160406.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103666.1,
        "volume": 33889.0,
        "RSI": 55.33353370807658,
        "MACD_macd": -86.36236017417104,
        "MACD_signal": -142.29160913328678,
        "ATR": 180.66388335766555,
        "ADX": 21.896944361742918,
        "Stoch_K": 69.04311649016714,
        "Stoch_D": 75.05277071370278,
        "StochRSI_K": 88.45285955843308,
        "StochRSI_D": 90.48473922665058,
        "BB_upper": 103765.18110235564,
        "BB_lower": 103260.58889764435,
        "BB_middle": 103512.885,
        "EMA5": 103650.81638861069,
        "EMA21": 103660.69770242652,
        "EMA55": 103924.84884483274,
        "EMA144": 104144.27788418526,
        "EMA200": 104181.78540518248,
        "VWAP": 104229.93518526241
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108935.1,
        "volume": 188882.66,
        "RSI": 66.61478849877973,
        "MACD_macd": 437.9123720107309,
        "MACD_signal": 385.7833870624905,
        "ATR": 567.9891087369857,
        "ADX": 19.524654203205113,
        "Stoch_K": 92.87331383831754,
        "Stoch_D": 88.97367978064425,
        "StochRSI_K": 83.14871972593076,
        "StochRSI_D": 79.3439903340337,
        "BB_upper": 109563.7957899246,
        "BB_lower": 106555.2642100754,
        "BB_middle": 108059.53,
        "EMA5": 108829.83637550086,
        "EMA21": 108263.82262940652,
        "EMA55": 107325.66878951159,
        "EMA144": 105992.64684749328,
        "EMA200": 105605.36380063131,
        "VWAP": 106197.05137721587
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103110.0,
        "volume": 1986096.31,
        "RSI": 38.628221080941515,
        "MACD_macd": -586.5555664851854,
        "MACD_signal": -749.9827764150173,
        "ATR": 1150.660052015627,
        "ADX": 11.579912572081358,
        "Stoch_K": 29.744319575992655,
        "Stoch_D": 53.671290835890005,
        "StochRSI_K": 7.422458889939329,
        "StochRSI_D": 53.59141581291561,
        "BB_upper": 105458.1731228744,
        "BB_lower": 102059.02687712561,
        "BB_middle": 103758.6,
        "EMA5": 103550.75517109531,
        "EMA21": 103996.99661488304,
        "EMA55": 105345.8424668041,
        "EMA144": 105782.37448335736,
        "EMA200": 105628.89674336766,
        "VWAP": 107041.84326547306
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$23010031532.000015 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104190",
        "lastSz": "4.75",
        "askPx": "104190.1",
        "askSz": "653.11",
        "bidPx": "104190",
        "bidSz": "348.27",
        "open24h": "103728.8",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39134.8198",
        "vol24h": "3913481.98",
        "ts": "1748765054209",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T08:04:15+00:00Z"
}
[gemini_api_caller.py][16:04:16] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:04:16] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_160406.png
[gemini_api_caller.py][16:04:16] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:04:16] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:04:16] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:04:16] [INFO] AFC remote call 1 is done.
[_client.py][16:04:20] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][16:15:02] [INFO] 截图模块运行中...
[截图模块][16:15:03] [INFO]  __main__ 入口被执行
[截图模块][16:15:03] [INFO]  启动时主动清理内存...
[截图模块][16:15:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:15:03] [INFO]  已执行 pkill chrome
[截图模块][16:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][16:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][16:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:15:13] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:15:15] [INFO]  启动浏览器 (有头模式)
[截图模块][16:15:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:15:49] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:15:49] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:15:49] [INFO]  打开目标图表页...
[截图模块][16:15:55] [INFO]  等待5秒加载页面...
[截图模块][16:16:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:16:01] [INFO]  快捷键已发送
[截图模块][16:16:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_161602.png
[截图模块][16:16:02] [INFO]  关闭浏览器...
[数据收集总模块][16:16:03] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_161602.png
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:03] [INFO]  __main__ 入口被执行
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:03] [INFO]  启动时主动清理内存...
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:03] [INFO]  已执行 pkill chrome
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:13] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:15] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:15] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:49] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:49] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:49] [INFO]  打开目标图表页...
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:15:55] [INFO]  等待5秒加载页面...
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:16:00] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:16:01] [INFO]  快捷键已发送
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:16:02] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_161602.png
[数据收集总模块][16:16:03] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:16:02] [INFO]  关闭浏览器...
[数据收集总模块][16:16:03] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_161602.png
[数据收集总模块][16:16:03] [INFO] 技术指标模块运行中...
[技术指标模块][16:16:04] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:16:04] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:16:04] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:16:05] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:16:05] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:16:05] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:16:05] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:16:05] [INFO] 宏观因子模块运行中...
[宏观因子模块][16:16:06] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][16:16:08] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:16:08] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:16:09] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][16:16:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:16:09] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:16:09] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][16:16:10] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][16:16:10] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][16:16:10] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:16:10] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_161602.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2518.57,
        "volume": 178266.74,
        "RSI": 44.057912901571,
        "MACD_macd": -2.814833215206363,
        "MACD_signal": -3.1175456339525534,
        "ATR": 8.895213527602959,
        "ADX": 14.05995018479513,
        "Stoch_K": 24.514851485148732,
        "Stoch_D": 37.17853105235097,
        "StochRSI_K": 33.880598681870154,
        "StochRSI_D": 46.62647600655197,
        "BB_upper": 2529.1459166078935,
        "BB_lower": 2511.119083392107,
        "BB_middle": 2520.1325,
        "EMA5": 2519.3521785312605,
        "EMA21": 2522.156207653397,
        "EMA55": 2525.521793867346,
        "EMA144": 2520.8788128186443,
        "EMA200": 2518.041863568735,
        "VWAP": 2524.196246637677
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.86,
        "volume": 1002682.54,
        "RSI": 50.44661171222863,
        "MACD_macd": -8.983196296065671,
        "MACD_signal": -8.234472844814094,
        "ATR": 27.690721825623903,
        "ADX": 18.98534829068395,
        "Stoch_K": 47.07110401571903,
        "Stoch_D": 36.845552417209035,
        "StochRSI_K": 81.73587003421774,
        "StochRSI_D": 64.03906247874563,
        "BB_upper": 2672.3514491821884,
        "BB_lower": 2611.4155508178114,
        "BB_middle": 2641.8835,
        "EMA5": 2638.8812223534783,
        "EMA21": 2649.406079214374,
        "EMA55": 2642.5156547395213,
        "EMA144": 2595.9066922004326,
        "EMA200": 2578.524269453921,
        "VWAP": 2617.0181369926186
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.6,
        "volume": 13740680.64,
        "RSI": 45.673238238087286,
        "MACD_macd": 14.793697958845314,
        "MACD_signal": 8.230568309085387,
        "ATR": 72.70963672178634,
        "ADX": 30.280755674753042,
        "Stoch_K": 41.672003546972654,
        "Stoch_D": 52.93035781729796,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.476629108205568,
        "BB_upper": 2635.1516218317593,
        "BB_lower": 2410.005378168241,
        "BB_middle": 2522.5785,
        "EMA5": 2557.0841795511446,
        "EMA21": 2535.292589959396,
        "EMA55": 2536.3331817086014,
        "EMA144": 2540.339153862582,
        "EMA200": 2537.246532662764,
        "VWAP": 2562.0614802113973
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.002%",
      "FGI": "56/100",
      "open_interest": "$596817077.0000006 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2502.48",
        "lastSz": "0.18",
        "askPx": "2502.49",
        "askSz": "440.12",
        "bidPx": "2502.48",
        "bidSz": "1986.94",
        "open24h": "2516.42",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2244370.778",
        "vol24h": "22443707.78",
        "ts": "1748765770105",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T08:16:10+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][16:16:12] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:16:12] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_161602.png
[gemini_api_caller.py][16:16:12] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:16:12] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:16:12] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:16:12] [INFO] AFC remote call 1 is done.
[_client.py][16:16:16] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][16:17:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][16:17:10] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][16:17:10] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][16:17:10] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][16:17:10] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][16:17:10] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][16:17:10] [INFO] execution: {
    "operation_comment": "市场整体偏空或低位盘整，存在未成交的卖出限价订单。当前不具备明确的开多信号，且存在卖单，应优先等待卖单成交或继续观望。不进行新的开仓操作。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "0.4",
    "expected_return": "-0.005",
    "trade_RR_ratio": "N/A",
    "signal_strength": "0.3",
    "risk_management_strategy": "当前市场缺乏明确方向，且存在未成交卖单，优先等待或观望。不主动开仓，以规避不确定性风险。如果卖单成交，将根据市场情况重新评估。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等，主要风险来源于趋势不明确和潜在的低位震荡。建议保持观望，等待更清晰的信号或现有卖单成交。"
}
[trade_api_eth.py][16:17:10] [INFO] 交易API调用完成
[trade_api_eth.py][16:17:10] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][16:17:12] [INFO] 截图模块运行中...
[截图模块][16:17:14] [INFO]  __main__ 入口被执行
[截图模块][16:17:14] [INFO]  启动时主动清理内存...
[截图模块][16:17:14] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:17:14] [INFO]  已执行 pkill chrome
[截图模块][16:17:17] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:17:17] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:17:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][16:17:17] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][16:17:17] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:17:17] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:17:17] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:17:19] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:17:21] [INFO] 启动浏览器 (有头模式)
[截图模块][16:17:23] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:18:02] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:18:02] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:18:02] [INFO]  打开目标图表页...
[截图模块][16:18:08] [INFO]  等待5秒加载页面...
[截图模块][16:18:13] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:18:14] [INFO]  快捷键已发送
[截图模块][16:18:15] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_161815.png
[截图模块][16:18:15] [INFO]  关闭浏览器...
[数据收集总模块][16:18:15] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_161815.png
[数据收集总模块][16:18:15] [INFO] 技术指标模块运行中...
[技术指标模块][16:18:16] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:18:17] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:18:17] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:18:18] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:18:18] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:18:18] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:18:18] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:18:18] [INFO] 宏观因子模块运行中...
[数据收集总模块][16:18:21] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:18:21] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:18:22] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][16:18:22] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:18:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:18:23] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][16:18:23] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][16:18:23] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][16:18:23] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:18:23] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_161815.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103658.1,
        "volume": 22639.68,
        "RSI": 54.60328763050851,
        "MACD_macd": -98.21811733698996,
        "MACD_signal": -156.2641053936646,
        "ATR": 182.0429597863101,
        "ADX": 21.23343497711443,
        "Stoch_K": 75.39923954372735,
        "Stoch_D": 80.32286218286168,
        "StochRSI_K": 88.61035246570792,
        "StochRSI_D": 94.3337850817644,
        "BB_upper": 103802.31870646584,
        "BB_lower": 103239.52129353416,
        "BB_middle": 103520.92,
        "EMA5": 103643.17458291602,
        "EMA21": 103660.15638708608,
        "EMA55": 103934.06068016944,
        "EMA144": 104147.52714426442,
        "EMA200": 104181.91477176723,
        "VWAP": 104234.24226813608
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108935.1,
        "volume": 188882.66,
        "RSI": 66.61478849877973,
        "MACD_macd": 437.9123720107309,
        "MACD_signal": 385.7833870624905,
        "ATR": 567.9891087369857,
        "ADX": 19.524654203205113,
        "Stoch_K": 92.87331383831754,
        "Stoch_D": 88.97367978064425,
        "StochRSI_K": 83.14871972593076,
        "StochRSI_D": 79.3439903340337,
        "BB_upper": 109563.7957899246,
        "BB_lower": 106555.2642100754,
        "BB_middle": 108059.53,
        "EMA5": 108829.83637550086,
        "EMA21": 108263.82262940652,
        "EMA55": 107325.66878951159,
        "EMA144": 105992.64684749328,
        "EMA200": 105605.36380063131,
        "VWAP": 106197.05137721587
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103110.0,
        "volume": 1986096.31,
        "RSI": 38.628221080941515,
        "MACD_macd": -586.5555664851854,
        "MACD_signal": -749.9827764150173,
        "ATR": 1150.660052015627,
        "ADX": 11.579912572081358,
        "Stoch_K": 29.744319575992655,
        "Stoch_D": 53.671290835890005,
        "StochRSI_K": 7.422458889939329,
        "StochRSI_D": 53.59141581291561,
        "BB_upper": 105458.1731228744,
        "BB_lower": 102059.02687712561,
        "BB_middle": 103758.6,
        "EMA5": 103550.75517109531,
        "EMA21": 103996.99661488304,
        "EMA55": 105345.8424668041,
        "EMA144": 105782.37448335736,
        "EMA200": 105628.89674336766,
        "VWAP": 107041.84326547306
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$23013919515.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104257.2",
        "lastSz": "0.02",
        "askPx": "104257.2",
        "askSz": "210.96",
        "bidPx": "104257.1",
        "bidSz": "1327.41",
        "open24h": "103509.7",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "38995.1073",
        "vol24h": "3899510.73",
        "ts": "1748765902907",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T08:18:23+00:00Z"
}
[gemini_api_caller.py][16:18:25] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:18:25] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_161815.png
[gemini_api_caller.py][16:18:25] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:18:25] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:18:25] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:18:25] [INFO] AFC remote call 1 is done.
[_client.py][16:18:28] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][16:30:02] [INFO] 截图模块运行中...
[截图模块][16:30:03] [INFO]  __main__ 入口被执行
[截图模块][16:30:03] [INFO]  启动时主动清理内存...
[截图模块][16:30:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:30:03] [INFO]  已执行 pkill chrome
[截图模块][16:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][16:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][16:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:30:18] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:30:19] [INFO]  启动浏览器 (有头模式)
[截图模块][16:30:19] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:30:53] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:30:53] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:30:53] [INFO]  打开目标图表页...
[截图模块][16:30:59] [INFO]  等待5秒加载页面...
[截图模块][16:31:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:31:05] [INFO]  快捷键已发送
[截图模块][16:31:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_163106.png
[截图模块][16:31:06] [INFO]  关闭浏览器...
[数据收集总模块][16:31:06] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_163106.png
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:03] [INFO]  __main__ 入口被执行
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:03] [INFO]  启动时主动清理内存...
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:03] [INFO]  已执行 pkill chrome
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:18] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:19] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:19] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:53] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:53] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:53] [INFO]  打开目标图表页...
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:30:59] [INFO]  等待5秒加载页面...
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:31:04] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:31:05] [INFO]  快捷键已发送
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:31:06] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_163106.png
[数据收集总模块][16:31:06] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:31:06] [INFO]  关闭浏览器...
[数据收集总模块][16:31:06] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_163106.png
[数据收集总模块][16:31:06] [INFO] 技术指标模块运行中...
[技术指标模块][16:31:07] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:31:08] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:31:08] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:31:08] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:31:08] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:31:09] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:31:09] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:31:09] [INFO] 宏观因子模块运行中...
[宏观因子模块][16:31:10] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][16:31:12] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:31:12] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:31:13] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][16:31:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:31:14] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:31:14] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][16:31:15] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][16:31:15] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][16:31:15] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:31:15] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_163106.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2519.6,
        "volume": 124834.24,
        "RSI": 46.37016041440651,
        "MACD_macd": -2.8598362977081706,
        "MACD_signal": -3.1916214243566157,
        "ATR": 9.256015947607576,
        "ADX": 12.695532761403566,
        "Stoch_K": 43.33752357008137,
        "Stoch_D": 42.90802430337296,
        "StochRSI_K": 43.29854764347265,
        "StochRSI_D": 55.029092669616084,
        "BB_upper": 2529.6435730053436,
        "BB_lower": 2511.234426994657,
        "BB_middle": 2520.4390000000003,
        "EMA5": 2519.743267796891,
        "EMA21": 2522.514651213259,
        "EMA55": 2525.718633113392,
        "EMA144": 2520.3498124112025,
        "EMA200": 2517.2116622163358,
        "VWAP": 2523.9706897430597
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.86,
        "volume": 1002682.54,
        "RSI": 50.44661171222863,
        "MACD_macd": -8.983196296065671,
        "MACD_signal": -8.234472844814094,
        "ATR": 27.690721825623903,
        "ADX": 18.98534829068395,
        "Stoch_K": 47.07110401571903,
        "Stoch_D": 36.845552417209035,
        "StochRSI_K": 81.73587003421774,
        "StochRSI_D": 64.03906247874563,
        "BB_upper": 2672.3514491821884,
        "BB_lower": 2611.4155508178114,
        "BB_middle": 2641.8835,
        "EMA5": 2638.8812223534783,
        "EMA21": 2649.406079214374,
        "EMA55": 2642.5156547395213,
        "EMA144": 2595.9066922004326,
        "EMA200": 2578.524269453921,
        "VWAP": 2617.0181369926186
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.6,
        "volume": 13740680.64,
        "RSI": 45.673238238087286,
        "MACD_macd": 14.793697958845314,
        "MACD_signal": 8.230568309085387,
        "ATR": 72.70963672178634,
        "ADX": 30.280755674753042,
        "Stoch_K": 41.672003546972654,
        "Stoch_D": 52.93035781729796,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.476629108205568,
        "BB_upper": 2635.1516218317593,
        "BB_lower": 2410.005378168241,
        "BB_middle": 2522.5785,
        "EMA5": 2557.0841795511446,
        "EMA21": 2535.292589959396,
        "EMA55": 2536.3331817086014,
        "EMA144": 2540.339153862582,
        "EMA200": 2537.246532662764,
        "VWAP": 2562.0614802113973
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0021%",
      "FGI": "56/100",
      "open_interest": "$599702543.0000007 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2503.77",
        "lastSz": "30",
        "askPx": "2503.77",
        "askSz": "283.31",
        "bidPx": "2503.76",
        "bidSz": "1687.94",
        "open24h": "2519.99",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2256229.826",
        "vol24h": "22562298.26",
        "ts": "1748766674611",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T08:31:15+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][16:31:17] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:31:17] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_163106.png
[gemini_api_caller.py][16:31:17] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:31:17] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:31:17] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:31:17] [INFO] AFC remote call 1 is done.
[_client.py][16:31:21] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][16:32:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][16:32:17] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][16:32:17] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][16:32:17] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][16:32:17] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][16:32:17] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][16:32:17] [INFO] execution: {
    "operation_comment": "当前市场处于震荡盘整状态，多时间框架指标存在冲突，缺乏明确趋势。存在一个未成交的卖出限价订单（2535 USDT），当前价格2503.77 USDT，处于震荡区间下沿。此时不宜追空，应等待价格反弹至订单附近或区间上沿再考虑执行卖出操作。因此，当前操作为观望，等待更明确的信号或订单成交机会。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "N/A",
    "expected_return": "N/A",
    "trade_RR_ratio": "N/A",
    "signal_strength": "N/A",
    "risk_management_strategy": "在市场信号不明确且存在未成交订单的情况下，保持观望是最佳风险管理策略。避免在震荡区间内盲目开仓，等待价格反弹至有利位置或趋势明确后再行动。如果现有订单成交，将根据市场情况设置止损和止盈。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等。主要风险来源于多时间框架指标冲突导致的方向不确定性，以及震荡区间内可能出现的假突破。建议保持谨慎，不进行新的开仓操作，等待现有订单成交或市场趋势明朗。"
}
[trade_api_eth.py][16:32:17] [INFO] 交易API调用完成
[trade_api_eth.py][16:32:17] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][16:32:19] [INFO] 截图模块运行中...
[截图模块][16:32:21] [INFO]  __main__ 入口被执行
[截图模块][16:32:21] [INFO]  启动时主动清理内存...
[截图模块][16:32:21] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:32:21] [INFO]  已执行 pkill chrome
[截图模块][16:32:23] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:32:23] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][16:32:23] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][16:32:23] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:32:23] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:32:23] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:32:33] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:32:35] [INFO] 启动浏览器 (有头模式)
[截图模块][16:32:37] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:33:11] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:33:11] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:33:11] [INFO]  打开目标图表页...
[截图模块][16:33:18] [INFO]  等待5秒加载页面...
[截图模块][16:33:23] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:33:23] [INFO]  快捷键已发送
[截图模块][16:33:24] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_163324.png
[截图模块][16:33:24] [INFO]  关闭浏览器...
[数据收集总模块][16:33:25] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_163324.png
[数据收集总模块][16:33:25] [INFO] 技术指标模块运行中...
[技术指标模块][16:33:26] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:33:26] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:33:26] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:33:27] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:33:27] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:33:27] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:33:27] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:33:27] [INFO] 宏观因子模块运行中...
[数据收集总模块][16:33:30] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:33:30] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:33:31] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][16:33:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:33:31] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:33:31] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][16:33:32] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][16:33:32] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][16:33:32] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:33:32] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_163324.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103680.3,
        "volume": 15856.54,
        "RSI": 56.838108101135205,
        "MACD_macd": -111.12260290411359,
        "MACD_signal": -170.7866453846542,
        "ATR": 196.58802440090292,
        "ADX": 23.255045312987214,
        "Stoch_K": 80.71595610721386,
        "Stoch_D": 75.22560470540503,
        "StochRSI_K": 94.39100310493032,
        "StochRSI_D": 91.33903774236539,
        "BB_upper": 103819.52793116329,
        "BB_lower": 103231.7120688367,
        "BB_middle": 103525.62,
        "EMA5": 103635.71187437401,
        "EMA21": 103660.36324707567,
        "EMA55": 103944.69933321587,
        "EMA144": 104158.24063945819,
        "EMA200": 104192.86431830506,
        "VWAP": 104237.6265480426
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108935.1,
        "volume": 188882.66,
        "RSI": 66.61478849877973,
        "MACD_macd": 437.9123720107309,
        "MACD_signal": 385.7833870624905,
        "ATR": 567.9891087369857,
        "ADX": 19.524654203205113,
        "Stoch_K": 92.87331383831754,
        "Stoch_D": 88.97367978064425,
        "StochRSI_K": 83.14871972593076,
        "StochRSI_D": 79.3439903340337,
        "BB_upper": 109563.7957899246,
        "BB_lower": 106555.2642100754,
        "BB_middle": 108059.53,
        "EMA5": 108829.83637550086,
        "EMA21": 108263.82262940652,
        "EMA55": 107325.66878951159,
        "EMA144": 105992.64684749328,
        "EMA200": 105605.36380063131,
        "VWAP": 106197.05137721587
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103110.0,
        "volume": 1986096.31,
        "RSI": 38.628221080941515,
        "MACD_macd": -586.5555664851854,
        "MACD_signal": -749.9827764150173,
        "ATR": 1150.660052015627,
        "ADX": 11.579912572081358,
        "Stoch_K": 29.744319575992655,
        "Stoch_D": 53.671290835890005,
        "StochRSI_K": 7.422458889939329,
        "StochRSI_D": 53.59141581291561,
        "BB_upper": 105458.1731228744,
        "BB_lower": 102059.02687712561,
        "BB_middle": 103758.6,
        "EMA5": 103550.75517109531,
        "EMA21": 103996.99661488304,
        "EMA55": 105345.8424668041,
        "EMA144": 105782.37448335736,
        "EMA200": 105628.89674336766,
        "VWAP": 107041.84326547306
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$23019592971.0 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104296.8",
        "lastSz": "18.08",
        "askPx": "104296.8",
        "askSz": "230.03",
        "bidPx": "104296.7",
        "bidSz": "544.15",
        "open24h": "103700",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "39025.6751",
        "vol24h": "3902567.51",
        "ts": "1748766811713",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T08:33:32+00:00Z"
}
[gemini_api_caller.py][16:33:34] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:33:34] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_163324.png
[gemini_api_caller.py][16:33:34] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:33:34] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:33:34] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:33:34] [INFO] AFC remote call 1 is done.
[_client.py][16:33:38] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][16:45:02] [INFO] 截图模块运行中...
[截图模块][16:45:03] [INFO]  __main__ 入口被执行
[截图模块][16:45:03] [INFO]  启动时主动清理内存...
[截图模块][16:45:03] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:45:03] [INFO]  已执行 pkill chrome
[截图模块][16:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][16:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][16:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][16:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:45:10] [INFO]  启动浏览器 (有头模式)
[截图模块][16:45:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:45:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][16:45:44] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:45:44] [INFO]  打开目标图表页...
[截图模块][16:45:50] [INFO]  等待5秒加载页面...
[截图模块][16:45:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:45:56] [INFO]  快捷键已发送
[截图模块][16:45:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_164557.png
[截图模块][16:45:57] [INFO]  关闭浏览器...
[数据收集总模块][16:45:57] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_164557.png
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:03] [INFO]  __main__ 入口被执行
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:03] [INFO]  启动时主动清理内存...
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:03] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:03] [INFO]  已执行 pkill chrome
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:06] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:08] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:10] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:10] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:44] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:44] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:44] [INFO]  打开目标图表页...
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:50] [INFO]  等待5秒加载页面...
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:55] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:56] [INFO]  快捷键已发送
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:57] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_164557.png
[数据收集总模块][16:45:57] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][16:45:57] [INFO]  关闭浏览器...
[数据收集总模块][16:45:57] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_164557.png
[数据收集总模块][16:45:57] [INFO] 技术指标模块运行中...
[技术指标模块][16:45:58] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:45:58] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:45:58] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:45:59] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:45:59] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:45:59] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:45:59] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:45:59] [INFO] 宏观因子模块运行中...
[宏观因子模块][16:46:00] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][16:46:02] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:46:02] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:46:03] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][16:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:46:03] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:46:03] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][16:46:04] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][16:46:04] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][16:46:04] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:46:05] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_164557.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2519.71,
        "volume": 185991.11,
        "RSI": 46.59649715275734,
        "MACD_macd": -2.9845494030582813,
        "MACD_signal": -3.2785518388273815,
        "ATR": 9.958479505990002,
        "ADX": 14.322257723893298,
        "Stoch_K": 43.68321810182281,
        "Stoch_D": 42.792792792792476,
        "StochRSI_K": 62.700248992607634,
        "StochRSI_D": 60.87624581470865,
        "BB_upper": 2530.3727219577286,
        "BB_lower": 2511.1992780422706,
        "BB_middle": 2520.7859999999996,
        "EMA5": 2519.814901695336,
        "EMA21": 2522.8065569536125,
        "EMA55": 2526.0960162703614,
        "EMA144": 2521.755943017397,
        "EMA200": 2519.238745234179,
        "VWAP": 2523.841423814109
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2644.86,
        "volume": 1002682.54,
        "RSI": 50.44661171222863,
        "MACD_macd": -8.983196296065671,
        "MACD_signal": -8.234472844814094,
        "ATR": 27.690721825623903,
        "ADX": 18.98534829068395,
        "Stoch_K": 47.07110401571903,
        "Stoch_D": 36.845552417209035,
        "StochRSI_K": 81.73587003421774,
        "StochRSI_D": 64.03906247874563,
        "BB_upper": 2672.3514491821884,
        "BB_lower": 2611.4155508178114,
        "BB_middle": 2641.8835,
        "EMA5": 2638.8812223534783,
        "EMA21": 2649.406079214374,
        "EMA55": 2642.5156547395213,
        "EMA144": 2595.9066922004326,
        "EMA200": 2578.524269453921,
        "VWAP": 2617.0181369926186
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.6,
        "volume": 13740680.64,
        "RSI": 45.673238238087286,
        "MACD_macd": 14.793697958845314,
        "MACD_signal": 8.230568309085387,
        "ATR": 72.70963672178634,
        "ADX": 30.280755674753042,
        "Stoch_K": 41.672003546972654,
        "Stoch_D": 52.93035781729796,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.476629108205568,
        "BB_upper": 2635.1516218317593,
        "BB_lower": 2410.005378168241,
        "BB_middle": 2522.5785,
        "EMA5": 2557.0841795511446,
        "EMA21": 2535.292589959396,
        "EMA55": 2536.3331817086014,
        "EMA144": 2540.339153862582,
        "EMA200": 2537.246532662764,
        "VWAP": 2562.0614802113973
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0027%",
      "FGI": "56/100",
      "open_interest": "$601473728.0000008 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2507.57",
        "lastSz": "0.01",
        "askPx": "2507.58",
        "askSz": "637.15",
        "bidPx": "2507.57",
        "bidSz": "476.07",
        "open24h": "2519.02",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2252012.736",
        "vol24h": "22520127.36",
        "ts": "1748767564728",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T08:46:05+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][16:46:06] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:46:06] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_164557.png
[gemini_api_caller.py][16:46:06] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:46:06] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:46:06] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:46:06] [INFO] AFC remote call 1 is done.
[_client.py][16:46:10] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][16:47:44] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][16:47:44] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][16:47:44] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][16:47:44] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][16:47:44] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][16:47:44] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][16:47:44] [INFO] execution: {
    "operation_comment": "市场信号存在冲突，且当前价格低于现有卖出挂单，建议观望，等待更明确的市场方向或现有订单成交。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "N/A",
    "expected_return": "N/A",
    "trade_RR_ratio": "N/A",
    "signal_strength": "N/A",
    "risk_management_strategy": "观望策略，避免在不确定性高时盲目入场。现有卖出订单（23.2 pieces @ 2535 USDT）与整体偏空判断一致，但价格距离较远，暂时不进行操作。",
    "position_action": "N/A",
    "risk_assessment": "市场缺乏明确方向，波动性降低，但仍有下行风险。建议观望，等待更清晰的趋势信号或现有订单成交后的市场反馈。"
}
[trade_api_eth.py][16:47:44] [INFO] 交易API调用完成
[trade_api_eth.py][16:47:44] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][16:47:46] [INFO] 截图模块运行中...
[截图模块][16:47:48] [INFO]  __main__ 入口被执行
[截图模块][16:47:48] [INFO]  启动时主动清理内存...
[截图模块][16:47:48] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][16:47:48] [INFO]  已执行 pkill chrome
[截图模块][16:47:50] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:47:50] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][16:47:50] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][16:47:50] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][16:47:50] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][16:47:50] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][16:47:50] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][16:47:59] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][16:48:00] [INFO] 启动浏览器 (有头模式)
[截图模块][16:48:02] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:48:37] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][16:48:37] [INFO]  旧截图已清理，开始截图流程...
[截图模块][16:48:37] [INFO]  打开目标图表页...
[截图模块][16:48:44] [INFO]  等待5秒加载页面...
[截图模块][16:48:49] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][16:48:50] [INFO]  快捷键已发送
[截图模块][16:48:51] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_164851.png
[截图模块][16:48:51] [INFO]  关闭浏览器...
[数据收集总模块][16:48:51] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_164851.png
[数据收集总模块][16:48:51] [INFO] 技术指标模块运行中...
[技术指标模块][16:48:52] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][16:48:52] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][16:48:52] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][16:48:53] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][16:48:53] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][16:48:54] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][16:48:54] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:48:54] [INFO] 宏观因子模块运行中...
[数据收集总模块][16:48:57] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:48:57] [INFO] OKX 持仓模块运行中...
[get_positions.py][16:48:58] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][16:48:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][16:48:58] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][16:48:58] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][16:48:59] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][16:48:59] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][16:48:59] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][16:48:59] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_164851.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103703.3,
        "volume": 24666.05,
        "RSI": 59.006563480261434,
        "MACD_macd": -128.25984760654683,
        "MACD_signal": -185.74863231996358,
        "ATR": 212.6938731179412,
        "ADX": 25.29949333609049,
        "Stoch_K": 84.85339089764382,
        "Stoch_D": 76.52696883781628,
        "StochRSI_K": 100.0,
        "StochRSI_D": 93.20870475730975,
        "BB_upper": 103850.30149215001,
        "BB_lower": 103215.90850785,
        "BB_middle": 103533.10500000001,
        "EMA5": 103613.41781156101,
        "EMA21": 103658.37465646297,
        "EMA55": 103956.23173177803,
        "EMA144": 104181.03065017996,
        "EMA200": 104221.68495843219,
        "VWAP": 104239.9310056167
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108935.1,
        "volume": 188882.66,
        "RSI": 66.61478849877973,
        "MACD_macd": 437.9123720107309,
        "MACD_signal": 385.7833870624905,
        "ATR": 567.9891087369857,
        "ADX": 19.524654203205113,
        "Stoch_K": 92.87331383831754,
        "Stoch_D": 88.97367978064425,
        "StochRSI_K": 83.14871972593076,
        "StochRSI_D": 79.3439903340337,
        "BB_upper": 109563.7957899246,
        "BB_lower": 106555.2642100754,
        "BB_middle": 108059.53,
        "EMA5": 108829.83637550086,
        "EMA21": 108263.82262940652,
        "EMA55": 107325.66878951159,
        "EMA144": 105992.64684749328,
        "EMA200": 105605.36380063131,
        "VWAP": 106197.05137721587
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103110.0,
        "volume": 1986096.31,
        "RSI": 38.628221080941515,
        "MACD_macd": -586.5555664851854,
        "MACD_signal": -749.9827764150173,
        "ATR": 1150.660052015627,
        "ADX": 11.579912572081358,
        "Stoch_K": 29.744319575992655,
        "Stoch_D": 53.671290835890005,
        "StochRSI_K": 7.422458889939329,
        "StochRSI_D": 53.59141581291561,
        "BB_upper": 105458.1731228744,
        "BB_lower": 102059.02687712561,
        "BB_middle": 103758.6,
        "EMA5": 103550.75517109531,
        "EMA21": 103996.99661488304,
        "EMA55": 105345.8424668041,
        "EMA144": 105782.37448335736,
        "EMA200": 105628.89674336766,
        "VWAP": 107041.84326547306
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$23024187174.999992 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104275.4",
        "lastSz": "0.01",
        "askPx": "104275.5",
        "askSz": "500.02",
        "bidPx": "104275.4",
        "bidSz": "565.53",
        "open24h": "103716.3",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "38826.7198",
        "vol24h": "3882671.98",
        "ts": "1748767739006",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T08:48:59+00:00Z"
}
[gemini_api_caller.py][16:49:01] [INFO] prompt_text导入完成
[gemini_api_caller.py][16:49:01] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_164851.png
[gemini_api_caller.py][16:49:01] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][16:49:01] [INFO] 开始测试 Gemini API 流式调用...
[models.py][16:49:01] [INFO] AFC is enabled with max remote calls: 10.
[models.py][16:49:01] [INFO] AFC remote call 1 is done.
[_client.py][16:49:06] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[数据收集总模块][17:00:02] [INFO] 截图模块运行中...
[截图模块][17:00:04] [INFO]  __main__ 入口被执行
[截图模块][17:00:04] [INFO]  启动时主动清理内存...
[截图模块][17:00:04] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][17:00:04] [INFO]  已执行 pkill chrome
[截图模块][17:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][17:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][17:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[截图模块][17:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[截图模块][17:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[截图模块][17:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][17:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][17:00:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][17:00:14] [INFO]  启动浏览器 (有头模式)
[截图模块][17:00:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][17:00:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[截图模块][17:00:47] [INFO]  旧截图已清理，开始截图流程...
[截图模块][17:00:47] [INFO]  打开目标图表页...
[截图模块][17:00:53] [INFO]  等待5秒加载页面...
[截图模块][17:00:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][17:00:59] [INFO]  快捷键已发送
[截图模块][17:01:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_170100.png
[截图模块][17:01:00] [INFO]  关闭浏览器...
[数据收集总模块][17:01:00] [INFO] [tradingview_auto_screenshot.py][stdout] /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_170100.png
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:04] [INFO]  __main__ 入口被执行
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:04] [INFO]  启动时主动清理内存...
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:04] [INFO]  已尝试释放 Linux 系统缓存
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:04] [INFO]  已执行 pkill chrome
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  已用 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  启动浏览器进行截图 (有头模式)...
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/ShaderCache
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile/GrShaderCache
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/ETH_code/chrome_profile
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  已设置代理: http://127.0.0.1:7890
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:07] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/ETH_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:12] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:14] [INFO]  启动浏览器 (有头模式)
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:14] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:47] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3AETHUSD.P
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:47] [INFO]  旧截图已清理，开始截图流程...
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:47] [INFO]  打开目标图表页...
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:53] [INFO]  等待5秒加载页面...
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:58] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:00:59] [INFO]  快捷键已发送
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:01:00] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_170100.png
[数据收集总模块][17:01:00] [ERROR] [tradingview_auto_screenshot.py][stderr] [截图模块][17:01:00] [INFO]  关闭浏览器...
[数据收集总模块][17:01:00] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_170100.png
[数据收集总模块][17:01:00] [INFO] 技术指标模块运行中...
[技术指标模块][17:01:01] [INFO] 正在获取 ETH-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][17:01:02] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][17:01:02] [INFO] 正在获取 ETH-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][17:01:02] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][17:01:02] [INFO] 正在获取 ETH-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][17:01:03] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][17:01:03] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:01:03] [INFO] 宏观因子模块运行中...
[宏观因子模块][17:01:03] [INFO] [macro_factor_collector]  开始采集宏观因子...
[数据收集总模块][17:01:05] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:01:05] [INFO] OKX 持仓模块运行中...
[get_positions.py][17:01:06] [INFO] instrument_id: ETH-USDT-SWAP
[_client.py][17:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][17:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=ETH-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][17:01:07] [INFO] 成功获取到 ETH-USDT-SWAP 的持仓信息。
[_client.py][17:01:07] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=ETH-USDT-SWAP&ordType=post_only,fok,ioc,limit "HTTP/2 200 OK"
[get_positions.py][17:01:07] [INFO] 成功获取到 ETH-USDT-SWAP 的挂单信息。
[数据收集总模块][17:01:08] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:01:08] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_170100.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2519.08,
        "volume": 150257.04,
        "RSI": 45.2704701621916,
        "MACD_macd": -3.10720024418697,
        "MACD_signal": -3.350414045328376,
        "ATR": 10.352091906556964,
        "ADX": 16.19972496343022,
        "Stoch_K": 41.70333123821469,
        "Stoch_D": 40.362455478734084,
        "StochRSI_K": 59.08853552096323,
        "StochRSI_D": 56.95165155258771,
        "BB_upper": 2533.3647063377316,
        "BB_lower": 2509.847293662269,
        "BB_middle": 2521.606,
        "EMA5": 2519.867352543004,
        "EMA21": 2523.1160314523804,
        "EMA55": 2526.2705351464288,
        "EMA144": 2521.2106244088804,
        "EMA200": 2518.390536875534,
        "VWAP": 2523.686814112578
      }
    },
    "1h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2638.13,
        "volume": 687801.5,
        "RSI": 46.51023531132842,
        "MACD_macd": -9.949846487276318,
        "MACD_signal": -8.045054516113533,
        "ATR": 28.99544948468779,
        "ADX": 21.31838732056869,
        "Stoch_K": 38.80633673093451,
        "Stoch_D": 32.809365917556924,
        "StochRSI_K": 61.255818866452636,
        "StochRSI_D": 57.381451637066874,
        "BB_upper": 2692.2944021050525,
        "BB_lower": 2599.055597894948,
        "BB_middle": 2645.675,
        "EMA5": 2635.8918335302174,
        "EMA21": 2649.8604396867204,
        "EMA55": 2642.3441571990984,
        "EMA144": 2594.4382451308015,
        "EMA200": 2576.7057004556727,
        "VWAP": 2616.289766059045
      }
    },
    "4h": {
      "indicators": {
        "ticker": "ETH-USDT-SWAP",
        "name": "ETHUSDT.P",
        "close": 2529.6,
        "volume": 13740680.64,
        "RSI": 45.673238238087286,
        "MACD_macd": 14.793697958845314,
        "MACD_signal": 8.230568309085387,
        "ATR": 72.70963672178634,
        "ADX": 30.280755674753042,
        "Stoch_K": 41.672003546972654,
        "Stoch_D": 52.93035781729796,
        "StochRSI_K": 0.0,
        "StochRSI_D": 20.476629108205568,
        "BB_upper": 2635.1516218317593,
        "BB_lower": 2410.005378168241,
        "BB_middle": 2522.5785,
        "EMA5": 2557.0841795511446,
        "EMA21": 2535.292589959396,
        "EMA55": 2536.3331817086014,
        "EMA144": 2540.339153862582,
        "EMA200": 2537.246532662764,
        "VWAP": 2562.0614802113973
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.0032%",
      "FGI": "56/100",
      "open_interest": "$603957089.000001 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "ETH-USDT-SWAP",
        "last": "2507.04",
        "lastSz": "1.23",
        "askPx": "2507.05",
        "askSz": "307.99",
        "bidPx": "2507.04",
        "bidSz": "776.92",
        "open24h": "2522.53",
        "high24h": "2549.99",
        "low24h": "2489.24",
        "volCcy24h": "2240122.567",
        "vol24h": "22401225.67",
        "ts": "1748768467822",
        "sodUtc0": "2527.07",
        "sodUtc8": "2535.28"
      }
    ]
  },
  "timestamp": "2025-06-01T09:01:08+00:00Z",
  "okx_positions": {
    "instrument_id": "ETH-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "ETH-USDT-SWAP",
      "Margin_Model": "cross",
      "Position direction": "net",
      "pos": "0 piece",
      "avgPrice": " USDT",
      "Unrealized Gains": " USDT",
      "liqPrice": " USDT",
      "lever": " x"
    },
    "orders": {
      "size": "23.2",
      "price": "2535",
      "lever": "100",
      "direction": "sell",
      "status": "live"
    }
  }
}
[gemini_api_caller.py][17:01:10] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:01:10] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/ETH_code/cache_screenshot/tradingview_clipboard_20250601_170100.png
[gemini_api_caller.py][17:01:10] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:01:10] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:01:10] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:01:10] [INFO] AFC remote call 1 is done.
[_client.py][17:01:13] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
[_client.py][17:02:02] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-position-mode "HTTP/2 200 OK"
[trade_api_eth.py][17:02:02] [INFO] 正在设置 ETH-USDT-SWAP 在 cross 模式下的杠杆为 100 倍...
[_client.py][17:02:02] [INFO] HTTP Request: POST https://www.okx.com/api/v5/account/set-leverage "HTTP/2 200 OK"
[trade_api_eth.py][17:02:02] [INFO] 杠杆设置为 100 倍成功。
[trade_api_eth.py][17:02:02] [INFO] 类型为 wait，不执行交易操作。
[trade_api_eth.py][17:02:02] [INFO] trade_result: {'status': 'wait'}
[trade_api_eth.py][17:02:02] [INFO] execution: {
    "operation_comment": "市场整体处于下跌趋势，H1和H4周期均显示强劲空头信号。M15短期动能减弱，可能出现小幅反弹，但应视为做空入场机会。现有卖出挂单与趋势方向一致，继续等待入场。止损设置在H1 EMA55上方，止盈目标为近期低点和关键支撑位。风险管理严格控制单笔保证金使用。",
    "type": "wait",
    "price": "N/A",
    "stop_loss": "N/A",
    "take_profit": "N/A",
    "size": "N/A",
    "market": false,
    "expected_winrate": "0.68",
    "expected_return": "0.0136",
    "trade_RR_ratio": "1.8",
    "signal_strength": "0.75",
    "risk_management_strategy": "本次交易属于趋势跟踪的风险中性策略，建议占总加密货币投资组合的比例不超过10%。考虑到当前市场情绪中性，建议避免过度杠杆，并保持部分现金头寸以应对可能的市场情绪逆转或突发消息面冲击。如果现有挂单成交，将严格执行止损和止盈策略。如果价格未触及挂单价格而直接下跌，则等待更低位的反弹做空机会。",
    "position_action": "N/A",
    "risk_assessment": "当前市场风险中等，主要风险来源于短期反弹可能导致挂单无法成交或止损被触发。流动性充足，政策风险目前较低。建议密切关注价格在2515-2525区域的反应，以及宏观经济数据发布。"
}
[trade_api_eth.py][17:02:02] [INFO] 交易API调用完成
[trade_api_eth.py][17:02:02] [INFO] 交易日志已追加到 /root/codespace/Qwen_quant_v1/trade_bot/trade_log.json
[数据收集总模块][17:02:05] [INFO] 截图模块运行中...
[截图模块][17:02:06] [INFO]  __main__ 入口被执行
[截图模块][17:02:06] [INFO]  启动时主动清理内存...
[截图模块][17:02:06] [INFO]  已尝试释放 Linux 系统缓存
[截图模块][17:02:06] [INFO]  已执行 pkill chrome
[截图模块][17:02:09] [INFO]  已用 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile_copy 覆盖 /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][17:02:09] [INFO]  启动浏览器进行截图 (有头模式)...
[截图模块][17:02:09] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/ShaderCache
[截图模块][17:02:09] [INFO]  已清理缓存目录: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile/GrShaderCache
[截图模块][17:02:09] [INFO]  用户数据目录设置为: /root/codespace/Qwen_quant_v1/BTC_code/chrome_profile
[截图模块][17:02:09] [INFO]  已设置代理: http://127.0.0.1:7890
[截图模块][17:02:09] [INFO]  Chrome options: ['--window-size=800,600', '--no-sandbox', '--disable-dev-shm-usage', '--user-data-dir=/root/codespace/Qwen_quant_v1/BTC_code/chrome_profile', '--disable-popup-blocking', '--proxy-server=http://127.0.0.1:7890']
[截图模块][17:02:17] [INFO] patching driver executable /root/.local/share/undetected_chromedriver/undetected_chromedriver
[截图模块][17:02:19] [INFO] 启动浏览器 (有头模式)
[截图模块][17:02:21] [INFO]  跳转到目标页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][17:02:55] [INFO]  当前页面: https://cn.tradingview.com/chart/mJjA2OR8/?symbol=OKX%3ABTCUSD.P
[截图模块][17:02:55] [INFO]  旧截图已清理，开始截图流程...
[截图模块][17:02:55] [INFO]  打开目标图表页...
[截图模块][17:03:02] [INFO]  等待5秒加载页面...
[截图模块][17:03:07] [INFO]  发送快捷键 Ctrl+Alt+S 触发下载图片...
[截图模块][17:03:08] [INFO]  快捷键已发送
[截图模块][17:03:09] [INFO]  K线图片已保存: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_170309.png
[截图模块][17:03:09] [INFO]  关闭浏览器...
[数据收集总模块][17:03:09] [INFO] 截图模块完成，截图路径: /root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_170309.png
[数据收集总模块][17:03:09] [INFO] 技术指标模块运行中...
[技术指标模块][17:03:11] [INFO] 正在获取 BTC-USDT-SWAP 在 15m (15m) 周期的数据...
[技术指标模块][17:03:11] [INFO] 成功获取并处理 15m 周期的数据。
[技术指标模块][17:03:11] [INFO] 正在获取 BTC-USDT-SWAP 在 1h (1H) 周期的数据...
[技术指标模块][17:03:12] [INFO] 成功获取并处理 1h 周期的数据。
[技术指标模块][17:03:12] [INFO] 正在获取 BTC-USDT-SWAP 在 4h (4H) 周期的数据...
[技术指标模块][17:03:12] [INFO] 成功获取并处理 4h 周期的数据。
[数据收集总模块][17:03:12] [INFO] 技术指标模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:03:12] [INFO] 宏观因子模块运行中...
[数据收集总模块][17:03:15] [INFO] 宏观因子模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:03:15] [INFO] OKX 持仓模块运行中...
[get_positions.py][17:03:16] [INFO] instrument_id: BTC-USDT-SWAP
[_client.py][17:03:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/balance "HTTP/2 200 OK"
[_client.py][17:03:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/account/positions?instId=BTC-USDT-SWAP "HTTP/2 200 OK"
[get_positions.py][17:03:17] [INFO] 未获取到 BTC-USDT-SWAP 的持仓信息或持仓列表为空。
[_client.py][17:03:17] [INFO] HTTP Request: GET https://www.okx.com/api/v5/trade/orders-pending?instId=BTC-USDT-SWAP&ordType=post_only,fok,ioc "HTTP/2 200 OK"
[get_positions.py][17:03:17] [INFO] 未获取到 BTC-USDT-SWAP 的挂单信息或挂单列表为空。
[数据收集总模块][17:03:17] [INFO] OKX 持仓模块完成，结果类型: <class 'dict'>
[数据收集总模块][17:03:18] [INFO] merged: {
  "clipboard_image_path": "/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_170309.png",
  "indicators_main": {
    "15m": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103556.0,
        "volume": 32692.31,
        "RSI": 47.993876614137356,
        "MACD_macd": -150.59347832784988,
        "MACD_signal": -200.15171996285136,
        "ATR": 209.8006615887315,
        "ADX": 27.658497217406865,
        "Stoch_K": 60.1074671113574,
        "Stoch_D": 68.01480377708235,
        "StochRSI_K": 79.62611668838869,
        "StochRSI_D": 85.30570634135069,
        "BB_upper": 103921.10774595458,
        "BB_lower": 103174.67225404542,
        "BB_middle": 103547.89,
        "EMA5": 103568.47671734152,
        "EMA21": 103653.88553850316,
        "EMA55": 103966.7685651003,
        "EMA144": 104198.53349323983,
        "EMA200": 104242.7982086825,
        "VWAP": 104243.57825726768
      }
    },
    "1h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 108926.2,
        "volume": 110481.95,
        "RSI": 66.42419371161316,
        "MACD_macd": 434.14968048481387,
        "MACD_signal": 372.67304604828536,
        "ATR": 586.6643513581408,
        "ADX": 22.466483653327302,
        "Stoch_K": 92.45354211866804,
        "Stoch_D": 86.78142437758713,
        "StochRSI_K": 82.56147039064852,
        "StochRSI_D": 78.33415251259866,
        "BB_upper": 109473.98495416062,
        "BB_lower": 106574.2850458394,
        "BB_middle": 108024.13500000001,
        "EMA5": 108777.20456325129,
        "EMA21": 108196.70352911868,
        "EMA55": 107269.01548013158,
        "EMA144": 105978.8502961199,
        "EMA200": 105612.10338148766,
        "VWAP": 106178.97213214147
      }
    },
    "4h": {
      "indicators": {
        "ticker": "BTC-USDT-SWAP",
        "name": "BTCUSDT.P",
        "close": 103110.0,
        "volume": 1986096.31,
        "RSI": 38.628221080941515,
        "MACD_macd": -586.5555664851854,
        "MACD_signal": -749.9827764150173,
        "ATR": 1150.660052015627,
        "ADX": 11.579912572081358,
        "Stoch_K": 29.744319575992655,
        "Stoch_D": 53.671290835890005,
        "StochRSI_K": 7.422458889939329,
        "StochRSI_D": 53.59141581291561,
        "BB_upper": 105458.1731228744,
        "BB_lower": 102059.02687712561,
        "BB_middle": 103758.6,
        "EMA5": 103550.75517109531,
        "EMA21": 103996.99661488304,
        "EMA55": 105345.8424668041,
        "EMA144": 105782.37448335736,
        "EMA200": 105628.89674336766,
        "VWAP": 107041.84326547306
      }
    }
  },
  "factors_main": {
    "factors": {
      "funding_rate": "0.01%",
      "FGI": "56/100",
      "open_interest": "$23021510789.99999 million"
    }
  },
  "data_summary": {
    "code": "0",
    "msg": "",
    "data": [
      {
        "instType": "SWAP",
        "instId": "BTC-USDT-SWAP",
        "last": "104352.9",
        "lastSz": "1.29",
        "askPx": "104353",
        "askSz": "338.57",
        "bidPx": "104352.9",
        "bidSz": "371.98",
        "open24h": "103635.8",
        "high24h": "104861.4",
        "low24h": "103231.6",
        "volCcy24h": "38869.0199",
        "vol24h": "3886901.99",
        "ts": "1748768597831",
        "sodUtc0": "104550",
        "sodUtc8": "104503"
      }
    ]
  },
  "okx_positions": {
    "instrument_id": "BTC-USDT-SWAP",
    "balance": {
      "Available_Margin": "116174.64 USDT"
    },
    "positions": {
      "instrument_id": "BTC-USDT-SWAP",
      "Margin_Model": "N/A",
      "Position direction": "N/A",
      "pos": "0",
      "avgPrice": "N/A",
      "Unrealized Gains": "N/A",
      "liqPrice": "N/A",
      "lever": "N/A"
    },
    "orders": {
      "size": "N/A",
      "price": "N/A",
      "lever": "N/A",
      "direction": "N/A",
      "status": "N/A"
    }
  },
  "timestamp": "2025-06-01T09:03:18+00:00Z"
}
[gemini_api_caller.py][17:03:19] [INFO] prompt_text导入完成
[gemini_api_caller.py][17:03:19] [INFO] screenshot_path导入完成,path:/root/codespace/Qwen_quant_v1/BTC_code/cache_screenshot/tradingview_clipboard_20250601_170309.png
[gemini_api_caller.py][17:03:19] [INFO] system_prompt_path导入完成,path:/root/codespace/Qwen_quant_v1/config/system_prompt_config.md
[gemini_api_caller.py][17:03:19] [INFO] 开始测试 Gemini API 流式调用...
[models.py][17:03:19] [INFO] AFC is enabled with max remote calls: 10.
[models.py][17:03:19] [INFO] AFC remote call 1 is done.
[_client.py][17:03:23] [INFO] HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:streamGenerateContent?alt=sse "HTTP/1.1 200 OK"
